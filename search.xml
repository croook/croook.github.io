<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Paddleç›®æ ‡æ£€æµ‹]]></title>
    <url>%2F2021%2F04%2F20%2FPaddle%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%2F</url>
    <content type="text"><![CDATA[Paddleç›®æ ‡æ£€æµ‹V1.812paddlepaddle 1.8.3paddlehub 1.8.3 é¢„æµ‹æµ‹è¯•å›¾åƒï¼š ä»£ç ï¼ˆcalParamså¯ä»¥è®¡ç®—å‚æ•°é‡ï¼‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344import osimport paddlehub as hubimport numpy as npdef calParams(model): Total_params = 0 Trainable_params = 0 NonTrainable_params = 0 _, _, main_prog = model.context() for block in main_prog.blocks: for var in block.vars: if 'tmp' in var: continue param = block.vars[var] shape = param.shape array = np.asarray(shape) array[array == -1] = 1 mulValue = np.prod(array) Total_params += mulValue if param.persistable and not param.stop_gradient: Trainable_params += mulValue else: NonTrainable_params += mulValue print('Total params: &#123;&#125;'.format(Total_params)) print('Trainable params: &#123;&#125;'.format(Trainable_params)) print('Non-trainable params: &#123;&#125;'.format(NonTrainable_params))def run(img_name): ssd = hub.Module(directory="faster_rcnn_resnet50_fpn_coco2017") path = "./images/" result = ssd.object_detection(paths=[os.path.join(path, img_name)]) print(result[0]['save_path']) return result[0]['save_path']if __name__ == "__main__": # ssd = hub.Module(directory="faster_rcnn_resnet50_fpn_coco2017") # calParams(ssd) run('test_img_cat.jpg') ç»“æžœï¼š V2.0.21paddlepaddle-gpu 2.0.2 finetuneå‚è€ƒæ–‡æ¡£ï¼šç›®æ ‡æ£€æµ‹å…¨æµç¨‹æ•™ç¨‹ å¦‚ä½•è®­ç»ƒè‡ªå®šä¹‰æ•°æ®é›† å¦‚ä½•å‡†å¤‡è®­ç»ƒæ•°æ® è‡ªå®šä¹‰æ•°æ®é›†VOCæ ¼å¼é¦–å…ˆå®˜ç½‘æ–‡æ¡£ä¸­ç»™å‡ºçš„è¯´æ³•ä¸ä¸€ï¼Œåœ¨ç›®æ ‡æ£€æµ‹å…¨æµç¨‹æ•™ç¨‹ä¸­ï¼Œåœ¨å‡†å¤‡æ•°æ®ä¸€æ ï¼ŒæŒ‡å‡ºVOCæ ¼å¼æ•°æ®é›†çš„æ–‡ä»¶ç»„ç»‡ç»“æž„ä¸ºï¼š 12345678910111213â”œâ”€â”€ annotationsâ”‚ â”œâ”€â”€ road0.xmlâ”‚ â”œâ”€â”€ road1.xmlâ”‚ â”œâ”€â”€ road10.xmlâ”‚ | ...â”œâ”€â”€ imagesâ”‚ â”œâ”€â”€ road0.jpgâ”‚ â”œâ”€â”€ road1.jpgâ”‚ â”œâ”€â”€ road2.jpgâ”‚ | ...â”œâ”€â”€ label_list.txtâ”œâ”€â”€ train.txtâ””â”€â”€ valid.txt è€Œåœ¨å¦‚ä½•è®­ç»ƒè‡ªå®šä¹‰æ•°æ®é›†å’Œå¦‚ä½•å‡†å¤‡è®­ç»ƒä¸¤ä¸ªæ–‡æ¡£ä¸­ï¼ŒæŒ‡å‡ºVOCæ ¼å¼æ•°æ®é›†çš„æ–‡ä»¶ç»„ç»‡ç»“æž„ä¸ºï¼š 12345678910VOCdevkitâ”œâ”€â”€VOC2007(æˆ–VOC2012)â”‚ â”œâ”€â”€ Annotationsâ”‚ â”œâ”€â”€ xxx.xmlâ”‚ â”œâ”€â”€ JPEGImagesâ”‚ â”œâ”€â”€ xxx.jpgâ”‚ â”œâ”€â”€ ImageSetsâ”‚ â”œâ”€â”€ Mainâ”‚ â”œâ”€â”€ trainval.txtâ”‚ â”œâ”€â”€ test.txt éœ€è¦è¿›è¡Œçš„å¤„ç†ä¸ºï¼š æ€»ç»“ï¼š æ²¡æœ‰å¿…è¦ä¸€å®šæŒ‰ç…§VOCåŽŸå§‹æ ¼å¼ç»„ç»‡æ–‡ä»¶ï¼Œå³æ–‡ä»¶å¤¹åå­—ä¸å¿…éµä»ŽAnnotaionsã€ImageSetsã€JPEGImagesè¿™ç§ä¸¥æ ¼å‘½åï¼Œä¸”åŽŸæœ¬ä¿å­˜åœ¨ImageSets/Mainä¸‹çš„test.txtã€train.txtã€val.txtç­‰æ–‡ä»¶éƒ½å¯ä»¥ä¸è¦ï¼Œä½†åœ¨æ•°æ®é›†æ ¹ç›®å½•ä¸‹ï¼ˆVOC2007ï¼‰å¿…é¡»æœ‰train.txtã€test.txtæ–‡ä»¶ å¦‚æžœä¸¥æ ¼æŒ‰ç…§VOCæ ¼å¼ï¼Œæ•°æ®é›†æœ€å¥½æ•´ç†æˆä»¥ä¸‹ç»“æž„ï¼š 12345678910111213VOCdevkitâ”œâ”€â”€VOC2007(æˆ–VOC2012)â”‚ â”œâ”€â”€ Annotationsâ”‚ â”œâ”€â”€ xxx.xmlâ”‚ â”œâ”€â”€ JPEGImagesâ”‚ â”œâ”€â”€ xxx.jpgâ”‚ â”œâ”€â”€ ImageSetsâ”‚ â”œâ”€â”€ Mainâ”‚ â”œâ”€â”€ trainval.txtâ”‚ â”œâ”€â”€ test.txtâ”‚ â”œâ”€â”€ train.txtâ”‚ â”œâ”€â”€ val.txtâ”‚ â”œâ”€â”€ label_list.txt å…¶ä¸­ImageSets/Mainä¸‹é¢çš„trainval.txtã€test.txtä»…åŒ…å«æ–‡ä»¶åï¼ˆä¸å«åŽç¼€ï¼‰ï¼Œä¾‹å¦‚ï¼š 123c000001c000002... è€Œæ ¹ç›®å½•ä¸‹çš„train.txtã€val.txtåº”åŒ…å«å›¾ç‰‡å’Œxmlæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼š 123JPEGImages/train/c000001.jpg Annotations/train/c000001.xmlJPEGImages/train/c000002.jpg Annotations/train/c000002.xml... æ³¨æ„ï¼Œä»¥ä¸Šè·¯å¾„å‰ä¸è¦åŠ â€™./â€˜ï¼Œå³ä¸è¦å˜æˆ ./JPEGImages/train/c000001.jpgè¿™ç§å½¢å¼ xmlxmlæ–‡ä»¶åº”å¤„ç†æˆä»¥ä¸‹æ ¼å¼ï¼š 1234567891011121314151617181920212223&lt;annotation&gt; &lt;frame&gt;c000001&lt;/frame&gt; &lt;object&gt; &lt;name&gt;holothurian&lt;/name&gt; &lt;bndbox&gt; &lt;xmin&gt;712&lt;/xmin&gt; &lt;ymin&gt;415&lt;/ymin&gt; &lt;xmax&gt;838&lt;/xmax&gt; &lt;ymax&gt;573&lt;/ymax&gt; &lt;/bndbox&gt; &lt;difficult&gt;0&lt;/difficult&gt; &lt;/object&gt; &lt;object&gt; &lt;name&gt;echinus&lt;/name&gt; &lt;bndbox&gt; &lt;xmin&gt;129&lt;/xmin&gt; &lt;ymin&gt;940&lt;/ymin&gt; &lt;xmax&gt;300&lt;/xmax&gt; &lt;ymax&gt;1080&lt;/ymax&gt; &lt;/bndbox&gt; &lt;difficult&gt;0&lt;/difficult&gt; &lt;/object&gt;&lt;/annotation&gt; objectä¸­ï¼Œdifficultä¸ºå¿…å«é¡¹ï¼Œå¦‚æžœåŽŸæœ¬çš„xmlä¸å«difficultï¼Œé€šè¿‡ä»¥ä¸‹ä»£ç æ·»åŠ ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344import xml.etree.ElementTree as ETimport os# è¾“å‡ºä¹‹å‰é€šè¿‡indentå¯¹æ ¹èŠ‚ç‚¹è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥æ·»åŠ å›žè½¦å’Œç¼©è¿›ï¼Œå¤„ç†æˆä¸Šé¢å±•ç¤ºçš„xmlæ ¼å¼def indent(elem, level=0): i = "\n" + level * "\t" if len(elem): if not elem.text or not elem.text.strip(): elem.text = i + "\t" if not elem.tail or not elem.tail.strip(): elem.tail = i for elem in elem: indent(elem, level + 1) if not elem.tail or not elem.tail.strip(): elem.tail = i else: if level and (not elem.tail or not elem.tail.strip()): elem.tail = idef cvt(ori_dir, out_dir): for file in os.listdir(ori_dir): tree = ET.parse(os.path.join(ori_dir, file)) root = tree.getroot() newroot = ET.Element('Annotation') filename = ET.SubElement(newroot, 'filename') filename.text = file.split('.')[0] + '.jpg' for i in root.findall('object'): d = ET.SubElement(i, 'difficult') d.text = '0' newroot.append(i) indent(root, 0) tree = ET.ElementTree(root) # rootä¸ºä¿®æ”¹åŽçš„root tree.write(out_dir+file)if __name__ == '__main__': ori_dir = './train/box/' out_dir = './VOC/temp_Annotations/' cvt(ori_dir, out_dir) å®‰è£…çŽ¯å¢ƒå‚è€ƒæ–‡æ¡£ï¼šå®‰è£…è¯´æ˜Ž æŒ‰ç…§è¯´æ˜Žå®‰è£…å³å¯ï¼ŒPaddleDetectionå¿…é¡»è¦åœ¨cdåˆ°cloneä¸‹çš„ç›®å½•è¿è¡Œï¼Œä¸æ˜¯ä¸€ä¸ªpipåº“ã€‚ NCCLå®‰è£…ä¸‹è½½åœ°å€ï¼šnccl é€‰æ‹©å¯¹åº”çš„æœ¬åœ°å®‰è£…åº“ï¼š å®‰è£…å‚¨å­˜åº“ï¼šsudo dpkg -i xxxxxxxx.deb æ›´æ–°aptåº“ï¼šsudo apt update ä¿®æ”¹é…ç½®æ–‡ä»¶æ ¹æ®configsä¸‹çš„æŸä¸€é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œåªæœ‰å°±ä¿å­˜åˆ°configsæ–‡ä»¶å¤¹ä¸‹ï¼Œæ¯”å¦‚æ ¹æ® configs/faster_rcnn_r50_fpn_1x.yml è¿›è¡Œä¿®æ”¹ï¼Œå¦å­˜ä¸ºunderwater.ymlã€‚ max_itersã€‚ max_itersä¸ºæœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œè€Œä¸€ä¸ªiterä¼šè¿è¡Œbatch_size * device_numå¼ å›¾ç‰‡ã€‚ æ³¨æ„:(1) LearningRate.schedulers.milestoneséœ€è¦éšmax_iterså˜åŒ–è€Œå˜åŒ–ã€‚ (2) milestonesè®¾ç½®çš„æ˜¯åœ¨PiecewiseDecayå­¦ä¹ çŽ‡è°ƒæ•´ç­–ç•¥ä¸­ï¼Œåœ¨è®­ç»ƒè½®æ•°è¾¾åˆ°milestonesä¸­è®¾ç½®çš„è½®æ•°æ—¶ï¼Œå­¦ä¹ çŽ‡ä»¥gammaå€æ•°è¡°å‡å˜åŒ–ã€‚(3) 1xè¡¨ç¤ºè®­ç»ƒ12ä¸ªepochï¼Œ1ä¸ªepochæ˜¯å°†æ‰€æœ‰è®­ç»ƒæ•°æ®è®­ç»ƒä¸€è½®ã€‚ç”±äºŽYOLOç³»åˆ—ç®—æ³•æ”¶æ•›æ¯”è¾ƒæ…¢ï¼Œåœ¨COCOæ•°æ®é›†ä¸ŠYOLOç³»åˆ—ç®—æ³•æ¢ç®—åŽçº¦ä¸º270 epochï¼ŒPP-YOLOçº¦380 epochã€‚ æ ¹æ®å®žé™…æƒ…å†µä¿®æ”¹max_itersï¼Œå¹¶å‚ç…§å¦‚ä½•è®­ç»ƒè‡ªå®šä¹‰æ•°æ®é›†ä¸‹çš„demoï¼Œä¿®æ”¹å…¶ä»–å‚æ•°ï¼Œå¦‚milestonesã€base_lr æ ¹æ®æ•°æ®é›†æ ¼å¼ä¿®æ”¹merticï¼Œè¿™é‡Œä¿®æ”¹ä¸ºVOC weightså‚æ•°ï¼Œ weights å‚æ•°ç”¨äºŽè®¾ç½®è¯„ä¼°é¢„æµ‹ä½¿ç”¨çš„æ¨¡åž‹è·¯å¾„ï¼Œè¿™é‡Œå¯ä»¥æ˜¯è¿œç¨‹è·¯å¾„ã€‚æœ¬åœ°è·¯å¾„æ˜¯æŒ‡ä»¥pdparamsä¸ºåŽç¼€çš„æ¨¡åž‹æƒé‡æ–‡ä»¶ã€‚ æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„æ˜¯è·¯å¾„å…·ä½“åˆ°äº†è¿™ä¸€ä¸ªæƒé‡æ–‡ä»¶ï¼Œæ‰€ä»¥åªå†™åˆ°æ–‡ä»¶å¤¹æ˜¯ä¸å¤Ÿçš„ï¼Œæ¯”å¦‚æ¨¡åž‹ä¿å­˜åˆ° output/underwaterï¼Œåœ¨æ­¤è·¯å¾„ä¸‹æœ‰ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼šmodel_final.pdmodelã€model_final.pdopt(ä¼˜åŒ–ç›¸å…³)ã€model_final.pdparams(æ¨¡åž‹æƒé‡)ï¼Œåˆ™weightså¿…é¡»è®¾ç½®ä¸ºï¼šoutput/underwater/model_final ä¸€å®šè¦å†™åˆ°model_final num_classesï¼Œ æ¨¡åž‹ä¸­åˆ†ç±»æ•° num_classes æ¨¡åž‹ä¸­åˆ†ç±»æ•°é‡ã€‚æ³¨æ„åœ¨FasterRCNNä¸­ï¼Œéœ€è¦å°† with_background=true ä¸” num_classes=æ•°æ®num_classes + 1 æœ€åŽå¯¹Readerè¿›è¡Œè®¾ç½®ï¼š 1234567891011121314151617181920212223TrainReader: batch_size: 2 dataset: !VOCDataSet dataset_dir: /home/paddle2.0/underwater/dataset/VOCdevkit/VOC2007 anno_path: train.txt use_default_label: false with_background: falseEvalReader: dataset: !VOCDataSet dataset_dir: /home/paddle2.0/underwater/dataset/VOCdevkit/VOC2007 anno_path: val.txt use_default_label: false with_background: falseTestReader: dataset: !ImageFolder anno_path: /home/paddle2.0/underwater/dataset/VOCdevkit/VOC2007/label_list.txt use_default_label: false with_background: false æ³¨æ„ï¼Œå¯¹äºŽTrainReaderã€EvalReaderè¿™é‡Œçš„anno_pathç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯åœ¨æ ¹ç›®å½•ä¸‹é¢çš„train.txtå’Œval.txtï¼Œè€ŒTestReaderä¸­çš„anno_pathä¸€å®šä¸èƒ½çœç•¥ï¼Œä¸ç„¶inferçš„æ—¶å€™æ— æ³•åŠ è½½å‡ºlabel_listã€‚ å…¶ä»–å‚æ•°è§ç›®æ ‡æ£€æµ‹å…¨æµç¨‹æ•™ç¨‹ è®­ç»ƒpython3 tools/train.py -c configs/underwater.yml -o ues_gpu=false --eval å‘½ä»¤è¡Œä¸­å¯ä»¥é€šè¿‡-oè®¾ç½®é…ç½®æ–‡ä»¶é‡Œçš„å‚æ•°å†…å®¹ï¼Œ é¢„æµ‹python3 tools/infer.py -c configs/underwater.yml -o weights=output/underwater/model_final --infer_img=../underwater/dataset/test-A-image/000001.jpg é¢„æµ‹åŽä¼šåœ¨outputæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€å¼ å›¾ç‰‡]]></content>
      <categories>
        <category>Paddle</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>Paddle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Paddleå›¾åƒåˆ†ç±»]]></title>
    <url>%2F2021%2F04%2F20%2FPaddle%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[Paddleå›¾åƒåˆ†ç±»V1.812paddlepaddle 1.8.3paddlehub 1.8.3 é¢„æµ‹123456789101112131415import paddlehub as hubimport osdef run(img_name): classifier = hub.Module(directory="vgg19_imagenet") path = './images/' input_dict = &#123;"image": [os.path.join(path, img_name)]&#125; result = classifier.classification(data=input_dict) print(result) return resultif __name__ == "__main__": run('test_img_cat.jpg') è¿”å›žç»“æžœï¼š[[{&#39;tiger cat&#39;: 0.5675306916236877}]] finetuneå®˜æ–¹æ–‡æ¡£ï¼šgithub è‡ªå®šä¹‰æ•°æ®é›†123456â”œâ”€data: æ•°æ®ç›®å½• â”œâ”€train_list.txtï¼šè®­ç»ƒé›†æ•°æ®åˆ—è¡¨ â”œâ”€test_list.txtï¼šæµ‹è¯•é›†æ•°æ®åˆ—è¡¨ â”œâ”€validate_list.txtï¼šéªŒè¯é›†æ•°æ®åˆ—è¡¨ â”œâ”€label_list.txtï¼šæ ‡ç­¾åˆ—è¡¨ â””â”€â€¦â€¦ è®­ç»ƒ/éªŒè¯/æµ‹è¯•é›†çš„æ•°æ®åˆ—è¡¨æ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ 123å›¾ç‰‡1è·¯å¾„ å›¾ç‰‡1æ ‡ç­¾å›¾ç‰‡2è·¯å¾„ å›¾ç‰‡2æ ‡ç­¾... label_list.txtçš„æ ¼å¼å¦‚ä¸‹ 123åˆ†ç±»1åç§°åˆ†ç±»2åç§°... ä»¥fruitsæ•°æ®é›†ä¸ºä¾‹ï¼Œæ•°æ®åˆ—è¡¨æ–‡ä»¶ä¸ºï¼š 123JPEGImages/apple_21.jpg 0JPEGImages/apple_22.jpg 0... ç›®å½•ç»“æž„ä¸ºï¼š 1234567â”œâ”€Dataset: æ•°æ®ç›®å½• â”œâ”€JPEGImagesï¼šå‚¨å­˜å›¾ç‰‡ â”œâ”€train_list.txtï¼šè®­ç»ƒé›†æ•°æ®åˆ—è¡¨ â”œâ”€test_list.txtï¼šæµ‹è¯•é›†æ•°æ®åˆ—è¡¨ â”œâ”€validate_list.txtï¼šéªŒè¯é›†æ•°æ®åˆ—è¡¨ â”œâ”€label_list.txtï¼šæ ‡ç­¾åˆ—è¡¨ â””â”€â€¦â€¦ ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889# coding:utf-8import osimport paddle.fluid as fluidimport paddlehub as hubimport numpy as npimport datetimefrom paddlehub.dataset.base_cv_dataset import BaseCVDataset# os.environ["CUDA_VISIBLE_DEVICES"] = "9"# os.environ['FLAGS_eager_delete_tensor_gb'] = '0.0'class SelfDataset(BaseCVDataset): def __init__(self, dataset): base_path = '/..../Datasets/' + dataset super(SelfDataset, self).__init__( base_path=base_path, train_list_file="train_list.txt", validate_list_file="validate_list.txt", test_list_file="test_list.txt", label_list_file="label_list.txt", label_list=None)def finetune(module_name, dataset_name, checkpoint_name, use_selfdataset=False, use_gpu=True, num_epoch=10, batch_size=16, use_data_parallel=True): # Load Paddlehub pretrained model module = hub.Module(name=module_name) input_dict, output_dict, program = module.context(trainable=True) # Load dataset if use_selfdataset: try: dataset = SelfDataset(dataset_name) except ValueError: print("%s dataset can't be loaded" % dataset_name) else: if dataset_name.lower() == "flowers": dataset = hub.dataset.Flowers() elif dataset_name.lower() == "dogcat": dataset = hub.dataset.DogCat() elif dataset_name.lower() == "indoor67": dataset = hub.dataset.Indoor67() elif dataset_name.lower() == "food101": dataset = hub.dataset.Food101() else: raise ValueError("%s dataset is not defined" % dataset_name) # Use ImageClassificationReader to read dataset data_reader = hub.reader.ImageClassificationReader( image_width=module.get_expected_image_width(), image_height=module.get_expected_image_height(), images_mean=module.get_pretrained_images_mean(), images_std=module.get_pretrained_images_std(), dataset=dataset) feature_map = output_dict["feature_map"] # Setup feed list for data feeder feed_list = [input_dict["image"].name] checkpoint_dir = os.path.join('./finetune_ckpt/', checkpoint_name) if not os.path.exists(checkpoint_dir): os.makedirs(checkpoint_dir) # Setup RunConfig for PaddleHub Fine-tune API config = hub.RunConfig( use_data_parallel=use_data_parallel, use_cuda=use_gpu, num_epoch=num_epoch, batch_size=batch_size, checkpoint_dir=checkpoint_dir, strategy=hub.finetune.strategy.DefaultFinetuneStrategy()) # Define a image classification task by PaddleHub Fine-tune API task = hub.ImageClassifierTask( data_reader=data_reader, feed_list=feed_list, feature=feature_map, num_classes=dataset.num_labels, config=config) # Fine-tune by PaddleHub's API task.finetune_and_eval()if __name__ == "__main__": finetune('vgg19_imagenet', 'indoor67', 'vgg_indoor_test_gpu', use_selfdataset=False, num_epoch=10, batch_size = 128, use_gpu=True) æŽ¥å£1def finetune(module_name, dataset_name, checkpoint_name, use_selfdataset=False, use_gpu=True, num_epoch=10, batch_size=16, use_data_parallel=True): module_nameï¼šç›®å‰åŒ…æ‹¬å››ä¸ªå›¾åƒåˆ†ç±»æ¨¡åž‹ï¼šefficientnetb7_imagenetã€resnext50_vd_64x4d_imagenetã€vgg19_imagenetã€xception71_imagenet dataset_nameï¼špaddleè‡ªå¸¦æ•°æ®é›†åŒ…æ‹¬ï¼šflowersã€dogcatã€indoor67ã€food101. å¦‚æžœæ˜¯ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®é›†ï¼Œdataset_nameä¸ºDatasetsç›®å½•ä¸‹ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®é›†åã€‚ checkpoint_nameï¼šæ¨¡åž‹å’Œcacheæ–‡ä»¶ä¿å­˜ä½ç½®ï¼Œé»˜è®¤åœ¨ finetune_ckptç›®å½•ä¸‹ã€‚å‘½åæ—¶ä¸è¦é‡å¤ã€‚ use_selfdatasetï¼šå½“ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®é›†æ—¶è®¾ç½®ä¸ºTrue ä¿å­˜lossä¸ºäº†åœ¨è¿è¡Œè¿‡ç¨‹ä¸­è¾“å‡ºlossåˆ°txtæ–‡ä»¶ï¼Œå¯¹paddlehub/finetune/task/base_task.pyè¿›è¡Œä¿®æ”¹ ä¿®æ”¹éƒ¨åˆ†å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627BaseTaskç±»ï¼š__init__å‡½æ•°ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç #### BEGIN #### ï¼ˆçº¦313è¡Œï¼Œself.device_countå®šä¹‰ä¹‹åŽï¼‰self.cachefilepath = os.path.join(self.config.checkpoint_dir, 'cache.txt')##### END #####_default_eval_end_eventå‡½æ•°ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç #### BEGIN #### ï¼ˆçº¦822è¡Œï¼Œlogger.evalä¹‹åŽï¼‰with open(self.cachefilepath, "a") as file: file.write("[%s dataset evaluation result] loss=%.5f %s[step/sec: %.2f]\n" % (self.phase, eval_loss, log_scores, run_speed))##### END ######### BEGIN #### ï¼ˆçº¦845è¡Œï¼Œlogger.evalä¹‹åŽï¼‰with open(self.cachefilepath, "a") as file: file.write("best model saved to %s [best %s=%.5f]\n" % (model_saved_dir, main_metric, main_value))##### END #####_default_log_interval_eventå‡½æ•°ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç #### BEGIN #### ï¼ˆçº¦875è¡Œï¼Œlogger.trainä¹‹åŽï¼‰with open(self.cachefilepath, "a") as file: file.write("step %d / %d: loss=%.5f %s[step/sec: %.2f]\n" % (self.current_step, self.max_train_steps, avg_loss, log_scores, run_speed))##### END ##### è¢«è°ƒç”¨åœ¨_runå‡½æ•°ä¸­ï¼Œçº¦1247è¡Œï¼Œéƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š 1234567891011if self.is_train_phase: if self.current_step % self.config.log_interval == 0: self._log_interval_event(period_run_states) global_run_states += period_run_states period_run_states = [] if self.config.save_ckpt_interval and self.current_step % self.config.save_ckpt_interval == 0: self._save_ckpt_interval_event() if do_eval and self.current_step % self.config.eval_interval == 0: self._eval_interval_event()]]></content>
      <categories>
        <category>Paddle</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>Paddle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockeræ“ä½œ]]></title>
    <url>%2F2021%2F03%2F27%2Fdocker%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[æž„å»ºé•œåƒcommit æ–°å»ºå®¹å™¨ åœ¨å®¹å™¨å†…å®‰è£…æ‰€éœ€çš„çŽ¯å¢ƒ é€šè¿‡commitå‘½ä»¤å»ºç«‹æ–°çš„image docker commit container_id image_name:tag Dockerfile å°†é¡¹ç›®ä»£ç æ‹·è´åˆ°ä¸»æœºæŸä¸€è·¯å¾„ä¸‹ï¼ˆå¯ä»¥é€šè¿‡docker cpï¼Œå¹¶ä¿è¯è·¯å¾„ä¸‹æ²¡æœ‰å…¶ä»–æ–‡ä»¶ï¼‰ åœ¨åŒä¸€è·¯å¾„ä¸‹åˆ›å»ºDockerfileæ–‡ä»¶ 1234FROM fasttext:1.0ADD ./docker_file /home/FasttextWORKDIR /home/FasttextCMD [&quot;python3&quot;, &quot;/home/Fasttext/api.py&quot;] ADDä¼šå°†ä¸»æœºçš„æŒ‡å®šè·¯å¾„æ–‡ä»¶æ‹·è´åˆ°æ–°å»ºå®¹å™¨çš„å¯¹åº”è·¯å¾„ä¸‹ CMDä¼šåœ¨docker runæ—¶è¿è¡Œ é€šè¿‡buildåˆ›å»ºé•œåƒ docker build -t fasttext:2.0 . æ³¨æ„æœ€åŽæœ‰ä¸ªä¸Šä¸‹æ–‡è·¯å¾„ï¼Œå…·ä½“å¯è§ï¼šdockerfile åˆ›å»ºå®¹å™¨äº¤äº’æ–¹å¼1nvidia-docker run -itd --name Fasttext_test -v /host_dir:/container_dir -p host_port:container_port container_id /bin/bash åŽå°è¿è¡Œæ–¹å¼1nvidia-docker run -d -p host_port:container_port container_id dockerhub æ³¨å†Œå¹¶å»ºç«‹å…¬å…±ä»“åº“ æœ¬åœ°ä½¿ç”¨ docker login è¿›è¡Œç™»å½• tagä¿®æ”¹é•œåƒåç§°ï¼šdocker tag container_name your_dockerhub_id/your_dockerhub_repository docker push your_dockerhub_id/your_dockerhub_repository å¯¹äºŽåŒä¸€ä¸ªä»“åº“ï¼Œå‘½ä»¤æ˜¯å›ºå®šçš„ docker logout é€€å‡º é•œåƒæ‰“åŒ…1docker save -o fasttext.tar fasttext:2.0]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœºå™¨å­¦ä¹ å¤ä¹ ]]></title>
    <url>%2F2021%2F01%2F08%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%A4%8D%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[ä¸€ã€æœºå™¨å­¦ä¹ ä»‹ç»&amp;çº¿æ€§ã€é€»è¾‘å›žå½’ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹  è¦å­¦ä»€ä¹ˆâ€”å†³ç­–å‡½æ•° ä»Žå“ªé‡Œå­¦â€”è®­ç»ƒæ•°æ® æ€Žæ ·å­¦ä¹ â€”æ±‚è§£æœºå™¨å­¦ä¹ æ¨¡åž‹ é’ˆå¯¹æŸä¸ªä»»åŠ¡ ï¼ˆTask ï¼‰ï¼Œåˆ©ç”¨è®­ç»ƒæ•°æ® ï¼ˆExperience ï¼‰ï¼Œæ±‚è§£ä¸€ä¸ªå­¦ä¹ æ¨¡åž‹ï¼Œä»Žè€Œæé«˜è¯¥ä»»åŠ¡çš„æ€§èƒ½ ï¼ˆPerformanceï¼‰ æœºå™¨å­¦ä¹ è¦ç´ ï¼š ä»»åŠ¡ã€ç›®æ ‡ï¼ˆTaskï¼‰ ä½¿ç”¨ç»éªŒæ•°æ®ï¼ˆExperienceï¼‰ æé«˜å­¦ä¹ æ€§èƒ½ï¼ˆPerformanceï¼‰ çº¿æ€§ã€é€»è¾‘å›žå½’å¤šå…ƒçº¿æ€§å›žå½’ æŸå¤±å‡½æ•°å‡ ä½•æ„ä¹‰ï¼šè¯•å›¾æ‰¾åˆ°ä¸€ä¸ªè¶…å¹³é¢ï¼Œä½¿æ‰€æœ‰æ ·æœ¬åˆ°è¶…å¹³é¢ä¸Šçš„æ¬§å¼è·ç¦»ä¹‹å’Œæœ€å° æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£ éšæœºæ¢¯åº¦ä¸‹é™æ³• æ­£è§„æ–¹ç¨‹ æ¯”è¾ƒ MSE ï¼ˆmean square errorï¼‰ å‡æ–¹è¯¯å·® F1 measure é€»è¾‘å›žå½’ æ¢¯åº¦ä¸Šå‡æ³•æ±‚è§£ï¼š äºŒã€ç¥žç»ç½‘ç»œ æŸå¤±äºŒåˆ†ç±»æŸå¤± å¤šåˆ†ç±»æŸå¤± å›žå½’æŸå¤± åå‘ä¼ æ’­ä¸€èˆ¬æƒ…å½¢ æ³¨æ„ï¼Œç”±äºŽ$z^l$æ˜¯å…³äºŽl-1å±‚æƒé‡å’Œåç½®çš„å‡½æ•°ï¼Œæ‰€ä»¥å¯¹$b^{l-1}$ æ±‚åå¯¼ï¼Œé“¾å¼æ³•åˆ™å‰é¢åº”è¯¥æ˜¯å¯¹lå±‚çš„zæ±‚åå¯¼ã€‚ ç¥žç»ç½‘ç»œæ¨¡åž‹ç®—æ³• å¯¹æ•°ä¼¼ç„¶vsäºŒæ¬¡ä»£ä»· äºŒæ¬¡ä»£ä»·ï¼šåˆšå¼€å§‹å­¦ä¹ çš„é€Ÿåº¦æ¯”è¾ƒç¼“æ…¢ äº¤å‰ç†µï¼šåˆšå¼€å§‹å­¦ä¹ çš„é€Ÿåº¦ç›¸å½“å¿«ï¼Œä¸ŽæœŸå¾…ä¸€æ ·ï¼Œå½“ä¸¥é‡é”™è¯¯æ—¶èƒ½ä»¥æœ€å¿«é€Ÿåº¦å­¦ä¹ ï¼›å½“é¢„æµ‹è¾“å‡ºæŽ¥è¿‘æ­£ç¡®è¾“å‡ºæ—¶ï¼Œå­¦ä¹ é€Ÿåº¦å˜æ…¢ ä¸‰ã€æ”¯æŒå‘é‡æœºé—®é¢˜å»ºæ¨¡ æ±‚è§£çº¦æŸä¼˜åŒ–ã€å¯¹å¶ SVMå¯¹å¶é—®é¢˜ å¯¹å¶é—®é¢˜çš„è§„æ¨¡æ­£æ¯”äºŽè®­ç»ƒæ ·æœ¬æ•° ä¾‹å­ è¶…å¹³é¢æ³•å‘é‡æ˜¯æ”¯æŒå‘é‡çš„çº¿æ€§ç»„åˆï¼šä»…æ”¯æŒå‘é‡çš„ $\alpha_i \neq0$ SVMæ€§è´¨ è½¯SVM æ³¨æ„ï¼Œè½¯SVMä¸»é—®é¢˜ä¸­çš„çº¦æŸå¤šäº†ä¸€ä¸ª $\epsilon_i \geq 0$ è½¯SVMå¯¹å¶é—®é¢˜æŽ¨å¯¼ è½¯SVMé«˜æ•ˆæ±‚è§£ å››ã€é›†æˆå­¦ä¹ ã€ç‰¹å¾é€‰æ‹©é›†æˆå­¦ä¹ é›†æˆæ–¹æ³•åˆ†ç±» ä¸²è¡Œå¼é›†æˆå­¦ä¹  ï¼šä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´å­˜åœ¨å¼ºä¾èµ–å…³ç³»ï¼ŒåŽç”Ÿæˆçš„ä¸ªä½“å­¦ä¹ å™¨ä¾èµ–å‰é¢ç”Ÿæˆçš„ä¸ªä½“å­¦ä¹ å™¨ã€‚ä»£è¡¨æ€§ç®—æ³• Boostingã€‚ å¹¶è¡Œå¼é›†æˆå­¦ä¹ æ–¹æ³•ï¼š ä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´ä¸å­˜åœ¨å¼ºä¾èµ–å…³ç³»ï¼Œä»£è¡¨æ˜¯ Baggingå’Œéšæœºæ£®æž— é‡é‡‡æ ·æ–¹æ³• éšæœºé‡‡æ ·ï¼šåœ¨åŽŸæ¥çš„æ•°æ®é›†ä¸Šéšæœºé‡‡æ ·ä¸€ä¸ªå­é›†ï¼Œå¾—åˆ°æ–°çš„è®­ç»ƒé›†ï¼Œè¿™å°±æ˜¯ Bagging æ—æ–¹æ³•çš„åšæ³•ã€‚ å¸¦æƒé‡‡æ ·ï¼šé‡‡æ ·æ—¶ï¼Œå¯ä»¥ç»™è®­ç»ƒé›†é‡Œçš„æ¯ä¸ªå…ƒç´ ä¸åŒçš„æƒï¼Œæƒå€¼é€šè¿‡ä¸Šä¸€æ¬¡è®­ç»ƒçš„ç»“æžœæ¥ç¡®å®šã€‚è¿™å°±æ˜¯Boosting æ—æ–¹æ³•çš„åšæ³•ã€‚ AdaBoostå…³æ³¨ è¢«é”™åˆ†çš„æ ·æœ¬ å™¨é‡ æ€§èƒ½å¥½çš„å¼±åˆ†ç±»å™¨ Bagging éšæœºæ£®æž— ç‰¹å¾é€‰æ‹©ä¸Žç¨€ç–å­¦ä¹ è¿‡æ»¤å¼æ–¹æ³• å•å˜é‡è¿‡æ»¤æ–¹æ³•ï¼šSingal-to-noise ratio (S2N) Relief åŒ…è£¹å¼æ–¹æ³• åµŒå…¥å¼æ–¹æ³• Lassoå›žå½’ åæ ‡ä¸‹é™æ³•æ±‚è§£ åæ ‡ä¸‹é™æ³•æŽ¨å¯¼ ç»¼ä¸Šæœ‰ï¼š æ€»ç»“ ç¨€ç–å­¦ä¹  xiä¸ºp*1ç»´ï¼ŒBä¸ºp*kç»´ï¼Œaiä¸ºk*1ç»´ï¼Œä¹Ÿå°±æ˜¯å°†æ ·æœ¬xä»Žpç»´é™åˆ°kç»´ äº”ã€éžç›‘ç£å­¦ä¹ æ¦‚è¿°ã€è´å¶æ–¯åˆ†ç±»å™¨èšç±»ç®—æ³• å±‚æ¬¡èšç±»ç®—æ³•ï¼šè‡ªåº•è€Œä¸Šï¼šèšåˆï¼›è‡ªé¡¶è€Œä¸‹ï¼šåˆ†è£‚ åˆ’åˆ†å¼èšç±»ç®—æ³•ï¼šç»™å‡ºéšæœºåŒ–åˆå§‹åˆ’åˆ†ï¼›å¯¹åˆ’åˆ†è¿­ä»£ä¼˜åŒ–ï¼šKmeansã€GMM K-means ç®—æ³•å¤æ‚åº¦ èšç±»ä¸­å¿ƒåˆå€¼é€‰æ‹©ï¼š é€šè¿‡å¯å‘å¼æ–¹æ³•é€‰æ‹©å¥½çš„åˆå€¼ï¼šä¾‹å¦‚è¦æ±‚ç§å­ç‚¹ä¹‹é—´æœ‰è¾ƒå¤§çš„è·ç¦» å°è¯•å¤šä¸ªåˆå€¼ ï¼Œé€‰æ‹©å¹³æ–¹è¯¯å·®å’Œæœ€å°çš„ä¸€ç»„èšç±»ç»“æžœ è´å¶æ–¯åˆ†ç±»å™¨ åˆ¤åˆ«å¼æ¨¡åž‹ï¼šé€šè¿‡å¯¹ ð‘ƒ(ð‘|ð‘¥)ç›´æŽ¥å»ºæ¨¡é¢„æµ‹ï¼Œç›´æŽ¥å¯¹æ¡ä»¶æ¦‚çŽ‡å»ºæ¨¡ï¼Œä¸å…³å¿ƒèƒŒåŽçš„æ•°æ®åˆ†å¸ƒ ð‘ƒ(ð‘¥,ð‘) ç”Ÿæˆå¼æ¨¡åž‹ï¼šæ¦‚çŽ‡åˆ†å¸ƒå»ºæ¨¡ æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ é¿å…0æ¦‚çŽ‡é—®é¢˜ æœ´ç´ å¿…è¦æ€§ é«˜æ–¯æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨é«˜æ–¯åˆ†å¸ƒ è¿™é‡Œå…¬å¼é‡Œçš„pæ˜¯ç»´åº¦ï¼Œå³pç»´é«˜æ–¯ é«˜æ–¯æœ´ç´ è´å¶æ–¯ æœ´ç´ é«˜æ–¯å¿…è¦æ€§ é«˜æ–¯è´å¶æ–¯å†³ç­–é¢ çº¿æ€§åˆ¤åˆ«åˆ†æžï¼ˆLDAï¼‰ LDAæ˜¯å‡è®¾åæ–¹å·®çŸ©é˜µç›¸åŒï¼Œæœ´ç´ é«˜æ–¯å’Œéžæœ´ç´ é«˜æ–¯çš„åŒºåˆ«åœ¨äºŽåæ–¹å·®çŸ©é˜µæ˜¯å¦ä¸ºå¯¹è§’é˜µ LDA vs é€»è¾‘å›žå½’ é«˜æ–¯æœ´ç´ è´å¶æ–¯å†³ç­–é¢ æ€»ç»“ æœ´ç´ è´å¶æ–¯å¯ä»¥å¤„ç†ç¦»æ•£å±žæ€§å’Œå¯ä»¥å¤„ç†è¿žç»­å±žæ€§ KNN å…­ã€GMMã€EMGMM EMç®—æ³•æ±‚è§£ ç¼ºç‚¹ æ€»ç»“ ä¸ƒã€é©¬å°”å¯å¤«é“¾è´å¶æ–¯ç½‘ é©¬å°”å¯å¤«é“¾ ä¸‰è¦ç´  çŠ¶æ€è½¬ç§» å…«ã€PCAhttp://blog.codinglabs.org/articles/pca-tutorial.html https://croook.github.io/2020/04/08/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E3%80%81%E6%A6%82%E7%8E%87%E8%AE%BA/ SVD æ–¹æ³• æ¦‚çŽ‡PCA PCA EMç®—æ³• æ ¸PCA LLE t-SNE]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[tfidf-ldadaæ–‡æœ¬åˆ†ç±»]]></title>
    <url>%2F2021%2F01%2F06%2Ftfidf-ldada%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[Tfidfä¸ºäº†ç»Ÿè®¡è¯é¢‘ï¼Œå°†åˆ†è¯åŽçš„å­—ç¬¦ä¸²åˆ†å‰²æˆè¯ 12X_train = [[word for word in line.split()] for line in X_train]X_test = [[word for word in line.split()] for line in X_test] 12345678910111213def tfidf(X_train): # print(X_train[:3]) dict = corpora.Dictionary(X_train) # dict.save('dict1.dict') corpus = [dict.doc2bow(text) for text in X_train] # print(corpus[:3]) tfidf_model = models.TfidfModel(corpus) # num_docs=100805, num_nnz=1761406 # test = ['åæ˜ ', 'xx', ... , 'xx', 'é—®é¢˜'] # print(dict.doc2bow(test)) # print(tfidf_model[dict.doc2bow(test)]) corpus_tfidf = tfidf_model[corpus] # corpus_tfidf.save('corpus_tfidf.corp') return corpus_tfidf, tfidf_model, dict # åŒå±‚list corpursæ˜¯å°†è¯è½¬åŒ–ä¸ºï¼ˆid, è¯é¢‘ï¼‰çš„å½¢å¼ corpus_tfidfæ˜¯ï¼ˆidï¼Œtfidfæƒé‡ï¼‰çš„å½¢å¼ é€šè¿‡tfidf_model[anycoupus]ï¼Œå¯ä»¥å°†ä»»æ„çš„ç»è¿‡dict.doc2bowè½¬æ¢åŽçš„è¯é¢‘corpusè½¬åŒ–ä¸ºtfidf corpusï¼Œè¿™é‡Œçš„corpus_tfidf = tfidf_model[corpus]ï¼Œ åªæ˜¯è½¬åŒ–äº†è‡ªèº«ã€‚ LDAldaç”¨åœ¨æ–‡æœ¬åˆ†ç±»ä¸­æœ¬è´¨æ˜¯é™ç»´ï¼Œldaæœ‰å¤šå°‘ä¸ªä¸»é¢˜ï¼Œå°±å¯ä»¥å°†ä¸€ä¸ªå¥å­æ˜ å°„åˆ°å¤šå°‘ç»´ï¼Œè¡¨ç¤ºå±žäºŽæ¯ä¸€ä¸ªä¸»é¢˜çš„å¯èƒ½æ€§ï¼Œå†å°†è¿™ä¸ªembeddingä½¿ç”¨åˆ†ç±»å™¨è¿›è¡Œåˆ†ç±»ã€‚ 1lda = models.ldamulticore.LdaMulticore(corpus=corpus_tfidf, id2word=dict, num_topics=100) ä¹‹åŽå¯ä»¥é€šè¿‡ lda.inference([tfidf_model[dict.doc2bow(i)]])[0][0] å¾—åˆ°ä¸€ä¸ªæ–°çš„è¯ç»„çš„embedding 123456789train, test = [], []for i in X_train: train.append(lda.inference([tfidf_model[dict.doc2bow(i)]])[0][0])for i in X_test: test.append(lda.inference([tfidf_model[dict.doc2bow(i)]])[0][0])train, test = np.asarray(train), np.asarray(test)np.save('train.npy', train)np.save('test.npy', test) åˆ†ç±»1234567train, test = np.load('train.npy').tolist(), np.load('test.npy').tolist()print("------Training svm classifier------")sv = SVC(C=1, kernel='rbf')sv.fit(train, y_train)pred_y = sv.predict(test)print(classification_report(y_test, pred_y))]]></content>
      <categories>
        <category>AI</category>
        <category>NLP</category>
        <category>TextClassification</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>NLP</tag>
        <tag>TextClassification</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[fasttextæ–‡æœ¬åˆ†ç±»]]></title>
    <url>%2F2020%2F12%2F19%2Ffasttext%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[fastText1Installå¦‚æžœç›´æŽ¥ç”¨ pip install fasttextä¼šæŠ¥ä¸€å †é”™è¯¯ï¼Œæ‰€ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•å®‰è£…ï¼š 123$ git clone https://github.com/facebookresearch/fastText.git$ cd fastText$ pip install . è¿™æ ·å®‰è£…åŽä¼šå‡ºçŽ°åœ¨powershellä¸­å¯ä»¥import fasttextï¼Œä½†åœ¨Anaconda Promptä¸­æˆ–è€…pycharmä¸­æ— æ³•importçš„é—®é¢˜ã€‚æŠ¥é”™ï¼šImportError:DLL load failed è§£å†³æ–¹æ¡ˆæ˜¯condaä¸­activate å¦ä¸€ä¸ªçŽ¯å¢ƒï¼Œpip install fasttextï¼Œè¿™æ—¶ä¼šå‘çŽ°baseä¸­å·²ç»å®‰è£…å¥½äº†ï¼Œä¸ç”¨é‡æ–°ä¸‹è½½ï¼Œç›´æŽ¥å®‰è£…ï¼Œå‘çŽ°æ˜¯å¯ä»¥çš„ã€‚ ä¹‹åŽå›žåˆ°baseï¼Œpip uninstall fasttext, å†é‡æ–° pip install fasttext æ ¹æ®æ–°çŽ¯å¢ƒä¸­å·²ç»å®‰è£…å¥½çš„åŒ…ï¼Œé‡æ–°å®‰è£…ã€‚ fastText2fastText model123456789101112131415161718192021222324252627class Model(nn.Module): def __init__(self, config): super(Model, self).__init__() if config.embedding_pretrained is not None: self.embedding = nn.Embedding.from_pretrained(config.embedding_pretrained, freeze=False) else: self.embedding = nn.Embedding(config.n_vocab, config.embed, padding_idx=config.n_vocab - 1) self.embedding_ngram2 = nn.Embedding(config.n_gram_vocab, config.embed) self.embedding_ngram3 = nn.Embedding(config.n_gram_vocab, config.embed) self.dropout = nn.Dropout(config.dropout) self.fc1 = nn.Linear(config.embed * 3, config.hidden_size) # self.dropout2 = nn.Dropout(config.dropout) self.fc2 = nn.Linear(config.hidden_size, config.num_classes) def forward(self, x): out_word = self.embedding(x[0]) out_bigram = self.embedding_ngram2(x[2]) out_trigram = self.embedding_ngram3(x[3]) out = torch.cat((out_word, out_bigram, out_trigram), -1) out = out.mean(dim=1) out = self.dropout(out) out = self.fc1(out) out = F.relu(out) out = self.fc2(out) return out nn.Embeddingï¼Œ å¯ä»¥çœ‹åšä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸ä¸­æ¯ä¸ªç´¢å¼•å¯¹åº”ä¸€ä¸ªè¯å’Œè¯çš„embeddingå½¢å¼ã€‚åˆ©ç”¨è¿™ä¸ªæ¨¡å—ï¼Œå¯ä»¥ç»™è¯åšembeddingçš„åˆå§‹åŒ–æ“ä½œã€‚ padding_idx å¦‚æžœç»™å®šï¼Œåˆ™é‡åˆ°padding_idxä¸­çš„ç´¢å¼•ï¼Œåˆ™å°†å…¶ä½ç½®å¡«0ï¼ˆ0æ˜¯é»˜è®¤å€¼ï¼‰ã€‚ å…¶ä¸­ config.n_gram_vocabä¼šåœ¨è¿è¡Œè¿‡ç¨‹ä¸­èµ‹å€¼ï¼Œconfig.n_vocab = len(vocab)ï¼Œconfig.n_gram_vocab = 250499 æ¨¡åž‹è¾“å…¥ï¼š [batch_size, seq_len] embeddingå±‚ï¼šéšæœºåˆå§‹åŒ–, è¯å‘é‡ç»´åº¦ä¸ºembed_sizeï¼Œ2-gramå’Œ3-gramåŒç†ï¼šwordï¼š [batch_size, seq_len, embed_size]2-gramï¼š[batch_size, seq_len, embed_size]3-gramï¼š[batch_size, seq_len, embed_size] æ‹¼æŽ¥embeddingå±‚ï¼š[batch_size, seq_len, embed_size * 3] æ±‚æ‰€æœ‰seq_lenä¸ªè¯çš„å‡å€¼[batch_size, embed_size * 3] å…¨è¿žæŽ¥+éžçº¿æ€§æ¿€æ´»ï¼šéšå±‚å¤§å°hidden_size[batch_size, hidden_size] å…¨è¿žæŽ¥+softmaxå½’ä¸€åŒ–ï¼š[batch_size, num_class]==&gt;[batch_size, 1] build_dataset1234567891011build_dataset if ues_word: tokenizer = lambda x: x.split(' ') # ä»¥ç©ºæ ¼éš”å¼€ï¼Œword-level else: tokenizer = lambda x: [y for y in x] # char-level if os.path.exists(config.vocab_path): vocab = pkl.load(open(config.vocab_path, 'rb')) else: vocab = build_vocab(config.train_path, tokenizer=tokenizer, max_size=MAX_VOCAB_SIZE, min_freq=1) pkl.dump(vocab, open(config.vocab_path, 'wb')) print(f"Vocab size: &#123;len(vocab)&#125;") å¦‚æžœè·¯å¾„æœ‰è¯è¡¨ï¼Œç›´æŽ¥åŠ è½½ï¼Œå¦‚æžœæ²¡æœ‰åˆ™ç”Ÿæˆè¯è¡¨ã€‚ 12345678910111213141516def build_vocab(file_path, tokenizer, max_size, min_freq): vocab_dic = &#123;&#125; with open(file_path, 'r', encoding='UTF-8') as f: for line in tqdm(f): lin = line.strip() if not lin: continue content = lin.split('\t')[0] for word in tokenizer(content): vocab_dic[word] = vocab_dic.get(word, 0) + 1 # æŒ‰ç…§å­—/è¯é¢‘é™åºæŽ’åˆ— [(' ', 80926), ('0', 60319), ('1', 40420)] vocab_list = sorted([_ for _ in vocab_dic.items() if _[1] &gt;= min_freq], key=lambda x: x[1], reverse=True)[:max_size] # æ ¹æ®ä¸Šé¢çš„è¯é¢‘é™åºåˆ—è¡¨å‡åºå®šä¹‰id &#123;' ': 0, '0': 1, '1': 2&#125; vocab_dic = &#123;word_count[0]: idx for idx, word_count in enumerate(vocab_list)&#125; vocab_dic.update(&#123;UNK: len(vocab_dic), PAD: len(vocab_dic) + 1&#125;) return vocab_dic ç”Ÿæˆçš„è¯è¡¨æŒ‰ç…§è¯é¢‘é™åºæŽ’åˆ—ï¼Œä»Ž0å¼€å§‹èµ‹å€¼ï¼Œegï¼š{â€˜å¸‚æ°‘â€™: 0, â€˜åæ˜ â€™: 1, â€˜é—®é¢˜â€™: 2, â€˜æ¥ç”µâ€™: 3, â€˜å¸Œæœ›â€™: 4} æœ€åŽæ·»åŠ  UNK, PAD = â€˜\â€˜, â€˜\â€˜ï¼Œæ‰€ä»¥ä¹‹å‰fastTextå®šä¹‰Embeddingæ—¶ï¼Œä¼šæœ‰ï¼šself.embedding = nn.Embedding(config.n_vocab, config.embed, padding_idx=config.n_vocab - 1)ï¼Œpadding_idx=config.n_vocab - 1è¡¨ç¤ºå½“é‡åˆ°\æ—¶ï¼Œç”¨0å¡«å……embeddingã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849build_dataset def biGramHash(sequence, t, buckets): t1 = sequence[t - 1] if t - 1 &gt;= 0 else 0 return (t1 * 14918087) % buckets def triGramHash(sequence, t, buckets): t1 = sequence[t - 1] if t - 1 &gt;= 0 else 0 t2 = sequence[t - 2] if t - 2 &gt;= 0 else 0 return (t2 * 14918087 * 18408749 + t1 * 14918087) % buckets def load_dataset(path, pad_size=32): contents = [] with open(path, 'r', encoding='UTF-8') as f: for line in tqdm(f): lin = line.strip() if not lin: continue content, label = lin.split('\t') label = label.replace('"', "") words_line = [] token = tokenizer(content) seq_len = len(token) if pad_size: if len(token) &lt; pad_size: token.extend([PAD] * (pad_size - len(token))) else: token = token[:pad_size] seq_len = pad_size # word to id for word in token: words_line.append(vocab.get(word, vocab.get(UNK))) # fasttext ngram buckets = config.n_gram_vocab bigram = [] trigram = [] # ------ngram------ for i in range(pad_size): bigram.append(biGramHash(words_line, i, buckets)) trigram.append(triGramHash(words_line, i, buckets)) # ----------------- contents.append((words_line, int(label), seq_len, bigram, trigram)) return contents # [([...], 0), ([...], 1), ...] train = load_dataset(config.train_path, config.pad_size) dev = load_dataset(config.dev_path, config.pad_size) test = load_dataset(config.test_path, config.pad_size) return vocab, train, dev, test load_dataset: é¦–å…ˆå¯¹äºŽæ•°æ®é›†çš„æ¯ä¸€è¡Œæ“ä½œï¼Œæ ¹æ®â€™\tâ€™åˆ†å‰²contentå’Œæ ‡ç­¾ï¼Œlabel = label.replace(&#39;&quot;&#39;, &quot;&quot;)æ˜¯å› ä¸ºæŸäº›åˆ†å‰²åŽçš„æ ‡ç­¾åŽä¼šå‡ºçŽ°ä¸€ä¸ªå¼•å·ï¼ŒåŽŸå› è¿˜ä¸æ˜Žç™½ã€‚ä¹‹åŽæ ¹æ®pad_sizeå°‘è¡¥å¤šæˆªï¼Œseq_lenè¡¨ç¤ºå†…å®¹çš„è¯æ•°ï¼ˆå¦‚æžœè¶…è¿‡pad_sizeåˆ™ä¸ºpad_sizeï¼Œå¦‚æžœå°äºŽåˆ™ä¸ºå®žé™…é•¿åº¦ï¼‰ words_lineå‚¨å­˜è¯¥å¥æ‰€æœ‰å•è¯çš„ç¼–å·ï¼Œå¦‚æžœæ‰¾ä¸åˆ°åˆ™ä¸ºUNKã€‚ 14918087è¿™äº›æ•°å­—ï¼Œå°±æ˜¯ç”¨å‡ ä¸ªè´¨æ•°åšçš„ç®€å•çš„å“ˆå¸Œå‡½æ•°ï¼Œå¯ä»¥ä¿®æ”¹ï¼Œç›®çš„å°±æ˜¯æŠŠæ‰€æœ‰n-graméƒ½æ˜ å°„åˆ°ä¸€ä¸ªè¯è¡¨ä¸­ã€‚ æœ€åŽè®­ç»ƒæ—¶é€šè¿‡ words_lineï¼Œbigramï¼Œtrigramæ‰¾åˆ°å¯¹åº”åœ¨è¯è¡¨embeddingã€2gram embeddingã€3gram embeddingä¸­çš„ä½ç½®ï¼Œè¿›è¡Œå¹³å‡ DatasetIterater1iter = DatasetIterater(dataset, config.batch_size, config.device) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class DatasetIterater(object): def __init__(self, batches, batch_size, device): self.batch_size = batch_size self.batches = batches self.n_batches = len(batches) // batch_size self.residue = False # è®°å½•batchæ•°é‡æ˜¯å¦ä¸ºæ•´æ•° if len(batches) % self.n_batches != 0: self.residue = True self.index = 0 self.device = device def _to_tensor(self, datas): # xx = [xxx[2] for xxx in datas] # indexx = np.argsort(xx)[::-1] # datas = np.array(datas)[indexx] x = torch.LongTensor([_[0] for _ in datas]).to(self.device) y = torch.LongTensor([_[1] for _ in datas]).to(self.device) bigram = torch.LongTensor([_[3] for _ in datas]).to(self.device) trigram = torch.LongTensor([_[4] for _ in datas]).to(self.device) # padå‰çš„é•¿åº¦(è¶…è¿‡pad_sizeçš„è®¾ä¸ºpad_size) seq_len = torch.LongTensor([_[2] for _ in datas]).to(self.device) return (x, seq_len, bigram, trigram), y """ å¯¹åº”çš„æ˜¯trainä¸­ï¼Œ for i, (trains, labels) in enumerate(train_iter): outputs = model(trains) """ def __next__(self): # å¦‚æžœæ˜¯æœ€åŽä¸€ä¸ªbatchä¸”é•¿åº¦ä¸è¶³batch_size if self.residue and self.index == self.n_batches: batches = self.batches[self.index * self.batch_size: len(self.batches)] self.index += 1 batches = self._to_tensor(batches) return batches elif self.index &gt;= self.n_batches: self.index = 0 raise StopIteration else: batches = self.batches[self.index * self.batch_size: (self.index + 1) * self.batch_size] self.index += 1 batches = self._to_tensor(batches) return batches def __iter__(self): return self def __len__(self): if self.residue: return self.n_batches + 1 else: return self.n_batches]]></content>
      <categories>
        <category>AI</category>
        <category>NLP</category>
        <category>TextClassification</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>NLP</tag>
        <tag>TextClassification</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[image-caption-papers_202004_Oscar]]></title>
    <url>%2F2020%2F12%2F03%2Fimage-caption-papers-202004-Oscar%2F</url>
    <content type="text"><![CDATA[Oscar: Object-Semantics Aligned Pre-training for Vision-Language TasksOscar: Object-Semantics Aligned Pre-training The code and pre-trained models are released: https://github.com/microsoft/Oscar We pre-train an Oscar model on the public corpus of 6.5 million text-image pairs, and fi ne-tune it on downstream tasks, creating new state-of-the-arts on six well-established vision-language understanding and generation tasks. Introduction Oscaræ¨¡åž‹ä½¿ç”¨ç›®æ ‡æ£€æµ‹å¾—åˆ°çš„object tagsä½œä¸ºanchor pointsæ¥å¸®åŠ©è¿›è¡Œimage-textçš„è¯­ä¹‰å¯¹é½ã€‚è¾“å…¥ä¸ºä¸€ä¸ªä¸‰å…ƒç»„ï¼ŒåŒ…å«a word sequence, a set of object tags, and a set of image region featuresï¼Œè¡¨ç¤ºä¸º$(w,q,v)$ã€‚ é¢„è®­ç»ƒå¾—åˆ°çš„æ¨¡åž‹å¯ä»¥é€šè¿‡fine tuneåº”ç”¨äºŽä¸‹æ¸¸çš„è·¨æ¨¡æ€ä»»åŠ¡ï¼ŒåŒ…æ‹¬ 5 understanding tesksã€2 generation tesksã€‚ æ¨¡åž‹åœ¨6.5M Imageâ€‹-text pairsä¸Šè¿›è¡Œäº†é¢„è®­ç»ƒï¼Œè¯­æ–™åº“æ¥è‡ªäºŽçŽ°æœ‰çš„V+Læ•°æ®é›†ï¼ŒåŒ…æ‹¬COCOã€CCã€SBUcaptionsã€flickr30kã€GQAç­‰ contribution We introduce Oscar, a powerful VLP method to learn generic image-text representations for V+L understanding and generation tasks. We have developed an Oscar model that achieves new SoTA on multiple V+L benchmarks, outperforming existing approaches by a signi cant margin We present extensive experiments and analysis to provide insights on the effectiveness of using objecttags as anchor points for cross-modal representation learning and downstream tasks. Backgrounddatasetï¼š$D={(I_i,w_i)}^{N}_{i=1}$ ï¼ŒThe goal of pre-training is to learn cross-modal representations of image-text pairs in a self-supervised manner Existing VLP methods take visual region features $v={v_1,Â·Â·Â·,v_K}$ of an image and word embeddings $w={w_1,Â·Â·Â·,w_T}$ of its paired text as input, and relies on the self-attention mechanism to learn image-text alignments and produce cross-modal contextual representations. çŽ°æœ‰çš„VLPæ–¹æ³•å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š Ambiguity. ç”±äºŽå›¾åƒä½ç½®çš„é‡å ï¼Œå¯¼è‡´æå–çš„visual embeddingsæœ‰æ­§ä¹‰ï¼Œå¦‚ä¸Šå›¾(a)ä¸­çš„dogå’Œcouchã€‚ Lack of grounding. VLPæ˜¯å¼±ç›‘ç£å­¦ä¹ ï¼Œå› ä¸ºå›¾åƒåŒºåŸŸå’Œæ–‡æœ¬å•è¯ä¹‹é—´å¹¶æ²¡æœ‰æ˜Žç¡®çš„å¯¹é½æ–¹å¼ã€‚ä½†ä¸€èˆ¬å›¾åƒä¸­çš„æ˜¾è‘—ç›®æ ‡ä¼šåŒæ—¶å‡ºçŽ°åœ¨imageå’Œå¯¹åº”çš„textä¸­ï¼Œå› æ­¤å¯ç”¨ä½œanchor pointsæ¥å¸®åŠ©å¯¹é½ã€‚ ä»Žä¸Šå›¾(c) ä¸­å¯ä»¥çœ‹å‡ºï¼Œdogå’Œcouchç”±äºŽåœ¨å›¾åƒä¸­é‡å é¢ç§¯è¾ƒå¤§ï¼Œåœ¨Region Featureä¸­è·ç¦»è¾ƒè¿‘ï¼Œä¸å¥½åŒºåˆ†ã€‚ä½†åœ¨Word Embeddingä¸­è·ç¦»è¾ƒè¿œï¼Œæ›´å¥½åŒºåˆ†ã€‚ Oscar Pre-training Inputè¾“å…¥ä¸ºWord-Tag-Imageä¸‰å…ƒç»„ï¼Œè¡¨ç¤ºä¸º$(w,q,v)$ï¼Œ$w$ æ˜¯æ–‡æœ¬åºåˆ—çš„embeddingï¼Œ$q$ æ˜¯è¢«æ£€æµ‹ç‰©ä½“æ–‡æœ¬è¡¨ç¤ºçš„embeddingï¼Œ$v$ æ˜¯region vectorçš„é›†åˆã€‚ çŽ°æœ‰çš„VLPæ–¹æ³•ä¸€èˆ¬å°†$(w,v)$ ä½œä¸ºè¾“å…¥ï¼ŒOscarä¸ºäº†ä¾¿äºŽå›¾æ–‡å¯¹é½ï¼Œå¼•å…¥äº†$q$ ä½œä¸ºanchor points. $v$ å’Œ$q$ çš„äº§ç”Ÿè¿‡ç¨‹å¦‚ä¸‹ã€‚å¯¹äºŽæœ‰Kä¸ªç›®æ ‡çš„å›¾åƒï¼Œç”¨Faster R-CNNæå–æ¯ä¸ªåŒºåŸŸçš„è§†è§‰è¯­ä¹‰$(v^{â€˜},z)$ ï¼Œ$v^{â€˜}$ æ˜¯region featureï¼Œä¸ºP (2048) ç»´å‘é‡ï¼Œ$z$ ä¸ºregion positionï¼Œä¸ºR (4 or 6) ç»´å‘é‡ï¼Œé€šè¿‡å°†å…¶æ‹¼æŽ¥ï¼Œå¾—åˆ°ä½ç½®æ•æ„Ÿçš„åŒºåŸŸç‰¹å¾å‘é‡ï¼Œå°†å…¶é€šè¿‡çº¿æ€§æŠ•å½±è½¬åŒ–ä¸º $v$ï¼Œä»Žè€Œä½¿å…¶å’Œword embeddingçš„ç»´åº¦ä¿æŒä¸€è‡´ã€‚$q$ ä¸ºè¢«æ£€æµ‹ç›®æ ‡çš„æ–‡æœ¬embeddingã€‚ Pre-Training Objective A Dictionary View: Masked Token Loss$x^{â€˜}$ æ˜¯dictionary viewï¼Œä»Žè¿™ä¸ªè§’åº¦ï¼Œ$wã€q$ å‡ä¸ºword embeddingè¡¨ç¤ºï¼Œshare the same linguistic semantic sapceï¼›while $v$ lie in the visual semantic space. We defi ne the discrete token sequence as $h\triangleq [w,q]$, and apply the Masked Token Loss (MTL) for pre-training. At each iteration, we randomly mask each input token in $h$ with probability 15%, and replace the masked one $h_i$ with a special token $[MASK]$. The goal of training is to predict these masked tokens based on their surrounding tokens $h_{\backslash i}$ and all image features $v$ by minimizing the negative log-likelihood: A Modality View: Contrastive LossFor each input triple, we group $h^{â€˜}\triangleq [q,v]$ to represent the image modality, and consider $w$ as the language modality. We then sample a set of â€œpollutedâ€ image representations by replacing $q$ with probability 50% with a different tag sequence randomly sampled from the dataset $D$. Since the encoder output on the special token $[CLS]$ is the fused vision-language representation of $(h^{â€˜},w)$ , we apply a fully-connected (FC) layer on the top of it as a binary classi er $f(.)$ to predict whether the pair contains the original image representation (y = 1) or any polluted ones (y = 0). The contrastive loss is de ned as The full pre-training objective of Oscar is: Implementation Detailsä½œè€…è®­ç»ƒäº†ä¸¤ç§æ¨¡åž‹ï¼š$Oscar_B$ and $Oscar_L$ ï¼Œåˆ†åˆ«ç”¨BERT base (H=768)å’ŒBERT large (H=1024)åˆå§‹åŒ–å‚æ•°ï¼Œè¡¨ç¤ºä¸º$\theta_{BERT}$ã€‚åŒæ—¶ï¼Œä¸ºäº†ä¿è¯å›¾åƒåŒºåŸŸç‰¹å¾å’Œ BERTæœ‰åŒæ ·çš„ input embedding sizeï¼Œå°†ä¸Šè¿°æåˆ°çš„position-sensitive region features è¿›è¡Œlinear projectionï¼Œé€šè¿‡çŸ©é˜µ $W$ å®žçŽ°ã€‚ å› æ­¤å¯è®­ç»ƒçš„å‚æ•°å¯è¡¨ç¤ºä¸º $\theta={\theta_{BERT},W}$ã€‚ Adapting to Image CaptioningThe input samples are processed to triples consisting of image region features, captions, and object tags, in the same way as that during the pre-training. We randomly mask out 15% of the caption tokens and use the corresponding output representations to perform classi cation to predict the token ids. Similar to VLP, the self-attention mask is constrained such that a caption token can only attend to the tokens before its position to simulate a uni-directional generation process. Note that all caption tokens will have full attentions to image regions and object tags but not the other way around. During inference, we first encode the image regions, object tags, and a special token $[CLS]$ as input. Then the model starts the generation by feeding in a $[MASK]$ token and sampling a token from the vocabulary based on the likelihood output. Next, the $[MASK]$ token in the previous input sequence is replaced with the sampled token and a new $[MASK]$ is appended for the next word prediction. The generation process terminates when the model outputs the $[STOP]$ token. We use beam search (i.e., beam size = 5) in our experiments and report our results on the COCO image captioning dataset. Resultsä¸ºäº†è€ƒè™‘å‚æ•°çš„åˆ©ç”¨æ•ˆçŽ‡ï¼Œæˆ‘ä»¬åœ¨ä¸‹è¡¨ 1 ä¸­æ¯”è¾ƒäº†ä¸åŒå¤§å°çš„æ¨¡åž‹ã€‚Oscar åœ¨å…­é¡¹ä»»åŠ¡ä¸Šå‡è¾¾åˆ°äº†æœ€æ–°æ°´å¹³ã€‚åœ¨å¤§å¤šæ•°ä»»åŠ¡ä¸Šï¼Œæˆ‘ä»¬çš„åŸºæœ¬æ¬¾æ¨¡åž‹ï¼ˆbase modelï¼‰è¦ä¼˜äºŽä»¥å‰çš„å¤§åž‹æ¨¡åž‹ï¼ˆlarge modelï¼‰ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¼šå¤§å¤§æé«˜ã€‚ å®ƒè¡¨æ˜Ž Oscar å…·æœ‰å¾ˆé«˜çš„å‚æ•°åˆ©ç”¨æ•ˆçŽ‡ï¼Œæˆ‘ä»¬è®¤ä¸ºéƒ¨åˆ†åŽŸå› æ˜¯ç‰©ä½“çš„ä½¿ç”¨å¤§å¤§ç®€åŒ–äº†å›¾åƒå’Œæ–‡æœ¬ä¹‹é—´è¯­ä¹‰å¯¹é½çš„å­¦ä¹ ã€‚ æˆ‘ä»¬ä½¿ç”¨ t-SNE å¯è§†åŒ–å·¥å…·ï¼ŒæŠŠ COCO æµ‹è¯•é›†çš„å›¾åƒ-æ–‡æœ¬å¯¹çš„è¯­ä¹‰ç‰¹å¾ç©ºé—´ç”»åœ¨äº†äºŒç»´å¹³é¢ä¸Šã€‚å¯¹äºŽæ¯ä¸ªå›¾åƒåŒºåŸŸå’Œå•è¯åºåˆ—ï¼Œæˆ‘ä»¬å°†å…¶ä¼ é€’é€šè¿‡æ¨¡åž‹ï¼Œå¹¶å°†å…¶æœ€åŽä¸€å±‚è¾“å‡ºç”¨ä½œç‰¹å¾ã€‚æ¯”è¾ƒå¸¦æœ‰å’Œä¸å¸¦æœ‰ç‰©ä½“æ ‡ç­¾çš„é¢„è®­ç»ƒæ¨¡åž‹ã€‚ å›¾ 4 ä¸­çš„ç»“æžœæ­ç¤ºäº†ä¸€äº›æœ‰è¶£çš„å‘çŽ°ã€‚ç¬¬ä¸€ä¸ªå‘çŽ°æ˜¯å…³äºŽåŒä¸€ä¸ªç‰©ä½“çš„ä¸¤ç§ä¸åŒæ¨¡æ€çš„ï¼šå€ŸåŠ©å¯¹è±¡æ ‡ç­¾ï¼Œå¯ä»¥å¤§å¤§å‡å°‘ä¸¤ä¸ªæ¨¡æ€ä¹‹é—´åŒä¸€å¯¹è±¡çš„è·ç¦»ã€‚ ä¾‹å¦‚ï¼ŒOscar ä¸­ Person çš„å›¾ç‰‡å’Œæ–‡æœ¬è¡¨ç¤ºæ¯”åŸºçº¿æ–¹æ³•ä¸­çš„è§†è§‰è¡¨ç¤ºå’Œæ–‡æœ¬è¡¨ç¤ºæ›´æŽ¥è¿‘ï¼Œè¿™ä¸ªåœ¨å›¾ 4 ä¸­ç”¨çº¢è‰²æ›²çº¿è¡¨ç¤ºã€‚ ç¬¬äºŒä¸ªå‘çŽ°æ˜¯ä¸åŒç‰©ä½“é—´çš„ï¼šæ·»åŠ ç‰©ä½“æ ‡ç­¾åŽï¼Œå…·æœ‰ç›¸å…³è¯­ä¹‰çš„å¯¹è±¡ç±»è¶Šæ¥è¶ŠæŽ¥è¿‘ï¼ˆä½†ä»å¯åŒºåˆ†ï¼‰ è€Œè¿™åœ¨åŸºçº¿æ–¹æ³•ä¸­æœ‰äº›æ··åˆï¼Œä¾‹å¦‚å›¾ 4 ä¸­ç”¨ç°è‰²æ›²çº¿è¡¨ç¤ºçš„åŠ¨ç‰©ï¼ˆzebra, elephant, sheepç­‰ï¼‰ã€‚ è¿™è¯æ˜Žäº†ç‰©ä½“æ ‡ç­¾åœ¨å­¦ä¹ å¯¹é½è¯­ä¹‰ä¸­çš„é‡è¦æ€§ï¼šç‰©ä½“è¢«ç”¨åšå®šä½ç‚¹é“¾æŽ¥å’Œè§„èŒƒåŒ–äº†è·¨æ¨¡å¼çš„ç‰¹å¾å­¦ä¹ ã€‚]]></content>
      <categories>
        <category>AI</category>
        <category>image caption</category>
        <category>papers</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>image caption</tag>
        <tag>papers</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[image captionç»¼è¿°]]></title>
    <url>%2F2020%2F12%2F02%2Fimage-caption%E7%BB%BC%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[image captionç»¼è¿°AttentionSoft Attention12K. Xu, J. Ba, K. Ryan et al., â€œShow, attend and tell: neural image caption generation with visual attention,â€ in Proceedings of the IEEE Conference on Computer Vision andPattern Recognition, pp. 2048â€“2057, Boston, MA, USA, June 2015. Hard Attention12K. Xu, J. Ba, K. Ryan et al., â€œShow, attend and tell: neural image caption generation with visual attention,â€ in Proceedings of the IEEE Conference on Computer Vision andPattern Recognition, pp. 2048â€“2057, Boston, MA, USA, June 2015. Multihead Attention (Transformer)1A. Vaswani, N. Shazeer, N. Parmar et al., â€œAttention is all you need,â€ in Proceedings of the Neural Information Processing Systems, Long Beach, CA, USA, December 2017. MultiHead(Q,K,V)=Concate(head_1,Â·Â·Â·,head_h)W^O,\\ wherehead_i=Attention(QW^Q_i,KW^K_i,VW^V_i)Scaled Dot-Product Attention (Transformer)1A. Vaswani, N. Shazeer, N. Parmar et al., â€œAttention is all you need,â€ in Proceedings of the Neural Information Processing Systems, Long Beach, CA, USA, December 2017. Attention(Q,K,V)=softmax(\frac{QK^T}{\sqrt{d_k}})VGlobal Attention1L. Minh-Thang, H. Pham, and C. D. Manning, â€œEffective approaches to attention-based neural machine translation,â€ in Proceedings of the Conference on Empirical Methods in Natural Language Processing, Lisbon, Portugal, September 2015. Local Attention1L. Minh-Thang, H. Pham, and C. D. Manning, â€œEffective approaches to attention-based neural machine translation,â€ in Proceedings of the Conference on Empirical Methods in Natural Language Processing, Lisbon, Portugal, September 2015. Adaptive Attention with Visual Sentinel1J. Lu, C. Xiong, D. Parikh, and R. Socher, â€œKnowing when to look: adaptive attention via a visual sentinel for image captioning,â€in Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition, pp. 3242â€“3250, Las Vegas, NV, USA, June-July 2016. Ct=g(V,ht)=\sum^k_{i=1}\alpha_{ti}v_{ti}=softmax(z_t)Â·v_{ti}\\ =softmax(w^T_htanh(W_VV+(W_gh_t)I^T))Â·v_{ti},\\ \hat{c}=\beta_ts_t+(1-\beta_t)c_tSemantic Attention1Q. You, H. Jin, Z. Wang, C. Fang, and J. Luo, â€œImage captioning with semantic attention,â€ in Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition, pp. 4651â€“4659, Las Vegas, NV, USA, June-July 2016. Spatial and Channel-Wise Attention1L. Chen, H. Zhang, J. Xiao et al., â€œSCA-CNN: spatial and channel-wise attention in convolutional networks for image captioning,â€ in Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition (CVPR), pp. 6298â€“6306, Las Vegas, NV, USA, June-July 2016. Areas of Attention1M. Cornia, L. Baraldi, G. Serra, and R. Cucchiar, â€œVisual saliency for image captioning in new multimedia services,â€ in Proceedings of the IEEE International Conference on Multimedia &amp; Expo Workshops (ICMEW), pp. 309â€“314, Hong Kong, China, July 2017. Deliberate Attention1L. Gao, K. Fan, J. Song, X. Liu, X. Xu, and H. Shen, â€œDeliberate attention networks for image captioning,â€ in Proceedings of the AAAI Conference on Artificial Intelligence, vol. 33, pp. 8320â€“8327, Honolulu, HI, USA, January-February 2019. Dataset MSCOCOMicrosoft COCO Captions dataset , developed by the Microsoft Team that targets scene understanding, captures images from complex daily scenes and can be used to perform multiple tasks such as image recognition, segmentation, and description.The dataset uses Amazonâ€™s â€œMechanical Turkâ€ service to artificially generate at least five sentences for eachimage, with a total of more than 1.5 million sentences. The training set contains 82,783 images, the validation set has 40,504 images, and the test set has 40,775 images. Its 2014 version of the data has a total of about 20G pictures and about 500M of annotation files which mark the correspondence between one image and its descriptions. Flickr8k/Flickr30kFlickr8k image comes from Yahooâ€™s photo album site Flickr, which contains 8,000photos, 6000 image training, 1000 image verification, and 1000 image testing. Flickr30k contains 31,783images collected from the Flickr website, mostly depicting humans participating in an event. The corresponding manual label for each image is still 5 sentences. PASCAL 1KA subset of the famous PASCAL VOC challenge image dataset, which provides a standard image annotation dataset and a standard evaluation system. The PASCAL VOC photo collection consists of 20 categories, and for its 20 categories, 50 images were randomly selected for a total of 1,000 images. Then, Amazonâ€™s Turkish robot service is used to manually mark up five descriptions for each image. The dataset image quality is good and the label is complete, which is very suitable for testing algorithm performance. AIC0e Chinese image description dataset, derived from the AI Challenger, is the first large Chinese description dataset in the field of image caption generation. The dataset contains 210,000 pictures of training sets and 30,000 pictures of verification sets. Similar to MSCOCO, each picture is accompanied by 5 Chinese descriptions, which highlight important information in the image, covering the main characters, scenes, actions, and other contents. Compared with the English datasets common to similar scientific research tasks, Chinese sentences usually have greater flexibility in syntax and lexicalization, and the challenges of algorithm implementation are also greater. STAIRThe Japanese image description dataset, which is constructed based on the images of the MSCOCO dataset. STAIR consists of 164,062 pictures and a total of 820,310 Japanese descriptions corresponding to each of the five pictures. It is the largest Japanese image description dataset. Evaluation Criteria For five indicators, BLEU and METEOR are for machine translations, ROUGE is for automatic summary, and CIDEr and SPICE are present for image caption. They measured the consistency of the n-gram between the generated sentences, which was affected by the significance and rarity of the n-gram. At the same time, all four indicators can be directly calculated by the MSCOCO title assessment tool. The source code is publicly available. BLEUIt is the most widely used evaluation indicator; the original intention of the design is not for the imagecaption problem, but for the machine translation problem based on the accuracy rate evaluation. It is used to analyze the correlation of n-gram between the translation statement to be evaluated and the reference translation statement. Its core idea is that the closer the machine translation statement is to a human professional translation statement, the better the performance. In this task, the processing is the same asmachine translation: multiple images are equivalent to multiple source language sentences in the translation. The higher the BLEU score, the better the performance. The advantage of BLEU is that the granularity it considers is an n-gram rather than a word, considering longer matching information. The disadvantage of BLEU is that no matter what kind of n-gram is matched, it will be treated the same. For example, the importance of verb matching should be intuitively greater than the article. METEORMETEOR is also used to evaluate machine translation, which aligns the translation generates from the model with the reference translation and matches the accuracy, recall, and F-value of various cases. What makes METEOR special is that it does not want to generate very â€œbrokenâ€ translations and the method is based on the precision of one gram and the harmonic mean of the recall. The weight of the recall is a bit higher than the precision. This criterion also has features that are not available in others. It is designed to solve some of the problems with BLEU. It is highly relevant to human judgment and, unlike BLEU, it has a high correlation with human judgment not only at the entire collection but also at the sentence and segment level. The higher the METEOR score, the better the performance. ROUGEROUGE is a set of automated evaluation criteria designed to evaluate text summarization algorithms.The higher the ROUGE score, the better the performance. CIDErCIDEr is specifically designed for image annotation problems. It measures the consistency of image annotation by performing a Term Frequency-Inverse Document Frequency (TF-IDF) weight calculation for each n-gram. This indicator treats each sentence as a â€œdocument,â€ represents it in the form of a TF-IDF vector, and then calculates the cosine similarity of the reference description to the description generated by the model as a score. In other words, it is the vector space model. This indicator compensates for one of the disadvantages of BLEU, that is, all words on the match are treated the same, but in fact, some words should be more important. Again, the higher the CIDEr score, the better the performance. SPICEIt is a semantic evaluation indicator for image caption that measures how image titles effectively recover objects, attributes, and relationships between them. On the natural image caption dataset, SPICE is better able to capture human judgments about the modelâ€™s subtitles, rather than the existing n-gram metrics.]]></content>
      <categories>
        <category>AI</category>
        <category>image caption</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>image caption</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Local-Paddle-Serving]]></title>
    <url>%2F2020%2F11%2F07%2FLocal-Paddle-Serving%2F</url>
    <content type="text"><![CDATA[æœ¬åœ°paddle servingéƒ¨ç½²å‚è€ƒ å‚è€ƒ TESTUCI_housingä¸‹è½½æ¨¡åž‹12wget --no-check-certificate https://paddleserving.bj.bcebos.com/uci_housing.tar.gztar -xzf uci_housing.tar.gz ç”±äºŽç›´æŽ¥åœ¨windowsæœ¬æœºä¸Šéƒ¨ç½²ï¼Œæ‰€ä»¥ä¸éœ€è¦ä¸Šè¿°å‘½ä»¤ï¼Œç›´æŽ¥ä¸‹è½½æ–‡ä»¶è§£åŽ‹ å®‰è£…paddle serving12pip install paddle_serving_server //åœ¨CPUçŽ¯å¢ƒä¸Šå®‰è£…paddle_serving_serverpip install paddke_serving_server_gpu //åœ¨GPUçŽ¯å¢ƒä¸Šå®‰è£…paddle_serving_server ç›´æŽ¥åœ¨windowsä¸Šå®‰è£…ä¼šæŠ¥é”™ï¼Œå› ä¸ºfnctlè¿™ä¸ªåº“åªåœ¨linuxä¸Šï¼Œæ‰€ä»¥ç”¨WSL åº”è¯¥æ˜¯ç”¨WSLçš„åŽŸå› ï¼Œå®‰è£…GPUç‰ˆæœ¬çš„æ˜¾ç¤ºæ‰¾ä¸åˆ°GPUï¼Œè¿˜æ˜¯ç”¨çš„CPU æŠ¥é”™sentencepieceå®‰è£…å¤±è´¥ï¼šFailed to find sentencepiece pkg-config åŽ»å®˜ç½‘ä¸‹è½½ sentencepiece ï¼Œç‰ˆæœ¬ï¼šsentencepiece-0.1.94-cp36-cp36m-manylinux2014_x86_64 å®‰è£…ï¼špip3 install sentencepiece-0.1.94-cp36-cp36m-manylinux2014_x86_64 WSLè‡ªå¸¦python2ã€python3.6ï¼Œé»˜è®¤ç”¨python2ï¼Œåˆ‡æ¢ï¼š 1234sudo update-alternatives --install /usr/bin/python python /usr/bin/python2 100sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 150éœ€è¦åˆ‡æ¢åˆ°python2æ—¶ï¼šsudo update-alternatives --config python å¯åŠ¨æœåŠ¡1python -m paddle_serving_server.serve --model uci_housing_model/ --thread 10 --port 9292 --name uci modelï¼šServer ç«¯é…ç½®ä¸Žæ¨¡åž‹æ–‡ä»¶æ‰€åœ¨ç›®å½•ã€‚ threadï¼šServer ç«¯çº¿ç¨‹æ•°ã€‚ portï¼šServer ç«¯é¢„æµ‹æœåŠ¡ç«¯å£å·ã€‚ nameï¼šHTTP é¢„æµ‹æœåŠ¡çš„çš„åç§°ï¼Œå¦‚æžœä¸æŒ‡å®š nameï¼Œåˆ™ä¼šå¯åŠ¨ RPC é¢„æµ‹æœåŠ¡ã€‚ æµ‹è¯•åŒæ ·ä½¿ç”¨WSLæµ‹è¯• 1curl -H "Content-Type:application/json" -X POST -d '&#123;"feed":[&#123;"x": [0.0137, -0.1136, 0.2553, -0.0692, 0.0582, -0.0727, -0.1583, -0.0584, 0.6283, 0.4919, 0.1856, 0.0795, -0.0332]&#125;], "fetch":["price"]&#125;' http://127.0.0.1:9292/uci/prediction æ–‡æœ¬è¯­ä¹‰æ¨¡åž‹Bertä¸‹è½½æ¨¡åž‹ç›®æ ‡æ˜¯ç»™å®šè¾“å…¥ä¸€ä¸ªå¥å­ï¼ŒæŽ¨ç†æœåŠ¡å¯ä»¥å°†å¥å­è¡¨ç¤ºæˆä¸€ä¸ªè¯­ä¹‰å‘é‡è¿”å›žç»™å®¢æˆ·ç«¯ã€‚ 1234567891011121314151617import paddlehub as hubmodel_name = "bert_chinese_L-12_H-768_A-12"#èŽ·å–æ¨¡åž‹æ–‡ä»¶module = hub.Module(model_name)#èŽ·å–æ¨¡åž‹çš„è¾“å…¥è¾“å‡ºä¿¡æ¯ä»¥åŠprograminputs, outputs, program = module.context( trainable=True, max_seq_len=20)#å°†è¾“å…¥è¾“å‡ºçš„åç§°ä¸Žæ¨¡åž‹ä¸­çš„è¾“å…¥è¾“å‡ºå˜é‡ä¸€ä¸€æ˜ å°„feed_keys = ["input_ids", "position_ids", "segment_ids", "input_mask", ]fetch_keys = ["pooled_output", "sequence_output"]feed_dict = dict(zip(feed_keys, [inputs[x] for x in feed_keys]))fetch_dict = dict(zip(fetch_keys, [outputs[x] for x in fetch_keys]))#ä¿å­˜servingéœ€è¦çš„æ¨¡åž‹ä¸Žé…ç½®æ–‡ä»¶ï¼Œå‚æ•°1æ˜¯serverç«¯æ¨¡åž‹ä¸Žé…ç½®æ–‡ä»¶ä¿å­˜çš„ç›®å½•ï¼Œå‚æ•°2æ˜¯clientç«¯é…ç½®æ–‡ä»¶ä¿å­˜çš„ç›®å½•ï¼Œå‚æ•°3æ˜¯è¾“å…¥dictï¼Œå‚æ•°4æ˜¯è¾“å‡ºdictï¼Œå‚æ•°5æ˜¯æ¨¡åž‹çš„programimport paddle_serving_client.io as serving_ioserving_io.save_model("bert_seq20_model", "bert_seq20_client", feed_dict, fetch_dict, program) æŠ¥é”™ï¼šcublas64_100.dll not found ä¸‹è½½ç›¸åº”çš„æ–‡ä»¶ åœ°å€ï¼Œæ”¾åˆ° C:\Windows\System32 æ–‡ä»¶ä¸‹ æ¨¡åž‹ä¸‹è½½åŽå¯ä»¥ç§»åˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åŽç”¨ module = hub.Module(directory=&quot;&quot;)åŠ è½½ ä¹Ÿå¯ä½¿ç”¨ bert è¿™é‡Œçš„ prepare_model.py å¯åŠ¨æœåŠ¡åœ¨WSLä¸‹ï¼špython -m paddle_serving_server.serve --model bert_seq128_model/ --thread 10 --port 9292 è¿™ä¹‹åŽ å‚è€ƒ è¿™ä¸ªç½‘ç«™ä¸Šçš„ä»£ç æœ‰äº›é—®é¢˜ å‚è€ƒ bert python -m paddle_serving_server.serve --model bert_seq128_model/ --port 9292 è¿™ä¸ªé¡¹ç›®é‡Œç”¨çš„é•¿åº¦ä¸º128ï¼Œä½†æ¨¡åž‹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåå­—éƒ½æ˜¯ bert_chinese_L-12_H-768_A-12 æµ‹è¯•é¦–å…ˆç”¨WSLè¿è¡Œgetdata.shï¼Œè„šæœ¬å°†ä¸‹è½½ä¸­æ–‡è¯å…¸vocab.txtå’Œä¸­æ–‡æ ·ä¾‹æ•°æ®data-c.txt ï¼Œç„¶åŽæµ‹è¯•ï¼š 1234head data-c.txt | python bert_client.py --model bert_seq128_client/serving_client_conf.prototxtå¯ä»¥ç”¨head -n 2 data-c.txtæŒ‡å®šåªä¼ å…¥å‰å‡ è¡Œä¹Ÿå¯ä»¥ echo "xxxx"ä¼ å…¥æŒ‡å®šå­—ç¬¦ä¸² ImportError: libSM.so.6: cannot open shared object file: No such file or directory å‚è€ƒ 12345678910111213141516171819202122Python3çŽ¯å¢ƒä¸‹ï¼Œimport cv2 æç¤º ImportError: libSM.so.6: cannot open shared object file: No such file or directoryè§£å†³æ­¥éª¤sudo apt-get updatesudo apt-get install -y python-qt4import cv2 æç¤º ImportError: No module named cv2sudo pip3 install opencv-pythonä»¥åŠ ImportError: libgthread-2.0.so.0: cannot open shared object file: No such file or directoryapt-get updateapt-get install -y libglib2.0-dev æœ€åŽä¸€è¡Œçš„ç»“æžœ è¯æ³•åˆ†è¯LACä¸‹è½½æ¨¡åž‹1hub install lac==2.2.0 å‘½ä»¤è¡Œé¢„æµ‹ï¼š 123456789101112hub run lac --input_text "ä»Šå¤©æ˜¯ä¸ªå¥½æ—¥å­"hub run lac --input_file test.txt --user_dict user.dict# test.txt å­˜æ”¾å¾…åˆ†è¯æ–‡æœ¬ä»Šå¤©æ˜¯ä¸ªå¥½æ—¥å­ ä»Šå¤©å¤©æ°”æ™´æœ— # user.dictä¸ºç”¨æˆ·è‡ªå®šä¹‰è¯å…¸ï¼Œå¯ä»¥ä¸æŒ‡å®šï¼Œå½“æŒ‡å®šè‡ªå®šä¹‰è¯å…¸æ—¶ï¼Œå¯ä»¥å¹²é¢„é»˜è®¤åˆ†è¯ç»“æžœæ˜¥å¤©/SEASONèŠ±/n å¼€/vç§‹å¤©çš„é£Žè½ é˜³ æœ¬åœ°è¿è¡Œ12345678910import paddlehub as hublac = hub.Module(name="lac")test_text = ["ä»Šå¤©æ˜¯ä¸ªå¥½æ—¥å­", "å¤©æ°”é¢„æŠ¥è¯´ä»Šå¤©è¦ä¸‹é›¨", "ä¸‹ä¸€ç­åœ°é“é©¬ä¸Šå°±è¦åˆ°äº†"]results = lac.cut(text=test_text, use_gpu=False, batch_size=1, return_tag=True)for result in results: print(result['word']) print(result['tag']) å¯åŠ¨æœåŠ¡1hub serving start -m lac -p 9292 æµ‹è¯•123456789101112131415161718import requestsimport json# å¾…é¢„æµ‹æ•°æ®text = ["ä»Šå¤©æ˜¯ä¸ªå¥½æ—¥å­", "å¤©æ°”é¢„æŠ¥è¯´ä»Šå¤©è¦ä¸‹é›¨"]# è®¾ç½®è¿è¡Œé…ç½®# å¯¹åº”æœ¬åœ°é¢„æµ‹lac.cut(text=text, batch_size=1)data = &#123;"text": text, "batch_size": 1&#125;# æŒ‡å®šé¢„æµ‹æ–¹æ³•ä¸ºlacå¹¶å‘é€postè¯·æ±‚ï¼Œcontent-typeç±»åž‹åº”æŒ‡å®šjsonæ–¹å¼# HOST_IPä¸ºæœåŠ¡å™¨IPurl = "http://127.0.0.1:9292/predict/lac"headers = &#123;"Content-Type": "application/json"&#125;r = requests.post(url=url, headers=headers, data=json.dumps(data))# æ‰“å°é¢„æµ‹ç»“æžœprint(json.dumps(r.json(), indent=4, ensure_ascii=False)) å›¾åƒäººè„¸æ£€æµ‹pyramidboxä¸‹è½½æ¨¡åž‹hub install pyramidbox_face_detection==1.1.0 æµ‹è¯•1234567891011121314import paddlehub as hubimport osdef run(img_name): face_detector = hub.Module(name="./pyramidbox_face_detection") path = './images/' result = face_detector.face_detection(paths=[os.path.join(path, img_name)], visualization=True) print(result) return resultif __name__ == "__main__": print(run('1.jpg')) å›¾åƒç”Ÿæˆstylepro_artisticä¸‹è½½æ¨¡åž‹hub install stylepro_artistic==1.0.0 æµ‹è¯•123456789101112131415161718import paddlehub as hubimport osdef run(input_img_name, style_img_name): stylepro_artistic = hub.Module(directory="stylepro_artistic") path = './images/' result = stylepro_artistic.style_transfer( paths=[&#123; 'content': os.path.join(path, input_img_name), 'styles': [os.path.join(path, style_img_name)] &#125;] , visualization=True) print(result[0]['save_path']) return result[0]['save_path']if __name__ == "__main__": print(run('1.jpg', 'picasso.png')) ç›®æ ‡æ£€æµ‹SSDå‚è€ƒ ä¸‹è½½æ¨¡åž‹å¯ä»¥é€šè¿‡ä»£ç ä¸‹è½½ 1ssd = hub.Module(name="ssd_mobilenet_v1_pascal") ä¹Ÿå¯ä»¥å®‰è£… 1hub install ssd_mobilenet_v1_pascal==1.1.1 å¦‚æžœé€šè¿‡ä»£ç è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥æ›´æ”¹æ¨¡åž‹ä½ç½®ï¼Œç”¨ ssd = hub.Module(directory = &quot;&quot;) åŠ è½½å³å¯ï¼Œåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ç”¨ hub run ssd_mobilenet_v1_pascal --input_path &quot;./images/test_img_cat.jpg&quot; ä¹Ÿå¯ å¦‚æžœè¦å¯ç”¨servingæœåŠ¡ï¼Œä¸èƒ½æŒ‡å®šæ¨¡åž‹ä½ç½®ï¼Œæ¯”å¦‚ hub serving start -m ./ssd_mobilenet_v1_pascal ä¼šæ‰¾ä¸åˆ°ä½ç½® å¯åŠ¨æœåŠ¡hub serving start -m ssd_mobilenet_v1_pascal -p 9292 æµ‹è¯•1234567891011121314151617181920212223import requestsimport jsonimport cv2import base64import osdef cv2_to_base64(image): data = cv2.imencode('.jpg', image)[1] return base64.b64encode(data.tostring()).decode('utf8')path = "./images"images = os.listdir(path)# å‘é€HTTPè¯·æ±‚data = &#123;'images': [cv2_to_base64(cv2.imread(os.path.join(path, image))) for image in images]&#125;headers = &#123;"Content-type": "application/json"&#125;url = "http://127.0.0.1:9292/predict/ssd_mobilenet_v1_pascal"r = requests.post(url=url, headers=headers, data=json.dumps(data))# æ‰“å°é¢„æµ‹ç»“æžœprint(r.json()["results"]) fixå¦‚æžœæ˜¯å¤šå¼ å›¾ç‰‡ä¼šå‡ºçŽ°åœ¨åŒä¸€å¼ å›¾ç‰‡ä¸Šç»˜åˆ¶æ£€æµ‹æ¡†çš„é—®é¢˜ï¼š æºç ä¸­processorï¼Œä¿®æ”¹ä»¥ä¸‹ä»£ç  123# Fixed the following one line of code# org_img = images[index - unhandled_paths_num]org_img = images[handle_id] å›¾åƒåˆ†ç±»EfficientNet b7ä¸‹è½½æ¨¡åž‹hub install efficientnetb7_imagenet==1.1.0 æœ¬åœ°è¿è¡Œ1234567891011import paddlehub as hubimport cv2import osclassifier = hub.Module(directory="efficientnetb7_imagenet")path = './images/'images = os.listdir(path)results = classifier.classify(images=[cv2.imread(os.path.join(path, image)) for image in images])for result in results: print(result) å¯åŠ¨æœåŠ¡1hub serving start -m efficientnetb7_imagenet -p 9292 æµ‹è¯•12345678910111213141516171819202122import requestsimport jsonimport cv2import base64import osdef cv2_to_base64(image): data = cv2.imencode('.jpg', image)[1] return base64.b64encode(data.tostring()).decode('utf8')path = "./images/"images = os.listdir(path)# å‘é€HTTPè¯·æ±‚data = &#123;'images':[cv2_to_base64(cv2.imread(os.path.join(path, image))) for image in images]&#125;headers = &#123;"Content-type": "application/json"&#125;url = "http://127.0.0.1:9292/predict/efficientnetb7_imagenet"r = requests.post(url=url, headers=headers, data=json.dumps(data))# æ‰“å°é¢„æµ‹ç»“æžœprint(r.json()["results"]) æ–‡å­—è¯†åˆ«Chinese_text_detectionä¸‹è½½æ¨¡åž‹1$ hub install chinese_text_detection_db_server==1.0.2 å‘½ä»¤è¡Œé¢„æµ‹ï¼šhub run chinese_text_detection_db_server --input_path &quot;/PATH/TO/IMAGE&quot; æœ¬åœ°è¿è¡Œ visualization = True 12345678910111213import paddlehub as hubimport cv2import ospath = './images/'images = os.listdir(path)text_detector = hub.Module(name="chinese_text_detection_db_server")results = text_detector.detect_text(images=[cv2.imread(os.path.join(path, image)) for image in images], visualization = True)for result in results: print(result)# or# result = ocr.recognize_text(paths=['/PATH/TO/IMAGE']) æŠ¥é”™ from shapely.geos import lgeosï¼š conda install -c conda-forge shapely å¯åŠ¨æœåŠ¡1hub serving start -m chinese_text_detection_db_server -p 9292 æµ‹è¯•12345678910111213141516171819202122import requestsimport jsonimport cv2import base64import osdef cv2_to_base64(image): data = cv2.imencode('.jpg', image)[1] return base64.b64encode(data.tostring()).decode('utf8')path = './images/'images = os.listdir(path)# å‘é€HTTPè¯·æ±‚data = &#123;'images': [cv2_to_base64(cv2.imread(os.path.join(path, image))) for image in images], 'visualization':True&#125;headers = &#123;"Content-type": "application/json"&#125;url = "http://127.0.0.1:9292/predict/chinese_text_detection_db_server"r = requests.post(url=url, headers=headers, data=json.dumps(data))# æ‰“å°é¢„æµ‹ç»“æžœprint(r.json()["results"]) Chinese OCR Mobilechinese_ocr_db_crnn_server è¿è¡Œä¸­éœ€è¦çš„å†…å­˜èµ„æºå¤ªå¤§äº† ä¸‹è½½çš„æ˜¯ chinese_ocr_db_crnn_mobile ä¸‹è½½æ¨¡åž‹1hub install chinese_ocr_db_crnn_mobile==1.1.0 å‘½ä»¤è¡Œæµ‹è¯•ï¼š hub run chinese_ocr_db_crnn_mobile --input_path &#39;./images/3.jpg&#39; æœ¬åœ°è¿è¡Œ visualization = True 1234567891011import paddlehub as hubimport cv2import ospath = './images/'images = os.listdir(path)ocr = hub.Module(name="chinese_ocr_db_crnn_mobile")results = ocr.recognize_text(images=[cv2.imread(os.path.join(path, image)) for image in images], visualization=True)for result in results: print(result) å¯åŠ¨æœåŠ¡1hub serving start -m chinese_ocr_db_crnn_mobile -p 9292 æµ‹è¯•12345678910111213141516171819202122import requestsimport jsonimport cv2import base64import osdef cv2_to_base64(image): data = cv2.imencode('.jpg', image)[1] return base64.b64encode(data.tostring()).decode('utf8')path = './images'images = os.listdir(path)# å‘é€HTTPè¯·æ±‚data = &#123;'images': [cv2_to_base64(cv2.imread(os.path.join(path, image))) for image in images], 'visualization':True&#125;headers = &#123;"Content-type": "application/json"&#125;url = "http://127.0.0.1:9292/predict/chinese_ocr_db_crnn_mobile"r = requests.post(url=url, headers=headers, data=json.dumps(data))# æ‰“å°é¢„æµ‹ç»“æžœprint(r.json()["results"]) å›¾åƒåˆ†å‰²Humanseg Mobileä¸‹è½½æ¨¡åž‹1hub install humanseg_mobile==1.1.0 å‘½ä»¤è¡Œè¿è¡Œï¼šhub run humanseg_mobile --input_path &quot;/PATH/TO/IMAGE&quot; æœ¬åœ°è¿è¡Œ1234567891011121314import cv2import paddlehub as hubimport ospath = './images'images = os.listdir(path)human_seg = hub.Module(directory='humanseg_mobile')# visualization=Trueå¯ä»¥ç”¨äºŽæŸ¥çœ‹è¶…åˆ†å›¾ç‰‡æ•ˆæžœï¼Œå¯è®¾ç½®ä¸ºFalseæå‡è¿è¡Œé€Ÿåº¦ã€‚res = human_seg.segment(images=[cv2.imread(os.path.join(path, image)) for image in images], visualization=True)for r in res: print(r['save_path'])# human_seg.video_segment('/PATH/TO/VIDEO')# human_seg.save_inference_model('/PATH/TO/SAVE/MODEL') ç›´æŽ¥è¿è¡Œçš„è¯ï¼Œä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„å…¨éƒ¨å›¾ç‰‡åªæœ‰ä¸€éƒ¨åˆ†èƒ½å¾—åˆ°ç»“æžœï¼Œå› ä¸ºæºç ä¸­æŒ‰ç…§æ—¶é—´æˆ³å‘½åä¿å­˜å›¾ç‰‡ï¼Œè¿è¡Œçš„å¤ªå¿«ä¼šè¦†ç›–æŽ‰ä¹‹å‰çš„ã€‚ ä¿®æ”¹processä¸­get_save_image_nameï¼Œç›´æŽ¥ä½¿ç”¨éšæœºæ•° 12345678ext = '.png't = time.strftime("%Y%m%d_%H%M%S_", time.localtime())rand = random.randint(0, 1000000)save_im_path = os.path.join(output_dir, t + str(rand) + ext)while os.path.exists(save_im_path): save_im_path = os.path.join(output_dir, t + str(random.randint(0, 1000000)) + ext)return save_im_path å¯åŠ¨æœåŠ¡1hub serving start -m humanseg_mobile -p 9292 æµ‹è¯•1234567891011121314151617181920212223242526272829303132333435363738import requestsimport jsonimport base64import cv2import numpy as npimport osdef cv2_to_base64(image): data = cv2.imencode('.jpg', image)[1] return base64.b64encode(data.tostring()).decode('utf8')def base64_to_cv2(b64str): data = base64.b64decode(b64str.encode('utf8')) data = np.fromstring(data, np.uint8) data = cv2.imdecode(data, cv2.IMREAD_COLOR) return data# å‘é€HTTPè¯·æ±‚path = './images'images = os.listdir(path)outpath = './serving_image_results/'if not os.path.exists(outpath):os.mkdir(outpath)data = &#123;'images': [cv2_to_base64(cv2.imread(os.path.join(path, image))) for image in images]&#125;headers = &#123;"Content-type": "application/json"&#125;url = "http://127.0.0.1:9292/predict/humanseg_mobile"rs = requests.post(url=url, headers=headers, data=json.dumps(data))imagesdata = rs.json()['results']for i in range(len(imagesdata)): mask = cv2.cvtColor(base64_to_cv2(imagesdata[i]['data']), cv2.COLOR_BGR2GRAY) org_im = cv2.imread(os.path.join(path, images[i])) rgba = np.concatenate((org_im, np.expand_dims(mask, axis=2)), axis=2) print(outpath+str(i)+".png") cv2.imwrite(outpath+str(i)+".png", rgba)]]></content>
      <categories>
        <category>AI_Platform</category>
      </categories>
      <tags>
        <tag>Paddle</tag>
        <tag>AI_Platform</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›®æ ‡æ£€æµ‹ä»£ç ]]></title>
    <url>%2F2020%2F10%2F30%2F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%BB%A3%E7%A0%81%2F</url>
    <content type="text"><![CDATA[è¡€ç»†èƒžæ£€æµ‹æ•°æ®é›† å‚è€ƒç½‘å€ faster R-CNN weights -500epochs ä½¿ç”¨faster R-CNNæ¡†æž¶ï¼Œcsvè‡ªå®šä¹‰æ•°æ®é›†ã€‚åŸºäºŽtensorflowå’Œkerasã€‚ æ•°æ®é›†å¤„ç†csvæ–‡ä»¶è¦æ±‚çš„æ ¼å¼ä¸ºï¼šfilepath,x1,y1,x2,y2,class_name BCCDæ•°æ®é›†ä¸­å·²ç»ç»™å¥½äº†ä¸€ä¸ªcsvæ ¼å¼çš„testï¼š train.txt test.txtç»™å‡ºäº†è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„å›¾ç‰‡åï¼š å°†ç»™å‡ºçš„test.csvé‡å‘½åä¸ºall.csvï¼ŒæŒ‰ç…§train.txtå’Œtest.txtç»™å‡ºç›¸åº”çš„train.csvå’Œtest.csv 1234567891011121314151617181920212223242526272829303132333435363738394041import csvfile = open('./test.csv')train = open('./train.txt')test = open('./test.txt')trainList = train.read().splitlines() # 205testList = test.read().splitlines() # 72lines = file.read().splitlines() # 4889file.close()train.close()test.close()all = []for line in lines: line = line.split(',') line[0] = line[0].replace('.jpg', '') all.append(line)all = all[1:] #ç¬¬ä¸€è¡Œä¸ºfilenameç­‰æ–‡ä»¶å¤´traincsv = [["image_names", "cell_type", "xmin", "xmax", "ymin", "ymax"]] # 2805testcsv = [["image_names", "cell_type", "xmin", "xmax", "ymin", "ymax"]] # 2083for i in all: if i[0] in trainList: traincsv.append(i) else: testcsv.append(i)def write(name, row): with open(name + '.csv', 'w', newline='')as csvfile: writer = csv.writer(csvfile) for c in row: writer.writerow(c)write("train", traincsv)write("test", testcsv) è®­ç»ƒæ—¶éœ€è¦çš„æ˜¯txtæ–‡ä»¶ï¼Œå°†csvè½¬ä¸ºtxt 12345678910111213141516import pandas as pdtrain = pd.read_csv('train.csv')data = pd.DataFrame()data['format'] = train['image_names']# as the images are in train_images folder, add train_images before the image namefor i in range(data.shape[0]): data['format'][i] = 'path' + data['format'][i]+'.jpg'# add xmin, ymin, xmax, ymax and class as per the format requiredfor i in range(data.shape[0]): data['format'][i] = data['format'][i] + ',' + str(train['xmin'][i]) + ',' + str(train['ymin'][i]) + ',' + str(train['xmax'][i]) + ',' + str(train['ymax'][i]) + ',' + train['cell_type'][i]data.to_csv('annotate.txt', header=None, index=None, sep=' ') train12cd keras-frcnnpython train_frcnn.py -o simple -p annotate.txt testæµ‹è¯•æ—¶éœ€è¦æŠŠæµ‹è¯•ç”¨çš„å›¾ç‰‡æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ 123456789101112131415import pandas as pdimport shutilimport ostest = pd.read_csv('test.csv')names = test['image_names'].unique()oldpath = '...\BCCD\JPEGImages\\'newpath = '...\keras-frcnn\\test_images\\'for name in names: if os.path.exists(oldpath+name+'.jpg'): shutil.copy(oldpath+name+'.jpg', newpath+name+'.jpg') else: continue test_frcnn.pyæœ€åŽæ”¹æˆ 123# cv2.imshow('img',img)# cv2.waitKey(0)cv2.imwrite('./results_imgs/&#123;&#125;.png'.format(os.path.splitext(str(img_name))[0]), img) ç»“æžœ RetinaNet on cocoæºç  cocoæ•°æ®é›†åœ¨aistudioé‡Œä¸‹è½½ 12345ç”¨cocoæ•°æ®é›†çš„è¯ï¼Œæ•´ç†æˆä»¥ä¸‹å½¢å¼val2017 ---- annotations ---- instances_val2017.json | -- images ---- val2017 cocoè®­ç»ƒ1python train.py --dataset coco --coco_path E:\Python\ObjDetection\datasets\val2017 --depth 50 æµ‹è¯•1python coco_validation.py --coco_path E:\Python\ObjDetection\datasets\val2017 --model_path ./coco_resnet_50_map_0_335_state_dict.pt æŒ‡å®šå›¾ç‰‡å¯è§†åŒ–å°†éœ€è¦å¯è§†åŒ–çš„å›¾ç‰‡æ”¾åˆ°visualæ–‡ä»¶å¤¹é‡Œ éœ€è¦ä¿®æ”¹ä¸€éƒ¨åˆ†ä»£ç ï¼Œæºç åªåŠ è½½äº†state_dictæ²¡æœ‰æŒ‡å®šæ¨¡åž‹ï¼Œåœ¨visulize_single_image.pyä¸­å¯¼å…¥retinanet from retinanet import modelï¼Œç„¶åŽä»£ç é‡Œå…ˆæŒ‡å®šæ¨¡åž‹ 123456retina = model.resnet50(num_classes=80)retina.load_state_dict(torch.load(model_path))if torch.cuda.is_available(): retina = retina.cuda()retina.training = Falseretina.eval() 1python visualize_single_image.py --image_dir ./visual --model_path ./coco_resnet_50_map_0_335_state_dict.pt --class_list ./coco_classes_list.csv è¿™ç§æ–¹æ³•è¿˜éœ€è¦ç”Ÿæˆcocoçš„classes_listæ ¼å¼ä¸º class_name,id cocoå¯è§†åŒ–åŒæ ·éœ€è¦åŠ è½½retinanetæ¨¡åž‹ 12retinanet = model.resnet50(num_classes=80)retinanet.load_state_dict(torch.load(parser.model)) 1python visualize.py --dataset coco --coco_path ...\datasets\val2017 --model ./coco_resnet_50_map_0_335_state_dict.pt æŒ‰ä¸‹é”®æ¢ä¸‹ä¸€å¼ å›¾ç‰‡ csvæŒ‰ç…§è¦æ±‚ç”Ÿæˆå¦‚ä¸‹æ ¼å¼çš„csvæ–‡ä»¶ï¼Œâ€˜path/to/image.jpg,x1,y1,x2,y2,class_nameâ€™ ç”¨ç™¾åº¦çš„fruitæ•°æ®é›†ï¼Œè§£æžxmlæ–‡ä»¶ï¼Œç”Ÿæˆtrain.csvã€test.csvã€classes.csv 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;annotation&gt; &lt;folder&gt;train&lt;/folder&gt; &lt;filename&gt;apple_3.jpg&lt;/filename&gt; &lt;path&gt;C:\tensorflow1\models\research\object_detection\images\train\apple_3.jpg&lt;/path&gt; &lt;source&gt; &lt;database&gt;Unknown&lt;/database&gt; &lt;/source&gt; &lt;size&gt; &lt;width&gt;1000&lt;/width&gt; &lt;height&gt;708&lt;/height&gt; &lt;depth&gt;3&lt;/depth&gt; &lt;/size&gt; &lt;segmented&gt;0&lt;/segmented&gt; &lt;object&gt; &lt;name&gt;apple&lt;/name&gt; &lt;pose&gt;Unspecified&lt;/pose&gt; &lt;truncated&gt;1&lt;/truncated&gt; &lt;difficult&gt;0&lt;/difficult&gt; &lt;bndbox&gt; &lt;xmin&gt;584&lt;/xmin&gt; &lt;ymin&gt;438&lt;/ymin&gt; &lt;xmax&gt;867&lt;/xmax&gt; &lt;ymax&gt;708&lt;/ymax&gt; &lt;/bndbox&gt; &lt;/object&gt; &lt;object&gt; &lt;name&gt;apple&lt;/name&gt; &lt;pose&gt;Unspecified&lt;/pose&gt; &lt;truncated&gt;0&lt;/truncated&gt; &lt;difficult&gt;0&lt;/difficult&gt; &lt;bndbox&gt; &lt;xmin&gt;492&lt;/xmin&gt; &lt;ymin&gt;141&lt;/ymin&gt; &lt;xmax&gt;740&lt;/xmax&gt; &lt;ymax&gt;394&lt;/ymax&gt; &lt;/bndbox&gt; &lt;/object&gt; &lt;object&gt; &lt;name&gt;apple&lt;/name&gt; &lt;pose&gt;Unspecified&lt;/pose&gt; &lt;truncated&gt;0&lt;/truncated&gt; &lt;difficult&gt;0&lt;/difficult&gt; &lt;bndbox&gt; &lt;xmin&gt;176&lt;/xmin&gt; &lt;ymin&gt;199&lt;/ymin&gt; &lt;xmax&gt;490&lt;/xmax&gt; &lt;ymax&gt;466&lt;/ymax&gt; &lt;/bndbox&gt; &lt;/object&gt; &lt;object&gt; &lt;name&gt;apple&lt;/name&gt; &lt;pose&gt;Unspecified&lt;/pose&gt; &lt;truncated&gt;0&lt;/truncated&gt; &lt;difficult&gt;0&lt;/difficult&gt; &lt;bndbox&gt; &lt;xmin&gt;367&lt;/xmin&gt; &lt;ymin&gt;17&lt;/ymin&gt; &lt;xmax&gt;619&lt;/xmax&gt; &lt;ymax&gt;240&lt;/ymax&gt; &lt;/bndbox&gt; &lt;/object&gt; &lt;object&gt; &lt;name&gt;apple&lt;/name&gt; &lt;pose&gt;Unspecified&lt;/pose&gt; &lt;truncated&gt;0&lt;/truncated&gt; &lt;difficult&gt;0&lt;/difficult&gt; &lt;bndbox&gt; &lt;xmin&gt;642&lt;/xmin&gt; &lt;ymin&gt;35&lt;/ymin&gt; &lt;xmax&gt;907&lt;/xmax&gt; &lt;ymax&gt;269&lt;/ymax&gt; &lt;/bndbox&gt; &lt;/object&gt;&lt;/annotation&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657import csvimport xml.etree.ElementTree as ETimport osdef createall(): filepath = "...\datasets\\fruit-detection\Annotations" pathdir = os.listdir(filepath) List = [] for file in pathdir: temppath = filepath + '\\' + file tree = ET.parse(temppath) root = tree.getroot() for i in root.iter('object'): temp = [] temp.append("...\datasets\\fruit-detection\JPEGImages\\"+file.split('.')[0]+'.jpg') for j in i.find('bndbox'): temp.append(j.text) temp.append(root.find('object').find('name').text) List.append(temp) write("all", List)def write(name, row): with open(name + '.csv', 'w', newline='')as csvfile: writer = csv.writer(csvfile) for c in row: writer.writerow(c)def createsplit(): trainfile = open("...\datasets\\fruit-detection\ImageSets\Main\\train.txt") allcsv = open("./all.csv") List = allcsv.read().splitlines() lines = trainfile.readlines() lines = [i.strip() for i in lines] trainfile.close() allcsv.close() trainlist = [] vallist = [] for i in List: if i.strip().split('.')[0].split('\\')[-1] in lines: trainlist.append(i.split(',')) else: vallist.append(i.split(',')) write("train", trainlist) write("val", vallist)def createclass(): L = [['apple', 0], ['banana', 1], ['orange', 2]] write('classes', L)# write("all", List)# createaplit()createsplit() è®­ç»ƒ Unexpected bus error encountered in worker. This might be caused by insufficient shared memory (shm) å‡ºçŽ°è¿™ä¸ªé”™è¯¯çš„æƒ…å†µæ˜¯ï¼Œåœ¨æœåŠ¡å™¨ä¸Šçš„dockerä¸­è¿è¡Œè®­ç»ƒä»£ç æ—¶ï¼Œbatch sizeè®¾ç½®å¾—è¿‡å¤§ï¼Œshared memoryä¸å¤Ÿï¼ˆå› ä¸ºdockeré™åˆ¶äº†shmï¼‰.è§£å†³æ–¹æ³•æ˜¯ï¼Œå°†Dataloaderçš„num_workersè®¾ç½®ä¸º0. 1CUDA_VISIBLE_DEVICES=4 python ./train.py --dataset csv --csv_train ./csv/train1.csv --csv_classes ./csv/classes.csv --csv_val ./csv/val1.csv Attempted to read a PyTorch file with version 3, but the maximum supported version for reading is 2. å› ä¸ºæœåŠ¡å™¨ç‰ˆæœ¬å’Œæœ¬æœºç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä½†æ›´æ–°äº†condaè¿˜æ˜¯ä¸è¡Œ ä¿®æ”¹visualize_single_image 1234# cv2.imshow('detections', image_orig)# cv2.waitKey(0)print(img_name)cv2.imwrite('./fruit_results/&#123;&#125;.png'.format(img_name.split('.')[0]), image_orig) ç›´æŽ¥å°†å›¾ç‰‡ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Š 1CUDA_VISIBLE_DEVICES=4 python ./visualize_single_image.py --image_dir ./visual_fruit --model_path ./checkpoint/model_final.pt --class_list ./fruit_classes_list.csv â€‹ â€‹]]></content>
      <categories>
        <category>AI</category>
        <category>CV</category>
        <category>ç›®æ ‡æ£€æµ‹</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>CV</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[EfficientDet]]></title>
    <url>%2F2020%2F10%2F28%2FEfficientDet%2F</url>
    <content type="text"><![CDATA[EfficientNetEfficientNet: Rethinking Model Scaling for Convolutional Neural Networksè®ºæ–‡é“¾æŽ¥ï¼š https://arxiv.org/pdf/1905.11946.pdfå®˜æ–¹æºç ï¼š https://github.com/tensorflow/tpu/tree/master/models/official/efficientnetç¬¬ä¸‰æ–¹PyTorchæºç ï¼š https://github.com/lukemelas/EfficientNet-PyTorch ç®€ä»‹ ä¸€èˆ¬æƒ…å†µä¸‹é€šè¿‡æ‰©å¤§ç½‘ç»œæ·±åº¦ã€å®½åº¦ã€åˆ†è¾¨çŽ‡ï¼ˆå¦‚Gpipeé‡‡ç”¨480*480çš„å›¾åƒï¼‰ æ¥æå‡æ¨¡åž‹ç²¾åº¦ã€‚ä½œè€…æå‡ºäº†ä¸€ç§compound scaling method ï¼Œç»¼åˆè€ƒè™‘æ·±åº¦ã€å®½åº¦ã€åˆ†è¾¨çŽ‡ã€‚ Depthã€Widthã€Resolution ä¸€ä¸ªå·ç§¯å±‚$i$å¯ä»¥è¢«å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°ï¼š$Y_i = F_i ( X_i )$ï¼Œå…¶ä¸­æ˜¯$F_i$å·ç§¯æ“ä½œï¼Œ$Y_i$æ˜¯è¾“å‡ºçš„å¼ é‡ï¼Œ$X_i$æ˜¯è¾“å…¥çš„å¼ é‡ä¸”å¼ é‡çš„å½¢çŠ¶ä¸º$(H_i, W_i, C_i)$ã€‚æ­¤å¤–CNNé€šå¸¸è¢«åˆ’åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µçš„æ‰€æœ‰å±‚ç»“æž„æ˜¯ç›¸åŒçš„ï¼Œæ¯”å¦‚ResNetä¸­æœ‰äº”ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µçš„æ‰€æœ‰å±‚éƒ½å…·æœ‰ç›¸åŒçš„å·ç§¯ç±»åž‹ï¼Œé™¤äº†ç¬¬ä¸€å±‚æ‰§è¡Œä¸‹é‡‡æ ·ã€‚å› æ­¤ä¸€ä¸ªç¥žç»ç½‘ç»œ$N$å¯ä»¥è¡¨ç¤ºä¸ºå…¶ä¸­$F_i^{L_i}$è¡¨ç¤ºåœ¨ç¬¬$i$ä¸ªé˜¶æ®µçš„ç¬¬$L_i$æ¬¡é‡å¤çš„$F_i$å±‚ï¼Œ$(H_i,W_i,C_i)$æ˜¯ç¬¬$i$å±‚è¾“å…¥çš„å¼ é‡$X$å½¢çŠ¶ã€‚ä¸åŒäºŽä¹‹å‰æ™®é€šçš„ç½‘ç»œè®¾è®¡æ˜¯é›†ä¸­åœ¨å¯»æ‰¾æ›´å¥½çš„$F_i$å±‚æž¶æž„ï¼Œæ¨¡åž‹ç¼©æ”¾åˆ™æ˜¯æ‰©å±•ç½‘ç»œé•¿åº¦ã€å®½åº¦å’Œåˆ†è¾¨çŽ‡($H_i,W_i$ï¼‰è€Œä¸æ”¹å˜baselineç½‘ç»œä¸­çš„$F_i$ã€‚ä¸ºäº†è¿›ä¸€æ­¥å‡å°‘è®¾è®¡ç©ºé—´çš„å¤§å°ï¼Œé™åˆ¶æ‰€æœ‰å‚æ•°å¿…é¡»ä»¥æ’å®šçš„æ¯”ä¾‹å‡åŒ€åœ°ç¼©æ”¾ã€‚ç›®æ ‡æ˜¯ä¸ºäº†åœ¨ç»™å®šèµ„æºé™åˆ¶æ—¶æœ€å¤§åŒ–æ¨¡åž‹ç²¾åº¦ï¼Œå¯ä»¥è¢«å®šä¹‰ä¸ºä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼šå…¶ä¸­$w,d,r$æ˜¯å¯¹ç½‘ç»œçš„å®½åº¦ã€æ·±åº¦å’Œåˆ†è¾¨çŽ‡ç¼©æ”¾çš„å‚æ•°ï¼Œ$\hat{F_i},\hat{L_i},\hat{H_i},\hat{W_i},\hat{C_i}$æ˜¯baselineç½‘ç»œä¸­é¢„å…ˆå®šä¹‰å¥½çš„å‚æ•° é€šè¿‡å¢žåŠ å®½åº¦ã€æ·±åº¦ã€åˆ†è¾¨çŽ‡éƒ½å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šæå‡å‡†ç¡®çŽ‡ã€‚ä½†æ˜¯å¯¹äºŽå¤§åž‹ç½‘ç»œæå‡æœ‰é™ï¼ˆResNet 1000 å’Œ ResNet 101å‡†å¤‡çŽ‡ç›¸ä¼¼ï¼‰ å¯ä»¥çœ‹åˆ°å½“ç²¾åº¦è¾¾åˆ°80%å·¦å³æ—¶ä¼šé¥±å’Œã€‚ Compound scaling method $Î±,Î²,Î³$æ˜¯å¯ä»¥é€šè¿‡å°åž‹ç½‘æ ¼æœç´¢ç¡®å®šçš„å¸¸é‡ï¼Œè€Œ$Ï•$ä»Žç›´è§‚ä¸Šè§£é‡Šæ˜¯æ˜¯ç”¨æˆ·æŒ‰ç…§èƒ½å¤Ÿæä¾›çš„é¢å¤–è®¡ç®—èµ„æºå¼€é”€ï¼ˆç›¸å¯¹äºŽbaselineå°†ç½‘ç»œæ‰©å±•æ—¶éœ€è¦é¢å¤–è®¡ç®—èµ„æºï¼‰çš„å¤šå°‘æ¥æŒ‡å®šçš„å‚æ•°ã€‚$Î± , Î² , Î³$åˆ™æ˜¯ç¡®å®šå¦‚ä½•åˆ†åˆ«ä¸ºç½‘ç»œå®½åº¦ã€æ·±åº¦å’Œåˆ†è¾¨çŽ‡åˆ†é…è¿™äº›é¢å¤–èµ„æºã€‚ å¸¸è§„å·ç§¯è¿ç®—çš„FLOPSä¸Ž$d,w^2,r^2$æˆæ­£æ¯”ï¼Œä¾‹å¦‚å°†ç½‘ç»œæ·±åº¦åŠ å€ä¼šåŠ å€FLOPSï¼Œè€Œå°†ç½‘ç»œå®½åº¦æˆ–è€…åˆ†è¾¨çŽ‡åŠ å€ä¼šä½¿å¾—FLOPSå¤§è‡´å¢žåŠ å››å€ï¼Œå› æ­¤ç”¨ä¸Šè¿°å…¬å¼å¯¹ç½‘ç»œè¿›è¡Œç¼©æ”¾æ—¶ï¼Œä¼šä½¿å¾—æ€»ä½“FLOPSå¢žåŠ å¤§çº¦$(\alpha\cdot\beta^2\cdot\gamma^2)^Ï•$å€ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œé€šè¿‡çº¦æŸ$ \alpha\cdot\beta^2\cdot\gamma^2\approx2$ä½¿å¾—å¯¹ä»»æ„çš„$\phi$æ•´ä½“çš„FLOPSå°†ä¼šå¢žåŠ $2^\phi$å€ EfficientNet Architectureé¦–å…ˆä½œè€…ä½¿ç”¨MnasNetçš„æ–¹æ³•ï¼Œåˆ©ç”¨å¤šç›®æ ‡ç¥žç»ç½‘ç»œæž¶æž„æœç´¢ï¼ŒåŒæ—¶ä¼˜åŒ–å‡†ç¡®çŽ‡å’ŒFLOPSï¼Œå¾—åˆ°äº†FLOPSä¸º400Mçš„baselineç½‘ç»œEfficientNet-B0ï¼Œç½‘ç»œæž¶æž„å¦‚ä¸‹è¡¨ ç„¶åŽä»Žè¿™ä¸ªbaselineç€æ‰‹ï¼Œä½¿ç”¨ä¸¤ä¸ªæ­¥éª¤ï¼š STEP 1ï¼š å›ºå®š$\phi=1$ï¼Œå³å‡è®¾æœ‰ä¸¤å€ä»¥ä¸Šçš„å¯ç”¨èµ„æºï¼Œå¹¶åšä¸€ä¸ªå°çš„ç½‘æ ¼æœç´¢å¾—åˆ°äº†æœ€ä½³å€¼$Î± = 1.2 , Î² = 1.1 , Î³ = 1.15$ï¼Œåœ¨$\alpha\cdot\beta^2\cdot\gamma^2\approx2$çš„çº¦æŸä¸‹ã€‚è¿™æ ·åšçš„åŽŸå› æ˜¯å› ä¸ºåœ¨å¤§æ¨¡åž‹ä¸Šæœç´¢æˆæœ¬å¤ªé«˜äº†ã€‚ STEP 2ï¼š å›ºå®š$\alpha,\beta,\gamma$å¹¶ä½¿ç”¨ä¸åŒçš„$\phi$å¯¹baselineç½‘ç»œè¿›è¡Œæ‰©å±•ï¼Œå¾—åˆ°äº†EfficientNet-B1åˆ°B7 ç»“æžœ å¯¹MobileNetå’ŒResNeté‡‡ç”¨è¿™ç§æ–¹æ³•è¿›è¡Œç½‘ç»œæ‰©å±• åœ¨ImageNetä¸Šçš„æ¨¡åž‹å‚æ•°é‡ä¸Žç²¾åº¦å¯¹æ¯”å›¾ åœ¨å…¶å®ƒæ•°æ®é›†ä¸Šè¿ç§»å­¦ä¹ çš„æ•ˆæžœï¼Œåœ¨5ä¸ªæ•°æ®é›†ä¸Šè¾¾åˆ°äº†SOTAï¼Œå‚æ•°å¹³å‡å‡å°‘9.6å€ã€‚ å¯ä»¥çœ‹å‡ºå¤åˆç¼©æ”¾æ–¹æ³•æ¯”ä»»ä½•å•ä¸€æ•ˆæžœéƒ½å¥½ EfficientDet: Scalable and Efficient Object Detectionä»£ç  EfficientDet-D7 ï¼šåœ¨ 326B FLOPSï¼Œå‚æ•°é‡ 52 Mçš„æƒ…å†µä¸‹ï¼ŒCOCO 2017 validation æ•°æ®é›†ä¸Šå–å¾—äº† 51.0 çš„ mAPï¼Œstate-of-the-art çš„ç»“æžœã€‚å’Œ AmoebaNet + NAS-FPN ç›¸æ¯”ï¼ŒFLOPS ä»…ä¸ºå…¶ååˆ†ä¹‹ä¸€çš„æƒ…å†µä¸‹å–å¾—äº†æ›´å¥½çš„ç»“æžœ æœ¬æ–‡é¦–å…ˆæå‡ºäº†ä¸¤ä¸ªæŒ‘æˆ˜ï¼š efficient multi-scale feature fusion .ä¹‹å‰çš„å¤šå°ºåº¦ç‰¹å¾èžåˆæ–¹å¼FPNã€PANetã€NAS_FPNç­‰ï¼Œåœ¨èžåˆä¸åŒçš„è¾“å…¥ç‰¹å¾æ—¶ï¼Œåªæ˜¯ä¸åŠ åŒºåˆ†åœ°ç®€å•ç›¸åŠ ã€‚ä½†æ˜¯ï¼Œç”±äºŽè¿™äº›ä¸åŒè¾“å…¥ç‰¹å¾çš„åˆ†è¾¨çŽ‡ä¸åŒï¼Œé€šå¸¸å®ƒä»¬å¯¹èžåˆåŽçš„è¾“å‡ºç‰¹å¾çš„è´¡çŒ®ä¸å¹¶ç›¸åŒã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡æå‡ºåŒå‘åŠ æƒç‰¹å¾é‡‘å­—å¡”ç½‘ç»œï¼ˆweighted bi-directional feature pyramid network (BiFPN) ï¼‰ï¼Œå®ƒä½¿ç”¨äº†å¯å­¦ä¹ çš„æƒé‡ï¼Œæ¥å­¦ä¹ ä¸åŒè¾“å…¥ç‰¹å¾çš„è´¡çŒ®ï¼Œå¹¶é‡å¤åº”ç”¨åœ¨è‡ªä¸Šè€Œä¸‹å’Œè‡ªä¸‹è€Œä¸Šçš„å¤šå°ºåº¦ç‰¹å¾èžåˆä¸­ã€‚ model scaling. å€ŸåŠ©ä¹‹å‰æå‡ºçš„EfficientNetç½‘ç»œï¼Œæå‡ºäº†åº”ç”¨åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸçš„compound scaling methodã€‚å°†EfficientNetçš„ä¸»å¹²ç½‘ç»œä¸ŽBiFPNç»“åˆï¼Œæå‡ºäº†æ–°çš„ç›®æ ‡æ£€æµ‹ç½‘ç»œï¼ŒEfficientDetï¼ŒåŒæ—¶åœ¨è¯­ä¹‰åˆ†å‰²é¢†åŸŸä¹Ÿå–å¾—äº†æ›´å¥½çš„æ•ˆæžœã€‚ BiFPN FPN: NAS-FPN : ä½¿ç”¨neural architecture searchæ¥æœç´¢æ›´å¥½çš„è·¨å°ºåº¦ç‰¹å¾ç½‘ç»œæ‹“æ‰‘ï¼Œä½†æ˜¯åœ¨æœç´¢è¿‡ç¨‹ä¸­éœ€è¦æ•°åƒä¸ªGPUå°æ—¶ï¼Œå¹¶ä¸”ç½‘ç»œæ˜¯ä¸è§„åˆ™çš„ï¼Œéš¾ä»¥è§£é‡Šæˆ–ä¿®æ”¹ã€‚ PANet: åœ¨FPNåŸºç¡€ä¸Šå¢žåŠ äº†é¢å¤–çš„è‡ªä¸‹è€Œä¸Šçš„ç½‘ç»œèžåˆè·¯å¾„ã€‚ ä¸‰ç§æ–¹å¼ä¸­ï¼ŒPANetç²¾åº¦æœ€é«˜ï¼Œä½†æ˜¯å‚æ•°å’Œè®¡ç®—é‡æœ€å¤šã€‚ æœ¬æ–‡æå‡ºçš„ä¼˜åŒ–æ–¹æ³•ï¼š åˆ é™¤åªæœ‰ä¸€ä¸ªè¾“å…¥è¾¹çš„èŠ‚ç‚¹ã€‚ç†ç”±æ˜¯æˆ‘ä»¬çš„ç›®çš„æ˜¯èžåˆä¸åŒç‰¹å¾ï¼Œè€Œåªæœ‰ä¸€ä¸ªè¾“å…¥çš„èŠ‚ç‚¹æ²¡æœ‰è¿›è¡Œç‰¹å¾èžåˆï¼Œå› æ­¤å®ƒçš„è´¡çŒ®è¾ƒå°ã€‚ å¦‚æžœåŽŸå§‹è¾“å…¥èŠ‚ç‚¹å’Œè¾“å‡ºèŠ‚ç‚¹åœ¨åŒä¸€å±‚ï¼Œé‚£ä¹ˆå¢žåŠ ä¸€æ¡é¢å¤–çš„è¾¹ï¼Œä»¥ä¾¿åœ¨ä¸å¢žåŠ è¿‡å¤šcostçš„æƒ…å†µä¸‹èžåˆæ›´å¤šç‰¹å¾ã€‚ å’ŒPANetåªæœ‰ä¸€æ¡top-downå’Œbottom-upè·¯å¾„ä¸åŒï¼Œæˆ‘ä»¬å°†æ¯ä¸€æ¡åŒå‘è·¯å¾„è§†ä¸ºä¸€ä¸ªç‰¹å¾ç½‘ç»œå±‚ï¼Œå¹¶é€šè¿‡å°†è¿™ä¸ªå±‚é‡å¤å¤šæ¬¡æ¥å®žçŽ°æ›´é«˜çº§åˆ«çš„ç‰¹å¾èžåˆã€‚ Weighted Feature Fusionä¸ºäº†è§£å†³ä¸åŒå±‚ç‰¹å¾è´¡çŒ®ä¸åŒçš„é—®é¢˜ï¼Œå¯¹äºŽæ¯ä¸€ä¸ªè¾“å…¥éƒ½å¢žåŠ ä¸€ä¸ªæƒé‡ï¼Œè®©ç½‘ç»œåŽ»å­¦ä¹ ä¸åŒè¾“å…¥ç‰¹å¾çš„é‡è¦æ€§ã€‚åŸºäºŽè¿™ä¸ªæƒ³æ³•ï¼Œæå‡ºäº†ä¸‰ç§åŠ æƒç‰¹å¾èžåˆæ–¹å¼ï¼š Unbounded fusion ï¼š$O=\sum_iw_i.I_i$ï¼Œ$w_i$æ˜¯å¯å­¦ä¹ çš„æƒé‡ï¼Œå½¢å¼å¯ä»¥æ˜¯scalar(pre-feature)ï¼Œvector(per-channel)ï¼Œmulti-dimensional tensor(per-pixel)ï¼Œscalarå¯ä»¥å–å¾—å’Œå…¶ä»–æ–¹æ³•ç›¸è¿‘çš„ç²¾åº¦ï¼Œå¹¶æœ‰ç€æœ€å°çš„costï¼Œä½†æ˜¯scalar weight is unboundedï¼Œæ‰€ä»¥å¯èƒ½å¯¼è‡´è®­ç»ƒä¸ç¨³å®šï¼Œå› æ­¤ï¼Œä½¿ç”¨weight normalizationæ¥é™å®šweightå–å€¼èŒƒå›´ Softmax-based fusionï¼š$O=\sum_i\frac{e^{w_i}}{\sum_je^{w_j}}Â·I_i$ï¼Œç›´è§‚çš„æƒ³æ³•æ˜¯åº”ç”¨Softmaxï¼Œå°†æ‰€æœ‰æƒé‡å½’ä¸€åŒ–åˆ°0~1ï¼Œè¡¨ç¤ºå…¶é‡è¦æ€§ã€‚ä½†æ ¹æ®æ¶ˆèžåˆ†æžï¼Œé¢å¤–çš„Softmaxä¼šå¯¼è‡´GPUå‡é€Ÿã€‚ Fast normalization fusionï¼š$O=\sum_i\frac{w_i}{\epsilon+\sum_jw_j}Â·I_i$ï¼Œé€šè¿‡åœ¨æ¯ä¸ª$w_i$åŽåŠ Reluå±‚æ¥ä¿è¯$w_i\geq0$ï¼ŒåŒæ—¶$\epsilon=0.0001$æ¥é¿å…æ•°å€¼ä¸ç¨³å®šã€‚è¿™æ ·å€¼ä¹Ÿä¼šå½’ä¸€åŒ–ï¼Œä½†å› ä¸ºæ²¡æœ‰Softmaxå±‚ä¼šæ›´åŠ é«˜æ•ˆã€‚é€šè¿‡æ¶ˆèžåˆ†æžè¯æ˜Žè¿™ç§æ–¹æ³•å’ŒåŸºäºŽSoftmaxçš„æ–¹æ³•è¡¨çŽ°å’Œç²¾åº¦ç›¸å½“ï¼Œä½†åœ¨GPUä¸Šä¼šå¿«30%ã€‚ level6 for BiFPN shown in Figure 2(d)ï¼š EfficientDetEfficientDet Architecture Compound Scalingå’ŒEfficientNetä¸åŒçš„æ˜¯ï¼Œå’Œåˆ†ç±»æ¨¡åž‹ç›¸æ¯”ç›®æ ‡æ£€æµ‹æœ‰æ›´å¤šçš„scaling dimensionsï¼Œæ‰€ä»¥åœ¨æ‰€æœ‰dimensionä¸Šè¿›è¡Œgrid searchä»£ä»·è¿‡é«˜ã€‚å› æ­¤é‡‡ç”¨å¯å‘å¼scalingæ–¹æ³•ï¼Œä½†æ€æƒ³ä¸Šä»ç„¶æ˜¯è”åˆæ”¾å¤§æ‰€æœ‰ç»´åº¦ã€‚ Backbone networkï¼šå’ŒEfficientNet B0-B6ä½¿ç”¨ç›¸åŒçš„æ”¾å¤§ç³»æ•°ã€‚ BiFPN networkï¼š Box/class prediction networkï¼šå®ƒçš„å®½åº¦å’ŒBiFPNä¿æŒä¸€è‡´ï¼ˆ$W_{pred}=W_{bifpn}$ï¼‰,æ·±åº¦çº¿æ€§å¢žåŠ ï¼š$D_{box}=D_{class}=3+\left \lfloor \phi/3 \right \rfloor$ Input image resolutionï¼šå› ä¸ºBiFPNä½¿ç”¨äº†3-7å±‚çš„ç‰¹å¾ï¼Œæ‰€ä»¥è¾“å…¥çš„åˆ†è¾¨çŽ‡éœ€è¦èƒ½è¢«$2^7=128$æ•´é™¤ï¼š$R_{input}=512+\phiÂ·128$ï¼Œ åŸºäºŽä»¥ä¸Šä¸‰ä¸ªå…¬å¼ï¼Œæ‹“å±•å¼€å‘äº†EfficientDet D0-D7ã€‚ Ablation StudyDisentangling Backbone and BiFPN BiFPN CrossScale Connections Softmax vs Fast Normalized Fusion Compound Scaling]]></content>
      <categories>
        <category>AI</category>
        <category>CV</category>
        <category>ç›®æ ‡æ£€æµ‹</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>CV</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›®æ ‡æ£€æµ‹æ±‡æ€»]]></title>
    <url>%2F2020%2F10%2F16%2F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[ç›®æ ‡æ£€æµ‹ï¼ˆç‰©ä½“æ£€æµ‹, Object Detection) ä¸“çŸ¥èŸèƒ å…¥é—¨å­¦ä¹  è¿›é˜¶æ–‡ç«  ç»¼è¿° Tutorial è§†é¢‘æ•™ç¨‹ ä»£ç  é¢†åŸŸä¸“å®¶ å…¥é—¨å­¦ä¹  å›¾åƒç›®æ ‡æ£€æµ‹ï¼ˆObject Detectionï¼‰åŽŸç†ä¸Žå®žçŽ° ï¼ˆ1-6ï¼‰ [http://www.voidcn.com/article/p-xnjyqlkj-ua.html] [http://www.voidcn.com/article/p-ypylfzuk-ua.html] [http://www.voidcn.com/article/p-pfihszbt-ua.html] [http://www.voidcn.com/article/p-hcvjcaqy-ua.html] [http://www.voidcn.com/article/p-kjogyjfz-ua.html] [http://www.voidcn.com/article/p-zqfjjomb-u.html] . åŸºäºŽç‰¹å¾å…±äº«çš„é«˜æ•ˆç‰©ä½“æ£€æµ‹ Faster R-CNNå’ŒResNetçš„ä½œè€…ä»»å°‘å¿ åšå£«æ¯•ä¸šè®ºæ–‡ ä¸­æ–‡ [https://pan.baidu.com/s/1gfxTbNl] R-CNNï¼šè®ºæ–‡ç¬”è®° [http://www.cnblogs.com/kingstrong/p/4969472.html], [http://blog.gater.vip/articles/2015/11/02/1478607351098.html] Fast-RCNN: æ·±åº¦å­¦ä¹ ç‰©ä½“æ£€æµ‹ï¼ˆä¸‰ï¼‰â€”â€”FAST-RCNNï¼š [http://www.itwendao.com/article/detail/374785.html] Fast-RCNN:[https://zhuanlan.zhihu.com/p/24780395] Faster-RCNN: [http://blog.csdn.net/zy1034092330/article/details/62044941] FPN: Feature Pyramid Networks for Object Detection è®ºæ–‡ç¬”è®°ï¼š [http://blog.csdn.net/jesse_mx/article/details/54588085] CVPR 2017è®ºæ–‡è§£è¯»ï¼šç‰¹å¾é‡‘å­—å¡”ç½‘ç»œFPNï¼š [http://www.sohu.com/a/159780794_465975] FPNï¼ˆfeature pyramid networksï¼‰ç®—æ³•è®²è§£ï¼š [http://blog.csdn.net/u014380165/article/details/72890275] R-FCN: åŸºäºŽåŒºåŸŸçš„å…¨å·ç§¯ç½‘ç»œæ¥æ£€æµ‹ç‰©ä½“: [http://blog.csdn.net/shadow_guo/article/details/51767036] [è¯‘] åŸºäºŽR-FCNçš„ç‰©ä½“æ£€æµ‹: [http://www.jianshu.com/p/db1b74770e52] SSD: Single Shot MultiBox Detectorè®ºæ–‡é˜…è¯»ï¼š [http://blog.csdn.net/u010167269/article/details/52563573] ã€æ·±åº¦å­¦ä¹ ï¼šç›®æ ‡æ£€æµ‹ã€‘RCNNå­¦ä¹ ç¬”è®°(10)ï¼šSSD:Single Shot MultiBox Detectorï¼š [http://blog.csdn.net/smf0504/article/details/52745070] ç¿»è¯‘SSDè®ºæ–‡(Single Shot MultiBox Detector)ï¼Œä»…ä½œäº¤æµï¼š [http://blog.csdn.net/Ai_Smith/article/details/52997456?locationNum=2&amp;fps=1] CNNç›®æ ‡æ£€æµ‹ä¸Žåˆ†å‰²ï¼ˆä¸‰ï¼‰ï¼šSSDè¯¦è§£ï¼š [http://blog.csdn.net/zy1034092330/article/details/72862030] SSDå…³é”®æºç è§£æžï¼š [https://zhuanlan.zhihu.com/p/25100992] YOLO: YOLOï¼šå®žæ—¶å¿«é€Ÿç›®æ ‡æ£€æµ‹ï¼š [https://zhuanlan.zhihu.com/p/25045711] YOLOè¯¦è§£: [https://zhuanlan.zhihu.com/p/25236464] YOLOå‡çº§ç‰ˆï¼šYOLOv2å’ŒYOLO9000è§£æž: [https://zhuanlan.zhihu.com/p/29816334] YOLOå‡çº§ç‰ˆï¼šYOLOv2å’ŒYOLO9000è§£æžï¼š [https://zhuanlan.zhihu.com/p/29816334] YOLO v2ä¹‹æ€»ç»“ç¯‡ï¼ˆlinux+windowsï¼‰ï¼š [http://blog.csdn.net/qq_14845119/article/details/53589282] YOLOv2 è®ºæ–‡ç¬”è®°ï¼š [http://blog.csdn.net/jesse_mx/article/details/53925356] DenseBox:ä½™å‡¯ç‰¹é‚€æŠ¥å‘Šï¼šåŸºäºŽå¯†é›†é¢„æµ‹å›¾çš„ç‰©ä½“æ£€æµ‹æŠ€æœ¯é€ å°±å…¨çƒé¢†å…ˆçš„ADASç³»ç»Ÿ [http://mp.weixin.qq.com/s/9Z9mO3DJ7uPuirMAbPkDcw] PVANET: Deep but Lightweight Neural Networks for Real-time Object Detection - [http://www.cnblogs.com/xueyuxiaolang/p/5959442.html] æ·±åº¦å­¦ä¹ è®ºæ–‡ç¬”è®°ï¼šDSSD - [http://jacobkong.github.io/posts/2938514597/] DSOD å¤æ—¦å¤§å­¦Ph.Dæ²ˆå¿—å¼ºï¼šç”¨äºŽç›®æ ‡æ£€æµ‹çš„DSODæ¨¡åž‹ï¼ˆICCV 2017ï¼‰ | åˆ†äº«æ€»ç»“: [http://www.sohu.com/a/198226907_114877] ç›®æ ‡æ£€æµ‹â€”DSOD: Learning Deeply Supervised Object Detectors from Scratchï¼š [http://blog.csdn.net/zhangjunhit/article/details/77247695] Focal Loss: Focal Loss: [http://blog.csdn.net/u014380165/article/details/77019084] è¯»Focal Loss: [https://zhuanlan.zhihu.com/p/28873248] Soft-NMS: ä¸€è¡Œä»£ç æ”¹è¿›NMS: [http://blog.csdn.net/shuzfan/article/details/71036040] OHEM: è®ºæ–‡ç¬”è®° OHEM: Training Region-based Object Detectors with Online Hard Example Mining: [http://blog.csdn.net/u012905422/article/details/52760669] Mask-RCNN 2017: Mask-RCNN 2017: [http://blog.csdn.net/inuchiyo_china/article/details/70860939] ç›®æ ‡æ£€æµ‹åˆ†å‰²â€”Mask R-CNN: [http://blog.csdn.net/zhangjunhit/article/details/64920075?locationNum=6&amp;fps=1] è§£è¯»|Facebook ä½•å‡¯æ˜Žå‘å¤§æ‹›ï¼šMask R-CNN ç‹™å‡»ç›®æ ‡å®žä¾‹åˆ†å‰²: [http://www.sohu.com/a/130676187_642762] ç›®æ ‡æ£€æµ‹ä¹‹æ¯”è¾ƒ ç›®æ ‡æ£€æµ‹ä¹‹RCNNï¼ŒSPP-NETï¼ŒFast-RCNNï¼ŒFaster-RCNNï¼š [http://lanbing510.info/2017/08/24/RCNN-FastRCNN-FasterRCNN.html] RCNN, Fast-RCNN, Faster-RCNNçš„ä¸€äº›äº‹ï¼š [http://closure11.com/rcnn-fast-rcnn-faster-rcnn%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BA%8B/] æœºå™¨è§†è§‰ç›®æ ‡æ£€æµ‹è¡¥ä¹ è´´ä¹‹R-CNNç³»åˆ— â€” R-CNN, Fast R-CNN, Faster R-CNN ï¼Œ ç›®æ ‡æ£€æµ‹è¡¥ä¹ è´´ä¹‹YOLOå®žæ—¶æ£€æµ‹, You only look once ï¼š [http://nooverfit.com/wp/] ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼šRCNNã€YOLO vs DPMï¼š [https://juejin.im/entry/59564e1f6fb9a06b9c7408f9] å¦‚ä½•è¯„ä»·rcnnã€fast-rcnnå’Œfaster-rcnnè¿™ä¸€ç³»åˆ—æ–¹æ³•ï¼Ÿ: [https://www.zhihu.com/question/35887527] è§†è§‰ç›®æ ‡æ£€æµ‹å’Œè¯†åˆ«ä¹‹è¿‡åŽ»ï¼ŒçŽ°åœ¨åŠå¯èƒ½ [https://zhuanlan.zhihu.com/p/27546796] è¿›é˜¶æ–‡ç«  Deep Neural Networks for Object Detection ï¼ˆåŸºäºŽDNNçš„å¯¹è±¡æ£€æµ‹ï¼‰NIPS2013: [https://cis.temple.edu/~yuhong/teach/2014_spring/papers/NIPS2013_DNN_OD.pdf] R-CNN Rich feature hierarchies for accurate object detection and semantic segmentation: [https://arxiv.org/abs/1311.2524] Fast R-CNN : [http://arxiv.org/abs/1504.08083] Faster R-CNN Faster R-CNN: Towards Real-Time Object Detection with Region Proposal Networks: [http://arxiv.org/abs/1506.01497] Scalable Object Detection using Deep Neural Networks [http://arxiv.org/abs/1312.2249] Scalable, High-Quality Object Detection [http://arxiv.org/abs/1412.1441] SPP-Net Spatial Pyramid Pooling in Deep Convolutional Networks for Visual Recognition [http://arxiv.org/abs/1406.4729] DeepID-Net DeepID-Net: Deformable Deep Convolutional Neural Networks for Object Detection [http://www.ee.cuhk.edu.hk/%CB%9Cwlouyang/projects/imagenetDeepId/index.html] Object Detectors Emerge in Deep Scene CNNs [http://arxiv.org/abs/1412.6856] segDeepM: Exploiting Segmentation and Context in Deep Neural Networks for Object Detection [https://arxiv.org/abs/1502.04275] Object Detection Networks on Convolutional Feature Maps [http://arxiv.org/abs/1504.06066] Improving Object Detection with Deep Convolutional Networks via Bayesian Optimization and Structured Prediction [http://arxiv.org/abs/1504.03293] DeepBox: Learning Objectness with Convolutional Networks [http://arxiv.org/abs/1504.03293] Object detection via a multi-region &amp; semantic segmentation-aware CNN model [http://arxiv.org/abs/1505.01749] You Only Look Once: Unified, Real-Time Object Detection [http://arxiv.org/abs/1506.02640] YOLOv2 YOLO9000: Better, Faster, Stronger [https://arxiv.org/abs/1612.08242] AttentionNet: Aggregating Weak Directions for Accurate Object Detection [http://arxiv.org/abs/1506.07704] DenseBox: Unifying Landmark Localization with End to End Object Detection [http://arxiv.org/abs/1509.04874] SSD: Single Shot MultiBox Detector [http://arxiv.org/abs/1512.02325] DSSD : Deconvolutional Single Shot Detector [https://arxiv.org/abs/1701.06659] G-CNN: an Iterative Grid Based Object Detector [http://arxiv.org/abs/1512.07729] HyperNet: Towards Accurate Region Proposal Generation and Joint Object Detection [http://arxiv.org/abs/1604.00600] A MultiPath Network for Object Detection [http://arxiv.org/abs/1604.02135] R-FCN: Object Detection via Region-based Fully Convolutional Networks [http://arxiv.org/abs/1605.06409] A Unified Multi-scale Deep Convolutional Neural Network for Fast Object Detection [http://arxiv.org/abs/1607.07155] PVANET: Deep but Lightweight Neural Networks for Real-time Object Detection [http://arxiv.org/abs/1608.08021] Feature Pyramid Networks for Object Detection [https://arxiv.org/abs/1612.03144] Learning Chained Deep Features and Classifiers for Cascade in Object Detection [https://arxiv.org/abs/1702.07054] DSOD: Learning Deeply Supervised Object Detectors from Scratch [https://arxiv.org/abs/1708.01241] Focal Loss for Dense Object Detection ICCV 2017 Best student paper award. Facebook AI Research [https://arxiv.org/abs/1708.02002] Mask-RCNN 2017 ICCV 2017 Best paper award. Facebook AI Research http://arxiv.org/abs/1703.06870 ç»¼è¿° æ·±åº¦å­¦ä¹ ä¹‹ â€œç‰©ä½“æ£€æµ‹â€ æ–¹æ³•æ¢³ç† [http://zhwhong.ml/2017/02/24/Detection-CNN/] åœ°å¹³çº¿é»„æŽè¶…å¼€è®²ï¼šæ·±åº¦å­¦ä¹ å’Œç‰©ä½“æ£€æµ‹ï¼ï¼š [http://www.sohu.com/a/163460329_642762] å¯¹è¯CVPR2016ï¼šç›®æ ‡æ£€æµ‹æ–°è¿›å±•ï¼š [https://zhuanlan.zhihu.com/p/21533724] åŸºäºŽæ·±åº¦å­¦ä¹ çš„ç›®æ ‡æ£€æµ‹æŠ€æœ¯æ¼”è¿›ï¼šR-CNNã€Fast R-CNNã€Faster R-CNNï¼š [http://www.cnblogs.com/skyfsm/p/6806246.html] åŸºäºŽæ·±åº¦å­¦ä¹ çš„ç›®æ ‡æ£€æµ‹ç ”ç©¶è¿›å±• [https://mp.weixin.qq.com/s/RxogMJ86FkQHrzaF4SxFNQ] è®²å ‚å¹²è´§No.1ï½œå±±ä¸–å…‰ï¼åŸºäºŽæ·±åº¦å­¦ä¹ çš„ç›®æ ‡æ£€æµ‹æŠ€æœ¯è¿›å±•ä¸Žå±•æœ› [https://mp.weixin.qq.com/s/NV2hWofOCractLt45-wI1A] Tutorial CVPRâ€™17 Tutorial Deep Learning for Objects and Scenes by Kaiming He Ross Girshick [http://deeplearning.csail.mit.edu/] ICCV 2015 Tools for Efficient Object Detection [http://mp7.watson.ibm.com/ICCV2015/ObjectDetectionICCV2015.html] Object Detection [http://class.inrialpes.fr/tutorials/triggs-icvss1.pdf] Image Recognition and Object Detection : Part 1 [https://www.learnopencv.com/image-recognition-and-object-detection-part1/] R-CNN for Object Detection [https://courses.cs.washington.edu/courses/cse590v/14au/cse590v_wk1_rcnn.pdf\] è§†é¢‘æ•™ç¨‹ cs231 ç¬¬11è®² Detection and Segmentation PPT ï¼š[http://cs231n.stanford.edu/slides/2017/cs231n_2017_lecture11.pdf\] è§†é¢‘ï¼š[https://www.youtube.com/watch?v=nDPWywWRIRo&amp;list=PL3FW7Lu3i5JvHM8ljYj-zLfQRF3EO8sYv] Deep Learning for Instance-level Object Understanding by Ross Girshick. PPTï¼š[http://deeplearning.csail.mit.edu/instance_ross.pdf\] è§†é¢‘ï¼š[https://youtu.be/jHv37mKAhV4?t=2349] ä»£ç  R-CNN [https://github.com/rbgirshick/rcnn] Fast R-CNN: [https://github.com/rbgirshick/fast-rcnn] github(â€œFast R-CNN in MXNetâ€): https://github.com/precedenceguo/mx-rcnn github: https://github.com/mahyarnajibi/fast-rcnn-torch github: https://github.com/apple2373/chainer-simple-fast-rnn github: https://github.com/zplizzi/tensorflow-fast-rcnn Faster R-CNN github(official, Matlab): https://github.com/ShaoqingRen/faster_rcnn github: https://github.com/rbgirshick/py-faster-rcnn github: https://github.com/mitmul/chainer-faster-rcnn github: https://github.com/andreaskoepf/faster-rcnn.torch github: https://github.com/ruotianluo/Faster-RCNN-Densecap-torch github: https://github.com/smallcorgi/Faster-RCNN_TF github: https://github.com/CharlesShang/TFFRCNN github(C++ demo): https://github.com/YihangLou/FasterRCNN-Encapsulation-Cplusplus github: https://github.com/yhenon/keras-frcnn SPP-Net [https://github.com/ShaoqingRen/SPP_net\] YOLO github: https://github.com/gliese581gg/YOLO_tensorflow github: https://github.com/xingwangsfu/caffe-yolo github: https://github.com/frankzhangrui/Darknet-Yolo github: https://github.com/BriSkyHekun/py-darknet-yolo github: https://github.com/tommy-qichang/yolo.torch github: https://github.com/frischzenger/yolo-windows github: https://github.com/AlexeyAB/yolo-windows github: https://github.com/nilboy/tensorflow-yolo YOLOv2 github(Chainer): https://github.com/leetenki/YOLOv2 github(Keras): https://github.com/allanzelener/YAD2K github(PyTorch): https://github.com/longcw/yolo2-pytorch github(Tensorflow): https://github.com/hizhangp/yolo_tensorflow github(Windows): https://github.com/AlexeyAB/darknet github: https://github.com/choasUp/caffe-yolo9000 github: https://github.com/philipperemy/yolo-9000 SSD github: https://github.com/zhreshold/mxnet-ssd github: https://github.com/zhreshold/mxnet-ssd.cpp github: https://github.com/rykov8/ssd_keras github: https://github.com/balancap/SSD-Tensorflow github: https://github.com/amdegroot/ssd.pytorch github(Caffe): https://github.com/chuanqi305/MobileNet-SSD Recurrent Scale Approximation for Object Detection in CNN [https://github.com/sciencefans/RSA-for-object-detection] Mask-RCNN 2017 Keras [https://github.com/matterport/Mask_RCNN\] TensorFlow [https://github.com/CharlesShang/FastMaskRCNN] Pytorch [https://github.com/felixgwu/mask_rcnn_pytorch\] caffe [https://github.com/jasjeetIM/Mask-RCNN] MXNet [https://github.com/TuSimple/mx-maskrcnn] é¢†åŸŸä¸“å®¶ Ross Girshick (rbg å¤§ç¥ž) [http://www.rossgirshick.info/] Kaiming He, Facebookäººå·¥æ™ºèƒ½å®žéªŒå®¤ç§‘å­¦å®¶Kaiming He [http://kaiminghe.com/] Shaoqing Ren [http://shaoqingren.com/] Jian Sun [http://www.jiansun.org/] phdï¼Œzdz]]></content>
      <categories>
        <category>AI</category>
        <category>CV</category>
        <category>ç›®æ ‡æ£€æµ‹</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>CV</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›®æ ‡æ£€æµ‹äº”]]></title>
    <url>%2F2020%2F10%2F16%2F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%BA%94%2F</url>
    <content type="text"><![CDATA[ç›®æ ‡æ£€æµ‹äº”SSDSSDï¼Œå…¨ç§°Single Shot MultiBox Detectorï¼Œæ˜¯Wei Liuåœ¨ECCV 2016ä¸Šæå‡ºçš„ä¸€ç§ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œæˆªè‡³ç›®å‰æ˜¯ä¸»è¦çš„æ£€æµ‹æ¡†æž¶ä¹‹ä¸€ï¼Œç›¸æ¯”Faster RCNNæœ‰æ˜Žæ˜¾çš„é€Ÿåº¦ä¼˜åŠ¿ï¼Œç›¸æ¯”YOLOåˆæœ‰æ˜Žæ˜¾çš„mAPä¼˜åŠ¿ï¼ˆä¸è¿‡å·²ç»è¢«CVPR 2017çš„YOLO9000è¶…è¶Šï¼‰ã€‚ è®ºæ–‡é“¾æŽ¥ï¼šhttps://arxiv.org/abs/1512.02325 è®ºæ–‡ç¿»è¯‘ï¼šhttps://blog.csdn.net/denghecsdn/article/details/77429978 è®ºæ–‡è¯¦è§£ï¼šhttps://blog.csdn.net/WZZ18191171661/article/details/79444217 è®ºæ–‡ä»£ç ï¼šhttps://github.com/balancap/SSD-Tensorflow é¡¹ç›®å‚è€ƒï¼šhttps://blog.csdn.net/zzz_cming/article/details/81128460 å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/33544892 å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/31427288 SSDå…·æœ‰å¦‚ä¸‹ä¸»è¦ç‰¹ç‚¹ï¼š ä»ŽYOLOä¸­ç»§æ‰¿äº†å°†detectionè½¬åŒ–ä¸ºregressionçš„æ€è·¯ï¼Œä¸€æ¬¡å®Œæˆç›®æ ‡å®šä½ä¸Žåˆ†ç±» åŸºäºŽFaster RCNNä¸­çš„Anchorï¼Œæå‡ºäº†ç›¸ä¼¼çš„Prior boxï¼› åŠ å…¥åŸºäºŽç‰¹å¾é‡‘å­—å¡”ï¼ˆPyramidal Feature Hierarchyï¼‰çš„æ£€æµ‹æ–¹å¼ï¼Œå³åœ¨ä¸åŒæ„Ÿå—é‡Žçš„feature mapä¸Šé¢„æµ‹ç›®æ ‡ï¼ˆFPNæ€è·¯ï¼‰ ç½‘ç»œç»“æž„ ç®—æ³•æ­¥éª¤ è¾“å…¥ä¸€å¹…å›¾ç‰‡ï¼ˆ300x300ï¼‰ï¼Œå°†å…¶è¾“å…¥åˆ°é¢„è®­ç»ƒå¥½çš„åˆ†ç±»ç½‘ç»œä¸­æ¥èŽ·å¾—ä¸åŒå¤§å°çš„ç‰¹å¾æ˜ å°„ï¼Œä¿®æ”¹äº†ä¼ ç»Ÿçš„VGG16ç½‘ç»œï¼› å°†VGG16çš„FC6å’ŒFC7å±‚è½¬åŒ–ä¸ºå·ç§¯å±‚ï¼Œå¦‚å›¾1ä¸Šçš„Conv6å’ŒConv7ï¼› åŽ»æŽ‰æ‰€æœ‰çš„Dropoutå±‚å’ŒFC8å±‚ï¼› æ·»åŠ äº†Atrousç®—æ³•ï¼ˆholeç®—æ³•ï¼‰ï¼› å°†Pool5ä»Ž2x2-S2å˜æ¢åˆ°3x3-S1ï¼› æŠ½å–Conv4_3ã€Conv7ã€Conv8_2ã€Conv9_2ã€Conv10_2ã€Conv11_2å±‚çš„feature mapï¼Œç„¶åŽåˆ†åˆ«åœ¨è¿™äº›feature mapå±‚ä¸Šé¢çš„æ¯ä¸€ä¸ªç‚¹æž„é€ 6ä¸ªä¸åŒå°ºåº¦å¤§å°çš„bboxï¼Œç„¶åŽåˆ†åˆ«è¿›è¡Œæ£€æµ‹å’Œåˆ†ç±»ï¼Œç”Ÿæˆå¤šä¸ªbboxï¼Œå¦‚å›¾2æ‰€ç¤ºï¼› å°†ä¸åŒfeature mapèŽ·å¾—çš„bboxç»“åˆèµ·æ¥ï¼Œç»è¿‡NMSï¼ˆéžæžå¤§å€¼æŠ‘åˆ¶ï¼‰æ–¹æ³•æ¥æŠ‘åˆ¶æŽ‰ä¸€éƒ¨åˆ†é‡å æˆ–è€…ä¸æ­£ç¡®çš„bboxï¼Œç”Ÿæˆæœ€ç»ˆçš„bboxé›†åˆï¼ˆå³æ£€æµ‹ç»“æžœï¼‰ï¼› Prior box å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨ç‰¹å¾å›¾çš„æ¯ä¸ªä½ç½®é¢„æµ‹Kä¸ªbboxï¼Œå¯¹äºŽæ¯ä¸€ä¸ªbboxï¼Œé¢„æµ‹Cä¸ªç±»åˆ«å¾—åˆ†ï¼Œä»¥åŠç›¸å¯¹äºŽPrior box(Default box)çš„4ä¸ªåç§»é‡å€¼ï¼Œè¿™æ ·æ€»å…±éœ€è¦ (C+4)Ã—Kä¸ªé¢„æµ‹å™¨ï¼Œåˆ™åœ¨mÃ—nçš„feature mapä¸Šé¢å°†ä¼šäº§ç”Ÿ (C+4)Ã—KÃ—mÃ—nä¸ªé¢„æµ‹å€¼ å¯¹äºŽæ¯ä¸ªå•å…ƒçš„æ¯ä¸ªå…ˆéªŒæ¡†ï¼Œå…¶éƒ½è¾“å‡ºä¸€å¥—ç‹¬ç«‹çš„æ£€æµ‹å€¼ï¼Œå¯¹åº”ä¸€ä¸ªè¾¹ç•Œæ¡†ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚ç¬¬ä¸€éƒ¨åˆ†æ˜¯å„ä¸ªç±»åˆ«çš„ç½®ä¿¡åº¦æˆ–è€…è¯„åˆ†ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯SSDå°†èƒŒæ™¯ä¹Ÿå½“åšäº†ä¸€ä¸ªç‰¹æ®Šçš„ç±»åˆ«ï¼Œå¦‚æžœæ£€æµ‹ç›®æ ‡å…±æœ‰ $c$ ä¸ªç±»åˆ«ï¼ŒSSDå…¶å®žéœ€è¦é¢„æµ‹ $c+1$ ä¸ªç½®ä¿¡åº¦å€¼ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªç½®ä¿¡åº¦æŒ‡çš„æ˜¯ä¸å«ç›®æ ‡æˆ–è€…å±žäºŽèƒŒæ™¯çš„è¯„åˆ†ã€‚åŽé¢å½“æˆ‘ä»¬è¯´ $c$ ä¸ªç±»åˆ«ç½®ä¿¡åº¦æ—¶ï¼Œè¯·è®°ä½é‡Œé¢åŒ…å«èƒŒæ™¯é‚£ä¸ªç‰¹æ®Šçš„ç±»åˆ«ï¼Œå³çœŸå®žçš„æ£€æµ‹ç±»åˆ«åªæœ‰ $c-1$ ä¸ªã€‚åœ¨é¢„æµ‹è¿‡ç¨‹ä¸­ï¼Œç½®ä¿¡åº¦æœ€é«˜çš„é‚£ä¸ªç±»åˆ«å°±æ˜¯è¾¹ç•Œæ¡†æ‰€å±žçš„ç±»åˆ«ï¼Œç‰¹åˆ«åœ°ï¼Œå½“ç¬¬ä¸€ä¸ªç½®ä¿¡åº¦å€¼æœ€é«˜æ—¶ï¼Œè¡¨ç¤ºè¾¹ç•Œæ¡†ä¸­å¹¶ä¸åŒ…å«ç›®æ ‡ ä½œè€…è®¤ä¸ºä»…ä»…é åŒä¸€å±‚ä¸Šçš„å¤šä¸ªanchoræ¥å›žå½’ï¼Œè¿˜è¿œè¿œä¸å¤Ÿã€‚å› ä¸ºæœ‰å¾ˆå¤§å¯èƒ½è¿™å±‚ä¸Šæ‰€æœ‰anchorçš„IOUéƒ½æ¯”è¾ƒå°ï¼Œå°±æ˜¯è¯´æ‰€æœ‰anchorç¦»ground truthéƒ½æ¯”è¾ƒè¿œï¼Œç”¨è¿™ç§anchoræ¥è®­ç»ƒè¯¯å·®ä¼šå¾ˆå¤§ã€‚ SSDä¸­çš„Defalut boxå’ŒFaster-rcnnä¸­çš„anchoræœºåˆ¶å¾ˆç›¸ä¼¼ã€‚å°±æ˜¯é¢„è®¾ä¸€äº›ç›®æ ‡é¢„é€‰æ¡†ï¼ŒåŽç»­é€šè¿‡softmaxåˆ†ç±»+bounding box regressionèŽ·å¾—çœŸå®žç›®æ ‡çš„ä½ç½®ã€‚å¯¹äºŽä¸åŒå°ºåº¦çš„feature map ä¸Šä½¿ç”¨ä¸åŒçš„Default boxesã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬é€‰å–çš„feature mapåŒ…æ‹¬38x38x512ã€19x19x1024ã€10x10x512ã€5x5x256ã€3x3x256ã€1x1x256ï¼ŒConv4_3ä¹‹åŽçš„feature mapé»˜è®¤çš„boxæ˜¯4ä¸ªï¼Œæˆ‘ä»¬åœ¨38x38çš„è¿™ä¸ªå¹³é¢ä¸Šçš„æ¯ä¸€ç‚¹ä¸Šé¢èŽ·å¾—4ä¸ªboxï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€»å…±å¯ä»¥èŽ·å¾—38x38x4=5776ä¸ªï¼›åŒç†ï¼Œæˆ‘ä»¬ä¾æ¬¡å°†FC7ã€Conv8_2ã€Conv9_2ã€Conv10_2å’ŒConv11_2çš„boxæ•°é‡è®¾ç½®ä¸º6ã€6ã€6ã€4ã€4ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥èŽ·å¾—çš„boxåˆ†åˆ«ä¸º2166ã€600ã€150ã€36ã€4ï¼Œå³æˆ‘ä»¬æ€»å…±å¯ä»¥èŽ·å¾—8732ä¸ªboxï¼Œç„¶åŽæˆ‘ä»¬å°†è¿™äº›boxé€å…¥NMSæ¨¡å—ä¸­ï¼ŒèŽ·å¾—æœ€ç»ˆçš„æ£€æµ‹ç»“æžœã€‚ Prior boxç”Ÿæˆè§„åˆ™ ä»¥feature mapä¸Šæ¯ä¸ªç‚¹çš„ä¸­ç‚¹ä¸ºä¸­å¿ƒï¼ˆoffset=0.5ï¼‰ï¼Œç”Ÿæˆä¸€ç³»åˆ—åŒå¿ƒçš„Defalut boxï¼ˆç„¶åŽä¸­å¿ƒç‚¹çš„åæ ‡ä¼šä¹˜ä»¥stepï¼Œç›¸å½“äºŽä»Žfeature mapä½ç½®æ˜ å°„å›žåŽŸå›¾ä½ç½®ï¼‰ æ­£æ–¹å½¢prior boxæœ€å°è¾¹é•¿ä¸º$min_size$ï¼Œæœ€å¤§è¾¹é•¿ä¸º$\sqrt{min_size*max_size}$ æ¯ä¸€ä¸ªaspect radioä¼šç”Ÿæˆä¸¤ä¸ªé•¿æ–¹å½¢ï¼Œä½¿ç”¨ä¸åŒçš„ratioå€¼ï¼Œ[1, 2, 3, 1/2, 1/3]ï¼Œé•¿å®½ä¸º$\sqrt{aspect_radio}min_size$å’Œ$\frac{1}{\sqrt{aspect_radio}}min_size$ ä½¿ç”¨m(SSD300ä¸­m=6)ä¸ªä¸åŒå¤§å°çš„feature map æ¥åšé¢„æµ‹ï¼Œæœ€åº•å±‚çš„ feature map çš„ scale å€¼ä¸º Smin=0.2ï¼Œæœ€é«˜å±‚çš„ä¸ºSmax=0.9ï¼Œå…¶ä»–å±‚é€šè¿‡ä¸‹é¢çš„å…¬å¼è®¡ç®—å¾—åˆ°ï¼š ç¬¬ä¸€å±‚feature mapå¯¹åº”çš„min_size=S1*300ï¼Œmax_size=S2*300ï¼›ç¬¬äºŒå±‚min_size=S2*300ï¼Œmax_size=S3*300ï¼›å…¶ä»–ç±»æŽ¨ã€‚åœ¨åŽŸæ–‡ä¸­ï¼ŒSmin=0.2ï¼ŒSmax=0.9ï¼Œä½†æ˜¯åœ¨SSD 300ä¸­prior boxè®¾ç½®å¹¶ä¸èƒ½å’Œpaperä¸­ä¸Šè¿°å…¬å¼å¯¹åº”ï¼š è€Œå¯¹äºŽratio=0çš„æƒ…å†µï¼ŒæŒ‡å®šçš„scaleå¦‚ä¸‹æ‰€ç¤ºï¼Œå³æ€»å…±æœ‰ 6 ä¸­ä¸åŒçš„ default boxã€‚ SSDä½¿ç”¨ä½Žå±‚feature mapæ£€æµ‹å°ç›®æ ‡ï¼Œä½¿ç”¨é«˜å±‚feature mapæ£€æµ‹å¤§ç›®æ ‡ å…ˆéªŒæ¡†åŒ¹é…åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆè¦ç¡®å®šè®­ç»ƒå›¾ç‰‡ä¸­çš„ground truthï¼ˆçœŸå®žç›®æ ‡ï¼‰ä¸Žå“ªä¸ªå…ˆéªŒæ¡†æ¥è¿›è¡ŒåŒ¹é…ï¼Œä¸Žä¹‹åŒ¹é…çš„å…ˆéªŒæ¡†æ‰€å¯¹åº”çš„è¾¹ç•Œæ¡†å°†è´Ÿè´£é¢„æµ‹å®ƒã€‚åœ¨Yoloä¸­ï¼Œground truthçš„ä¸­å¿ƒè½åœ¨å“ªä¸ªå•å…ƒæ ¼ï¼Œè¯¥å•å…ƒæ ¼ä¸­ä¸Žå…¶IOUæœ€å¤§çš„è¾¹ç•Œæ¡†è´Ÿè´£é¢„æµ‹å®ƒã€‚ä½†æ˜¯åœ¨SSDä¸­å´å®Œå…¨ä¸ä¸€æ ·ï¼ŒSSDçš„å…ˆéªŒæ¡†ä¸Žground truthçš„åŒ¹é…åŽŸåˆ™ä¸»è¦æœ‰ä¸¤ç‚¹ã€‚é¦–å…ˆï¼Œå¯¹äºŽå›¾ç‰‡ä¸­æ¯ä¸ªground truthï¼Œæ‰¾åˆ°ä¸Žå…¶IOUæœ€å¤§çš„å…ˆéªŒæ¡†ï¼Œè¯¥å…ˆéªŒæ¡†ä¸Žå…¶åŒ¹é…ï¼Œè¿™æ ·ï¼Œå¯ä»¥ä¿è¯æ¯ä¸ªground truthä¸€å®šä¸ŽæŸä¸ªå…ˆéªŒæ¡†åŒ¹é…ã€‚é€šå¸¸ç§°ä¸Žground truthåŒ¹é…çš„å…ˆéªŒæ¡†ä¸ºæ­£æ ·æœ¬ï¼ˆå…¶å®žåº”è¯¥æ˜¯å…ˆéªŒæ¡†å¯¹åº”çš„é¢„æµ‹boxï¼Œä¸è¿‡ç”±äºŽæ˜¯ä¸€ä¸€å¯¹åº”çš„å°±è¿™æ ·ç§°å‘¼äº†ï¼‰ï¼Œåä¹‹ï¼Œè‹¥ä¸€ä¸ªå…ˆéªŒæ¡†æ²¡æœ‰ä¸Žä»»ä½•ground truthè¿›è¡ŒåŒ¹é…ï¼Œé‚£ä¹ˆè¯¥å…ˆéªŒæ¡†åªèƒ½ä¸ŽèƒŒæ™¯åŒ¹é…ï¼Œå°±æ˜¯è´Ÿæ ·æœ¬ã€‚ä¸€ä¸ªå›¾ç‰‡ä¸­ground truthæ˜¯éžå¸¸å°‘çš„ï¼Œ è€Œå…ˆéªŒæ¡†å´å¾ˆå¤šï¼Œå¦‚æžœä»…æŒ‰ç¬¬ä¸€ä¸ªåŽŸåˆ™åŒ¹é…ï¼Œå¾ˆå¤šå…ˆéªŒæ¡†ä¼šæ˜¯è´Ÿæ ·æœ¬ï¼Œæ­£è´Ÿæ ·æœ¬æžå…¶ä¸å¹³è¡¡ï¼Œæ‰€ä»¥éœ€è¦ç¬¬äºŒä¸ªåŽŸåˆ™ã€‚ç¬¬äºŒä¸ªåŽŸåˆ™æ˜¯ï¼šå¯¹äºŽå‰©ä½™çš„æœªåŒ¹é…å…ˆéªŒæ¡†ï¼Œè‹¥æŸä¸ªground truthçš„ $IOU$ å¤§äºŽæŸä¸ªé˜ˆå€¼ï¼ˆä¸€èˆ¬æ˜¯0.5ï¼‰ï¼Œé‚£ä¹ˆè¯¥å…ˆéªŒæ¡†ä¹Ÿä¸Žè¿™ä¸ªground truthè¿›è¡ŒåŒ¹é…ã€‚è¿™æ„å‘³ç€æŸä¸ªground truthå¯èƒ½ä¸Žå¤šä¸ªå…ˆéªŒæ¡†åŒ¹é…ï¼Œè¿™æ˜¯å¯ä»¥çš„ã€‚ä½†æ˜¯åè¿‡æ¥å´ä¸å¯ä»¥ï¼Œå› ä¸ºä¸€ä¸ªå…ˆéªŒæ¡†åªèƒ½åŒ¹é…ä¸€ä¸ªground truthï¼Œå¦‚æžœå¤šä¸ªground truthä¸ŽæŸä¸ªå…ˆéªŒæ¡† $IOU$å¤§äºŽé˜ˆå€¼ï¼Œé‚£ä¹ˆå…ˆéªŒæ¡†åªä¸ŽIOUæœ€å¤§çš„é‚£ä¸ªground truthè¿›è¡ŒåŒ¹é…ã€‚ç¬¬äºŒä¸ªåŽŸåˆ™ä¸€å®šåœ¨ç¬¬ä¸€ä¸ªåŽŸåˆ™ä¹‹åŽè¿›è¡Œï¼Œä»”ç»†è€ƒè™‘ä¸€ä¸‹è¿™ç§æƒ…å†µï¼Œå¦‚æžœæŸä¸ªground truthæ‰€å¯¹åº”æœ€å¤§ $IOU$å°äºŽé˜ˆå€¼ï¼Œå¹¶ä¸”æ‰€åŒ¹é…çš„å…ˆéªŒæ¡†å´ä¸Žå¦å¤–ä¸€ä¸ªground truthçš„ $IOU$å¤§äºŽé˜ˆå€¼ï¼Œé‚£ä¹ˆè¯¥å…ˆéªŒæ¡†åº”è¯¥åŒ¹é…è°ï¼Œç­”æ¡ˆåº”è¯¥æ˜¯å‰è€…ï¼Œé¦–å…ˆè¦ç¡®ä¿æŸä¸ªground truthä¸€å®šæœ‰ä¸€ä¸ªå…ˆéªŒæ¡†ä¸Žä¹‹åŒ¹é…ã€‚ä½†æ˜¯ï¼Œè¿™ç§æƒ…å†µæˆ‘è§‰å¾—åŸºæœ¬ä¸Šæ˜¯ä¸å­˜åœ¨çš„ã€‚ç”±äºŽå…ˆéªŒæ¡†å¾ˆå¤šï¼ŒæŸä¸ªground truthçš„æœ€å¤§ $IOU$è‚¯å®šå¤§äºŽé˜ˆå€¼ï¼Œæ‰€ä»¥å¯èƒ½åªå®žæ–½ç¬¬äºŒä¸ªåŽŸåˆ™æ—¢å¯ä»¥äº†ï¼Œè¿™é‡Œçš„TensorFlowç‰ˆæœ¬å°±æ˜¯åªå®žæ–½äº†ç¬¬äºŒä¸ªåŽŸåˆ™ï¼Œä½†æ˜¯è¿™é‡Œçš„Pytorchä¸¤ä¸ªåŽŸåˆ™éƒ½å®žæ–½äº†ã€‚å›¾8ä¸ºä¸€ä¸ªåŒ¹é…ç¤ºæ„å›¾ï¼Œå…¶ä¸­ç»¿è‰²çš„GTæ˜¯ground truthï¼Œçº¢è‰²ä¸ºå…ˆéªŒæ¡†ï¼ŒFPè¡¨ç¤ºè´Ÿæ ·æœ¬ï¼ŒTPè¡¨ç¤ºæ­£æ ·æœ¬ã€‚ å°½ç®¡ä¸€ä¸ªground truthå¯ä»¥ä¸Žå¤šä¸ªå…ˆéªŒæ¡†åŒ¹é…ï¼Œä½†æ˜¯ground truthç›¸å¯¹å…ˆéªŒæ¡†è¿˜æ˜¯å¤ªå°‘äº†ï¼Œæ‰€ä»¥è´Ÿæ ·æœ¬ç›¸å¯¹æ­£æ ·æœ¬ä¼šå¾ˆå¤šã€‚ä¸ºäº†ä¿è¯æ­£è´Ÿæ ·æœ¬å°½é‡å¹³è¡¡ï¼ŒSSDé‡‡ç”¨äº†hard negative miningï¼Œå°±æ˜¯å¯¹è´Ÿæ ·æœ¬è¿›è¡ŒæŠ½æ ·ï¼ŒæŠ½æ ·æ—¶æŒ‰ç…§ç½®ä¿¡åº¦è¯¯å·®ï¼ˆé¢„æµ‹èƒŒæ™¯çš„ç½®ä¿¡åº¦è¶Šå°ï¼Œè¯¯å·®è¶Šå¤§ï¼‰è¿›è¡Œé™åºæŽ’åˆ—ï¼Œé€‰å–è¯¯å·®çš„è¾ƒå¤§çš„top-kä½œä¸ºè®­ç»ƒçš„è´Ÿæ ·æœ¬ï¼Œä»¥ä¿è¯æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹æŽ¥è¿‘1:3ã€‚ é¢„æµ‹è¿‡ç¨‹é¢„æµ‹è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œå¯¹äºŽæ¯ä¸ªé¢„æµ‹æ¡†ï¼Œé¦–å…ˆæ ¹æ®ç±»åˆ«ç½®ä¿¡åº¦ç¡®å®šå…¶ç±»åˆ«ï¼ˆç½®ä¿¡åº¦æœ€å¤§è€…ï¼‰ä¸Žç½®ä¿¡åº¦å€¼ï¼Œå¹¶è¿‡æ»¤æŽ‰å±žäºŽèƒŒæ™¯çš„é¢„æµ‹æ¡†ã€‚ç„¶åŽæ ¹æ®ç½®ä¿¡åº¦é˜ˆå€¼ï¼ˆå¦‚0.5ï¼‰è¿‡æ»¤æŽ‰é˜ˆå€¼è¾ƒä½Žçš„é¢„æµ‹æ¡†ã€‚å¯¹äºŽç•™ä¸‹çš„é¢„æµ‹æ¡†è¿›è¡Œè§£ç ï¼Œæ ¹æ®å…ˆéªŒæ¡†å¾—åˆ°å…¶çœŸå®žçš„ä½ç½®å‚æ•°ï¼ˆè§£ç åŽä¸€èˆ¬è¿˜éœ€è¦åšclipï¼Œé˜²æ­¢é¢„æµ‹æ¡†ä½ç½®è¶…å‡ºå›¾ç‰‡ï¼‰ã€‚è§£ç ä¹‹åŽï¼Œä¸€èˆ¬éœ€è¦æ ¹æ®ç½®ä¿¡åº¦è¿›è¡Œé™åºæŽ’åˆ—ï¼Œç„¶åŽä»…ä¿ç•™top-kï¼ˆå¦‚400ï¼‰ä¸ªé¢„æµ‹æ¡†ã€‚æœ€åŽå°±æ˜¯è¿›è¡ŒNMSç®—æ³•ï¼Œè¿‡æ»¤æŽ‰é‚£äº›é‡å åº¦è¾ƒå¤§çš„é¢„æµ‹æ¡†ã€‚æœ€åŽå‰©ä½™çš„é¢„æµ‹æ¡†å°±æ˜¯æ£€æµ‹ç»“æžœäº†ã€‚ è®­ç»ƒæŠ€å·§æ•°æ®å¢žå¼º SSDè®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ•°æ®å¢žå¼ºå¯¹ç½‘ç»œæ€§èƒ½å½±å“å¾ˆå¤§ï¼Œå¤§çº¦æœ‰6.7%çš„mAPæå‡ã€‚ éšæœºå‰ªè£ï¼šé‡‡æ ·ä¸€ä¸ªç‰‡æ®µï¼Œä½¿å‰ªè£éƒ¨åˆ†ä¸Žç›®æ ‡é‡å åˆ†åˆ«ä¸º0.1, 0.3, 0.5, 0.7, 0.9ï¼Œå‰ªè£å®Œresizeåˆ°å›ºå®šå°ºå¯¸ã€‚ ä»¥0.5çš„æ¦‚çŽ‡éšæœºæ°´å¹³ç¿»è½¬ã€‚ conv4_3æ£€æµ‹åŸºç¡€ç½‘ç»œéƒ¨åˆ†ç‰¹å¾å›¾åˆ†è¾¨çŽ‡é«˜ï¼ŒåŽŸå›¾ä¸­ä¿¡æ¯æ›´å®Œæ•´ï¼Œæ„Ÿå—é‡Žè¾ƒå°ï¼Œå¯ä»¥ç”¨æ¥æ£€æµ‹å›¾åƒä¸­çš„å°ç›®æ ‡ï¼Œè¿™ä¹Ÿæ˜¯SSDç›¸å¯¹äºŽYOLOæ£€æµ‹å°ç›®æ ‡çš„ä¼˜åŠ¿æ‰€åœ¨ã€‚å¢žåŠ å¯¹åŸºç¡€ç½‘ç»œconv4_3çš„ç‰¹å¾å›¾çš„æ£€æµ‹å¯ä»¥ä½¿mAPæå‡4%ã€‚ é•¿æ–¹å½¢é»˜è®¤æ¡†æŒ‘é€‰åˆé€‚å½¢çŠ¶çš„é»˜è®¤æ¡†èƒ½å¤Ÿæé«˜æ£€æµ‹æ•ˆæžœã€‚ä½œè€…å®žéªŒå¾—å‡ºä½¿ç”¨ç˜¦é«˜ä¸Žå®½æ‰é»˜è®¤æ¡†ç›¸å¯¹äºŽåªä½¿ç”¨æ­£æ–¹å½¢é»˜è®¤æ¡†æœ‰2.9%mAPæå‡ã€‚ ä½¿ç”¨atrouså·ç§¯ é€šå¸¸å·ç§¯è¿‡ç¨‹ä¸­ä¸ºäº†ä½¿ç‰¹å¾å›¾å°ºå¯¸ç‰¹å¾å›¾å°ºå¯¸ä¿æŒä¸å˜ï¼Œé€šè¿‡ä¼šåœ¨è¾¹ç¼˜æ‰“paddingï¼Œä½†äººä¸ºåŠ å…¥çš„paddingå€¼ä¼šå¼•å…¥å™ªå£°ï¼Œå› æ­¤ï¼Œä½¿ç”¨atrouså·ç§¯èƒ½å¤Ÿåœ¨ä¿æŒæ„Ÿå—é‡Žä¸å˜çš„æ¡ä»¶ä¸‹ï¼Œå‡å°‘paddingå™ªå£°ï¼Œå…³äºŽatrouså‚è€ƒã€‚æœ¬æ–‡SSDè®­ç»ƒè¿‡ç¨‹ä¸­å¹¶ä¸”æ²¡æœ‰ä½¿ç”¨atrouså·ç§¯ï¼Œä½†é¢„è®­ç»ƒè¿‡ç¨‹ä½¿ç”¨çš„æ¨¡åž‹ä¸ºVGG-16-atrousï¼Œæ„å‘³ç€ä½œè€…ç»™çš„é¢„è®­ç»ƒæ¨¡åž‹æ˜¯ä½¿ç”¨atrouså·ç§¯è®­ç»ƒå‡ºæ¥çš„ã€‚ä½¿ç”¨atrousç‰ˆæœ¬VGG-16ä½œä¸ºé¢„è®­æ¨¡åž‹æ¯”è¾ƒæ™®é€šVGG-16è¦æé«˜0.7%mAPã€‚ Losslosså‡½æ•°åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šè®¡ç®—ç›¸åº”çš„default boxä¸Žç›®æ ‡ç±»åˆ«çš„confidence lossä»¥åŠç›¸åº”çš„ä½ç½®å›žå½’ã€‚ å…¶ä¸­Nå…ˆéªŒæ¡†çš„æ­£æ ·æœ¬æ•°é‡ï¼Œ è¿™é‡Œ $x^p_{ij}\in{1,0}$ ä¸ºä¸€ä¸ªæŒ‡ç¤ºå‚æ•°ï¼Œå½“ $x^p_{ij}=1$ æ—¶è¡¨ç¤ºç¬¬ $i$ä¸ªå…ˆéªŒæ¡†ä¸Žç¬¬ $j$ä¸ªground truthåŒ¹é…ï¼Œå¹¶ä¸”ground truthçš„ç±»åˆ«ä¸º$j$ã€‚ !$c$ä¸ºç±»åˆ«ç½®ä¿¡åº¦é¢„æµ‹å€¼ã€‚$l$ä¸ºå…ˆéªŒæ¡†çš„æ‰€å¯¹åº”è¾¹ç•Œæ¡†çš„ä½ç½®é¢„æµ‹å€¼ï¼Œè€Œ$g$æ˜¯ground truthçš„ä½ç½®å‚æ•° ï¼›è€Œalphaå‚æ•°ç”¨äºŽè°ƒæ•´confidence losså’Œlocation lossä¹‹é—´çš„æ¯”ä¾‹ï¼Œé»˜è®¤alpha=1ã€‚ ä½ç½®å›žå½’åˆ™æ˜¯é‡‡ç”¨ Smooth L1 lossï¼Œlosså‡½æ•°ä¸º: ç”±äºŽ $x_{ij}^p$ çš„å­˜åœ¨ï¼Œæ‰€ä»¥ä½ç½®è¯¯å·®ä»…é’ˆå¯¹æ­£æ ·æœ¬è¿›è¡Œè®¡ç®—ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¦å…ˆå¯¹ground truthçš„$g$è¿›è¡Œç¼–ç å¾—åˆ° $\hat{g}$ ï¼Œå› ä¸ºé¢„æµ‹å€¼$l$ä¹Ÿæ˜¯ç¼–ç å€¼ï¼Œè‹¥è®¾ç½®variance_encoded_in_target=Trueï¼Œç¼–ç æ—¶è¦åŠ ä¸Švarianceï¼š confidence lossæ˜¯å…¸åž‹çš„softmax lossï¼š Retina NETä»£ç åœ°å€ï¼šhttps://github.com/facebookresearch/Detectron è®ºæ–‡åœ°å€ï¼šhttps://arxiv.org/abs/1708.02002 Focal lossä¸»è¦è´¡çŒ®ä¸ºæå‡ºäº†Focal Lossï¼Œ è§£å†³äº†one-stageç®—æ³•ä¸­æ­£è´Ÿæ ·æœ¬çš„æ¯”ä¾‹ä¸¥é‡å¤±è¡¡çš„é—®é¢˜ï¼Œä¸éœ€è¦æ”¹å˜ç½‘ç»œç»“æž„ ã€‚ å½“æ ·æœ¬ä¸å‡è¡¡çš„æ—¶å€™ï¼Œå¦‚è´Ÿæ ·æœ¬å¾ˆå¤§ï¼Œè€Œä¸”å¾ˆå¤šéƒ½æ˜¯å®¹æ˜“åˆ†ç±»çš„ï¼ˆç½®ä¿¡åº¦å¾ˆé«˜çš„ï¼‰,è¿™æ ·æ¨¡åž‹çš„ä¼˜åŒ–æ–¹å‘å°±ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ–¹å‘ï¼Œæˆ‘æ˜¯æƒ³è®©æ­£è´Ÿæ ·æœ¬åˆ†å¼€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠå¾ˆå¤šçš„æ³¨æ„åŠ›æ”¾åœ¨å›°éš¾ã€éš¾åˆ†ç±»çš„æ ·æœ¬ä¸Šï¼Œæ‰€ä»¥ä½œè€…åœ¨æ ‡å‡†äº¤å‰ç†µæŸå¤±çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œé¦–å…ˆæˆ‘ä»¬æŠŠäº¤å‰ç†µäºŒåˆ†ç±»losså®šä¹‰ä¸ºï¼š ç„¶åŽ $y\in{-1,1}$è¡¨ç¤ºæ­£è´Ÿæ ·æœ¬çš„æ ‡ç­¾ï¼Œ$p$ è¡¨ç¤ºæ¨¡åž‹é¢„æµ‹ $y=1$çš„æ¦‚çŽ‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å®šä¹‰$p_t$ å¦‚ä¸‹ï¼š ç„¶åŽæˆ‘ä»¬é‡å†™äº¤å‰ç†µæŸå¤±ä¸º é¦–å…ˆæˆ‘ä»¬è¦è§£å†³æ ·æœ¬ä¸å¹³è¡¡çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¹³è¡¡å› å­ $\alpha_t$ ,å…¶èŒƒå›´æ˜¯0åˆ°1ï¼Œå¯¹äºŽç±»åˆ«1ä¹˜ä»¥$\alpha_t$ ,è€Œå¯¹äºŽç±»åˆ«-1ä¹˜ä»¥$1-\alpha_t$ ï¼Œç„¶åŽæˆ‘ä»¬æŠŠæŸå¤±å‡½æ•°é‡å†™ä¸ºï¼š è™½ç„¶ä¸Šé¢çš„æ–¹æ³•ä½¿å¾—å¯ä»¥è°ƒèŠ‚æ­£è´Ÿæ ·æœ¬å¯¹lossçš„è´¡çŒ®åº¦ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›é‚£äº›å®¹æ˜“åˆ†çš„æ ·æœ¬ï¼ˆç½®ä¿¡åº¦é«˜çš„ï¼‰æä¾›çš„losså°ä¸€äº›ï¼Œè€Œé‚£äº›éš¾åˆ†çš„æ ·æœ¬æä¾›çš„losså‡ ä¹Žä¸å˜åŒ–ï¼Œè®©åˆ†ç±»å™¨ä¼˜åŒ–çš„æ–¹å‘æ›´å…³æ³¨é‚£äº›éš¾åˆ†çš„æ ·æœ¬ã€‚ å‡å¦‚æœ‰è¿™ä¹ˆä¸€ä¸ªæ ·æœ¬ï¼Œä¸” $\gamma=2$æ—¶ï¼Œå¦‚æžœå…¶$p_t=0.9$ æ—¶ï¼ŒFL lossä¼šæ¯”åŽŸæ¥çš„CE losså°100å¤šå€ï¼Œå¦‚æžœå…¶ $p_t=0.968$ ï¼Œé‚£å°±ä¼šå°1000å¤šå€ã€‚ æœ€åŽæˆ‘ä»¬æŠŠå®Œæ•´ç‰ˆçš„losså‡½æ•°å†™ä¸‹æ¥ï¼Œä¸ºï¼š æœ¬æ–‡ä¸­ï¼Œå°†$\gamma$å®šä¹‰ä¸º2æ—¶æ•ˆæžœæœ€å¥½ï¼ å¯ä»¥çœ‹å‡ºï¼Œè“è‰²çš„çº¿ä¸ºCE loss, éšç€$\gamma$ çš„å¢žåŠ ï¼Œé‚£äº›å®¹æ˜“åˆ†ç±»çš„æ ·æœ¬æ‰€è´¡çŒ®çš„losså°±è¶Šå°ï¼Œæ‰€ä»¥å¯ä»¥ä½¿æ¨¡åž‹çš„ä¼˜åŒ–æ–¹å‘æ›´åŠ å…³æ³¨é‚£äº›éš¾åˆ†ç±»çš„æ ·æœ¬ï¼Œè¿™æ ·å°±å¯ä»¥æé«˜æ¨¡åž‹çš„ç²¾åº¦ï¼ŒåŒæ—¶å…¼é¡¾äº†é€Ÿåº¦ã€‚]]></content>
      <categories>
        <category>AI</category>
        <category>CV</category>
        <category>ç›®æ ‡æ£€æµ‹</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>CV</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›®æ ‡æ£€æµ‹å››]]></title>
    <url>%2F2020%2F10%2F16%2F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%9B%9B%2F</url>
    <content type="text"><![CDATA[ç›®æ ‡æ£€æµ‹å››YOLO v1å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/32525231 å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/31427164 yolo (you only look once)ã€‚ Yoloç®—æ³•é‡‡ç”¨ä¸€ä¸ªå•ç‹¬çš„CNNæ¨¡åž‹å®žçŽ°end-to-endçš„ç›®æ ‡æ£€æµ‹ ï¼Œæ•´ä¸ªç³»ç»Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šé¦–å…ˆå°†è¾“å…¥å›¾ç‰‡resizeåˆ°448x448ï¼Œç„¶åŽé€å…¥CNNç½‘ç»œï¼Œæœ€åŽå¤„ç†ç½‘ç»œé¢„æµ‹ç»“æžœå¾—åˆ°æ£€æµ‹çš„ç›®æ ‡ã€‚ç›¸æ¯”R-CNNç®—æ³•ï¼Œå…¶æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æ¡†æž¶ï¼Œå…¶é€Ÿåº¦æ›´å¿«ï¼Œè€Œä¸”Yoloçš„è®­ç»ƒè¿‡ç¨‹ä¹Ÿæ˜¯end-to-endçš„ã€‚ åŽŸç†YOLOå°†è¾“å…¥å›¾åƒåˆ†æˆSxSä¸ªæ ¼å­ï¼Œæ¯ä¸ªæ ¼å­è´Ÿè´£æ£€æµ‹â€˜è½å…¥â€™è¯¥æ ¼å­çš„ç‰©ä½“ã€‚ æ¯ä¸ªæ ¼å­è¾“å‡ºBä¸ªbounding boxï¼ˆåŒ…å«ç‰©ä½“çš„çŸ©å½¢åŒºåŸŸï¼‰ä¿¡æ¯ï¼Œä»¥åŠCä¸ªç‰©ä½“å±žäºŽæŸç§ç±»åˆ«çš„æ¦‚çŽ‡ä¿¡æ¯ã€‚ YOLOçš„bounding boxå¹¶ä¸æ˜¯Faster RCNNçš„Anchor ã€‚Faster RCNNç­‰ä¸€äº›ç®—æ³•é‡‡ç”¨æ¯ä¸ªgridä¸­æ‰‹å·¥è®¾ç½®nä¸ªAnchorï¼ˆå…ˆéªŒæ¡†ï¼Œé¢„å…ˆè®¾ç½®å¥½ä½ç½®çš„bounding boxï¼‰çš„è®¾è®¡ï¼Œæ¯ä¸ªAnchoræœ‰ä¸åŒçš„å¤§å°å’Œå®½é«˜æ¯”ã€‚YOLOçš„bounding boxçœ‹èµ·æ¥å¾ˆåƒä¸€ä¸ªgridä¸­2ä¸ªAnchorï¼Œä½†å®ƒä»¬ä¸æ˜¯ã€‚YOLOå¹¶æ²¡æœ‰é¢„å…ˆè®¾ç½®2ä¸ªbounding boxçš„å¤§å°å’Œå½¢çŠ¶ï¼Œä¹Ÿæ²¡æœ‰å¯¹æ¯ä¸ªbounding boxåˆ†åˆ«è¾“å‡ºä¸€ä¸ªå¯¹è±¡çš„é¢„æµ‹ã€‚å®ƒçš„æ„æ€ä»…ä»…æ˜¯å¯¹ä¸€ä¸ªå¯¹è±¡é¢„æµ‹å‡º2ä¸ªbounding boxï¼Œé€‰æ‹©é¢„æµ‹å¾—ç›¸å¯¹æ¯”è¾ƒå‡†çš„é‚£ä¸ªã€‚ Bounding boxä¿¡æ¯åŒ…å«5ä¸ªæ•°æ®å€¼ï¼Œåˆ†åˆ«æ˜¯x,y,w,h,å’Œconfidenceã€‚å…¶ä¸­x,yæ˜¯æŒ‡å½“å‰æ ¼å­é¢„æµ‹å¾—åˆ°çš„ç‰©ä½“çš„bounding boxçš„ä¸­å¿ƒä½ç½®çš„åæ ‡ã€‚w,hæ˜¯bounding boxçš„å®½åº¦å’Œé«˜åº¦ã€‚ x,y æ˜¯ç›¸å¯¹äºŽæ¯ä¸ªå•å…ƒæ ¼å·¦ä¸Šè§’åæ ‡ç‚¹çš„åç§»å€¼ï¼Œå¹¶ä¸”å•ä½æ˜¯ç›¸å¯¹äºŽå•å…ƒæ ¼å¤§å°çš„ï¼Œè¢«å½’ä¸€åŒ–åˆ°[0,1]ã€‚æ³¨æ„ï¼šå®žé™…è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œwå’Œhçš„å€¼ä½¿ç”¨å›¾åƒçš„å®½åº¦å’Œé«˜åº¦è¿›è¡Œå½’ä¸€åŒ–åˆ°[0,1]åŒºé—´å†…ã€‚ confidenceåæ˜ å½“å‰bounding boxæ˜¯å¦åŒ…å«ç‰©ä½“ä»¥åŠç‰©ä½“ä½ç½®çš„å‡†ç¡®æ€§ã€‚å‰è€…è®°ä¸º$Pr(object)$ ï¼Œå½“è¯¥è¾¹ç•Œæ¡†æ˜¯èƒŒæ™¯æ—¶ï¼ˆå³ä¸åŒ…å«ç›®æ ‡ï¼‰ï¼Œæ­¤æ—¶$Pr(object)=0$ã€‚è€Œå½“è¯¥è¾¹ç•Œæ¡†åŒ…å«ç›®æ ‡æ—¶ $Pr(object=1)$ã€‚è¾¹ç•Œæ¡†çš„å‡†ç¡®åº¦å¯ä»¥ç”¨é¢„æµ‹æ¡†ä¸Žå®žé™…æ¡†ï¼ˆground truthï¼‰çš„IOUï¼ˆintersection over unionï¼Œäº¤å¹¶æ¯”ï¼‰æ¥è¡¨å¾ï¼Œè®°ä¸º $IOU^{truth} _{pred}$ ã€‚å› æ­¤ç½®ä¿¡åº¦å¯ä»¥å®šä¹‰ä¸º $Pr(object)=0$ã€‚ æ¯ä¸ªå•å…ƒæ ¼éœ€è¦é¢„æµ‹$B*5+C$ ä¸ªå€¼ã€‚å¦‚æžœå°†è¾“å…¥å›¾ç‰‡åˆ’åˆ†ä¸º$S*S$ ç½‘æ ¼ï¼Œé‚£ä¹ˆæœ€ç»ˆé¢„æµ‹å€¼ä¸º$SÃ—SÃ—(B*5+C)$å¤§å°çš„å¼ é‡ã€‚æ•´ä¸ªæ¨¡åž‹çš„é¢„æµ‹å€¼ç»“æž„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¯¹äºŽPASCAL VOCæ•°æ®ï¼Œå…¶å…±æœ‰20ä¸ªç±»åˆ«ï¼Œå¦‚æžœä½¿ç”¨$S=7ï¼ŒB=2$ ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„é¢„æµ‹ç»“æžœå°±æ˜¯$7Ã—7Ã—30$å¤§å°çš„å¼ é‡ã€‚ ç½‘ç»œç»“æž„Yoloé‡‡ç”¨å·ç§¯ç½‘ç»œæ¥æå–ç‰¹å¾ï¼Œç„¶åŽä½¿ç”¨å…¨è¿žæŽ¥å±‚æ¥å¾—åˆ°é¢„æµ‹å€¼ã€‚ç½‘ç»œç»“æž„å‚è€ƒGooLeNetæ¨¡åž‹ï¼ŒåŒ…å«24ä¸ªå·ç§¯å±‚å’Œ2ä¸ªå…¨è¿žæŽ¥å±‚ï¼Œå¦‚å›¾8æ‰€ç¤ºã€‚å¯¹äºŽå·ç§¯å±‚ï¼Œä¸»è¦ä½¿ç”¨1x1å·ç§¯æ¥åšchannle reductionï¼Œç„¶åŽç´§è·Ÿ3x3å·ç§¯ã€‚å¯¹äºŽå·ç§¯å±‚å’Œå…¨è¿žæŽ¥å±‚ï¼Œé‡‡ç”¨Leaky ReLUæ¿€æ´»å‡½æ•°ï¼š$max(x,0.1x)$ã€‚ä½†æ˜¯æœ€åŽä¸€å±‚é‡‡ç”¨çº¿æ€§æ¿€æ´»å‡½æ•°ã€‚ ç½‘ç»œè®­ç»ƒåœ¨è®­ç»ƒä¹‹å‰ï¼Œå…ˆåœ¨ImageNetä¸Šè¿›è¡Œäº†é¢„è®­ç»ƒï¼Œå…¶é¢„è®­ç»ƒçš„åˆ†ç±»æ¨¡åž‹é‡‡ç”¨ä¸Šå›¾å‰20ä¸ªå·ç§¯å±‚ï¼Œç„¶åŽæ·»åŠ ä¸€ä¸ªaverage-poolå±‚å’Œå…¨è¿žæŽ¥å±‚ã€‚é¢„è®­ç»ƒä¹‹åŽï¼Œåœ¨é¢„è®­ç»ƒå¾—åˆ°çš„20å±‚å·ç§¯å±‚ä¹‹ä¸ŠåŠ ä¸Šéšæœºåˆå§‹åŒ–çš„4ä¸ªå·ç§¯å±‚å’Œ2ä¸ªå…¨è¿žæŽ¥å±‚ã€‚ç”±äºŽæ£€æµ‹ä»»åŠ¡ä¸€èˆ¬éœ€è¦æ›´é«˜æ¸…çš„å›¾ç‰‡ï¼Œæ‰€ä»¥å°†ç½‘ç»œçš„è¾“å…¥ä»Ž224x224å¢žåŠ åˆ°äº†448x448ã€‚æ•´ä¸ªç½‘ç»œçš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨testçš„æ—¶å€™ï¼Œæ¯ä¸ªç½‘æ ¼é¢„æµ‹çš„classä¿¡æ¯å’Œbounding boxé¢„æµ‹çš„confidenceä¿¡æ¯ç›¸ä¹˜ï¼Œå°±å¾—åˆ°æ¯ä¸ªbounding boxçš„class-specific confidence score: ç­‰å¼å·¦è¾¹ç¬¬ä¸€é¡¹å°±æ˜¯æ¯ä¸ªç½‘æ ¼é¢„æµ‹çš„ç±»åˆ«ä¿¡æ¯ï¼Œç¬¬äºŒä¸‰é¡¹å°±æ˜¯æ¯ä¸ªbounding boxé¢„æµ‹çš„confidenceã€‚è¿™ä¸ªä¹˜ç§¯å³encodeäº†é¢„æµ‹çš„boxå±žäºŽæŸä¸€ç±»çš„æ¦‚çŽ‡ï¼Œä¹Ÿæœ‰è¯¥boxå‡†ç¡®åº¦çš„ä¿¡æ¯ã€‚ å¾—åˆ°æ¯ä¸ªboxçš„class-specific confidence scoreä»¥åŽï¼Œè®¾ç½®é˜ˆå€¼ï¼Œæ»¤æŽ‰å¾—åˆ†ä½Žçš„boxesï¼Œå¯¹ä¿ç•™çš„boxesè¿›è¡ŒNMSå¤„ç†ï¼Œå°±å¾—åˆ°æœ€ç»ˆçš„æ£€æµ‹ç»“æžœã€‚ æŸå¤±å‡½æ•°ä¸‹é¢æ˜¯è®­ç»ƒæŸå¤±å‡½æ•°çš„åˆ†æžï¼ŒYoloç®—æ³•å°†ç›®æ ‡æ£€æµ‹çœ‹æˆå›žå½’é—®é¢˜ï¼Œæ‰€ä»¥é‡‡ç”¨çš„æ˜¯å‡æ–¹å·®æŸå¤±å‡½æ•°ã€‚ å…¶ä¸­ï¼ŒcoordErrorã€iouErrorå’ŒclassErroråˆ†åˆ«ä»£è¡¨é¢„æµ‹æ•°æ®ä¸Žæ ‡å®šæ•°æ®ä¹‹é—´çš„åæ ‡è¯¯å·®ã€IOUè¯¯å·®å’Œåˆ†ç±»è¯¯å·®ã€‚ é¦–å…ˆåŒºåˆ†å®šä½è¯¯å·®å’Œåˆ†ç±»è¯¯å·®ï¼Œä½ç½®ç›¸å…³è¯¯å·®ï¼ˆåæ ‡ã€IOUï¼‰ä¸Žåˆ†ç±»è¯¯å·®å¯¹ç½‘ç»œlossçš„è´¡çŒ®å€¼æ˜¯ä¸åŒçš„ï¼šå¯¹äºŽå®šä½è¯¯å·®ï¼Œå³è¾¹ç•Œæ¡†åæ ‡é¢„æµ‹è¯¯å·®ï¼Œé‡‡ç”¨è¾ƒå¤§çš„æƒé‡$\lambda_{coord}=5$ã€‚ ç„¶åŽå…¶åŒºåˆ†ä¸åŒ…å«ç›®æ ‡çš„è¾¹ç•Œæ¡†ä¸Žå«æœ‰ç›®æ ‡çš„è¾¹ç•Œæ¡†çš„ç½®ä¿¡åº¦ï¼Œå¯¹äºŽå‰è€…ï¼Œé‡‡ç”¨è¾ƒå°çš„æƒé‡å€¼$\lambda_{noobj}=0.5$ã€‚å…¶å®ƒæƒé‡å€¼å‡è®¾ä¸º1ã€‚è¿™æ˜¯å› ä¸ºåœ¨è®¡ç®—IOUè¯¯å·®æ—¶ï¼ŒåŒ…å«ç‰©ä½“çš„æ ¼å­ä¸Žä¸åŒ…å«ç‰©ä½“çš„æ ¼å­ï¼ŒäºŒè€…çš„IOUè¯¯å·®å¯¹ç½‘ç»œlossçš„è´¡çŒ®å€¼æ˜¯ä¸åŒçš„ã€‚è‹¥é‡‡ç”¨ç›¸åŒçš„æƒå€¼ï¼Œé‚£ä¹ˆä¸åŒ…å«ç‰©ä½“çš„æ ¼å­çš„confidenceå€¼è¿‘ä¼¼ä¸º0ï¼Œå˜ç›¸æ”¾å¤§äº†åŒ…å«ç‰©ä½“çš„æ ¼å­çš„confidenceè¯¯å·®åœ¨è®¡ç®—ç½‘ç»œå‚æ•°æ¢¯åº¦æ—¶çš„å½±å“ã€‚ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒYOLO ä½¿ç”¨ $\lambda_{noobj} = 0.5$ä¿®æ­£iouErrorã€‚ï¼ˆæ³¨æ­¤å¤„çš„â€˜åŒ…å«â€™æ˜¯æŒ‡å­˜åœ¨ä¸€ä¸ªç‰©ä½“ï¼Œå®ƒçš„ä¸­å¿ƒåæ ‡è½å…¥åˆ°æ ¼å­å†…ï¼‰ã€‚ ç„¶åŽé‡‡ç”¨å‡æ–¹è¯¯å·®ï¼Œå…¶åŒç­‰å¯¹å¾…å¤§å°ä¸åŒçš„è¾¹ç•Œæ¡†ï¼Œä½†æ˜¯å®žé™…ä¸Šè¾ƒå°çš„è¾¹ç•Œæ¡†çš„åæ ‡è¯¯å·®åº”è¯¥è¦æ¯”è¾ƒå¤§çš„è¾¹ç•Œæ¡†è¦æ›´æ•æ„Ÿã€‚ä¸ºäº†ä¿è¯è¿™ä¸€ç‚¹ï¼Œå°†ç½‘ç»œçš„è¾¹ç•Œæ¡†çš„å®½ä¸Žé«˜é¢„æµ‹æ”¹ä¸ºå¯¹å…¶å¹³æ–¹æ ¹çš„é¢„æµ‹ï¼Œå³é¢„æµ‹å€¼å˜ä¸º$(x,y,\sqrt{w},\sqrt{h})$ã€‚ å¦å¤–ä¸€ç‚¹æ˜¯ï¼Œç”±äºŽæ¯ä¸ªå•å…ƒæ ¼é¢„æµ‹å¤šä¸ªè¾¹ç•Œæ¡†ã€‚ä½†æ˜¯å…¶å¯¹åº”ç±»åˆ«åªæœ‰ä¸€ä¸ªã€‚é‚£ä¹ˆåœ¨è®­ç»ƒæ—¶ï¼Œå¦‚æžœè¯¥å•å…ƒæ ¼å†…ç¡®å®žå­˜åœ¨ç›®æ ‡ï¼Œé‚£ä¹ˆåªé€‰æ‹©ä¸Žground truthçš„IOUæœ€å¤§çš„é‚£ä¸ªè¾¹ç•Œæ¡†æ¥è´Ÿè´£é¢„æµ‹è¯¥ç›®æ ‡ï¼Œè€Œå…¶å®ƒè¾¹ç•Œæ¡†è®¤ä¸ºä¸å­˜åœ¨ç›®æ ‡ã€‚è¿™æ ·è®¾ç½®çš„ä¸€ä¸ªç»“æžœå°†ä¼šä½¿ä¸€ä¸ªå•å…ƒæ ¼å¯¹åº”çš„è¾¹ç•Œæ¡†æ›´åŠ ä¸“ä¸šåŒ–ï¼Œå…¶å¯ä»¥åˆ†åˆ«é€‚ç”¨ä¸åŒå¤§å°ï¼Œä¸åŒé«˜å®½æ¯”çš„ç›®æ ‡ï¼Œä»Žè€Œæå‡æ¨¡åž‹æ€§èƒ½ã€‚å¤§å®¶å¯èƒ½ä¼šæƒ³å¦‚æžœä¸€ä¸ªå•å…ƒæ ¼å†…å­˜åœ¨å¤šä¸ªç›®æ ‡æ€Žä¹ˆåŠžï¼Œå…¶å®žè¿™æ—¶å€™Yoloç®—æ³•å°±åªèƒ½é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæ¥è®­ç»ƒï¼Œè¿™ä¹Ÿæ˜¯Yoloç®—æ³•çš„ç¼ºç‚¹ä¹‹ä¸€ã€‚è¦æ³¨æ„çš„ä¸€ç‚¹æ—¶ï¼Œå¯¹äºŽä¸å­˜åœ¨å¯¹åº”ç›®æ ‡çš„è¾¹ç•Œæ¡†ï¼Œå…¶è¯¯å·®é¡¹å°±æ˜¯åªæœ‰ç½®ä¿¡åº¦ï¼Œåæ ‡é¡¹è¯¯å·®æ˜¯æ²¡æ³•è®¡ç®—çš„ã€‚è€Œåªæœ‰å½“ä¸€ä¸ªå•å…ƒæ ¼å†…ç¡®å®žå­˜åœ¨ç›®æ ‡æ—¶ï¼Œæ‰è®¡ç®—åˆ†ç±»è¯¯å·®é¡¹ï¼Œå¦åˆ™è¯¥é¡¹ä¹Ÿæ˜¯æ— æ³•è®¡ç®—çš„ã€‚ å…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯è¾¹ç•Œæ¡†ä¸­å¿ƒåæ ‡çš„è¯¯å·®é¡¹ï¼Œ$1^{obj}_{ij}$ æŒ‡çš„æ˜¯ç¬¬$i$ä¸ªå•å…ƒæ ¼å­˜åœ¨ç›®æ ‡ï¼Œä¸”è¯¥å•å…ƒæ ¼ä¸­çš„ç¬¬$j$ä¸ªè¾¹ç•Œæ¡†è´Ÿè´£é¢„æµ‹è¯¥ç›®æ ‡ã€‚ç¬¬äºŒé¡¹æ˜¯è¾¹ç•Œæ¡†çš„é«˜ä¸Žå®½çš„è¯¯å·®é¡¹ã€‚ç¬¬ä¸‰é¡¹æ˜¯åŒ…å«ç›®æ ‡çš„è¾¹ç•Œæ¡†çš„ç½®ä¿¡åº¦è¯¯å·®é¡¹ã€‚ç¬¬å››é¡¹æ˜¯ä¸åŒ…å«ç›®æ ‡çš„è¾¹ç•Œæ¡†çš„ç½®ä¿¡åº¦è¯¯å·®é¡¹ã€‚è€Œæœ€åŽä¸€é¡¹æ˜¯åŒ…å«ç›®æ ‡çš„å•å…ƒæ ¼çš„åˆ†ç±»è¯¯å·®é¡¹ï¼Œ $1^{obj}_{i}$ æŒ‡çš„æ˜¯ç¬¬ $i$ä¸ªå•å…ƒæ ¼å­˜åœ¨ç›®æ ‡ã€‚è¿™é‡Œç‰¹åˆ«è¯´ä¸€ä¸‹ç½®ä¿¡åº¦çš„targetå€¼$C_i$ ï¼Œå¦‚æžœæ˜¯ä¸å­˜åœ¨ç›®æ ‡ï¼Œæ­¤æ—¶ç”±äºŽ$Pr_{object}=0$ï¼Œé‚£ä¹ˆ $C_i=0$ã€‚å¦‚æžœå­˜åœ¨ç›®æ ‡$Pr_{object}=1$ï¼Œ æ­¤æ—¶éœ€è¦ç¡®å®š $IOU^{truth}_{pred}$ï¼Œå½“ç„¶ä½ å¸Œæœ›æœ€å¥½çš„è¯ï¼Œå¯ä»¥å°†IOUå–1ï¼Œè¿™æ ·$C_i= 1$ï¼Œä½†æ˜¯åœ¨YOLOå®žçŽ°ä¸­ï¼Œä½¿ç”¨äº†ä¸€ä¸ªæŽ§åˆ¶å‚æ•°rescoreï¼ˆé»˜è®¤ä¸º1ï¼‰ï¼Œå½“å…¶ä¸º1æ—¶ï¼ŒIOUä¸æ˜¯è®¾ç½®ä¸º1ï¼Œè€Œå°±æ˜¯è®¡ç®—truthå’Œpredä¹‹é—´çš„çœŸå®žIOUã€‚ä¸è¿‡å¾ˆå¤šå¤çŽ°YOLOçš„é¡¹ç›®è¿˜æ˜¯å– $C_i=1$ï¼Œè¿™ä¸ªå·®å¼‚åº”è¯¥ä¸ä¼šå¤ªå½±å“ç»“æžœå§ã€‚ æ€§èƒ½ Yoloçš„Correctçš„æ˜¯ä½ŽäºŽFast R-CNNã€‚å¦å¤–Yoloçš„Localizationè¯¯å·®åé«˜ï¼Œå³å®šä½ä¸æ˜¯å¾ˆå‡†ç¡®ã€‚ä½†æ˜¯Yoloçš„Backgroundè¯¯å·®å¾ˆä½Žï¼Œè¯´æ˜Žå…¶å¯¹èƒŒæ™¯çš„è¯¯åˆ¤çŽ‡è¾ƒä½Žã€‚ ä¼˜ç‚¹ï¼šYoloé‡‡ç”¨ä¸€ä¸ªCNNç½‘ç»œæ¥å®žçŽ°æ£€æµ‹ï¼Œæ˜¯å•ç®¡é“ç­–ç•¥ï¼Œå…¶è®­ç»ƒä¸Žé¢„æµ‹éƒ½æ˜¯end-to-endï¼Œæ‰€ä»¥Yoloç®—æ³•æ¯”è¾ƒç®€æ´ä¸”é€Ÿåº¦å¿«ã€‚ç¬¬äºŒç‚¹ç”±äºŽYoloæ˜¯å¯¹æ•´å¼ å›¾ç‰‡åšå·ç§¯ï¼Œæ‰€ä»¥å…¶åœ¨æ£€æµ‹ç›®æ ‡æœ‰æ›´å¤§çš„è§†é‡Žï¼Œå®ƒä¸å®¹æ˜“å¯¹èƒŒæ™¯è¯¯åˆ¤ã€‚å…¶å®žæˆ‘è§‰å¾—å…¨è¿žæŽ¥å±‚ä¹Ÿæ˜¯å¯¹è¿™ä¸ªæœ‰è´¡çŒ®çš„ï¼Œå› ä¸ºå…¨è¿žæŽ¥èµ·åˆ°äº†attentionçš„ä½œç”¨ã€‚å¦å¤–ï¼ŒYoloçš„æ³›åŒ–èƒ½åŠ›å¼ºï¼Œåœ¨åšè¿ç§»æ—¶ï¼Œæ¨¡åž‹é²æ£’æ€§é«˜ã€‚ ç¼ºç‚¹ï¼šæœ€åŽä¸å¾—ä¸è°ˆä¸€ä¸‹Yoloçš„ç¼ºç‚¹ï¼Œé¦–å…ˆYoloå„ä¸ªå•å…ƒæ ¼ä»…ä»…é¢„æµ‹ä¸¤ä¸ªè¾¹ç•Œæ¡†ï¼Œè€Œä¸”å±žäºŽä¸€ä¸ªç±»åˆ«ã€‚å¯¹äºŽå°ç‰©ä½“ï¼ŒYoloçš„è¡¨çŽ°ä¼šä¸å¦‚äººæ„ã€‚è¿™æ–¹é¢çš„æ”¹è¿›å¯ä»¥çœ‹SSDï¼Œå…¶é‡‡ç”¨å¤šå°ºåº¦å•å…ƒæ ¼ã€‚ä¹Ÿå¯ä»¥çœ‹Faster R-CNNï¼Œå…¶é‡‡ç”¨äº†anchor boxesã€‚Yoloå¯¹äºŽåœ¨ç‰©ä½“çš„å®½é«˜æ¯”æ–¹é¢æ³›åŒ–çŽ‡ä½Žï¼Œå°±æ˜¯æ— æ³•å®šä½ä¸å¯»å¸¸æ¯”ä¾‹çš„ç‰©ä½“ã€‚å½“ç„¶Yoloçš„å®šä½ä¸å‡†ç¡®ä¹Ÿæ˜¯å¾ˆå¤§çš„é—®é¢˜ã€‚]]></content>
      <categories>
        <category>AI</category>
        <category>CV</category>
        <category>ç›®æ ‡æ£€æµ‹</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>CV</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›®æ ‡æ£€æµ‹ä¸‰]]></title>
    <url>%2F2020%2F10%2F15%2F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B8%89%2F</url>
    <content type="text"><![CDATA[ç›®æ ‡æ£€æµ‹ä¸‰å‚è€ƒï¼šhttps://www.cnblogs.com/skyfsm/p/6806246.html Fast R-CNNåŽŸç†è®ºæ–‡åœ°å€ï¼š Fast R-CNN ä»£ç åœ°å€ï¼š ä»£ç åœ°å€ï¼šrbgirshick/fast-rcnn ç›¸å¯¹äºŽR-CNNï¼ŒFast R-CNNä¸»è¦æœ‰ä¸‰ç‚¹æ”¹è¿›ï¼š æå‡ºäº†RoIPoolingï¼Œé¿å…äº†å¯¹æå–çš„region proposalsè¿›è¡Œç¼©æ”¾åˆ°224x224ï¼Œç„¶åŽç»è¿‡pre-trained CNNè¿›è¡Œæ£€æµ‹çš„æ­¥éª¤ï¼ŒåŠ é€Ÿäº†æ•´ä¸ªç½‘ç»œçš„learningä¸Žinferenceè¿‡ç¨‹ï¼Œè¿™ä¸ªæ˜¯å·¨å¤§çš„æ”¹è¿›ï¼Œå¹¶ä¸”RoIPoolingæ˜¯å¯å¯¼çš„ï¼Œå› æ­¤ä½¿å¾—æ•´ä¸ªç½‘ç»œå¯ä»¥å®žçŽ°end-to-end learningï¼Œè¿™ä¸ªå¯ä»¥è®¤ä¸ºæ˜¯Fast R-CNNç›¸å¯¹äºŽR-CNNæœ€å¤§çš„æ”¹è¿›ä¹‹å¤„ã€‚å°†R-CNNä¸­ä¸‰ä¸ªæ¨¡å—(CNN, SVM, Regression)æ•´åˆ, æžå¤§äº†å‡å°‘äº†è®¡ç®—é‡å’ŒåŠ å¿«äº†é€Ÿåº¦ é‡‡ç”¨äº†Multi-task lossè¿›è¡Œè¾¹æ¡†å›žå½’ï¼Œè¿™ä¸ªåœ¨R-CNNä¸­ä¹Ÿæœ‰è¿™æ–¹é¢çš„å®žéªŒã€‚ åˆ©ç”¨äº†æˆªæ–­çš„å¥‡å¼‚å€¼åˆ†è§£ï¼ˆTruncated SVD for faster detectionï¼‰åŠ é€Ÿäº†ç½‘ç»œã€‚ ç½‘ç»œç»“æž„ æµç¨‹å›¾ æ­¥éª¤ é¢„è®­ç»ƒä¸€ä¸ªåˆ†ç±»CNN ä¿®æ”¹CNN, å°†æœ€åŽä¸€ä¸ªflattenå±‚ä»¥åŠåŽé¢çš„å±‚åˆ æŽ‰, æ¢æˆROI Poolingå±‚ å°†å›¾åƒç»è¿‡CNN, å¾—åˆ°ç‰¹å¾å›¾, ä½¿ç”¨selective searché€‰å‡º2kä¸ªå€™é€‰åŒºåŸŸ åœ¨ROI Poolingå±‚åŽè·Ÿå‡ ä¸ªFC, æœ€åŽè¾“å‡º2ä¸ªåˆ†æ”¯: ç¬¬ä¸€ä¸ªåˆ†æ”¯æ˜¯softmaxå±‚, è¾“å‡ºk+1ä¸ªåˆ†ç±» ç¬¬äºŒä¸ªåˆ†æ”¯æ˜¯regression, é¢„æµ‹è¾“å‡ºkä¸ªç±»åˆ«çš„boxå‚æ•° Multi-task LossR-CNNä¸­åœ¨èŽ·å–åˆ°æœ€ç»ˆçš„CNNç‰¹å¾åŽå…ˆé‡‡ç”¨SVMè¿›è¡Œç±»åˆ«åˆ¤æ–­ï¼Œå†è¿›è¡Œbounding-boxçš„å›žå½’å¾—åˆ°ä½ç½®ä¿¡æ¯ã€‚æ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸ªä¸²è¡Œçš„æµç¨‹ã€‚è¿™æžå¤§åœ°å½±å“äº†ç½‘ç»œçš„æ£€æµ‹é€Ÿåº¦ã€‚Fast R-CNNä¸­åˆ™å°†Classificationå’Œregressionçš„ä»»åŠ¡åˆäºŒä¸ºä¸€ï¼Œå˜æˆä¸€ä¸ªmulti-taskçš„æ¨¡åž‹ï¼Œå®žçŽ°äº†ç‰¹å¾çš„å…±äº«ä¸Žé€Ÿåº¦çš„è¿›ä¸€æ­¥æå‡ã€‚ ä½¿ç”¨Smooth L1çš„ä¼˜ç‚¹ï¼š 0ç‚¹å¯å¯¼ losså‡å°æ—¶ï¼Œæ¢¯åº¦éšä¹‹ä¸‹é™ï¼Œæœ‰åŠ©äºŽæ”¶æ•› ROI PoolingFast R-CNNä¸­å€Ÿé‰´äº†SPP-Netçš„é‡‘å­—å¡”æ± åŒ–æ€æƒ³ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ã€‚ å°†sppnetä¸­å¤šå°ºåº¦çš„æ± åŒ–ç®€åŒ–ä¸ºå•å°ºåº¦ï¼Œåªè¾“å‡ºå›ºå®šå°ºå¯¸ä¸ºï¼ˆw, hï¼‰çš„feature mapã€‚ ROI Poolingæ—¶ï¼Œå°†è¾“å…¥çš„h wå¤§å°çš„feature mapåˆ†å‰²æˆH Wå¤§å°çš„å­çª—å£ï¼ˆæ¯ä¸ªå­çª—å£çš„å¤§å°çº¦ä¸ºh/Hï¼Œw/Wï¼Œå…¶ä¸­Hã€Wä¸ºè¶…å‚æ•°ï¼Œå¦‚è®¾å®šä¸º7 x 7ï¼‰ï¼Œå¯¹æ¯ä¸ªå­çª—å£è¿›è¡Œmax-poolingæ“ä½œï¼Œå¾—åˆ°å›ºå®šè¾“å‡ºå¤§å°çš„feature mapã€‚è€ŒåŽè¿›è¡ŒåŽç»­çš„å…¨è¿žæŽ¥å±‚æ“ä½œã€‚ ROI Poolingçš„å®žçŽ°å¯ä»¥å‚è€ƒgithubä¸ŠCaffeç‰ˆæœ¬çš„ä»£ç ï¼šroi_pooling_layer.cpp Faster R-CNNä»£ç åœ°å€ï¼šhttps://github.com/rbgirshick/py-faster-rcnn è¡€ç»†èƒžæ£€æµ‹ ç”±äºŽFast R-CNNä»ç„¶é‡‡ç”¨ssäº§ç”Ÿå€™é€‰æ¡†ï¼Œéžå¸¸è€—æ—¶ï¼ŒFaster R-CNNæå‡ºä½¿ç”¨ç¥žç»ç½‘ç»œæ¥äº§ç”Ÿå€™é€‰æ¡†ï¼Œ Region Proposal Network(RPN) ã€‚ ç½‘ç»œç»“æž„ 1ï¼‰å·ç§¯å±‚(conv layers)ï¼Œç”¨äºŽæå–å›¾ç‰‡çš„ç‰¹å¾ï¼Œè¾“å…¥ä¸ºæ•´å¼ å›¾ç‰‡ï¼Œè¾“å‡ºä¸ºæå–å‡ºçš„ç‰¹å¾ç§°ä¸ºfeature maps2ï¼‰RPNç½‘ç»œ(Region Proposal Network)ï¼Œç”¨äºŽæŽ¨èå€™é€‰åŒºåŸŸï¼Œè¿™ä¸ªç½‘ç»œæ˜¯ç”¨æ¥ä»£æ›¿ä¹‹å‰çš„search selectiveçš„ã€‚è¾“å…¥ä¸ºå›¾ç‰‡ä¸ºfeatrue mapsï¼Œè¾“å‡ºä¸ºå¤šä¸ªå€™é€‰åŒºåŸŸã€‚3ï¼‰RoI poolingï¼Œå’ŒFast R-CNNä¸€æ ·ï¼Œå°†ä¸åŒå¤§å°çš„è¾“å…¥è½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¾“å…¥è¾“å‡ºå’ŒFast R-CNNä¸­RoI poolingä¸€æ ·ã€‚4ï¼‰åˆ†ç±»å’Œå›žå½’ï¼Œè¿™ä¸€å±‚çš„è¾“å‡ºæ˜¯æœ€ç»ˆç›®çš„ï¼Œè¾“å‡ºå€™é€‰åŒºåŸŸæ‰€å±žçš„ç±»ï¼Œå’Œå€™é€‰åŒºåŸŸåœ¨å›¾åƒä¸­çš„ç²¾ç¡®ä½ç½®ã€‚ RPNç½‘ç»œé¦–å…ˆä½œè€…è‡ªå·±è®¾æƒ³åŽŸå›¾ä¸Šæˆ–è€…è¯´featuremapä¸Šæ¯ä¸ªä½ç½®å¯èƒ½ä¼šäº§ç”Ÿkç§å¯èƒ½çš„åŒºåŸŸï¼Œä¸‹å›¾æ‰€ç¤ºï¼Œæ¯ä¸ªä½ç½®ä¸‰ç§é¢ç§¯å¯èƒ½ï¼Œä¸‰ç§é•¿å®½è¡¨ç¤ºæ ·å¼ã€‚ä¸‰ç§é¢ç§¯åˆ†åˆ«æ˜¯128Ã—128ï¼Œ256Ã—256ï¼Œ512Ã—512ï¼Œæ¯ç§é¢ç§¯åˆåˆ†æˆ3ç§é•¿å®½æ¯”ï¼Œåˆ†åˆ«æ˜¯2:1,1:2,1:1 ï¼Œk=9ã€‚ ä¸€ä¸ªé”šç‚¹æ¡†è¢«æ ‡è®°ä¸ºæ­£æ ·æœ¬çš„æ¡ä»¶ï¼š è¿™ä¸ªæ¡†ä¸Žground-trueth boxæœ‰ç€æœ€å¤§é‡å çŽ‡ è¿™ä¸ªæ¡†ä¸Žground-trueth boxé‡å çŽ‡å¤§äºŽ0.7 å¦‚æžœä¸€ä¸ªé”šç‚¹æ¡†ä¸Žæ‰€æœ‰ground-truethçš„é‡åˆçŽ‡éƒ½å°äºŽ0.3ï¼Œé‚£ä¹ˆè¢«æ ‡è®°ä¸ºè´Ÿæ ·æœ¬ è®­ç»ƒæ—¶ä¸€ä¸ªbatchä¸­ï¼Œæ­£è´Ÿæ ·æœ¬çš„æ¯”ä¾‹æŽ§åˆ¶åœ¨50%ï¼š50% RPNç½‘ç»œç›´æŽ¥æ”¾åœ¨æœ€åŽä¸€ä¸ªå·ç§¯å±‚çš„åŽé¢ï¼Œç»è¿‡è®­ç»ƒç›´æŽ¥å¾—åˆ°å€™é€‰åŒºåŸŸã€‚ å…ˆå°†ä¸€å¹…å›¾ç‰‡ç»è¿‡CNNç½‘ç»œå¾—åˆ°ç¬¬äº”ä¸ªå·ç§¯å±‚ï¼Œç„¶åŽå°†ç¬¬äº”ä¸ªå·ç§¯å±‚ç”¨3*3å·ç§¯æ ¸å·ç§¯å¾—åˆ°ä¸€ä¸ª256é€šé“çš„ç‰¹å¾å›¾ï¼Œä¹‹åŽå†åˆ†ä¸ºä¸¤è·¯ï¼Œä¸€è·¯ç”¨1*1å·ç§¯é™ç»´åˆ°åŽŸå°ºå¯¸ä¸‹2*kä¸ªé€šé“ï¼ˆè¿™2*kä¸ªåˆ†åˆ«å¯¹åº”æ˜¯/å¦ä¸ºå¯¹çš„å€™é€‰åŒºåŸŸï¼Œæ€»å…±æœ‰kä¸ªæ¡†ï¼Œæ‰€ä»¥æ˜¯2kä¸ªï¼Œç”±äºŽRPNæ˜¯æå–å€™é€‰æ¡†ï¼Œå¹¶ä¸éœ€è¦åŒºåˆ†ç±»åˆ«ï¼Œæ‰€ä»¥ä¸¤ä¸ªåˆ†æ•°æ˜¯æŒ‡ç‰©ä½“çš„åˆ†æ•°å’ŒèƒŒæ™¯çš„åˆ†æ•° ï¼‰ï¼Œå¦ä¸€è·¯ç”¨1\1çš„å·ç§¯é™ç»´åˆ°åŽŸå°ºå¯¸ä¸‹4*kä¸ªé€šé“ï¼ˆè¿™ä¸ªå°±æ˜¯å·¦ä¸Šè§’åæ ‡ï¼Œå³ä¸‹è§’åæ ‡ï¼Œkç§ï¼‰æ³¨æ„ï¼šè¿™é‡Œå°ºå¯¸æ²¡æœ‰å˜ï¼Œå› ä¸ºæ¯ä¸ªä½ç½®éƒ½è¦è¾“å‡ºè¿™ä¹ˆä¸ªå¾—åˆ†æƒ…å†µï¼Œæˆ‘ä»¬æœ€åŽç¡®å®šæ¯”è¾ƒå¥½çš„ä¸­å¿ƒä½ç½®è¿˜æœ‰å®ƒçš„å°ºå¯¸ã€‚ ç”±äºŽå¯¹æ¯ä¸ªå‘é‡éƒ½è¿›è¡ŒåŒæ ·çš„å…¨è¿žæŽ¥æ“ä½œï¼Œç­‰åŒäºŽå¯¹æ•´ä¸ªç‰¹å¾å›¾åš1X1çš„å·ç§¯.è®­ç»ƒç¨‹åºä¼šåœ¨åˆé€‚çš„anchorsä¸­éšæœºé€‰å–128ä¸ªpositive anchors+128ä¸ªnegative anchorsè¿›è¡Œè®­ç»ƒ è®­ç»ƒè¦å°†RPNç½‘ç»œå’ŒFast R-CNNç½‘ç»œç»„åˆèµ·æ¥ï¼Œå®žçŽ°æƒå€¼å…±äº«ã€‚ Faster R-CNNçš„è®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š å…ˆåœ¨imagenetä¸Šé¢„è®­ç»ƒä¸€ä¸ªCNNæ¨¡åž‹ï¼Œå¾—åˆ°ä¸€ä¸ªåˆå§‹çš„RPNç½‘ç»œ å¦å¤–è®­ç»ƒä¸€ä¸ªimagenetæ¨¡åž‹CNN2ï¼Œç„¶åŽæŠŠåœ¨æ­¥éª¤1å¾—åˆ°çš„Region proposalsç”¨æ¥è®­ç»ƒFast R-CNNæ¨¡åž‹ã€‚ æœ‰äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„Fast R-CNNæ¨¡åž‹ä¹Ÿå°±æ˜¯æ­¥éª¤2çš„æ¨¡åž‹ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªCNNéƒ¨åˆ†å›ºå®šå†åŽ»çŸ«æ­£RPNç½‘ç»œï¼Œä¼šäº§ç”Ÿæ–°çš„proposal ï¼Œæ­¤æ—¶CNNéƒ¨åˆ†å°±ç”¨CNN2ï¼ˆæŠŠCNN1ç›´æŽ¥ä¸¢æŽ‰äº†ï¼ï¼‰ç„¶åŽåŽ»è°ƒå‚RPNåŽé¢é‚£ä¸€éƒ¨åˆ†ï¼Œè°ƒå¥½äº†è¿™æ—¶çš„RPNæ¨¡åž‹åŸºæœ¬å¯ä»¥äº†ã€‚ å®Œäº‹å€™é€‰åŒºåŸŸåˆå˜äº†ï¼Œå›žåŽ»åœ¨è°ƒFastR-CNNæ¨¡åž‹ï¼Œæ­¤æ—¶CNNéƒ¨åˆ†ä¸åŠ¨äº†ï¼Œè¿™ä¸¤ä¸ªç½‘ç»œå·²ç»å…±äº«äº†ï¼æˆ‘ä»¬åŽ»è°ƒåŽé¢çš„å…¨è¿žæŽ¥ã€‚ è®­ç»ƒä¸­æœ‰å››ç§æŸå¤±ï¼š åŒºåŸŸç”Ÿæˆç½‘ç»œçš„å‰åŽæ™¯åˆ†ç±»æŸå¤±ï¼ˆObject or not objectï¼‰ åŒºåŸŸç”Ÿæˆç½‘ç»œçš„åŒºåŸŸä½ç½®æŸå¤±ï¼ˆBounding box proposalï¼‰ Fast RCNNç‰©ä½“åˆ†ç±»æŸå¤±ï¼ˆNormal object classificationï¼‰ Fast RCNNåŒºåŸŸä½ç½®æŸå¤±ï¼ˆImprove previous Bounding box proposalï¼‰ æ•´ä½“ç»“æž„ FPN å·ç§¯ç¥žç»ç½‘ç»œä¸­è¶Šé è¿‘åˆ†ç±»å™¨çš„å±‚ï¼Œæå–çš„è¯­ä¹‰ä¿¡æ¯è¶Šå¼ºï¼Œä½†æ˜¯åˆ†è¾¨çŽ‡è¶Šå°ã€‚ ä¸ºäº†å…¼é¡¾åˆ†è¾¨çŽ‡å’Œè¯­ä¹‰ä¿¡æ¯ï¼ŒFPNå°†é«˜å±‚æå–åˆ°çš„è¯­ä¹‰ä¿¡æ¯è‡ªä¸Šè€Œä¸‹è¿›è¡Œèžåˆã€‚ å€Ÿç”¨Resnetçš„æ€æƒ³ï¼Œä½¿ç”¨è·¨å±‚è¿žæŽ¥ï¼Œä¸Šå±‚è¿›è¡Œ2å€ä¸Šé‡‡æ ·ã€‚ RFCNä»£ç ï¼šhttps://github.com/daijifeng001/r-fcn å‚è€ƒï¼šhttps://blog.csdn.net/baidu_32173921/article/details/71741970 å‡ºå‘ç‚¹ï¼šå›¾ç‰‡åˆ†ç±»çš„å¹³ç§»ä¸å˜æ€§ä¸Žç‰©ä½“æ£€æµ‹ä¹‹é—´çš„å¹³ç§»å˜æ¢æ€§ä¹‹é—´çš„çŸ›ç›¾ ä¸€æ–¹é¢ï¼Œå›¾åƒçº§åˆ«çš„åˆ†ç±»ä»»åŠ¡ä¾§é‡äºŽå¹³ç§»ä¸å˜æ€§ï¼ˆåœ¨ä¸€å¹…å›¾ç‰‡ä¸­å¹³ç§»ä¸€ä¸ªç‰©ä½“è€Œä¸æ”¹å˜å®ƒçš„åˆ¤åˆ«ç»“æžœï¼‰ï¼Œå› æ­¤æ·±åº¦å…¨å·ç§¯ç½‘ç»œç»“æž„å¾ˆé€‚åˆå¤„ç†è¿™ç±»å›¾ç‰‡åˆ†ç±»çš„é—®é¢˜ã€‚ å¦ä¸€æ–¹é¢ï¼Œç‰©ä½“æ£€æµ‹ä»»åŠ¡éœ€è¦å®šä¹‰ç‰©ä½“çš„å…·ä½“ä½ç½®ï¼Œå› æ­¤éœ€è¦å¹³ç§»å˜æ¢ç‰¹æ€§ã€‚ä¸ºäº†è§£å†³è¿™çŸ›ç›¾ï¼Œåœ¨æ£€æµ‹æ–¹æ³•ä¸­æ’å…¥äº†ROI pooling layeråˆ°å·ç§¯å±‚ã€‚ç„¶è€Œï¼Œè¿™ä¸ªè®¾è®¡ç‰ºç‰²äº†è®­ç»ƒå’Œæµ‹è¯•çš„æ•ˆçŽ‡ï¼Œå› ä¸ºå®ƒå¼•å…¥äº†å¤§é‡çš„region-wise layersã€‚ RCNNï¼šç”±äºŽç›´æŽ¥åœ¨å›¾ç‰‡ä¸Šç”Ÿæˆproposalï¼Œæ‰€ä»¥æ²¡æœ‰å…±äº«çš„å·ç§¯å±‚ ç½‘ç»œç»“æž„ Backbone architecture: ResNet 101â€”â€”åŽ»æŽ‰åŽŸå§‹ResNet101çš„æœ€åŽä¸€å±‚å…¨è¿žæŽ¥å±‚ï¼Œä¿ç•™å‰100å±‚ï¼Œå†æŽ¥ä¸€ä¸ª1*1*1024çš„å…¨å·ç§¯å±‚ï¼ˆ100å±‚è¾“å‡ºæ˜¯2048ï¼Œä¸ºäº†é™ç»´ï¼Œå†å¼•å…¥äº†ä¸€ä¸ª1*1çš„å·ç§¯å±‚ï¼‰ k^2(C+1)çš„conv: ResNet101çš„è¾“å‡ºæ˜¯W*H*1024ï¼Œç”¨K\^2(C+1)ä¸ª1024*1*1çš„å·ç§¯æ ¸åŽ»å·ç§¯å³å¯å¾—åˆ°K^2(C+1)ä¸ªå¤§å°ä¸ºW*Hçš„position sensitiveçš„score mapã€‚è¿™æ­¥çš„å·ç§¯æ“ä½œå°±æ˜¯åœ¨åšpredictionã€‚k = 3ï¼Œè¡¨ç¤ºæŠŠä¸€ä¸ªROIåˆ’åˆ†æˆ3*3ï¼Œå¯¹åº”çš„9ä¸ªä½ç½®åˆ†åˆ«æ˜¯ï¼šä¸Šå·¦ï¼ˆå·¦ä¸Šè§’ï¼‰ï¼Œä¸Šä¸­ï¼Œä¸Šå³ï¼Œä¸­å·¦ï¼Œä¸­ä¸­ï¼Œä¸­å³ï¼Œä¸‹å·¦ï¼Œä¸‹ä¸­ï¼Œä¸‹å³ï¼ˆå³ä¸‹è§’ï¼‰ã€‚ k^2(C+1)ä¸ªfeature mapçš„ç‰©ç†æ„ä¹‰: å…±æœ‰k*k = 9ä¸ªé¢œè‰²ï¼Œæ¯ä¸ªé¢œè‰²çš„ç«‹ä½“å—ï¼ˆW*H*(C+1)ï¼‰è¡¨ç¤ºçš„æ˜¯ä¸åŒä½ç½®å­˜åœ¨ç›®æ ‡çš„æ¦‚çŽ‡å€¼ï¼ˆç¬¬ä¸€å—é»„è‰²è¡¨ç¤ºçš„æ˜¯å·¦ä¸Šè§’ä½ç½®ï¼Œæœ€åŽä¸€å—æ·¡è“è‰²è¡¨ç¤ºçš„æ˜¯å³ä¸‹è§’ä½ç½®ï¼‰ã€‚å…±æœ‰k^2*(C+1)ä¸ªfeature mapã€‚æ¯ä¸ªfeature mapï¼Œz(i,j,c)æ˜¯ç¬¬i+k(j-1)ä¸ªç«‹ä½“å—ä¸Šçš„ç¬¬cä¸ªmapï¼ˆ1&lt;= i,j &lt;=3ï¼‰ã€‚(i,j)å†³å®šäº†9ç§ä½ç½®çš„æŸä¸€ç§ä½ç½®ï¼Œå‡è®¾ä¸ºå·¦ä¸Šè§’ä½ç½®ï¼ˆi=j=1ï¼‰ï¼Œcå†³å®šäº†å“ªä¸€ç±»ï¼Œå‡è®¾ä¸ºpersonç±»ã€‚åœ¨z(i,j,c)è¿™ä¸ªfeature mapä¸Šçš„æŸä¸€ä¸ªåƒç´ çš„ä½ç½®æ˜¯ï¼ˆx,yï¼‰ï¼Œåƒç´ å€¼æ˜¯valueï¼Œåˆ™valueè¡¨ç¤ºçš„æ˜¯åŽŸå›¾å¯¹åº”çš„(x,y)è¿™ä¸ªä½ç½®ä¸Šå¯èƒ½æ˜¯äººï¼ˆc=â€˜personâ€™ï¼‰ä¸”æ˜¯äººçš„å·¦ä¸Šéƒ¨ä½ï¼ˆi=j=1ï¼‰çš„æ¦‚çŽ‡å€¼ã€‚ åŽŸå§‹å›¾ç‰‡ç»è¿‡convå·ç§¯å¾—åˆ°feature map1ï¼Œå…¶ä¸­ä¸€ä¸ªsubnetworkå¦‚åŒFastRCNNï¼šä½¿ç”¨RPNåœ¨featuremap1ä¸Šæ»‘åŠ¨äº§ç”Ÿregion proposalå¤‡ç”¨ï¼›å¦ä¸€ä¸ªsubnetworkåˆ™ç»§ç»­å·ç§¯ï¼Œå¾—åˆ°k^2(k=3)æ·±åº¦çš„featuremap2ï¼Œæ ¹æ®RPNäº§ç”Ÿçš„RoI(region proposal)åœ¨è¿™äº›featuremap2ä¸Šè¿›è¡Œæ± åŒ–å’Œæ‰“åˆ†åˆ†ç±»æ“ä½œï¼Œå¾—åˆ°æœ€ç»ˆçš„æ£€æµ‹ç»“æžœã€‚ ROI pooling: å°±æ˜¯faster RCNNä¸­çš„ROI poolingï¼Œä¹Ÿå°±æ˜¯ä¸€å±‚çš„SPPç»“æž„ã€‚ä¸»è¦ç”¨æ¥å°†ä¸åŒå¤§å°çš„ROIå¯¹åº”çš„feature mapæ˜ å°„æˆåŒæ ·ç»´åº¦çš„ç‰¹å¾ï¼Œæ€è·¯æ˜¯ä¸è®ºå¯¹å¤šå¤§çš„ROIï¼Œè§„å®šåœ¨ä¸Šé¢ç”»ä¸€ä¸ªn*n ä¸ªbinçš„ç½‘æ ¼ï¼Œæ¯ä¸ªç½‘æ ¼é‡Œçš„æ‰€æœ‰åƒç´ å€¼åšä¸€ä¸ªpoolingï¼ˆå¹³å‡ï¼‰ï¼Œè¿™æ ·ä¸è®ºå›¾åƒå¤šå¤§ï¼ŒpoolingåŽçš„ROIç‰¹å¾ç»´åº¦éƒ½æ˜¯n*nã€‚æ³¨æ„ä¸€ç‚¹ROI poolingæ˜¯æ¯ä¸ªfeature mapå•ç‹¬åšï¼Œä¸æ˜¯å¤šä¸ªchannelä¸€èµ·çš„ã€‚ ROI poolingçš„è¾“å…¥å’Œè¾“å‡ºï¼šROI poolingæ“ä½œçš„è¾“å…¥ï¼ˆå¯¹äºŽC+1ä¸ªç±»ï¼‰æ˜¯k^2*(C+1)*Wâ€™ *Hâ€™ï¼ˆWâ€™å’ŒHâ€™æ˜¯ROIçš„å®½åº¦å’Œé«˜åº¦ï¼‰çš„score mapä¸ŠæŸROIå¯¹åº”çš„é‚£ä¸ªç«‹ä½“å—ï¼Œä¸”è¯¥ç«‹ä½“å—ç»„æˆä¸€ä¸ªæ–°çš„k^2(C+1)\Wâ€™ *Hâ€™çš„ç«‹ä½“å—ï¼šæ¯ä¸ªé¢œè‰²çš„ç«‹ä½“å—ï¼ˆC+1ï¼‰éƒ½åªæŠ å‡ºå¯¹åº”ä½ç½®çš„ä¸€ä¸ªbinï¼ŒæŠŠè¿™k*kä¸ªbinç»„æˆæ–°çš„ç«‹ä½“å—ï¼Œå¤§å°ä¸ºï¼ˆC+1ï¼‰*Wâ€™*Hâ€™ã€‚ä¾‹å¦‚ï¼Œä¸‹å›¾ä¸­çš„ç¬¬ä¸€å—é»„è‰²åªå–å·¦ä¸Šè§’çš„binï¼Œæœ€åŽä¸€å—æ·¡è“è‰²åªå–å³ä¸‹è§’çš„binã€‚æ‰€æœ‰çš„biné‡æ–°ç»„åˆåŽå°±å˜æˆäº†ç±»ä¼¼å³å›¾çš„é‚£ä¸ªè–„çš„ç«‹ä½“å—ï¼ˆå›¾ä¸­çš„è¿™ä¸ªæ˜¯æ± åŒ–åŽçš„è¾“å‡ºï¼Œå³æ¯ä¸ªé¢ä¸Šçš„æ¯ä¸ªbinä¸Šå·²ç»æ˜¯ä¸€ä¸ªåƒç´ ã€‚æ± åŒ–å‰è¿™ä¸ªbinå¯¹åº”çš„æ˜¯ä¸€ä¸ªåŒºåŸŸï¼Œæ˜¯å¤šä¸ªåƒç´ ï¼‰ã€‚ROI poolingçš„è¾“å‡ºä¸ºä¸ºä¸€ä¸ªï¼ˆC+1ï¼‰*k*kçš„ç«‹ä½“å—ï¼Œå¦‚ä¸‹å›¾ä¸­çš„å³å›¾ è¯†åˆ«ç»“æžœ è¯†åˆ«æˆåŠŸçš„æƒ…å†µï¼š ä¸‹é¢è¿™å¼ figure3æè¿°äº†ä¸€æ¬¡æˆåŠŸçš„ä½ç½®æ•æ„Ÿæ€§è¯†åˆ«ï¼Œfigure3ä¸­é—´çš„ä¹å¼ featuremapå®žé™…ä¸Šå°±æ˜¯ä½ç½®æ•æ„Ÿç»“æž„å›¾å·¦ä¾§çš„ä¹å±‚featuremapï¼Œæ¯ä¸€å±‚åˆ†åˆ«å¯¹åº”ç‰©ä½“çš„ä¸€ä¸ªæ„Ÿå…´è¶£éƒ¨ä½ï¼Œå°±æ¯”å¦‚[2,2]è¿™å¼ å›¾ä¸Šä¸­ä½ç½®ä»£è¡¨äººä½“çš„å¤´éƒ¨ã€‚å› è€Œæ‰€æœ‰ä½ç½®çš„å“åº”ç»è¿‡ä¸€æ¬¡æ± åŒ–éƒ½ä¿å­˜åœ¨figure3å³ä¾§33(C+1)çš„å¯¹åº”ä½ç½®äº†ï¼ˆåŽŸæ¥æ˜¯ä¸Šä¸­çŽ°åœ¨è¿˜æ˜¯ä¸Šä¸­ï¼ŒåŽŸæ¥æ˜¯å·¦ä¸‹çŽ°åœ¨è¿˜æ˜¯å·¦ä¸‹ï¼‰ï¼Œå¦‚æ­¤ä½ç½®æ•æ„Ÿæ€§å¾—åˆ°ä¿ç•™ã€‚ å½“poolingmapä¹ä¸ªæ–¹æ¡†å¾—åˆ†éƒ½è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›¸ä¿¡è¿™ä¸ªregion proposalä¸­æ˜¯å­˜åœ¨ç‰©ä½“çš„ã€‚ è¯†åˆ«å¤±è´¥çš„æƒ…å†µï¼š ä¼˜ç‚¹ æ¯”Faster R-CNNæ›´å¿« æ€è·¯æ›´ç®€å• è€ƒè™‘äº†ä½ç½®æ•æ„ŸåŒºåŸŸä¿¡æ¯ï¼Œæ›´é€‚åˆç›®æ ‡æ£€æµ‹ æ€»ç»“ RCNN 1. åœ¨å›¾åƒä¸­ç¡®å®šçº¦1000-2000ä¸ªå€™é€‰æ¡† (ä½¿ç”¨é€‰æ‹©æ€§æœç´¢) 2. æ¯ä¸ªå€™é€‰æ¡†å†…å›¾åƒå—ç¼©æ”¾è‡³ç›¸åŒå¤§å°ï¼Œå¹¶è¾“å…¥åˆ°CNNå†…è¿›è¡Œç‰¹å¾æå– 3. å¯¹å€™é€‰æ¡†ä¸­æå–å‡ºçš„ç‰¹å¾ï¼Œä½¿ç”¨åˆ†ç±»å™¨åˆ¤åˆ«æ˜¯å¦å±žäºŽä¸€ä¸ªç‰¹å®šç±» 4. å¯¹äºŽå±žäºŽæŸä¸€ç‰¹å¾çš„å€™é€‰æ¡†ï¼Œç”¨å›žå½’å™¨è¿›ä¸€æ­¥è°ƒæ•´å…¶ä½ç½® Fast RCNN åœ¨å›¾åƒä¸­ç¡®å®šçº¦1000-2000ä¸ªå€™é€‰æ¡† (ä½¿ç”¨é€‰æ‹©æ€§æœç´¢) å¯¹æ•´å¼ å›¾ç‰‡è¾“è¿›CNNï¼Œå¾—åˆ°feature map æ‰¾åˆ°æ¯ä¸ªå€™é€‰æ¡†åœ¨feature mapä¸Šçš„æ˜ å°„patchï¼Œå°†æ­¤patchä½œä¸ºæ¯ä¸ªå€™é€‰æ¡†çš„å·ç§¯ç‰¹å¾è¾“å…¥åˆ°SPP layerå’Œä¹‹åŽçš„å±‚ å¯¹å€™é€‰æ¡†ä¸­æå–å‡ºçš„ç‰¹å¾ï¼Œä½¿ç”¨åˆ†ç±»å™¨åˆ¤åˆ«æ˜¯å¦å±žäºŽä¸€ä¸ªç‰¹å®šç±» å¯¹äºŽå±žäºŽæŸä¸€ç‰¹å¾çš„å€™é€‰æ¡†ï¼Œç”¨å›žå½’å™¨è¿›ä¸€æ­¥è°ƒæ•´å…¶ä½ç½® Faster RCNN å¯¹æ•´å¼ å›¾ç‰‡è¾“è¿›CNNï¼Œå¾—åˆ°feature map å·ç§¯ç‰¹å¾è¾“å…¥åˆ°RPNï¼Œå¾—åˆ°å€™é€‰æ¡†çš„ç‰¹å¾ä¿¡æ¯ å¯¹å€™é€‰æ¡†ä¸­æå–å‡ºçš„ç‰¹å¾ï¼Œä½¿ç”¨åˆ†ç±»å™¨åˆ¤åˆ«æ˜¯å¦å±žäºŽä¸€ä¸ªç‰¹å®šç±» å¯¹äºŽå±žäºŽæŸä¸€ç‰¹å¾çš„å€™é€‰æ¡†ï¼Œç”¨å›žå½’å™¨è¿›ä¸€æ­¥è°ƒæ•´å…¶ä½ç½®]]></content>
      <categories>
        <category>AI</category>
        <category>CV</category>
        <category>ç›®æ ‡æ£€æµ‹</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>CV</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›®æ ‡æ£€æµ‹äºŒ]]></title>
    <url>%2F2020%2F10%2F12%2F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[ç›®æ ‡æ£€æµ‹äºŒR-CNNè®ºæ–‡ï¼š ã€ŠRich feature hierarchies for accurate oject detection and semantic segmentationã€‹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/rbgirshick/rcnn R-CNNæ¦‚æ‹¬èµ·æ¥å°±æ˜¯selective search+CNN+L-SVMçš„æ£€æµ‹å™¨ ç”¨selective searchä»£æ›¿ä¼ ç»Ÿçš„æ»‘åŠ¨çª—å£ï¼Œæå–å‡º2kä¸ªå€™é€‰region proposal å¯¹äºŽæ¯ä¸ªregionï¼Œç”¨æ‘˜æŽ‰äº†æœ€åŽä¸€å±‚softmaxå±‚çš„AlexNetæ¥æå–ç‰¹å¾ è®­ç»ƒå‡ºæ¥Kä¸ªL-SVMä½œä¸ºåˆ†ç±»å™¨(æ¯ä¸ªç›®æ ‡ç±»ä¸€ä¸ªSVMåˆ†ç±»å™¨ï¼ŒKç›®æ ‡ç±»ä¸ªæ•°)ï¼Œä½¿ç”¨AlexNetæå–å‡ºæ¥çš„ç‰¹å¾ä½œä¸ºè¾“å‡ºï¼Œå¾—åˆ°æ¯ä¸ªregionå±žäºŽæŸä¸€ç±»çš„å¾—åˆ† æœ€åŽå¯¹æ¯ä¸ªç±»åˆ«ç”¨NMS(non-maximum-suppression)æ¥èˆå¼ƒæŽ‰ä¸€éƒ¨åˆ†regionï¼Œå¾—åˆ°detectionçš„ç»“æžœ(å¯¹å¾—åˆ°çš„ç»“æžœåšé’ˆå¯¹boundingboxå›žå½’ï¼Œç”¨æ¥ä¿®æ­£é¢„æµ‹çš„boundingboxçš„ä½ç½®) è¿ç§»å­¦ä¹ é‡‡ç”¨åœ¨ ImageNet ï¼ˆ ImageNet ILSVC 2012 ï¼Œ ä¸€åƒä¸‡å›¾åƒï¼Œ1000ç±» ï¼‰ä¸Šå·²ç»è®­ç»ƒå¥½çš„æ¨¡åž‹ï¼Œç„¶åŽåœ¨ PASCAL VOC ï¼ˆ PASCAL VOC 2007 ï¼Œ ä¸€ä¸‡å›¾åƒï¼Œ20ç±» ï¼‰æ•°æ®é›†ä¸Šè¿›è¡Œ fine-tuneã€‚ å› ä¸º ImageNet çš„å›¾åƒé«˜è¾¾å‡ ç™¾ä¸‡å¼ ï¼Œåˆ©ç”¨å·ç§¯ç¥žç»ç½‘ç»œå……åˆ†å­¦ä¹ æµ…å±‚çš„ç‰¹å¾ï¼Œç„¶åŽåœ¨å°è§„æ¨¡æ•°æ®é›†åšè§„æ¨¡åŒ–è®­ç»ƒï¼Œä»Žè€Œå¯ä»¥è¾¾åˆ°å¥½çš„æ•ˆæžœã€‚ è¿™é‡Œåœ¨ ImageNet ä¸Šè®­ç»ƒçš„æ˜¯æ¨¡åž‹è¯†åˆ«ç‰©ä½“ç±»åž‹çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯é¢„æµ‹ bbox ä½ç½®çš„èƒ½åŠ› ç‰¹å¾æå–R-CNN æŠ½å–äº†ä¸€ä¸ª 4096 ç»´çš„ç‰¹å¾å‘é‡ï¼Œé‡‡ç”¨çš„æ˜¯ Alexnetï¼ŒåŸºäºŽ Caffe è¿›è¡Œä»£ç å¼€å‘ï¼Œä¹‹åŽé€å…¥4096-&gt;1000çš„å…¨è¿žæŽ¥å±‚è¿›è¡Œåˆ†ç±»ï¼Œå­¦ä¹ çŽ‡0.01ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ Alextnet çš„è¾“å…¥å›¾åƒå¤§å°æ˜¯ 227x227ã€‚ è€Œé€šè¿‡ Selective Search äº§ç”Ÿçš„å€™é€‰åŒºåŸŸå¤§å°ä¸ä¸€ï¼Œä¸ºäº†ä¸Ž Alexnet å…¼å®¹ï¼ŒR-CNN é‡‡ç”¨äº†éžå¸¸æš´åŠ›çš„æ‰‹æ®µï¼Œé‚£å°±æ˜¯æ— è§†å€™é€‰åŒºåŸŸçš„å¤§å°å’Œå½¢çŠ¶ï¼Œç»Ÿä¸€å˜æ¢åˆ° 227*227 çš„å°ºå¯¸ã€‚ æœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œåœ¨å¯¹ Region è¿›è¡Œå˜æ¢çš„æ—¶å€™ï¼Œé¦–å…ˆå¯¹è¿™äº›åŒºåŸŸè¿›è¡Œè†¨èƒ€å¤„ç†ï¼Œåœ¨å…¶ box å‘¨å›´é™„åŠ äº† p ä¸ªåƒç´ ï¼Œä¹Ÿå°±æ˜¯äººä¸ºæ·»åŠ äº†è¾¹æ¡†ï¼Œåœ¨è¿™é‡Œ p=16ã€‚ è°ƒä¼˜è®­ç»ƒåŒæ ·ä½¿ç”¨ä¸Šè¿°ç½‘ç»œï¼Œæœ€åŽä¸€å±‚æ¢æˆ4096-&gt;21çš„å…¨è¿žæŽ¥ç½‘ç»œã€‚å­¦ä¹ çŽ‡0.001ï¼Œæ¯ä¸€ä¸ªbatchåŒ…å«32ä¸ªæ­£æ ·æœ¬ï¼ˆå±žäºŽ20ç±»ï¼‰å’Œ96ä¸ªèƒŒæ™¯ï¼ˆä¸»è¦ç”±äºŽæ­£æ ·æœ¬è¿‡å°‘ï¼‰ã€‚ ä½¿ç”¨PASCAL VOC 2007çš„è®­ç»ƒé›†ï¼Œè¾“å…¥ä¸€å¼ å›¾ç‰‡ï¼Œè¾“å‡º21ç»´çš„ç±»åˆ«æ ‡å·ï¼Œè¡¨ç¤º20ç±»+èƒŒæ™¯ã€‚è€ƒå¯Ÿä¸€ä¸ªå€™é€‰æ¡†å’Œå½“å‰å›¾åƒä¸Šæ‰€æœ‰æ ‡å®šæ¡†é‡å é¢ç§¯æœ€å¤§çš„ä¸€ä¸ªã€‚å¦‚æžœé‡å æ¯”ä¾‹å¤§äºŽ0.5ï¼Œåˆ™è®¤ä¸ºæ­¤å€™é€‰æ¡†ä¸ºæ­¤æ ‡å®šçš„ç±»åˆ«ï¼›å¦åˆ™è®¤ä¸ºæ­¤å€™é€‰æ¡†ä¸ºèƒŒæ™¯ã€‚ åˆ†ç±»å™¨å¯¹æ¯ä¸€ç±»ç›®æ ‡ï¼Œä½¿ç”¨ä¸€ä¸ªçº¿æ€§SVMäºŒç±»åˆ†ç±»å™¨è¿›è¡Œåˆ¤åˆ«ã€‚è¾“å…¥ä¸ºæ·±åº¦ç½‘ç»œè¾“å‡ºçš„4096ç»´ç‰¹å¾ï¼Œè¾“å‡ºæ˜¯å¦å±žäºŽæ­¤ç±»ã€‚ç”±äºŽè´Ÿæ ·æœ¬å¾ˆå¤šï¼Œä½¿ç”¨hard negative miningæ–¹æ³•ã€‚æ­£æ ·æœ¬ ï¼šæœ¬ç±»çš„çœŸå€¼æ ‡å®šæ¡†ã€‚è´Ÿæ ·æœ¬ ï¼šè€ƒå¯Ÿæ¯ä¸€ä¸ªå€™é€‰æ¡†ï¼Œå¦‚æžœå’Œæœ¬ç±»æ‰€æœ‰æ ‡å®šæ¡†çš„é‡å éƒ½å°äºŽ0.3ï¼Œè®¤å®šå…¶ä¸ºè´Ÿæ ·æœ¬ bboxå›žå½’è¾“å…¥ä¸ºæ·±åº¦ç½‘ç»œpool5å±‚çš„4096ç»´ç‰¹å¾ï¼Œè¾“å‡ºä¸ºxyæ–¹å‘çš„ç¼©æ”¾å’Œå¹³ç§»ã€‚ è®­ç»ƒæ ·æœ¬åˆ¤å®šä¸ºæœ¬ç±»çš„å€™é€‰æ¡†ä¸­ï¼Œå’ŒçœŸå€¼é‡å é¢ç§¯å¤§äºŽ0.6çš„å€™é€‰æ¡†ã€‚ SPP-Netè®ºæ–‡ï¼šã€ŠSpatial Pyramid Pooling in Deep Convolutional Networks for Visual Recognitionã€‹ æ¶ˆé™¤äº†CNNå¯¹äºŽå›¾åƒè¾“å…¥å°ºå¯¸çš„é™åˆ¶ï¼Œ SPP-netç»“æž„èƒ½å¤Ÿäº§ç”Ÿå›ºå®šå¤§å°çš„è¡¨ç¤ºï¼ˆfixed-length representationï¼‰,è€Œä¸å…³å¿ƒè¾“å…¥å›¾åƒçš„å°ºå¯¸æˆ–æ¯”ä¾‹ã€‚é‡‘å­—å¡”æ± åŒ–å¯¹ç‰©ä½“å½¢å˜å¾ˆé²æ£’(robust to object deformations)ã€‚ ç”±äºŽä»¥ä¸Šä¼˜ç‚¹ï¼ŒSPP-netå¯æ™®éæ”¹è¿›å„ç§åŸºäºŽCNNçš„å›¾åƒåˆ†ç±»æ–¹æ³•ã€‚ SPP-netåœ¨ç›®æ ‡æ£€æµ‹ä¸Šä¹Ÿè¡¨çŽ°çªå‡ºã€‚ç”¨SPP-netï¼Œæˆ‘ä»¬åªéœ€è¦ä»Žæ•´å¼ å›¾ç‰‡è®¡ç®—ä¸€æ¬¡ç‰¹å¾å›¾ï¼ˆfeature mapï¼‰ï¼Œç„¶åŽå¯¹ä»»æ„å°ºå¯¸çš„åŒºåŸŸï¼ˆå­å›¾åƒï¼‰è¿›è¡Œç‰¹å¾æ± åŒ–ï¼Œä»¥äº§ç”Ÿä¸€ä¸ªå›ºå®šå°ºå¯¸çš„è¡¨ç¤º(representation)ç”¨äºŽè®­ç»ƒæ£€æµ‹å™¨(detectors)ã€‚ è¿™ä¸ªæ–¹æ³•é¿å…äº†åå¤è®¡ç®—å·ç§¯ç‰¹å¾ã€‚åœ¨å¤„ç†æµ‹è¯•å›¾åƒæ—¶ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨VOC2007æ•°æ®é›†ä¸Šï¼Œè¾¾åˆ°ç›¸åŒæˆ–æ›´å¥½çš„æ€§èƒ½æƒ…å†µä¸‹ï¼Œæ¯”R-CNNæ–¹æ³•å¿«24-102Xå€ã€‚ ä¸ºäº†è§£å†³å‰ªè£å¸¦æ¥çš„ä¿¡æ¯ä¸¢å¤±å’Œå˜å½¢å¯¼è‡´çš„ä¿¡æ¯æ‰­æ›²ï¼Œé‡‡ç”¨ç©ºé—´é‡‘å­—å¡”æ± åŒ–( spatial pyramid poolingï¼ŒSPP)å±‚ï¼Œç§»é™¤å¯¹ç½‘ç»œå›ºå®šå°ºå¯¸çš„é™åˆ¶ï¼ˆé€šå¸¸å°†å…¶æ”¾åœ¨å·ç§¯åŽï¼ŒFCå±‚ä¹‹å‰ï¼‰ã€‚ SPPåŽŸç† ä¸‰ç§é¢œè‰²çš„ç½‘æ ¼ï¼Œæ˜¯å°†ä»Žconv5å¾—åˆ°çš„ç‰¹å¾åˆ†åˆ«æ˜ å°„æˆ16ã€4ã€1ä»½ï¼Œ16X256ä¸­çš„256è¡¨ç¤ºçš„æ˜¯channelï¼Œå³SPPå¯¹æ¯ä¸€å±‚éƒ½åˆ†æˆ16ä»½(ä¸ä¸€å®šæ˜¯ç­‰æ¯”åˆ†)ã€‚å°†ç‰¹å¾æ˜ å°„åŽè¿›è¡Œæœ€å¤§æ± åŒ–ã€‚ é€šè¿‡SPPï¼Œå¯¹ä»»æ„çš„è¾“å…¥å¯ä»¥å¾—åˆ°å›ºå®šçš„21*256å¤§å°çš„è¾“å‡ºï¼Œ21æŒ‡çš„æ˜¯20ä¸ªç±»åˆ«åŠ ä¸Š1ä¸ªèƒŒæ™¯ã€‚ å…¬å¼ å› æ­¤ï¼Œå½“è¾“å‡ºçš„å°ºå¯¸ä¸º224224æ—¶ï¼Œconv5åŽå¾—åˆ°çš„ç‰¹å¾å›¾å¤§å°ä¸º13\13ï¼Œè®¾ä¸ºaï¼Œç¬¬ä¸€ä¸ªæ˜ å°„ä¸º4*4ï¼Œè®¾ä¸ºnã€‚ å¦‚æžœæƒ³è¦è¿ç®—åŽå¾—åˆ°çš„å¤§å°ä¹Ÿä¸ºnã€‚é‚£ä¹ˆä»¤ï¼š $windows_size=[a/n]$ å‘ä¸Šå–æ•´ ï¼Œ $stride_size=[a/n]$å‘ä¸‹å–æ•´ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹è¿™æ—¶æœ‰ï¼š$ans = (a-n)/(a/n)+1=n$ ä½†å¦‚æžœå¯¹äºŽè¾“å…¥ï¼š(7,11)ï¼Œé‡‘å­—å¡”bins=(4,4)ï¼Œè¿™æ—¶K=(2,3)ï¼ŒStride=(1,2)ï¼Œç»“æžœä¸º(6,5)ï¼Œå¹¶ä¸æ˜¯(4,4) ä¿®è®¢å…¬å¼åŽï¼š ä»£ç  marsggbo/sppnet-pytorch 123456789101112131415161718192021222324252627282930313233import mathimport torchimport torch.nn.functional as F# æž„å»ºSPPå±‚(ç©ºé—´é‡‘å­—å¡”æ± åŒ–å±‚)class SPPLayer(torch.nn.Module): def __init__(self, num_levels, pool_type='max_pool'): super(SPPLayer, self).__init__() self.num_levels = num_levels self.pool_type = pool_type def forward(self, x): num, c, h, w = x.size() # num:æ ·æœ¬æ•°é‡ c:é€šé“æ•° h:é«˜ w:å®½ for i in range(self.num_levels): level = i+1 kernel_size = (math.ceil(h / level), math.ceil(w / level)) stride = (math.ceil(h / level), math.ceil(w / level)) pooling = (math.floor((kernel_size[0]*level-h+1)/2), math.floor((kernel_size[1]*level-w+1)/2)) # é€‰æ‹©æ± åŒ–æ–¹å¼ if self.pool_type == 'max_pool': tensor = F.max_pool2d(x, kernel_size=kernel_size, stride=stride, padding=pooling).view(num, -1) else: tensor = F.avg_pool2d(x, kernel_size=kernel_size, stride=stride, padding=pooling).view(num, -1) # å±•å¼€ã€æ‹¼æŽ¥ if (i == 0): x_flatten = tensor.view(num, -1) else: x_flatten = torch.cat((x_flatten, tensor.view(num, -1)), 1) return x_flatten å¤šå°ºåº¦è®­ç»ƒé™¤æ­¤ä¹‹å¤–ï¼Œ è®­ç»ƒé˜¶æ®µï¼Œå›¾åƒå¯ä»¥æœ‰å„ç§å°ºå¯¸å’Œç¼©æ”¾å°ºåº¦ã€‚ä½¿ç”¨å„ç§å°ºå¯¸çš„å›¾åƒè¿›è¡Œè®­ç»ƒ,å¯ä»¥æé«˜ç¼©æ”¾ä¸å˜æ€§ï¼Œä»¥åŠå‡å°‘è¿‡æ‹Ÿåˆã€‚åŸºäºŽæ­¤çš„å¤šå°ºåº¦è®­ç»ƒæ–¹æ³•ï¼š æ¯ä¸ªepochï¼Œæˆ‘ä»¬é’ˆå¯¹ä¸€ä¸ªç»™å®šçš„è¾“å…¥å°ºå¯¸è¿›è¡Œç½‘ç»œè®­ç»ƒï¼Œç„¶åŽåœ¨ä¸‹ä¸€ä¸ªepochï¼Œå†åˆ‡æ¢åˆ°å¦ä¸€ä¸ªå°ºå¯¸ã€‚å®žéªŒè¡¨æ˜Žï¼Œè¿™ç§å¤šå°ºåº¦è®­ç»ƒå’Œä¼ ç»Ÿçš„å•ä¸€å°ºåº¦è®­ç»ƒä¸€æ ·å¯ä»¥æ”¶æ•›ï¼Œå¹¶ä¸”èƒ½è¾¾åˆ°æ›´å¥½çš„æµ‹è¯•ç²¾åº¦ã€‚ å¤šå°ºå¯¸è®­ç»ƒçš„ä¸»è¦ç›®çš„æ˜¯åœ¨ä¿è¯å·²ç»å……åˆ†åˆ©ç”¨çŽ°åœ¨è¢«è¾ƒå¥½ä¼˜åŒ–çš„å›ºå®šå°ºå¯¸ç½‘ç»œå®žçŽ°çš„åŒæ—¶ï¼Œæ¨¡æ‹Ÿä¸åŒçš„è¾“å…¥å°ºå¯¸ã€‚ R-CNN vs SPP-Net R-CNN é¦–å…ˆé€šè¿‡é€‰æ‹©æ€§æœç´¢ï¼Œå¯¹å¾…æ£€æµ‹çš„å›¾ç‰‡è¿›è¡Œæœç´¢å‡º~2000ä¸ªå€™é€‰çª—å£ã€‚ æŠŠè¿™2kä¸ªå€™é€‰çª—å£çš„å›¾ç‰‡éƒ½ç¼©æ”¾åˆ°227*227ï¼Œç„¶åŽåˆ†åˆ«è¾“å…¥CNNä¸­ï¼Œæ¯ä¸ªproposalæå–å‡ºä¸€ä¸ªç‰¹å¾å‘é‡ï¼Œä¹Ÿå°±æ˜¯è¯´åˆ©ç”¨CNNå¯¹æ¯ä¸ªproposalè¿›è¡Œæå–ç‰¹å¾å‘é‡ã€‚ æŠŠä¸Šé¢æ¯ä¸ªå€™é€‰çª—å£çš„å¯¹åº”ç‰¹å¾å‘é‡ï¼Œåˆ©ç”¨SVMç®—æ³•è¿›è¡Œåˆ†ç±»è¯†åˆ«ã€‚ SPP-Net é¦–å…ˆé€šè¿‡é€‰æ‹©æ€§æœç´¢ï¼Œå¯¹å¾…æ£€æµ‹çš„å›¾ç‰‡è¿›è¡Œæœç´¢å‡º2000ä¸ªå€™é€‰çª—å£ã€‚è¿™ä¸€æ­¥å’ŒR-CNNä¸€æ ·ã€‚ ç‰¹å¾æå–é˜¶æ®µã€‚è¿™ä¸€æ­¥å°±æ˜¯å’ŒR-CNNæœ€å¤§çš„åŒºåˆ«äº†ï¼Œè¿™ä¸€æ­¥éª¤çš„å…·ä½“æ“ä½œå¦‚ä¸‹ï¼šæŠŠæ•´å¼ å¾…æ£€æµ‹çš„å›¾ç‰‡ï¼Œè¾“å…¥CNNä¸­ï¼Œè¿›è¡Œä¸€æ¬¡æ€§ç‰¹å¾æå–ï¼Œå¾—åˆ°feature mapsï¼Œç„¶åŽåœ¨feature mapsä¸­æ‰¾åˆ°å„ä¸ªå€™é€‰æ¡†çš„åŒºåŸŸï¼Œå†å¯¹å„ä¸ªå€™é€‰æ¡†é‡‡ç”¨é‡‘å­—å¡”ç©ºé—´æ± åŒ–ï¼Œæå–å‡ºå›ºå®šé•¿åº¦çš„ç‰¹å¾å‘é‡ã€‚è€ŒR-CNNè¾“å…¥çš„æ˜¯æ¯ä¸ªå€™é€‰æ¡†ï¼Œç„¶åŽåœ¨è¿›å…¥CNNï¼Œå› ä¸ºSPP-Netåªéœ€è¦ä¸€æ¬¡å¯¹æ•´å¼ å›¾ç‰‡è¿›è¡Œç‰¹å¾æå–ï¼Œé€Ÿåº¦ä¼šå¤§å¤§æå‡ã€‚ æœ€åŽä¸€æ­¥ä¹Ÿæ˜¯å’ŒR-CNNä¸€æ ·ï¼Œé‡‡ç”¨SVMç®—æ³•è¿›è¡Œç‰¹å¾å‘é‡åˆ†ç±»è¯†åˆ«ã€‚ ç”¨äºŽç›®æ ‡æ£€æµ‹ æˆ‘ä»¬å°†SPP-netåº”ç”¨äºŽç‰©ä½“æ£€æµ‹ã€‚åªåœ¨æ•´å¼ å›¾åƒä¸ŠæŠ½å–ä¸€æ¬¡ç‰¹å¾ã€‚ç„¶åŽåœ¨æ¯ä¸ªç‰¹å¾å›¾çš„å€™é€‰çª—å£ä¸Šåº”ç”¨ç©ºé—´é‡‘å­—å¡”æ± åŒ–ï¼Œå½¢æˆè¿™ä¸ªçª—å£çš„ä¸€ä¸ªå›ºå®šé•¿åº¦è¡¨ç¤ºã€‚å› ä¸ºåªåº”ç”¨ä¸€æ¬¡å·ç§¯ç½‘ç»œï¼Œè¿™ç§æ–¹æ³•å¿«å¾—å¤šã€‚SPP-netä»Žç‰¹å¾å›¾ä¸­ç›´æŽ¥æŠ½å–ç‰¹å¾ï¼Œè€ŒR-CNNåˆ™è¦ä»Žå›¾åƒåŒºåŸŸæŠ½å–ã€‚ä¹‹å‰çš„ä¸€äº›å·¥ä½œä¸­ï¼Œå¯å˜æ€§éƒ¨ä»¶æ¨¡åž‹(Deformable Part Model, DPM)ä»ŽHOGç‰¹å¾å›¾çš„çª—å£ä¸­æŠ½å–å›¾åƒï¼Œé€‰æ‹©æ€§æœç´¢æ–¹æ³•ä»ŽSIFTç¼–ç åŽçš„ç‰¹å¾å›¾çš„çª—å£ä¸­æŠ½å–ç‰¹å¾ã€‚Overfeatä¹Ÿæ˜¯ä»Žå·ç§¯ç‰¹å¾å›¾ä¸­æŠ½å–ç‰¹å¾ï¼Œä½†éœ€è¦é¢„å®šä¹‰çš„çª—å£å°ºå¯¸ã€‚ä½œä¸ºå¯¹æ¯”ï¼Œæˆ‘ä»¬çš„ç‰¹å¾æŠ½å–å¯ä»¥åœ¨ä»»æ„å°ºå¯¸çš„æ·±åº¦å·ç§¯ç‰¹å¾å›¾çª—å£ä¸Šã€‚ æˆ‘ä»¬ä½¿ç”¨é€‰æ‹©æ€§æœç´¢[20]çš„â€œfastâ€æ¨¡å¼å¯¹æ¯å¼ å›¾ç‰‡äº§ç”Ÿ2000ä¸ªå€™é€‰çª—å£ã€‚ç„¶åŽç¼©æ”¾å›¾åƒä»¥æ»¡è¶³min(w;h) = sï¼Œå¹¶ä¸”ä»Žæ•´å¼ å›¾åƒä¸­æŠ½å–ç‰¹å¾å›¾ã€‚æˆ‘ä»¬æš‚æ—¶ä½¿ç”¨ZF-5çš„SPP-net æ¨¡åž‹ï¼ˆå•ä¸€å°ºå¯¸è®­ç»ƒï¼‰ã€‚åœ¨æ¯ä¸ªå€™é€‰çª—å£ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª4çº§ç©ºé—´é‡‘å­—å¡”ï¼ˆ1Ã—1, 2Ã—2, 3Ã—3, 6Ã—6, æ€»å…±50å—ï¼‰ã€‚æ¯ä¸ªçª—å£å°†äº§ç”Ÿä¸€ä¸ª12800ï¼ˆ256Ã—50ï¼‰ç»´çš„è¡¨ç¤ºã€‚è¿™äº›è¡¨ç¤ºä¼ é€’ç»™ç½‘ç»œçš„å…¨è¿žæŽ¥å±‚ã€‚ç„¶åŽæˆ‘ä»¬é’ˆå¯¹æ¯ä¸ªåˆ†ç±»è®­ç»ƒä¸€ä¸ªäºŒåˆ†çº¿æ€§SVMåˆ†ç±»å™¨ã€‚ å°†æˆ‘ä»¬æƒ³è¦çš„proposalæ˜ å°„åˆ°ç‰¹å¾å›¾ä¹‹ä¸Šï¼Œä»Žè€Œè¿›è¡ŒSPP ã€‚ åŽŸå›¾ä¸­çš„proposal,ç»è¿‡å¤šå±‚å·ç§¯ä¹‹åŽï¼Œä½ç½®è¿˜æ˜¯ç›¸å¯¹äºŽåŽŸå›¾ä¸å˜çš„ã€‚ å¯¹äºŽæ˜ å°„å…³ç³»ï¼Œè®ºæ–‡ä¸­ç»™å‡ºäº†ä¸€ä¸ªå…¬å¼ï¼šå‡è®¾(xâ€™,yâ€™)è¡¨ç¤ºç‰¹å¾å›¾ä¸Šçš„åæ ‡ç‚¹ï¼Œåæ ‡ç‚¹(x,y)è¡¨ç¤ºåŽŸè¾“å…¥å›¾ç‰‡ä¸Šçš„ç‚¹ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹é—´æœ‰å¦‚ä¸‹è½¬æ¢å…³ç³»ï¼Œè¿™ç§æ˜ å°„å…³å¿ƒä¸Žç½‘ç»œç»“æž„æœ‰å…³ï¼š (x,y)=(Sâˆ—xâ€™,Sâˆ—yâ€™) åè¿‡æ¥ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡(x,y)åæ ‡æ±‚è§£(xâ€™,yâ€™)ï¼Œé‚£ä¹ˆè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š Leftã€Topï¼šxâ€²=âŒŠx/SâŒ‹+1 \\Rightã€Bottomï¼š x â€² = âŒˆ x / S âŒ‰ âˆ’ 1å…¶ä¸­Så°±æ˜¯CNNä¸­æ‰€æœ‰çš„stridesçš„ä¹˜ç§¯ï¼ŒåŒ…å«äº†æ± åŒ–ã€å·ç§¯çš„strideã€‚ æ¯”å¦‚ï¼Œå¯¹äºŽä¸‹å›¾çš„é›†ä¸­ç½‘ç»œç»“æž„ï¼ŒSçš„è®¡ç®—å¦‚ä¸‹ï¼š è®ºæ–‡ä¸­ä½¿ç”¨çš„æ˜¯ ZF-5ï¼š S=2*2*2*2=16 \\Overfeat-5/7 : S =2*3*2 =12 å®Œæ•´æµç¨‹å¦‚ä¸‹ï¼š]]></content>
      <categories>
        <category>AI</category>
        <category>CV</category>
        <category>ç›®æ ‡æ£€æµ‹</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>CV</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›®æ ‡æ£€æµ‹ä¸€]]></title>
    <url>%2F2020%2F10%2F11%2F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B8%80%2F</url>
    <content type="text"><![CDATA[ç›®æ ‡æ£€æµ‹ä¸€éžæžå¤§å€¼æŠ‘åˆ¶nmsnmsç›®æ ‡æ£€æµ‹ç®—æ³•ä¼šäº§ç”Ÿæ•°é‡å·¨å¤§çš„å€™é€‰çŸ©å½¢æ¡†ï¼Œè¿™äº›çŸ©å½¢æ¡†æœ‰å¾ˆå¤šæ˜¯æŒ‡å‘åŒä¸€ç›®æ ‡ï¼Œå­˜åœ¨å¤§é‡å†—ä½™ã€‚nmså¯ä»¥æ¶ˆé™¤å¤šä½™çš„æ¡†ï¼Œæ‰¾åˆ°æœ€ä½³çš„ç‰©ä½“æ£€æµ‹ä½ç½®ã€‚ éžæžå¤§å€¼æŠ‘åˆ¶ï¼ˆNon-Maximum Suppressionï¼‰çš„æ€æƒ³æ˜¯æœç´¢å±€éƒ¨æžå¤§å€¼ï¼ŒæŠ‘åˆ¶éžæžå¤§å€¼å…ƒç´  äº¤å¹¶æ¯” IoU(Intersection over Union)ä¸ºäº¤å¹¶æ¯” ã€‚ ç»å…¸nms è®¾å®šç›®æ ‡æ¡†çš„ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œå¸¸ç”¨çš„é˜ˆå€¼æ˜¯0.5å·¦å³ æ ¹æ®ç½®ä¿¡åº¦é™åºæŽ’åˆ—å€™é€‰æ¡†åˆ—è¡¨ é€‰å–ç½®ä¿¡åº¦æœ€é«˜çš„æ¡†Aæ·»åŠ åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œå¹¶å°†å…¶ä»Žå€™é€‰æ¡†åˆ—è¡¨ä¸­åˆ é™¤ è®¡ç®—Aä¸Žå€™é€‰æ¡†åˆ—è¡¨ä¸­çš„æ‰€æœ‰æ¡†çš„IoUå€¼ï¼Œåˆ é™¤å¤§äºŽé˜ˆå€¼çš„å€™é€‰æ¡† é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°å€™é€‰æ¡†åˆ—è¡¨ä¸ºç©ºï¼Œè¿”å›žè¾“å‡ºåˆ—è¡¨ soft-NMSç»å…¸NMSå¯¹äºŽé‡å ç‰©ä½“æ— æ³•å¾ˆå¥½æ£€æµ‹ã€‚ ä¸‹å›¾ä¸­çº¢è‰²è¾¹ç•Œæ¡†çš„ç½®ä¿¡åº¦æœ€é«˜ï¼Œç»¿è‰²æ¡†çš„ç½®ä¿¡åº¦è¾ƒå°ï¼Œä½†å’Œçº¢è‰²æ¡†çš„IoUè¾ƒå¤§ï¼Œå¦‚æžœæŒ‰NMSè§„åˆ™ï¼Œé‚£ä¹ˆæ­¤æ—¶ç»¿è‰²æ¡†çš„ç½®ä¿¡åº¦åˆ™ç½®ä¸º0ã€‚å¯æ˜¯å®žé™…ä¸Šï¼Œç»¿è‰²æ¡†æ˜¯åŽé¢é‚£åŒ¹é©¬çš„è¾¹ç•Œæ¡†ï¼Œè€Œçº¢è‰²æ¡†æ˜¯å‰é¢é‚£åŒ¹é©¬çš„è¾¹ç•Œæ¡†ï¼Œä¸¤è€…åº”è¯¥åŒæ—¶å­˜åœ¨ã€‚ ç›¸å¯¹äºŽç»å…¸NMSç®—æ³•ï¼ŒSoft-NMSä»…ä»…ä¿®æ”¹äº†ä¸€è¡Œä»£ç ã€‚å½“é€‰å–äº†æœ€å¤§ç½®ä¿¡åº¦çš„Bounding boxä¹‹åŽï¼Œè®¡ç®—å…¶ä½™æ¯ä¸ªBounding boxä¸ŽBounding boxçš„Iouå€¼ï¼Œç»å…¸NMSç®—æ³•çš„åšæ³•æ˜¯ç›´æŽ¥åˆ é™¤Iouå¤§äºŽé˜ˆå€¼çš„Bounding boxï¼›è€ŒSoft-NMSåˆ™æ˜¯ä½¿ç”¨ä¸€ä¸ªåŸºäºŽIouçš„è¡°å‡å‡½æ•°ï¼Œé™ä½ŽIouå¤§äºŽé˜ˆå€¼Ntçš„Bounding boxçš„ç½®ä¿¡åº¦ï¼ŒIoUè¶Šå¤§ï¼Œè¡°å‡ç¨‹åº¦è¶Šå¤§ã€‚ ç»å…¸NMS soft-NMS-çº¿æ€§ soft-NMS-é«˜æ–¯ Locality-Aware NMSå‡è®¾æ¥è‡ªé™„è¿‘åƒç´ çš„å‡ ä½•å›¾å½¢å¾€å¾€é«˜åº¦ç›¸å…³ï¼Œæˆ‘ä»¬å»ºè®®é€è¡Œåˆå¹¶å‡ ä½•å›¾å½¢ï¼ŒåŒæ—¶åœ¨åŒä¸€è¡Œä¸­åˆå¹¶å‡ ä½•å›¾å½¢æ—¶ï¼Œæˆ‘ä»¬å°†è¿­ä»£åœ°åˆå¹¶å½“å‰é‡åˆ°çš„å‡ ä½•å›¾å½¢å’Œæœ€åŽåˆå¹¶çš„å‡ ä½•å›¾å½¢ã€‚è¿™ç§æ”¹è¿›çš„æŠ€æœ¯åœ¨æœ€ä½³åœºæ™¯ä¸‹ä»¥$O(n)$è¿è¡Œã€‚å³ä½¿æœ€åçš„æƒ…å†µä¹Ÿä¸Žç»å…¸NMSç›¸åŒï¼Œåªè¦ä½ç½®å‡è®¾æˆç«‹ï¼Œç®—æ³•åœ¨å®žè·µä¸­è¿è¡Œå¾—è¶³å¤Ÿå¿«ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import numpy as npfrom shapely.geometry import Polygon# ä¼ å…¥çš„gä¸ºnumpyæ•°ç»„ï¼Œ8ä¸ªæ•°ä¸º4ä¸ªåæ ‡çš„x,yå€¼ï¼Œé¡ºåºä¸ºï¼šå·¦ä¸Š å·¦ä¸‹ å³ä¸‹ å³ä¸Šdef intersection(g, p): # å–g,pä¸­çš„å‡ ä½•ä½“ä¿¡æ¯ç»„æˆå¤šè¾¹å½¢ g = Polygon(g[:8].reshape((4, 2))) p = Polygon(p[:8].reshape((4, 2))) # åˆ¤æ–­g,pæ˜¯å¦ä¸ºæœ‰æ•ˆçš„å¤šè¾¹å½¢å‡ ä½•ä½“ if not g.is_valid or not p.is_valid: return 0 # å–ä¸¤ä¸ªå‡ ä½•ä½“çš„äº¤é›†å’Œå¹¶é›† inter = Polygon(g).intersection(Polygon(p)).area union = g.area + p.area - inter if union == 0: return 0 else: return inter / uniondef weighted_merge(g, p): # å–g,pä¸¤ä¸ªå‡ ä½•ä½“çš„åŠ æƒï¼ˆæƒé‡æ ¹æ®å¯¹åº”çš„æ£€æµ‹å¾—åˆ†è®¡ç®—å¾—åˆ°ï¼‰ g[:8] = (g[8] * g[:8] + p[8] * p[:8]) / (g[8] + p[8]) # åˆå¹¶åŽçš„å‡ ä½•ä½“çš„å¾—åˆ†ä¸ºä¸¤ä¸ªå‡ ä½•ä½“å¾—åˆ†çš„æ€»å’Œ g[8] = (g[8] + p[8]) return gdef standard_nms(S, thres): # æ ‡å‡†NMS order = np.argsort(S[:, 8])[::-1] # åè½¬åŽä¸ºä»Žå¤§åˆ°å° keep = [] while order.size &gt; 0: i = order[0] keep.append(i) ovr = np.array([intersection(S[i], S[t]) for t in order[1:]]) inds = np.where(ovr &lt;= thres)[0] order = order[inds + 1] return S[keep]def nms_locality(polys, thres=0.3): ''' locality aware nms of EAST :param polys: a N*9 numpy array. first 8 coordinates, then prob :return: boxes after nms ''' S = [] # åˆå¹¶åŽçš„å‡ ä½•ä½“é›†åˆ p = None # åˆå¹¶åŽçš„å‡ ä½•ä½“ for g in polys: if p is not None and intersection(g, p) &gt; thres: # è‹¥ä¸¤ä¸ªå‡ ä½•ä½“çš„ç›¸äº¤é¢ç§¯å¤§äºŽæŒ‡å®šçš„é˜ˆå€¼ï¼Œåˆ™è¿›è¡Œåˆå¹¶ p = weighted_merge(g, p) else: # åä¹‹ï¼Œåˆ™ä¿ç•™å½“å‰çš„å‡ ä½•ä½“ if p is not None: S.append(p) p = g if p is not None: S.append(p) if len(S) == 0: return np.array([]) return standard_nms(np.array(S), thres) softer-NMSä»¥ä¸Šçš„NMSç®—æ³•ï¼Œæ— è®ºæ˜¯ç»å…¸NMSè¿˜æ˜¯Soft-NMSç®—æ³•ï¼Œéƒ½æ˜¯åœ¨ä¸€ç§å‡è®¾å‰æä¸‹ï¼šç½®ä¿¡åº¦æœ€é«˜çš„Bounding boxå°±æ˜¯ç›®æ ‡çš„å€™é€‰ä½ç½®æœ€ç²¾ç¡®çš„ç‰©ä½“ä½ç½®ã€‚ä½†æ˜¯äº‹å®žä¸Šï¼Œè¿™ä¸ªå‡è®¾å¯èƒ½å¹¶ä¸æˆç«‹ï¼Œæˆ–è€…è¯´å¹¶ä¸é‚£ä¹ˆç²¾ç¡®ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæ¥è‡ªå¡å†…åŸºæ¢…éš†å¤§å­¦ä¸Žæ—·è§†ç§‘æŠ€çš„ç ”ç©¶äººå‘˜åœ¨æ–‡ä¸­æå‡ºäº†ä¸€ç§æ–°çš„éžæžå¤§æŠ‘åˆ¶ç®—æ³•Softer-NMSï¼Œæ˜¾è‘—æ”¹è¿›äº†ç›®æ ‡æ£€æµ‹çš„å®šä½ç²¾åº¦ã€‚ è®ºæ–‡çš„motivationæ¥è‡ªäºŽNMSæ—¶ç”¨åˆ°çš„scoreä»…ä»…æ˜¯åˆ†ç±»ç½®ä¿¡åº¦å¾—åˆ†ï¼Œä¸èƒ½åæ˜ Bounding boxçš„å®šä½ç²¾å‡†åº¦ï¼Œæ—¢åˆ†ç±»ç½®ä¿¡åº¦å’Œå®šä½ç½®ä¿¡éžæ­£ç›¸å…³çš„ , è®ºæ–‡é¦–å…ˆå‡è®¾Bounding boxæ˜¯é«˜æ–¯åˆ†å¸ƒï¼Œground truth bounding boxæ˜¯ç‹„æ‹‰å…‹deltaåˆ†å¸ƒï¼ˆå³æ ‡å‡†æ–¹å·®ä¸º0çš„é«˜æ–¯åˆ†å¸ƒæžé™ï¼‰ã€‚KL æ•£åº¦ç”¨æ¥è¡¡é‡ä¸¤ä¸ªæ¦‚çŽ‡åˆ†å¸ƒçš„éžå¯¹ç§°æ€§åº¦é‡ï¼ŒKLæ•£åº¦è¶ŠæŽ¥è¿‘0ä»£è¡¨ä¸¤ä¸ªæ¦‚çŽ‡åˆ†å¸ƒè¶Šç›¸ä¼¼ã€‚ è®ºæ–‡æå‡ºçš„KL lossï¼Œå³ä¸ºæœ€å°åŒ–Bounding box regression lossï¼Œæ—¢Bounding boxçš„é«˜æ–¯åˆ†å¸ƒå’Œground truthçš„ç‹„æ‹‰å…‹deltaåˆ†å¸ƒçš„KLæ•£åº¦ã€‚ç›´è§‚ä¸Šè§£é‡Šï¼ŒKL Lossä½¿å¾—Bounding boxé¢„æµ‹å‘ˆé«˜æ–¯åˆ†å¸ƒï¼Œä¸”ä¸Žground truthç›¸è¿‘ã€‚è€Œå°†åŒ…å›´æ¡†é¢„æµ‹çš„æ ‡å‡†å·®çœ‹ä½œç½®ä¿¡åº¦ã€‚ è®ºæ–‡æå‡ºçš„Softer-NMSï¼ŒåŸºäºŽsoft-NMSï¼Œå¯¹é¢„æµ‹æ ‡æ³¨æ–¹å·®èŒƒå›´å†…çš„å€™é€‰æ¡†åŠ æƒå¹³å‡ï¼Œä½¿å¾—é«˜å®šä½ç½®ä¿¡åº¦çš„bounding boxå…·æœ‰è¾ƒé«˜çš„åˆ†ç±»ç½®ä¿¡åº¦ã€‚ Softer-NMSç½‘ç»œç»“æž„ï¼Œä¸ŽR-CNNä¸åŒçš„æ˜¯å¼•å…¥absolute value layerï¼ˆå›¾ä¸­AbsValï¼‰,å®žçŽ°æ ‡æ³¨æ–¹å·®çš„é¢„æµ‹: é¢„æµ‹çš„å››ä¸ªé¡¶ç‚¹åæ ‡ï¼Œåˆ†åˆ«å¯¹$IoUï¼žNt$çš„é¢„æµ‹åŠ æƒå¹³å‡è®¡ç®—ï¼Œå¾—åˆ°æ–°çš„4ä¸ªåæ ‡ç‚¹ã€‚ç¬¬iä¸ªboxçš„x1è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼ˆjè¡¨ç¤ºæ‰€æœ‰$IoUï¼žNt$çš„boxï¼‰ : Selective Search1å¯ä»¥é€šè¿‡pipå®‰è£…selectivesearch é¦–å…ˆé€šè¿‡ç®€å•çš„åŒºåŸŸåˆ’åˆ†ç®—æ³•ï¼Œå°†å›¾ç‰‡åˆ’åˆ†æˆå¾ˆå¤šå°åŒºåŸŸï¼Œå†é€šè¿‡ç›¸ä¼¼åº¦å’ŒåŒºåŸŸå¤§å°ï¼ˆå°çš„åŒºåŸŸå…ˆèšåˆï¼Œè¿™æ ·æ˜¯é˜²æ­¢å¤§çš„åŒºåŸŸä¸æ–­çš„èšåˆå°åŒºåŸŸï¼Œå¯¼è‡´å±‚æ¬¡å…³ç³»ä¸å®Œå…¨ï¼‰ä¸æ–­çš„èšåˆç›¸é‚»å°åŒºåŸŸï¼Œç±»ä¼¼äºŽèšç±»çš„æ€è·¯ã€‚è¿™æ ·å°±èƒ½è§£å†³objectå±‚æ¬¡é—®é¢˜ã€‚ step0ï¼šç”ŸæˆåŒºåŸŸé›†Rï¼Œå…·ä½“å‚è§è®ºæ–‡ã€ŠEfficient Graph-Based Image Segmentationã€‹step1ï¼šè®¡ç®—åŒºåŸŸé›†Ré‡Œæ¯ä¸ªç›¸é‚»åŒºåŸŸçš„ç›¸ä¼¼åº¦S={s1,s2,â€¦}step2ï¼šæ‰¾å‡ºç›¸ä¼¼åº¦æœ€é«˜çš„ä¸¤ä¸ªåŒºåŸŸï¼Œå°†å…¶åˆå¹¶ä¸ºæ–°é›†ï¼Œæ·»åŠ è¿›Rstep3ï¼šä»ŽSä¸­ç§»é™¤æ‰€æœ‰ä¸Žstep2ä¸­æœ‰å…³çš„å­é›†step4ï¼šè®¡ç®—æ–°é›†ä¸Žæ‰€æœ‰å­é›†çš„ç›¸ä¼¼åº¦step5ï¼šè·³è‡³step2ï¼Œç›´è‡³Sä¸ºç©º ä¸ºäº†ä¿è¯èƒ½å¤Ÿåˆ’åˆ†çš„å®Œå…¨ï¼Œå¯¹äºŽç›¸ä¼¼åº¦ï¼Œä½œè€…æå‡ºäº†å¯ä»¥å¤šæ ·åŒ–çš„æ€è·¯ï¼Œä¸ä½†ä½¿ç”¨å¤šæ ·çš„é¢œè‰²ç©ºé—´ï¼ˆRGBï¼ŒLabï¼ŒHSVç­‰ç­‰ï¼‰ï¼Œè¿˜æœ‰å¾ˆå¤šä¸åŒçš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³• é€šè¿‡ä¸Šè¿°çš„æ­¥éª¤æˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°å¾ˆå¤šå¾ˆå¤šçš„åŒºåŸŸï¼Œä½†æ˜¯æ˜¾ç„¶ä¸æ˜¯æ¯ä¸ªåŒºåŸŸä½œä¸ºç›®æ ‡çš„å¯èƒ½æ€§éƒ½æ˜¯ç›¸åŒçš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¡¡é‡è¿™ä¸ªå¯èƒ½æ€§ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®æˆ‘ä»¬çš„éœ€è¦ç­›é€‰åŒºåŸŸå»ºè®®ä¸ªæ•°å•¦ã€‚ è¿™ç¯‡æ–‡ç« åšæ³•æ˜¯ï¼Œç»™äºˆæœ€å…ˆåˆå¹¶çš„å›¾ç‰‡å—è¾ƒå¤§çš„æƒé‡ï¼Œæ¯”å¦‚æœ€åŽä¸€å—å®Œæ•´å›¾åƒæƒé‡ä¸º1ï¼Œå€’æ•°ç¬¬äºŒæ¬¡åˆå¹¶çš„åŒºåŸŸæƒé‡ä¸º2ä»¥æ­¤ç±»æŽ¨ã€‚ä½†æ˜¯å½“æˆ‘ä»¬ç­–ç•¥å¾ˆå¤šï¼Œå¤šæ ·æ€§å¾ˆå¤šçš„æ—¶å€™å‘¢ï¼Œè¿™ä¸ªæƒé‡å°±ä¼šæœ‰å¤ªå¤šçš„é‡åˆäº†ï¼ŒæŽ’åºä¸å¥½æžå•Šã€‚æ–‡ç« åšæ³•æ˜¯ç»™ä»–ä»¬ä¹˜ä»¥ä¸€ä¸ªéšæœºæ•°ï¼Œæ¯•ç«Ÿ3åˆ†çœ‹è¿æ°”å˜›ï¼Œç„¶åŽå¯¹äºŽç›¸åŒçš„åŒºåŸŸå¤šæ¬¡å‡ºçŽ°çš„ä¹Ÿå åŠ ä¸‹æƒé‡ï¼Œæ¯•ç«Ÿå¤šä¸ªæ–¹æ³•éƒ½è¯´ä½ æ˜¯ç›®æ ‡ï¼Œä¹Ÿæ˜¯æœ‰ç†ç”±çš„å˜›ã€‚è¿™æ ·æˆ‘å°±å¾—åˆ°äº†æ‰€æœ‰åŒºåŸŸçš„ç›®æ ‡åˆ†æ•°ï¼Œä¹Ÿå°±å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©éœ€è¦å¤šå°‘ä¸ªåŒºåŸŸäº†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950# ä»Žhttps://github.com/AlpacaDB/selectivesearchä¸‹è½½ç¤ºä¾‹ä»£ç ï¼Œè¿è¡Œexample.py# -*- coding: utf-8 -*-from __future__ import ( division, print_function,)import skimage.dataimport matplotlib.pyplot as pltimport matplotlib.patches as mpatchesimport selectivesearchdef main(): # loading astronaut image img = skimage.data.astronaut() # perform selective search img_lbl, regions = selectivesearch.selective_search( img, scale=500, sigma=0.9, min_size=10) candidates = set() for r in regions: # excluding same rectangle (with different segments) if r['rect'] in candidates: continue # excluding regions smaller than 2000 pixels if r['size'] &lt; 2000: continue # distorted rects x, y, w, h = r['rect'] if w / h &gt; 1.2 or h / w &gt; 1.2: continue candidates.add(r['rect']) # draw rectangles on the original image fig, ax = plt.subplots(ncols=1, nrows=1, figsize=(6, 6)) ax.imshow(img) for x, y, w, h in candidates: print(x, y, w, h) rect = mpatches.Rectangle( (x, y), w, h, fill=False, edgecolor='red', linewidth=1) ax.add_patch(rect) plt.show()if __name__ == "__main__": main()]]></content>
      <categories>
        <category>AI</category>
        <category>CV</category>
        <category>ç›®æ ‡æ£€æµ‹</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>CV</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æžå¤§ä¼¼ç„¶ä¸ŽEMç®—æ³•]]></title>
    <url>%2F2020%2F08%2F05%2F%E6%9E%81%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%B8%8EEM%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[æžå¤§ä¼¼ç„¶ä¼°è®¡å‚è€ƒï¼š https://www.zhihu.com/question/24124998 æžå¤§ä¼¼ç„¶æ˜¯å¯¹æ¦‚çŽ‡æ¨¡åž‹å‚æ•°å­¦ä¹ ä¼˜åŒ–ç›®æ ‡çš„ä¸€ç§å®šä¹‰ ã€‚ å°±æ˜¯åˆ©ç”¨å·²çŸ¥çš„æ ·æœ¬ç»“æžœä¿¡æ¯ï¼ŒåæŽ¨æœ€å…·æœ‰å¯èƒ½ï¼ˆæœ€å¤§æ¦‚çŽ‡ï¼‰å¯¼è‡´è¿™äº›æ ·æœ¬ç»“æžœå‡ºçŽ°çš„æ¨¡åž‹å‚æ•°å€¼ ã€‚ å¯¹äºŽç¦»æ•£åž‹çš„éšæœºå˜é‡ï¼š å¦‚æžœæ˜¯ä¸€ä¸ªè¿žç»­åž‹çš„éšæœºå˜é‡ ï¼š æƒ³å¯¹$L(\theta)$æ±‚æœ€å€¼ï¼Œä¸ºäº†ä¾¿äºŽæ±‚å¯¼ï¼Œä¸¤è¾¹å–å¯¹æ•°ï¼Œæœ‰ï¼š å¦‚æžœæ–¹ç¨‹æœ‰å”¯ä¸€è§£ï¼Œä¸”æ˜¯æžå¤§å€¼ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ±‚å¾—äº†æžå¤§ä¼¼ç„¶ä¼°è®¡å€¼ã€‚ ä¾‹å­1ï¼šæŠ›ç¡¬å¸ ä¾‹å­2ï¼šå•å‚æ•° ä¾‹å­3ï¼šå¤šå‚æ•° æ€»ä½“æ–¹å·®çš„æžå¤§ä¼¼ç„¶ä¼°è®¡å€¼çš„åˆ†æ¯æ˜¯ è€Œä¸æ˜¯ ï¼Œå› æ­¤ä»–ä¸æ˜¯ä¸€ä¸ªæ— åä¼°è®¡é‡ã€‚ä½†æ˜¯å¯ä»¥è¯´ä»–æ˜¯æ¸è¿‘æ— åçš„ EMç®—æ³•å‚è€ƒï¼š https://blog.csdn.net/wsp_1138886114/article/details/81002550 å‚è€ƒï¼š https://www.cnblogs.com/jerrylead/archive/2011/04/06/2006936.html EMç®—æ³•æ˜¯ç”¨äºŽæ±‚è§£æžå¤§ä¼¼ç„¶ä¼°è®¡çš„ä¸€ç§è¿­ä»£é€¼è¿‘çš„ç®—æ³• ã€‚ Jensenä¸ç­‰å¼ã€ è®¾fæ˜¯å®šä¹‰åŸŸä¸ºå®žæ•°çš„å‡½æ•°ï¼Œå¦‚æžœå¯¹äºŽæ‰€æœ‰çš„å®žæ•°xï¼Œ $f^{â€˜â€™}(x)\geqslant 0$ é‚£ä¹ˆfæ˜¯å‡¸å‡½æ•°ï¼Œå¦‚æžœ$f^{â€˜â€™}(x)&gt; 0$ é‚£ä¹ˆfæ˜¯ä¸¥æ ¼å‡¸å‡½æ•°ã€‚ jensenä¸ç­‰å¼ï¼š å¦‚æžœfæ˜¯å‡¸å‡½æ•°ï¼ŒXæ˜¯éšæœºå˜é‡ï¼Œé‚£ä¹ˆ $E[f(x)]\geqslant f[E(x)]$ï¼Œç‰¹åˆ«çš„ï¼Œå¦‚æžœfæ˜¯ä¸¥æ ¼å‡¸å‡½æ•°ï¼Œé‚£ä¹ˆå½“ä¸”ä»…å½“$p(x=E[x])=1$æ—¶ï¼ˆXä¸ºå¸¸é‡ï¼‰ï¼Œå–å¾— $E[f(x)]= f[E(x)]$ lazy Statisticianè§„åˆ™è®¾ y æ˜¯éšæœºå˜é‡ x çš„å‡½æ•°ï¼Œ$y=g(x)(gæ˜¯è¿žç»­å‡½æ•°)$ï¼Œé‚£ä¹ˆï¼š (1) x æ˜¯ç¦»æ•£éšæœºå˜é‡ï¼Œåˆ†å¸ƒä¸º$p(x=x_k)=p_k,kâˆˆNâˆ—$,è‹¥$âˆ‘^âˆž_{k=1} g(x) p_k$ç»å¯¹æ”¶æ•›ï¼Œåˆ™ E(y)=E|g(x)|=âˆ‘^âˆž_{k=1}g(x_k)p_k (2) x æ˜¯è¿žç»­éšæœºå˜é‡ï¼Œåˆ†å¸ƒæ¦‚çŽ‡ä¸º$f(x)$,è‹¥$âˆ«^âˆž_{âˆ’âˆž}g(x)f(x)dx$ ç»å¯¹æ”¶æ•›ï¼Œåˆ™ E(y)=E|g(x)|=âˆ«^âˆž_{âˆ’âˆž}g(x)f(x)dxEMå…¬å¼æŽ¨å¯¼å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ ·æœ¬é›†${x(1),â€¦,x(m)}$ï¼ŒåŒ…å«mä¸ªç‹¬ç«‹çš„æ ·æœ¬ã€‚ä½†æ¯ä¸ªæ ·æœ¬iå¯¹åº”çš„ç±»åˆ«z(i)æ˜¯æœªçŸ¥çš„ï¼Œä¹Ÿå³éšå«å˜é‡ã€‚æ•…æˆ‘ä»¬éœ€è¦ä¼°è®¡æ¦‚çŽ‡æ¨¡åž‹$p(x,z)$çš„å‚æ•°$Î¸$ï¼Œä½†æ˜¯ç”±äºŽé‡Œé¢åŒ…å«éšå«å˜é‡zï¼Œæ‰€ä»¥å¾ˆéš¾ç”¨æœ€å¤§ä¼¼ç„¶æ±‚è§£ã€‚ æ€è·¯æ˜¯æ—¢ç„¶ä¸èƒ½ç›´æŽ¥æœ€å¤§åŒ–$L(\theta)$ï¼Œæˆ‘ä»¬å¯ä»¥ä¸æ–­åœ°å»ºç«‹$L(\theta)$çš„ä¸‹ç•Œï¼ˆEæ­¥ï¼‰ï¼Œç„¶åŽä¼˜åŒ–ä¸‹ç•Œï¼Œå¾—åˆ°æ–°å‚æ•°$\theta$ï¼ˆMæ­¥ï¼‰ ï¼ˆ1ï¼‰å¯¹æ¯ä¸ªæ ·ä¾‹çš„æ¯ä¸ªå¯èƒ½ç±»åˆ«zæ±‚è”åˆåˆ†å¸ƒæ¦‚çŽ‡å’Œï¼Œç”±äºŽâ€å’Œçš„å¯¹æ•°â€œæ±‚å¯¼å›°éš¾ï¼ˆ log(f1(x)+ f2(x)+ f3(x)+Â·Â·Â· å¤åˆå‡½æ•°æ±‚å¯¼ï¼‰ï¼Œå› æ­¤è¿›è¡ŒåŒ–ç®€ã€‚ å¯¹äºŽæ¯ä¸€ä¸ªæ ·ä¾‹iï¼Œè®©$Q_t$ è¡¨ç¤ºè¯¥æ ·ä¾‹éšå«å˜é‡zçš„æŸç§åˆ†å¸ƒï¼Œ $Q_t$æ»¡è¶³çš„æ¡ä»¶æ˜¯$\sum_zQ_i(z)=1ï¼ŒQ_i(z)\geqslant 0$ï¼Œå¦‚æžœzæ˜¯è¿žç»­çš„ï¼Œé‚£ä¹ˆ$Q_t$æ˜¯æ¦‚çŽ‡å¯†åº¦å‡½æ•°ï¼Œå°†æ±‚å’Œå·æ¢æˆç§¯åˆ†å·ã€‚ å¯¹äºŽå…¬å¼ï¼ˆ3ï¼‰ï¼Œç”±äºŽ$log(x)$æ˜¯å‡¹å‡½æ•°ï¼Œä¸” æ˜¯çš„æœŸæœ›ï¼Œæ ¹æ®Jensenä¸ç­‰å¼ï¼Œå¯¹äºŽå‡¹å‡½æ•°æœ‰ï¼š è¿™ä¸ªè¿‡ç¨‹å¯ä»¥çœ‹ä½œå¯¹$L(\theta)$æ±‚ä¸‹ç•Œï¼Œå›ºå®š$\theta$ï¼Œé‚£ä¹ˆ$L(\theta)$çš„å€¼å°±å–å†³äºŽ$Q_i(z^{(i)})$å’Œ$p(x^{(i)},z^{(i)};\theta)$ ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´è¿™ä¸¤ä¸ªæ¦‚çŽ‡ä½¿ä¸‹ç•Œä¸æ–­ä¸Šå‡ï¼Œä»¥é€¼è¿‘$L(Î¸)$çš„çœŸå®žå€¼ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™ç®—æ˜¯è°ƒæ•´å¥½äº†å‘¢ï¼Ÿå½“ä¸ç­‰å¼å˜æˆç­‰å¼æ—¶ï¼Œè¯´æ˜Žæˆ‘ä»¬è°ƒæ•´åŽçš„æ¦‚çŽ‡éƒ½èƒ½å¤Ÿç­‰ä»·äºŽ$L(Î¸)$äº†ã€‚æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°ç­‰å¼æˆç«‹çš„æ¡ä»¶ã€‚æ ¹æ®Jensenä¸ç­‰å¼ï¼Œè¦æƒ³è®©ç­‰å¼æˆç«‹ï¼Œéœ€è¦è®©éšæœºå˜é‡å˜æˆå¸¸æ•°å€¼ï¼Œè¿™é‡Œå¾—åˆ° \frac {p(x^{(i)},z^{(i)};Î¸)}{Q_i(z^{(i)})}=CCä¸ºå¸¸æ•°ï¼Œä¸ä¾èµ–äºŽ$z^{(i)}$ï¼Œç”±äºŽ$\sum_zQ_i(z)=1$ï¼Œåˆ†å­åˆ†æ¯åŒæ—¶æ±‚å’Œï¼ˆè®¤ä¸ºæ¯ä¸ªæ¯”å€¼éƒ½æ˜¯Cï¼Œè¿™æ ·åˆ†å­åˆ†æ¯åŒæ—¶æ±‚å’Œç»“æžœä¸å˜ï¼‰ï¼ŒäºŽæ˜¯å¾—åˆ°$\sum_z p(x^{(i)},z^{(i)};\theta)=C$â€‹ï¼Œåˆ™ ä¹‹å‰è¯´$L(\theta)$çš„å€¼å–å†³äºŽ$Q_i(z^{(i)})$å’Œ$p(x^{(i)},z^{(i)};\theta)$ï¼Œä½†æˆ‘ä»¬ä¸ºäº†å–åˆ°ç­‰å·ï¼Œè®©ä¸¤è€…çš„æ¯”å€¼ç­‰äºŽå¸¸æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´$Q_i(z^{(i)})$å’Œ$p(x^{(i)},z^{(i)};\theta)$å…¶å®žæ˜¯åŒæ¯”ä¾‹å˜åŒ–çš„ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬æŽ¨å‡ºäº†åœ¨å›ºå®šå‚æ•°$Î¸$åŽï¼Œä½¿ä¸‹ç•Œæ‹‰å‡çš„$Q(z)$çš„è®¡ç®—å…¬å¼å°±æ˜¯åŽéªŒæ¦‚çŽ‡ï¼Œè§£å†³äº†$Q(z)$å¦‚ä½•é€‰æ‹©çš„é—®é¢˜ã€‚è¿™ä¸€æ­¥å°±æ˜¯Eæ­¥ï¼Œå»ºç«‹$L(Î¸)$çš„ä¸‹ç•Œã€‚æŽ¥ä¸‹æ¥çš„Mæ­¥ï¼Œå°±æ˜¯åœ¨ç»™å®š$Q(z)$åŽï¼Œè°ƒæ•´$Î¸$ï¼ŒåŽ»æžå¤§åŒ–$L(Î¸)$çš„ä¸‹ç•ŒJï¼ˆåœ¨å›ºå®š$Q(z)$åŽï¼Œä¸‹ç•Œè¿˜å¯ä»¥è°ƒæ•´çš„æ›´å¤§ï¼‰ã€‚é‚£ä¹ˆä¸€èˆ¬çš„EMç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š åœ¨ E-stepï¼šå›ºå®š$\theta$ï¼Œæ‰¾åˆ°å¯¹äºŽå½“å‰å‚æ•° $Î¸$ä½¿ä¸ç­‰å¼æˆç«‹çš„ $Q$åˆ†å¸ƒï¼Œä½¿å¾—ä¸‹ç•Œ$J(Z,Q)$ä¸æ–­ä¸Šå‡ï¼Œç›´åˆ°ä¸Ž$L(Î¸)$åœ¨$Î¸$ç‚¹é‡åˆã€‚ åœ¨ M-stepï¼šå›ºå®š$Q(z)$ï¼Œå¯¹ä¼¼ç„¶å‡½æ•°ä¸‹ç•Œè¿›è¡Œæžå¤§ä¼¼ç„¶ä¼°è®¡ï¼Œæ‰¾åˆ°$J(Z,Î¸)$çš„æžå¤§å€¼ï¼Œå¾—åˆ°æ–°çš„å‚æ•° å½¢å¼åŒ–è¡¨ç¤ºä¸ºï¼š E-step $Q_i(z^{(i)})=p(z^{(i)}âˆ£x^{(i)};Î¸) $ M-step $Î¸=\arg \max_\theta{âˆ‘^n_{i=1}âˆ‘_{z^{(i)}}Qi(z^{(i)})log\frac {p(x^{(i)}),z^{(i)};Î¸)}{Qi(z^{(i)})}} $ ç”±äºŽ$L(\theta)$ä¼šå•è°ƒå¢žåŠ ã€‚å› æ­¤EMç®—æ³•æ”¶æ•›ã€‚ è¯æ˜Žï¼šæ”¶æ•›è¯æ˜Ž ç›´çº¿å¼è¿­ä»£ä¼˜åŒ–æ¯ä¸€æ­¥éƒ½ä¼šå‘æœ€ä¼˜å€¼å‰è¿›ä¸€æ­¥ï¼Œè€Œä¸”å‰è¿›è·¯çº¿æ˜¯å¹³è¡ŒäºŽåæ ‡è½´çš„ï¼Œå› ä¸ºæ¯ä¸€æ­¥åªä¼˜åŒ–ä¸€ä¸ªå˜é‡ã€‚è¿™çŠ¹å¦‚åœ¨x-yåæ ‡ç³»ä¸­æ‰¾ä¸€ä¸ªæ›²çº¿çš„æžå€¼ï¼Œç„¶è€Œæ›²çº¿å‡½æ•°ä¸èƒ½ç›´æŽ¥æ±‚å¯¼ï¼Œå› æ­¤æ¢¯åº¦ä¸‹é™æ–¹æ³•ä¸é€‚ç”¨ã€‚ ä½†å›ºå®šä¸€ä¸ªå˜é‡åŽï¼Œå¦å¤–ä¸€ä¸ªå¯ä»¥é€šè¿‡æ±‚å¯¼å¾—åˆ°ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åæ ‡ä¸Šå‡æ³•ï¼Œä¸€æ¬¡å›ºå®šä¸€ä¸ªå˜é‡ï¼Œå¯¹å¦å¤–çš„æ±‚æžå€¼ï¼Œæœ€åŽé€æ­¥é€¼è¿‘æžå€¼ã€‚å¯¹åº”åˆ°EMä¸Šï¼Œ Eæ­¥ï¼šå›ºå®šÎ¸ï¼Œä¼˜åŒ–Qï¼›Mæ­¥ï¼šå›ºå®šQï¼Œä¼˜åŒ–Î¸ï¼›äº¤æ›¿å°†æžå€¼æŽ¨å‘æœ€å¤§ã€‚ EMç®—æ³•å®žä¾‹ â— å‡è®¾çŽ°åœ¨æœ‰ä¸¤æžšç¡¬å¸1å’Œ2,éšæœºæŠ›æŽ·åŽæ­£é¢æœä¸Šæ¦‚çŽ‡åˆ†åˆ«ä¸º$P_1ã€P_2$ã€‚ä¸ºäº†ä¼°è®¡è¿™ä¸¤ä¸ªæ¦‚çŽ‡ï¼Œæ¯æ¬¡å–ä¸€æžšç¡¬å¸ï¼Œè¿žæŽ·5ä¸‹ï¼Œè®°å½•ä¸‹ç»“æžœï¼Œå¦‚ä¸‹ è¡¨ä¸€ï¼ˆå®žéªŒæ•°æ®ï¼‰ è¡¨äºŒï¼ˆæµ‹è¯•æ•°æ®ï¼‰ ç¡¬å¸ ç»“æžœ ç»Ÿè®¡ ç¡¬å¸ ç»“æžœ ç»Ÿè®¡ 1 æ­£æ­£åæ­£å 3æ­£-2å UnKnow æ­£æ­£åæ­£å 3æ­£-2å 2 ååæ­£æ­£å 2æ­£-3å UnKnow ååæ­£æ­£å 2æ­£-3å 1 æ­£åååå 1æ­£-4å UnKnow æ­£åååå 1æ­£-4å 2 æ­£ååæ­£æ­£ 3æ­£-2å UnKnow æ­£ååæ­£æ­£ 3æ­£-2å 1 åæ­£æ­£åå 2æ­£-3å UnKnow åæ­£æ­£åå 2æ­£-3å è¡¨ä¸€ï¼šå¯ä»¥å¾ˆå®¹æ˜“åœ°ä¼°è®¡å‡ºP1å’ŒP2ï¼Œå¦‚ä¸‹ï¼šP1 = ï¼ˆ3+1+2ï¼‰/ 15 = 0.4P2= ï¼ˆ2+3ï¼‰/10 = 0.5 â— çŽ°åœ¨æˆ‘ä»¬æŠ¹åŽ»æ¯è½®æŠ•æŽ·æ—¶ä½¿ç”¨çš„ç¡¬å¸æ ‡è®°ï¼Œå¦‚ä¸Šå³è¡¨ï¼ˆè¡¨äºŒï¼ˆæµ‹è¯•æ•°æ®ï¼‰ï¼‰ã€‚ ç›®æ ‡æ²¡å˜ï¼Œè¿˜æ˜¯ä¼°è®¡P1å’ŒP2: æ­¤æ—¶å¤šäº†ä¸€ä¸ªéšå˜é‡zï¼Œå¯ä»¥æŠŠå®ƒè®¤ä¸ºæ˜¯ä¸€ä¸ª5ç»´çš„å‘é‡ï¼ˆz1,z2,z3,z4,z5)ï¼Œä»£è¡¨æ¯æ¬¡æŠ•æŽ·æ—¶æ‰€ä½¿ç”¨çš„ç¡¬å¸ï¼Œæ¯”å¦‚z1ï¼Œå°±ä»£è¡¨ç¬¬ä¸€è½®æŠ•æŽ·æ—¶ä½¿ç”¨çš„ç¡¬å¸æ˜¯1è¿˜æ˜¯2ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªå˜é‡zä¸çŸ¥é“ï¼Œå°±æ— æ³•åŽ»ä¼°è®¡P1å’ŒP2ã€‚ æˆ‘ä»¬å¯ä»¥å…ˆéšæœºåˆå§‹åŒ–ä¸€ä¸ªP1å’ŒP2ï¼Œç”¨å®ƒæ¥ä¼°è®¡zï¼Œç„¶åŽåŸºäºŽzï¼Œè¿˜æ˜¯æŒ‰ç…§æœ€å¤§ä¼¼ç„¶æ¦‚çŽ‡æ³•åˆ™åŽ»ä¼°è®¡æ–°çš„P1å’ŒP2å½“ä¸Žæˆ‘ä»¬åˆå§‹åŒ–çš„P1å’ŒP2ä¸€æ ·æ—¶ï¼Œè¯´æ˜Žæ˜¯P1å’ŒP2å¾ˆæœ‰å¯èƒ½å°±æ˜¯çœŸå®žçš„å€¼ã€‚è¿™é‡Œé¢åŒ…å«äº†ä¸¤ä¸ªäº¤äº’çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ã€‚ï¼ˆå‚æ•°$\theta$åœ¨è¿™é‡Œå°±æ˜¯éœ€è¦æ±‚è§£çš„P1ã€P2ï¼‰ è®¡ç®—è¿‡ç¨‹å½“å‡è®¾P1 = 0.2ï¼ŒP2 = 0.8æ—¶ï¼š ï¼ˆçœ‹çœ‹ç¬¬ä¸€è½®æŠ›æŽ·æœ€å¯èƒ½æ˜¯å“ªä¸ªç¡¬å¸ã€‚ï¼‰ å¦‚æžœæ˜¯ç¡¬å¸1ï¼Œå¾—å‡º3æ­£2åçš„æ¦‚çŽ‡ä¸ºï¼š0.2Ã—0.2Ã—0.2Ã—0.8Ã—0.8= 0.00512å¦‚æžœæ˜¯ç¡¬å¸2ï¼Œå¾—å‡º3æ­£2åçš„æ¦‚çŽ‡ä¸ºï¼š0.8Ã—0.8Ã—0.8Ã—0.2Ã—0.2=0.03087ä¾æ¬¡æ±‚å‡ºå…¶ä»–4è½®ä¸­çš„ç›¸åº”æ¦‚çŽ‡ã€‚ï¼ˆå¦‚ï¼šè¡¨ä¸‰ï¼‰ æŒ‰ç…§æœ€å¤§ä¼¼ç„¶æ³•åˆ™ï¼šï¼ˆè¡¨ä¸‰ï¼‰ è½®æ•° è‹¥æ˜¯ç¡¬å¸1 è‹¥æ˜¯ç¡¬å¸2 ç¬¬1è½®ä¸­æœ€æœ‰å¯èƒ½çš„æ˜¯ç¡¬å¸2 1 0.00512 0.03087 ç¬¬2è½®ä¸­æœ€æœ‰å¯èƒ½çš„æ˜¯ç¡¬å¸1 2 0.02048 0.01323 ç¬¬3è½®ä¸­æœ€æœ‰å¯èƒ½çš„æ˜¯ç¡¬å¸1 3 0.08192 0.00567 ç¬¬4è½®ä¸­æœ€æœ‰å¯èƒ½çš„æ˜¯ç¡¬å¸2 4 0.00512 0.02048 ç¬¬5è½®ä¸­æœ€æœ‰å¯èƒ½çš„æ˜¯ç¡¬å¸1 5 0.02048 0.01323 æˆ‘ä»¬å°±æŠŠä¸Šé¢çš„å€¼ä½œä¸ºzçš„ä¼°è®¡å€¼ã€‚ ç„¶åŽæŒ‰ç…§æœ€å¤§ä¼¼ç„¶æ¦‚çŽ‡æ³•åˆ™æ¥ä¼°è®¡æ–°çš„P1å’ŒP2ã€‚ï¼ˆç”±è¡¨ä¸‰ï¼ŒæŸ¥åˆ° è¡¨äºŒçš„æ­£åæ•°æ®è®¡ç®—På€¼ï¼‰ P1 = ï¼ˆ2+1+2ï¼‰/15 = 0.33 P2=ï¼ˆ3+3ï¼‰/10 = 0.6 å°†ç®—çš„çš„P1P2åå¤è¿­ä»£ï¼š è®¾æƒ³æˆ‘ä»¬çŸ¥é“æ¯è½®æŠ›æŽ·æ—¶çš„ç¡¬å¸å°±æ˜¯å¦‚æ ‡ç¤ºçš„é‚£æ ·ï¼Œé‚£ä¹ˆï¼ŒP1å’ŒP2çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡å°±æ˜¯0.4å’Œ0.5 ï¼ˆä¸‹æ–‡ä¸­å°†è¿™ä¸¤ä¸ªå€¼ç§°ä¸ºP1å’ŒP2çš„çœŸå®žå€¼ï¼‰ã€‚é‚£ä¹ˆå¯¹æ¯”ä¸‹æˆ‘ä»¬åˆå§‹åŒ–çš„P1å’ŒP2å’Œæ–°ä¼°è®¡å‡ºçš„P1å’ŒP2ï¼š åˆå§‹åŒ–P1 ä¼°è®¡å‡ºP1 çœŸå®žçš„P1 åˆå§‹åŒ–P2 ä¼°è®¡å‡ºP2 çœŸå®žçš„P2 0.2 0.33 0.4 0.8 0.6 0.5 ä¼˜åŒ–æ–°ä¼°è®¡å‡ºçš„ P1å’ŒP2 ä¸€å®šä¼šæ›´æŽ¥è¿‘çœŸå®žçš„ P1å’ŒP2è¿­ä»£ä¸ä¸€å®šä¼šæ”¶æ•›åˆ°çœŸå®žçš„P1å’ŒP2ã€‚å–å†³äºŽP1å’ŒP2çš„åˆå§‹åŒ–å€¼ã€‚ ç”¨æœŸæœ›æ¥ç®€åŒ–è¿ç®— å†æ¬¡åˆ©ç”¨è¡¨ä¸‰ï¼šæˆ‘ä»¬å¯ä»¥ç®—å‡ºæ¯è½®æŠ›æŽ·ä¸­ä½¿ç”¨ç¡¬å¸1æˆ–è€…ä½¿ç”¨ç¡¬å¸2çš„æ¦‚çŽ‡ã€‚ æ¯”å¦‚ç¬¬1è½®ï¼Œä½¿ç”¨ç¡¬å¸1çš„æ¦‚çŽ‡æ˜¯ï¼š0.00512/(0.00512+0.03087)=0.14ä½¿ç”¨ç¡¬å¸2çš„æ¦‚çŽ‡æ˜¯ï¼š1-0.14=0.86 æˆ‘ä»¬æŒ‰ç…§æœŸæœ›æœ€å¤§ä¼¼ç„¶æ¦‚çŽ‡çš„æ³•åˆ™æ¥ä¼°è®¡æ–°çš„P1å’ŒP2ï¼šä»¥P1ä¼°è®¡ä¸ºä¾‹ï¼Œï¼ˆè¡¨äºŒï¼‰ç¬¬1è½®çš„3æ­£2åç›¸å½“äºŽ0.14*3=0.42æ­£0.14*2=0.28åä¾æ¬¡ç®—å‡ºå…¶ä»–å››è½®ï¼Œè¡¨å››å¦‚ä¸‹ï¼šnew_P1=4.22/(4.22+7.98)=0.35 è½®æ•° æ­£é¢ åé¢ 1 0.42 0.28 2 1.22 1.83 3 0.94 3.76 4 0.42 0.28 5 1.22 1.83 æ€»è®¡ 4.22 7.98 å¯ä»¥çœ‹åˆ°ï¼Œæ”¹å˜äº†zå€¼çš„ä¼°è®¡æ–¹æ³•åŽï¼Œæ–°ä¼°è®¡å‡ºçš„P1è¦æ›´åŠ æŽ¥è¿‘0.4ã€‚åŽŸå› å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†æ‰€æœ‰æŠ›æŽ·çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ä¹‹å‰åªä½¿ç”¨äº†éƒ¨åˆ†çš„æ•°æ®ã€‚æˆ‘ä»¬æ ¹æ®Eæ­¥ä¸­æ±‚å‡ºçš„zçš„æ¦‚çŽ‡åˆ†å¸ƒï¼Œä¾æ®æœ€å¤§ä¼¼ç„¶æ¦‚çŽ‡æ³•åˆ™åŽ»ä¼°è®¡P1å’ŒP2ï¼Œè¢«ç§°ä½œMæ­¥ã€‚]]></content>
      <categories>
        <category>AI</category>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>NLP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NLPä¸‰]]></title>
    <url>%2F2020%2F08%2F04%2FNLP%E4%B8%89%2F</url>
    <content type="text"><![CDATA[é©¬å°”å¯å¤«é“¾æ¯ä¸ªçŠ¶æ€çš„è½¬ç§»åªä¾èµ–äºŽä¹‹å‰çš„nä¸ªçŠ¶æ€ã€‚æœ€ç®€å•çš„é©¬å°”å¯å¤«è¿‡ç¨‹æ˜¯ä¸€é˜¶è¿‡ç¨‹ï¼Œå³æ¯ä¸€ä¸ªçŠ¶æ€çš„è½¬ç§»åªä¾èµ–äºŽä¹‹å‰çš„é‚£ä¸€ä¸ªçŠ¶æ€ã€‚ æ˜Žå¤©çš„æ¦‚çŽ‡åˆ†å¸ƒä¸º (1,0)*\begin{pmatrix} 0.9 & 0.1 \\ 0.5 & 0.5 \end{pmatrix}=(0.9,0.1)åŽå¤©çš„æ¦‚çŽ‡åˆ†å¸ƒä¸ºç»§ç»­ä¹˜ä¸Šè½¬ç§»çŸ©é˜µï¼Œæœ€åŽæ¦‚çŽ‡è¶‹äºŽç¨³å®šï¼Œå¾—åˆ°ç¨³æ€åˆ†å¸ƒã€‚ æˆ‘ä»¬ä¸ºä¸Šé¢çš„ä¸€é˜¶é©¬å°”å¯å¤«è¿‡ç¨‹å®šä¹‰äº†ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ï¼š çŠ¶æ€ï¼šæ™´å¤©ã€é˜´å¤© åˆå§‹å‘é‡ï¼šç³»ç»Ÿåœ¨æ—¶é—´ä¸º0çš„æ—¶å€™çŠ¶æ€çš„åˆ†å¸ƒæ¦‚çŽ‡ï¼Œå¦‚ï¼ˆ1ï¼Œ0ï¼‰ çŠ¶æ€è½¬ç§»çŸ©é˜µï¼šæ¯ç§çŠ¶æ€è½¬ç§»çš„æ¦‚çŽ‡ æ‰€æœ‰èƒ½è¢«è¿™æ ·æè¿°çš„ç³»ç»Ÿéƒ½æ˜¯ä¸€ä¸ªé©¬å°”å¯å¤«è¿‡ç¨‹ã€‚ éšé©¬å°”å¯å¤«æ¨¡åž‹ï¼ˆHMMï¼‰éšé©¬å°”å¯å¤«æ¨¡åž‹ï¼ˆHidden Markov Modelï¼‰æ˜¯ä¸€ç§ç»Ÿè®¡æ¨¡åž‹ï¼Œç”¨æ¥æè¿°ä¸€ä¸ªå«æœ‰éšå«æœªçŸ¥å‚æ•°çš„é©¬å°”å¯å¤«è¿‡ç¨‹ã€‚éš¾ç‚¹æ˜¯ä»Žå¯è§‚æµ‹çš„å‚æ•°ä¸­ç¡®å®šè¯¥è¿‡ç¨‹çš„éšå«å‚æ•°ï¼Œç„¶åŽåˆ©ç”¨å‚æ•°åšè¿›ä¸€æ­¥åˆ†æžã€‚ ç”¨æŽ·éª°å­ä¸¾ä¾‹ï¼Œå‡è®¾æœ‰ä¸‰ç§éª°å­ï¼Œåˆ†åˆ«ä¸º6é¢ã€4é¢ã€8é¢ï¼Œé€‰ä¸­æ¯ä¸ªéª°å­çš„æ¦‚çŽ‡éƒ½ä¸º1/3ã€‚ éšè—çš„é©¬å°”å¯å¤«é“¾éšæœºç”Ÿæˆçš„çŠ¶æ€åºåˆ—ï¼Œç§°ä¸ºçŠ¶æ€åºåˆ—ï¼›æ¯ä¸ªçŠ¶æ€ç”Ÿæˆä¸€ä¸ªè§‚æµ‹ï¼Œè€Œç”±æ­¤äº§ç”Ÿçš„è§‚æµ‹éšæœºåºåˆ—ï¼Œç§°ä¸ºè§‚æµ‹åºåˆ—ã€‚åºåˆ—çš„æ¯ä¸ªä½ç½®åˆå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ—¶åˆ»ã€‚ åŸºæœ¬å‡è®¾ é½æ¬¡é©¬å°”å¯å¤«æ€§å‡è®¾ï¼Œå³å‡è®¾éšè—çš„é©¬å°”å¯å¤«é“¾åœ¨ä»»æ„æ—¶åˆ»tçš„çŠ¶æ€åªä¾èµ–äºŽå‰ä¸€æ—¶åˆ»çš„çŠ¶æ€ï¼Œä¸Žå…¶ä»–æ—¶åˆ»çš„çŠ¶æ€åŠè§‚æµ‹æ— å…³ã€‚ è§‚æµ‹ç‹¬ç«‹æ€§å‡è®¾ï¼Œå³å‡è®¾ä»»æ„æ—¶åˆ»çš„è§‚æµ‹åªä¾èµ–ä¸Žè¯¥æ—¶åˆ»çš„é©¬å°”ç§‘å¤«é“¾çš„çŠ¶æ€ï¼Œä¸Žå…¶ä»–è§‚æµ‹åŠçŠ¶æ€æ— å…³ã€‚ éšé©¬å°”å¯å¤«é“¾ä¸‰å¤§é—®é¢˜éšé©¬å°”å¯å¤«æ¨¡åž‹ç”±ä¸‰ä¸ªæ¦‚çŽ‡ç¡®å®šï¼š åˆå§‹æ¦‚çŽ‡åˆ†å¸ƒï¼Œå³åˆå§‹çš„éšå«çŠ¶æ€çš„æ¦‚çŽ‡åˆ†å¸ƒï¼Œè®°ä¸º$Ï€$ï¼› çŠ¶æ€è½¬ç§»æ¦‚çŽ‡åˆ†å¸ƒï¼Œå³éšå«çŠ¶æ€é—´çš„è½¬ç§»æ¦‚çŽ‡åˆ†å¸ƒ, è®°ä¸º$A$ï¼› è§‚æµ‹æ¦‚çŽ‡åˆ†å¸ƒï¼Œå³ç”±éšå«çŠ¶æ€ç”Ÿæˆè§‚æµ‹çŠ¶æ€çš„æ¦‚çŽ‡åˆ†å¸ƒ, è®°ä¸º$B$ã€‚ ä»¥ä¸Šçš„ä¸‰ä¸ªæ¦‚çŽ‡åˆ†å¸ƒå¯ä»¥è¯´å°±æ˜¯éšé©¬å°”å¯å¤«æ¨¡åž‹çš„å‚æ•°ï¼Œè€Œæ ¹æ®è¿™ä¸‰ä¸ªæ¦‚çŽ‡ï¼Œèƒ½å¤Ÿç¡®å®šä¸€ä¸ªéšé©¬å°”å¯å¤«æ¨¡åž‹ $Î»=(A,B,Ï€)$ã€‚ è€Œéšé©¬å°”ç§‘å¤«é“¾çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ä¸ºï¼š æ¦‚çŽ‡è®¡ç®—é—®é¢˜ã€‚å³ç»™å®šæ¨¡åž‹$Î»=(A,B,Ï€)$å’Œè§‚æµ‹åºåˆ—$O$ï¼Œè®¡ç®—åœ¨æ¨¡åž‹$Î»$ä¸‹è§‚æµ‹åºåˆ—å‡ºçŽ°çš„æœ€å¤§æ¦‚çŽ‡$P(O|Î»)$ï¼› è§£ç é—®é¢˜ã€‚ç»™å®šæ¨¡åž‹$Î»=(A,B,Ï€)$å’Œè§‚æµ‹åºåˆ—$O$ï¼Œè®¡ç®—æœ€æœ‰å¯èƒ½äº§ç”Ÿè¿™ä¸ªè§‚æµ‹åºåˆ—çš„éšå«åºåˆ—$X$, å³ä½¿å¾—æ¦‚çŽ‡$P(X|O,Î»)$æœ€å¤§çš„éšå«åºåˆ—$X$ã€‚ å­¦ä¹ é—®é¢˜ã€‚å³ç»™å®šè§‚æµ‹åºåˆ—$O$ï¼Œä¼°è®¡æ¨¡åž‹çš„å‚æ•°$Î»$, ä½¿å¾—åœ¨è¯¥å‚æ•°ä¸‹è§‚æµ‹åºåˆ—å‡ºçŽ°çš„æ¦‚çŽ‡æœ€å¤§ï¼Œå³$P(O|Î»)$æœ€å¤§ï¼› ä¹Ÿå³ï¼š 1ã€ç»™å®šä¸€ä¸ªæ¨¡åž‹ï¼Œå¦‚ä½•è®¡ç®—æŸä¸ªç‰¹å®šçš„è¾“å‡ºåºåˆ—çš„æ¦‚çŽ‡ 2ã€ç»™å®šä¸€ä¸ªæ¨¡åž‹å’ŒæŸä¸ªæ¨¡åž‹çš„è¾“å‡ºåºåˆ—ï¼Œå¦‚ä½•æ‰¾åˆ°æœ€å¯èƒ½äº§ç”Ÿè¿™ç§è¾“å‡ºçš„çŠ¶æ€åºåˆ— 3ã€ç»™å®šè¶³å¤Ÿé‡çš„è§‚æµ‹æ•°æ®ï¼Œå¦‚ä½•ä¼°è®¡éšé©¬å°”å¯å¤«æ¨¡åž‹çš„å‚æ•° å‡è®¾ä¸€ä¸ªéšé©¬å°”å¯å¤«è¿‡ç¨‹çš„ä¾‹å­ï¼Œåˆ™$(A,B,Ï€)$å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åˆ™ä¸‰ä¸ªé—®é¢˜ä¸ºï¼š å·²çŸ¥æ•´ä¸ªæ¨¡åž‹ï¼Œè§‚æµ‹åˆ°è¿žç»­ä¸‰å¤©åšçš„äº‹æƒ…æ˜¯ï¼šæ•£æ­¥ã€è´­ç‰©ã€æ¸…ç†ã€‚é‚£ä¹ˆæ ¹æ®æ¨¡åž‹ï¼Œè®¡ç®—äº§ç”Ÿè¿™äº›è¡Œä¸ºçš„æ¦‚çŽ‡æ˜¯å¤šå°‘ã€‚ å·²çŸ¥æ•´ä¸ªæ¨¡åž‹ï¼ŒåŒæ ·æ˜¯è¿™ä¸‰ä»¶äº‹ï¼ŒçŒœæµ‹è¿™ä¸‰å¤©çš„å¤©æ°”å¦‚ä½•ã€‚ æœ€å¤æ‚çš„é—®é¢˜ï¼Œåœ¨åªçŸ¥é“è¿™ä¸‰å¤©åšäº†è¿™ä¸‰ä»¶äº‹çš„æƒ…å†µä¸‹ï¼Œå»ºç«‹æ•´ä¸ªæ¨¡åž‹ï¼Œç»™å‡º$(A,B,Ï€)$ éšé©¬å°”å¯å¤«é“¾è§£æ³• é—®é¢˜ä¸€ï¼šForward Algorithmï¼Œå‘å‰ç®—æ³•ï¼›æˆ–è€…Backward Algorithmï¼Œå‘åŽç®—æ³• é—®é¢˜äºŒï¼šViterbi Algorithmï¼Œç»´ç‰¹æ¯”ç®—æ³• é—®é¢˜ä¸‰ï¼šBaum-Welch Algorithmï¼Œé²å§†-éŸ¦å°”å¥‡ç®—æ³• é—®é¢˜ä¸€å‚è€ƒï¼š å‰å‘ç®—æ³•ã€åŽå‘ç®—æ³• éåŽ†ç®—æ³•å·²çŸ¥ä¸‰å¤©åšçš„äº‹æƒ…æ˜¯ï¼šæ•£æ­¥ã€è´­ç‰©ã€æ¸…ç†ã€‚ä¸‰å¤©çš„å¯èƒ½å¤©æ°”ç»„åˆä¸º$2^3=8$ï¼ŒéåŽ†æ¯ç§å¯èƒ½ï¼Œæ±‚å‡ºæ¦‚çŽ‡ã€‚ å½“çŠ¶æ€å’Œè§‚æµ‹èŠ‚ç‚¹è¾ƒå°‘æ—¶ï¼ŒéåŽ†æ³•æ›´æœ‰æ•ˆï¼Œä½†éšç€èŠ‚ç‚¹æ•°å¢žå¤šï¼Œè®¡ç®—å¤æ‚åº¦æ€¥å‰§å¢žåŠ ã€‚ å‰å‘ç®—æ³• çœ‹æˆæ—¶é—´åºåˆ—ï¼ŒæŒ‰ç…§t=1ã€t=2Â·Â·Â·çš„é¡ºåºè®¡ç®—ã€‚ å…ˆè®¡ç®—ç¬¬ä¸€å¤©æ•£æ­¥çš„æ¦‚çŽ‡ï¼ŒåŒ…æ‹¬$P(Walk_1,Rainy_1)å’ŒP(Walk_1,Sunny_1)$ è®¡ç®—ç¬¬äºŒå¤©è´­ç‰©çš„æ¦‚çŽ‡ï¼šåŒ…æ‹¬$P(Walk_1,Shop_2,Rainy_2)å’ŒP(walk_1,Shop_2,Sunny_2)$ åˆ†åˆ«ä¸ºï¼š P(Walk_1,Shop_2,Rainy_2)=P(Walk_1,Rainy_1)P(Rainy_2|Rainy_1)P(Shop_2|Rainy_2)+ \\P(Walk_1,Sunny_1)P(Rainy_2|Sunny_1)P(Shop_2|Rainy_2) \\ P(walk_1,Shop_2,Sunny_2)=P(Walk_1,Rainy_1)P(Sunny_2|Rainy_1)P(Shop_2|Sunny_2)+ \\P(Walk_1,Sunny_1)P(Sunny_2|Sunny_1)P(Shop_2|Sunny_2) è®¡ç®—ç¬¬ä¸‰å¤©æ¸…ç†çš„æ¦‚çŽ‡ï¼šåŒ…æ‹¬$P(Walk_1,Shop_2,Clean_3,Rainy_3)å’ŒP(walk_1,Shop_2,Clean_3,Sunny_3)$ åŽå‘ç®—æ³• è®¡ç®—æ‰€æœ‰åŽå‘æ¦‚çŽ‡$Î²_t$ï¼Œæœ€åŽé€šè¿‡åŽå‘æ¦‚çŽ‡æ±‚å‡ºè§‚æµ‹åºåˆ—æ¦‚çŽ‡ å®šä¹‰æœ€åŽæ—¶åˆ»Tæ‰€æœ‰çŠ¶æ€çš„åŽå‘æ¦‚çŽ‡ä¸º1ï¼Œå³$ Î²_3(S)=1ã€ Î²_3(R)=1 $ $a_{R\rightarrow R}$è¡¨ç¤ºå‰ä¸€å¤©ä¸‹é›¨çš„æƒ…å†µä¸‹ï¼ŒåŽä¸€å¤©ä¹Ÿä¸‹é›¨çš„æ¦‚çŽ‡ï¼Œ$b_R(O_3=C)$è¡¨ç¤ºä¸‹é›¨çš„æƒ…å†µä¸‹æ¸…ç†çš„æ¦‚çŽ‡ï¼Œåˆ™ç¬¬äºŒå¤©çš„åŽå‘æ¦‚çŽ‡ï¼š Î²_2(R)=a_{R\rightarrow R}Â·b_R(O_3=C)Â·Î²_3(R)+a_{R\rightarrow S}Â·b_S(O_3=C)Â·Î²_3(S) \\Î²_2(S)=a_{S\rightarrow R}Â·b_R(O_3=C)Â·Î²_3(R)+a_{S\rightarrow S}Â·b_S(O_3=C)Â·Î²_3(S)å‰åŽå‘ç®—æ³•ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081from numpy import *import numpy as npimport matplotlib as pltimport math#éšé©¬å°”ç§‘é“¾æ¨¡åž‹å‰å‘ç®—æ³•def hmm_forward(A, PI, B, O): M = shape(PI)[0] #è§‚æµ‹åºåˆ—å¤§å° N = shape(A)[1] #çŠ¶æ€åºåˆ—å¤§å° T = M alpha = mat(zeros((M, N))) P = 0.0 for i in range(N): alpha[0, i] = PI[i, 0] * B[i, 0] for t in range(T - 1): for i in range(N): temp_value = 0.0; for j in range(N): temp_value += alpha[t, j] * A[j, i] index = 0 if(O[t + 1, 0] == 0): index = 0 else: index = 1 alpha[t + 1, i] = temp_value * B[i, index] for i in range(N): P += alpha[T - 1, i] return P,alpha#éšé©¬å°”ç§‘é“¾æ¨¡åž‹åŽå‘ç®—æ³•def hmm_backword(A, PI, B, O): T,N = shape(A) beta = mat(zeros((T, N))) P = 0.0 beta[T - 1, :] = 1 t = T - 2 while t &gt;= 0: for i in range(N): temp_value = 0.0 for j in range(N): index = 0 if(O[t + 1, 0] == 0): index = 0 else: index = 1 temp_value += A[i, j] * B[j, index] * beta[t + 1, j] beta[t, i] = temp_value t -= 1 for i in range(N): index = 0 if(O[0, 0] == 0): index = 0 else: index = 1 P += PI[i, 0] * B[i, index] * beta[0, i] return P,betaif __name__ == "__main__": A = mat([[0.5, 0.2, 0.3], [0.3, 0.5, 0.2], [0.2, 0.3, 0.5]]) B = mat([[0.5, 0.5], [0.4, 0.6], [0.7, 0.3]]) PI = mat([[0.2], [0.4], [0.4]]) #çº¢ï¼Œç™½ï¼Œçº¢ O = mat([[0], [1], [0]]) P,alpha = hmm_forward(A, PI, B, O) print(P) print("--------------------------------------") P,beta = hmm_backword(A, PI, B, O) print(P) é—®é¢˜äºŒviterbiç®—æ³•å‚è€ƒï¼š https://www.zhihu.com/question/20136144 å‚è€ƒï¼š https://blog.csdn.net/hudashi/article/details/87875259 éšé©¬å°”ç§‘å¤«çš„é¢„æµ‹é—®é¢˜å°±æ˜¯è¦æ±‚å›¾ä¸­çš„ä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—è¯¥è·¯å¾„å¯¹åº”çš„æ¦‚çŽ‡å€¼æœ€å¤§ã€‚ å¯¹åº”ä¸Šå›¾æ¥è®²ï¼Œå‡è®¾æ¯ä¸ªæ—¶åˆ»xå¯èƒ½å–çš„å€¼ä¸º3ï¼Œå¦‚æžœç›´æŽ¥æ±‚çš„è¯ï¼Œæœ‰3^Nçš„ç»„åˆæ•°ï¼Œåº•æ•°3ä¸ºç¯±ç¬†ç½‘ç»œå®½åº¦ï¼ŒæŒ‡æ•°Nä¸ºç¯±ç¬†ç½‘ç»œçš„é•¿åº¦ï¼Œè®¡ç®—é‡éžå¸¸å¤§ã€‚ç»´ç‰¹æ¯”åˆ©ç”¨åŠ¨æ€è§„åˆ’çš„æ€æƒ³æ¥æ±‚è§£æ¦‚çŽ‡æœ€å¤§è·¯å¾„ï¼ˆå¯ç†è§£ä¸ºæ±‚å›¾æœ€çŸ­è·¯å¾„ï¼‰ï¼Œä½¿å¾—å¤æ‚åº¦æ­£æ¯”äºŽåºåˆ—é•¿åº¦ï¼Œå¤æ‚åº¦ä¸ºO(Nâ‹…Dâ‹…D), Nä¸ºé•¿åº¦ï¼ŒDä¸ºå®½åº¦ï¼Œä»Žè€Œå¾ˆå¥½åœ°è§£å†³äº†é—®é¢˜çš„æ±‚è§£ã€‚ 1ã€å¦‚æžœæ¦‚çŽ‡æœ€å¤§çš„è·¯å¾„ç»è¿‡ç¯±ç¬†ç½‘ç»œçš„æŸç‚¹ï¼Œåˆ™ä»Žå¼€å§‹ç‚¹åˆ°è¯¥ç‚¹çš„å­è·¯å¾„ä¹Ÿä¸€å®šæ˜¯ä»Žå¼€å§‹åˆ°è¯¥ç‚¹è·¯å¾„ä¸­æ¦‚çŽ‡æœ€å¤§çš„ã€‚ 2ã€å‡å®šç¬¬iæ—¶åˆ»æœ‰kä¸ªçŠ¶æ€ï¼Œä»Žå¼€å§‹åˆ°iæ—¶åˆ»çš„kä¸ªçŠ¶æ€æœ‰kæ¡æœ€çŸ­è·¯å¾„ï¼Œè€Œæœ€ç»ˆçš„æœ€çŸ­è·¯å¾„å¿…ç„¶ç»è¿‡å…¶ä¸­çš„ä¸€æ¡ã€‚ 3ã€æ ¹æ®ä¸Šè¿°æ€§è´¨ï¼Œåœ¨è®¡ç®—ç¬¬i+1çŠ¶æ€çš„æœ€çŸ­è·¯å¾„æ—¶ï¼Œåªéœ€è¦è€ƒè™‘ä»Žå¼€å§‹åˆ°å½“å‰çš„kä¸ªçŠ¶æ€å€¼çš„æœ€çŸ­è·¯å¾„å’Œå½“å‰çŠ¶æ€å€¼åˆ°ç¬¬i+1çŠ¶æ€å€¼çš„æœ€çŸ­è·¯å¾„å³å¯ï¼Œå¦‚æ±‚t=3æ—¶çš„æœ€çŸ­è·¯å¾„ï¼Œç­‰äºŽæ±‚t=2æ—¶çš„æ‰€æœ‰çŠ¶æ€ç»“ç‚¹x2içš„æœ€çŸ­è·¯å¾„åŠ ä¸Št=2åˆ°t=3çš„å„èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ ç®—æ³•æµç¨‹ å®šä¹‰tæ—¶åˆ»çŠ¶æ€ä¸ºiçš„æ‰€æœ‰å•ä¸ªè·¯å¾„ (i1, i2, â€¦, it) ä¸­æœ€å¤§æ¦‚çŽ‡å€¼ï¼ˆæœ€çŸ­è·¯å¾„ï¼‰ä¸º å…¶ä¸­ï¼Œ$i_t$è¡¨ç¤ºæœ€çŸ­è·¯å¾„ï¼Œå¾—åˆ°å˜é‡çš„é€’æŽ¨å…¬å¼ï¼š å…¶ä¸­i = 1, 2, â€¦, N; t = 1, 2, â€¦ , T-1ï¼Œå®šä¹‰åœ¨æ—¶åˆ»tçŠ¶æ€ä¸ºiçš„æ‰€æœ‰å•ä¸ªè·¯å¾„ (i1, i2, â€¦, it, i) ä¸­æ¦‚çŽ‡æœ€å¤§çš„è·¯å¾„çš„ç¬¬tï¼1ä¸ªç»“ç‚¹ä¸ºï¼š åˆå§‹åŒ–å‚æ•° å¼€å§‹é€’æŽ¨ æœ€åŽçš„ç»ˆæ­¢çŠ¶æ€ï¼ˆTçŠ¶æ€ï¼‰è®¡ç®—ï¼š æœ€ä¼˜è·¯å¾„çš„å›žæº¯ï¼Œå¯¹tï¼T-1, Tï¼2ï¼Œâ€¦, 1 åˆ™æœ€ä¼˜è·¯å¾„ä¸ºï¼š ä¾‹å­ è®¡ç®—t=1æ—¶åˆ»Walkçš„æ¦‚çŽ‡ Î´_1(R) = P(Rainy,Walk) = Ï€_R*b_R(O_1=W)=0.6Ã—0.1=0.06\\ Î´_1(S) = P(Sunny,Walk) = Ï€_S*b_S(O_1=W)=0.4Ã—0.6=0.24â€‹ $\psi_1(R)=0ã€\psi_1(S)=0$ è®¡ç®—t=2æ—¶åˆ»Shopå‘ç”Ÿçš„æ¦‚çŽ‡ Î´_2(R) =Max[Î´_1(R)*a_{R\rightarrow R}, Î´_1(S)*a_{S \rightarrow R}]*b_R(O_2=Shop)\\ =0.24*0.4*0.4=0.0384\\ Î´_2(S) =Max[Î´_1(R)*a_{R\rightarrow S}, Î´_1(S)*a_{S \rightarrow S}]*b_S(O_2=Shop)\\ =0.24*0.6*0.3=0.001392\\â€‹ $\psi_2(R)=Rainyã€\psi_2(S)=Rainy$ è®¡ç®—t=3æ—¶åˆ»Cleançš„æ¦‚çŽ‡ Î´_3(R) =Max[Î´_2(R)*a_{R\rightarrow R}, Î´_2(S)*a_{S \rightarrow R}]*b_R(O_3=Clean)\\ =0.0384*0.7*0.5=0.01344\\ Î´_3(S) =Max[Î´_2(R)*a_{R\rightarrow S}, Î´_2(S)*a_{S \rightarrow S}]*b_S(O_3=Clean)\\ =0.0384*0.4*0.1=0.0432\\â€‹ $\psi_3(R)=Rainyã€\psi_3(S)=Rainy$ $i^_T=Sunnyï¼Œi^_2=\psi_3(Sunny)=Rainyï¼Œi^*_1=\psi_2(Rainy)=Rainy$ $I^*=(Rainyï¼ŒRainy,Sunny)$ é—®é¢˜ä¸‰å…ˆå¯¼ï¼šEMç®—æ³•æžå¤§ä¼¼ç„¶ä¸ŽEMç®—æ³• Baum-Welchç®—æ³•ç”±äºŽåªçŸ¥é“è§‚æµ‹å€¼ï¼Œæ‰€ä»¥ç®—æ³•æ²¡æœ‰å…¨å±€æœ€ä¼˜è§£ï¼Œåªèƒ½æ‰¾åˆ°å±€éƒ¨æœ€ä¼˜è§£ã€‚ å‚è€ƒï¼š https://blog.csdn.net/u014688145/article/details/53046765]]></content>
      <categories>
        <category>AI</category>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>NLP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NLPäºŒ]]></title>
    <url>%2F2020%2F08%2F03%2FNLP%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[image caption with X Image Captioningæ–¹é¢çš„å·¥ä½œå¯ä»¥æ€»ç»“ä¸ºâ€œImage Captioning with Xâ€ï¼Œå…¶ä¸­çš„ X å¯ä»¥æ˜¯ Visual Attention, Visual Attributes, Entity Recognition, Dense Caption å’Œ Reinforcement Learningç­‰æ¨¡å—ã€‚ Visual Attentionæ³¨æ„åŠ›åŒ…æ‹¬è½¯æ³¨æ„åŠ›(soft attention)å’Œå¼ºæ³¨æ„åŠ› è½¯æ³¨æ„åŠ›çš„å…³é”®ç‚¹åœ¨äºŽï¼Œè¿™ç§æ³¨æ„åŠ›æ›´å…³æ³¨åŒºåŸŸæˆ–è€…é€šé“ï¼Œè€Œä¸”è½¯æ³¨æ„åŠ›æ˜¯ç¡®å®šæ€§çš„æ³¨æ„åŠ›ï¼Œå­¦ä¹ å®ŒæˆåŽç›´æŽ¥å¯ä»¥é€šè¿‡ç½‘ç»œç”Ÿæˆï¼Œæœ€å…³é”®çš„åœ°æ–¹æ˜¯è½¯æ³¨æ„åŠ›æ˜¯å¯å¾®çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªéžå¸¸é‡è¦çš„åœ°æ–¹ã€‚å¯ä»¥å¾®åˆ†çš„æ³¨æ„åŠ›å°±å¯ä»¥é€šè¿‡ç¥žç»ç½‘ç»œç®—å‡ºæ¢¯åº¦å¹¶ä¸”å‰å‘ä¼ æ’­å’ŒåŽå‘åé¦ˆæ¥å­¦ä¹ å¾—åˆ°æ³¨æ„åŠ›çš„æƒé‡ã€‚ å¼ºæ³¨æ„åŠ›ä¸Žè½¯æ³¨æ„åŠ›ä¸åŒç‚¹åœ¨äºŽï¼Œé¦–å…ˆå¼ºæ³¨æ„åŠ›æ˜¯æ›´åŠ å…³æ³¨ç‚¹ï¼Œä¹Ÿå°±æ˜¯å›¾åƒä¸­çš„æ¯ä¸ªç‚¹éƒ½æœ‰å¯èƒ½å»¶ä¼¸å‡ºæ³¨æ„åŠ›ï¼ŒåŒæ—¶å¼ºæ³¨æ„åŠ›æ˜¯ä¸€ä¸ªéšæœºçš„é¢„æµ‹è¿‡ç¨‹ï¼Œæ›´å¼ºè°ƒåŠ¨æ€å˜åŒ–ã€‚å½“ç„¶ï¼Œæœ€å…³é”®æ˜¯å¼ºæ³¨æ„åŠ›æ˜¯ä¸€ä¸ªä¸å¯å¾®çš„æ³¨æ„åŠ›ï¼Œè®­ç»ƒè¿‡ç¨‹å¾€å¾€æ˜¯é€šè¿‡å¢žå¼ºå­¦ä¹ (reinforcement learning)æ¥å®Œæˆçš„ã€‚ attentionæ˜¯å­¦å‡ºä¸€ä¸ªæƒé‡åˆ†å¸ƒï¼Œå†æ‹¿è¿™ä¸ªæƒé‡åˆ†å¸ƒæ–½åŠ åœ¨åŽŸæ¥çš„ç‰¹å¾ä¹‹ä¸Šã€‚ç®€å•æ¥è¯´ï¼š è¿™ä¸ªåŠ æƒå¯ä»¥æ˜¯ä¿ç•™æ‰€æœ‰åˆ†é‡å‡åšåŠ æƒï¼ˆå³soft attentionï¼‰ï¼›ä¹Ÿå¯ä»¥æ˜¯åœ¨åˆ†å¸ƒä¸­ä»¥æŸç§é‡‡æ ·ç­–ç•¥é€‰å–éƒ¨åˆ†åˆ†é‡ï¼ˆå³hard attentionï¼‰ã€‚ è¿™ä¸ªåŠ æƒå¯ä»¥ä½œç”¨åœ¨åŽŸå›¾ä¸Šï¼Œä¹Ÿå°±æ˜¯RAMå’ŒDRAMï¼›ä¹Ÿå¯ä»¥ä½œç”¨åœ¨ç‰¹å¾å›¾ä¸Šï¼Œå¦‚åŽç»­çš„å¥½å¤šæ–‡ç« ï¼ˆä¾‹å¦‚image caption)ã€‚ è¿™ä¸ªåŠ æƒå¯ä»¥ä½œç”¨åœ¨ç©ºé—´å°ºåº¦ä¸Šï¼Œç»™ä¸åŒç©ºé—´åŒºåŸŸåŠ æƒï¼›ä¹Ÿå¯ä»¥ä½œç”¨åœ¨channelå°ºåº¦ä¸Šï¼Œç»™ä¸åŒé€šé“ç‰¹å¾åŠ æƒï¼›ç”šè‡³ç‰¹å¾å›¾ä¸Šæ¯ä¸ªå…ƒç´ åŠ æƒã€‚ è¿™ä¸ªåŠ æƒè¿˜å¯ä»¥ä½œç”¨åœ¨ä¸åŒæ—¶åˆ»åŽ†å²ç‰¹å¾ä¸Šï¼Œå¦‚Machine Translationã€‚ Reinforcement Learningå¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼Œç®€ç§°RLï¼‰æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ã€‚åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼ŒåŒ…å«ä¸¤ç§åŸºæœ¬çš„å…ƒç´ ï¼šçŠ¶æ€ä¸ŽåŠ¨ä½œï¼Œåœ¨æŸä¸ªçŠ¶æ€ä¸‹æ‰§è¡ŒæŸç§åŠ¨ä½œï¼Œè¿™ä¾¿æ˜¯ä¸€ç§ç­–ç•¥ï¼Œå­¦ä¹ å™¨è¦åšçš„å°±æ˜¯é€šè¿‡ä¸æ–­åœ°æŽ¢ç´¢å­¦ä¹ ï¼Œä»Žè€ŒèŽ·å¾—ä¸€ä¸ªå¥½çš„ç­–ç•¥ã€‚ä¾‹å¦‚ï¼šåœ¨å›´æ£‹ä¸­ï¼Œä¸€ç§è½æ£‹çš„å±€é¢å°±æ˜¯ä¸€ç§çŠ¶æ€ï¼Œè‹¥èƒ½çŸ¥é“æ¯ç§å±€é¢ä¸‹çš„æœ€ä¼˜è½å­åŠ¨ä½œï¼Œé‚£å°±æ”»æ— ä¸å…‹/ç™¾æˆ˜ä¸æ®†äº†~ è‹¥å°†çŠ¶æ€çœ‹ä½œä¸ºå±žæ€§ï¼ŒåŠ¨ä½œçœ‹ä½œä¸ºæ ‡è®°ï¼Œæ˜“çŸ¥ï¼šç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ éƒ½æ˜¯åœ¨è¯•å›¾å¯»æ‰¾ä¸€ä¸ªæ˜ å°„ï¼Œä»Žå·²çŸ¥å±žæ€§/çŠ¶æ€æŽ¨æ–­å‡ºæ ‡è®°/åŠ¨ä½œï¼Œè¿™æ ·å¼ºåŒ–å­¦ä¹ ä¸­çš„ç­–ç•¥ç›¸å½“äºŽç›‘ç£å­¦ä¹ ä¸­çš„åˆ†ç±»/å›žå½’å™¨ã€‚ä½†åœ¨å®žé™…é—®é¢˜ä¸­ï¼Œå¼ºåŒ–å­¦ä¹ å¹¶æ²¡æœ‰ç›‘ç£å­¦ä¹ é‚£æ ·çš„æ ‡è®°ä¿¡æ¯ï¼Œé€šå¸¸éƒ½æ˜¯åœ¨å°è¯•åŠ¨ä½œåŽæ‰èƒ½èŽ·å¾—ç»“æžœï¼Œå› æ­¤å¼ºåŒ–å­¦ä¹ æ˜¯é€šè¿‡åé¦ˆçš„ç»“æžœä¿¡æ¯ä¸æ–­è°ƒæ•´ä¹‹å‰çš„ç­–ç•¥ï¼Œä»Žè€Œç®—æ³•èƒ½å¤Ÿå­¦ä¹ åˆ°ï¼šåœ¨ä»€ä¹ˆæ ·çš„çŠ¶æ€ä¸‹é€‰æ‹©ä»€ä¹ˆæ ·çš„åŠ¨ä½œå¯ä»¥èŽ·å¾—æœ€å¥½çš„ç»“æžœã€‚ å¼ºåŒ–å­¦ä¹ å’Œç›‘ç£å­¦ä¹ æœ€å¤§çš„åŒºåˆ«æ˜¯å®ƒæ²¡æœ‰ç›‘ç£å­¦ä¹ å·²ç»å‡†å¤‡å¥½çš„è®­ç»ƒæ•°æ®è¾“å‡ºå€¼ã€‚å¼ºåŒ–å­¦ä¹ åªæœ‰å¥–åŠ±å€¼ï¼Œä½†æ˜¯è¿™ä¸ªå¥–åŠ±å€¼å’Œç›‘ç£å­¦ä¹ çš„è¾“å‡ºå€¼ä¸ä¸€æ ·ï¼Œå®ƒä¸æ˜¯äº‹å…ˆç»™å‡ºçš„ï¼Œè€Œæ˜¯å»¶åŽç»™å‡ºçš„ã€‚åŒæ—¶ï¼Œå¼ºåŒ–å­¦ä¹ çš„æ¯ä¸€æ­¥ä¸Žæ—¶é—´é¡ºåºå‰åŽå…³ç³»ç´§å¯†ã€‚è€Œç›‘ç£å­¦ä¹ çš„è®­ç»ƒæ•°æ®ä¹‹é—´ä¸€èˆ¬éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰è¿™ç§å‰åŽçš„ä¾èµ–å…³ç³»ã€‚ å¼ºåŒ–å­¦ä¹ å’Œéžç›‘ç£å­¦ä¹ çš„åŒºåˆ«ã€‚ä¹Ÿè¿˜æ˜¯åœ¨å¥–åŠ±å€¼è¿™ä¸ªåœ°æ–¹ã€‚éžç›‘ç£å­¦ä¹ æ˜¯æ²¡æœ‰è¾“å‡ºå€¼ä¹Ÿæ²¡æœ‰å¥–åŠ±å€¼çš„ï¼Œå®ƒåªæœ‰æ•°æ®ç‰¹å¾ã€‚åŒæ—¶å’Œç›‘ç£å­¦ä¹ ä¸€æ ·ï¼Œæ•°æ®ä¹‹é—´ä¹Ÿéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰å¼ºåŒ–å­¦ä¹ è¿™æ ·çš„å‰åŽä¾èµ–å…³ç³»ã€‚ åŸºæœ¬æ¦‚å¿µå¼ºåŒ–å­¦ä¹ ä»»åŠ¡é€šå¸¸ä½¿ç”¨é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMarkov Decision Processï¼Œç®€ç§°MDPï¼‰æ¥æè¿°ï¼Œå…·ä½“è€Œè¨€ï¼šæœºå™¨å¤„åœ¨ä¸€ä¸ªçŽ¯å¢ƒä¸­ï¼Œæ¯ä¸ªçŠ¶æ€ä¸ºæœºå™¨å¯¹å½“å‰çŽ¯å¢ƒçš„æ„ŸçŸ¥ï¼›æœºå™¨åªèƒ½é€šè¿‡åŠ¨ä½œæ¥å½±å“çŽ¯å¢ƒï¼Œå½“æœºå™¨æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œåŽï¼Œä¼šä½¿å¾—çŽ¯å¢ƒæŒ‰æŸç§æ¦‚çŽ‡è½¬ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼›åŒæ—¶ï¼ŒçŽ¯å¢ƒä¼šæ ¹æ®æ½œåœ¨çš„å¥–èµå‡½æ•°åé¦ˆç»™æœºå™¨ä¸€ä¸ªå¥–èµã€‚ç»¼åˆè€Œè¨€ï¼Œå¼ºåŒ–å­¦ä¹ ä¸»è¦åŒ…å«å››ä¸ªè¦ç´ ï¼šçŠ¶æ€ã€åŠ¨ä½œã€è½¬ç§»æ¦‚çŽ‡ä»¥åŠå¥–èµå‡½æ•°ã€‚ çŠ¶æ€ï¼ˆXï¼‰ï¼šæœºå™¨å¯¹çŽ¯å¢ƒçš„æ„ŸçŸ¥ï¼Œæ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ç§°ä¸ºçŠ¶æ€ç©ºé—´ï¼›åŠ¨ä½œï¼ˆAï¼‰ï¼šæœºå™¨æ‰€é‡‡å–çš„åŠ¨ä½œï¼Œæ‰€æœ‰èƒ½é‡‡å–çš„åŠ¨ä½œæž„æˆåŠ¨ä½œç©ºé—´ï¼›è½¬ç§»æ¦‚çŽ‡ï¼ˆPï¼‰ï¼šå½“æ‰§è¡ŒæŸä¸ªåŠ¨ä½œåŽï¼Œå½“å‰çŠ¶æ€ä¼šä»¥æŸç§æ¦‚çŽ‡è½¬ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼›å¥–èµå‡½æ•°ï¼ˆRï¼‰ï¼šåœ¨çŠ¶æ€è½¬ç§»çš„åŒæ—¶ï¼ŒçŽ¯å¢ƒç»™åé¦ˆç»™æœºå™¨ä¸€ä¸ªå¥–èµã€‚ å› æ­¤ï¼Œå¼ºåŒ–å­¦ä¹ çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯é€šè¿‡åœ¨çŽ¯å¢ƒä¸­ä¸æ–­åœ°å°è¯•ï¼Œæ ¹æ®å°è¯•èŽ·å¾—çš„åé¦ˆä¿¡æ¯è°ƒæ•´ç­–ç•¥ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªè¾ƒå¥½çš„ç­–ç•¥Ï€ï¼Œæœºå™¨æ ¹æ®è¿™ä¸ªç­–ç•¥ä¾¿èƒ½çŸ¥é“åœ¨ä»€ä¹ˆçŠ¶æ€ä¸‹åº”è¯¥æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œã€‚å¸¸è§çš„ç­–ç•¥è¡¨ç¤ºæ–¹æ³•æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š ç¡®å®šæ€§ç­–ç•¥ï¼šÏ€ï¼ˆxï¼‰=aï¼Œå³åœ¨çŠ¶æ€xä¸‹æ‰§è¡ŒaåŠ¨ä½œï¼›éšæœºæ€§ç­–ç•¥ï¼šP=Ï€ï¼ˆx,aï¼‰ï¼Œå³åœ¨çŠ¶æ€xä¸‹æ‰§è¡ŒaåŠ¨ä½œçš„æ¦‚çŽ‡ã€‚ ä¸€ä¸ªç­–ç•¥çš„ä¼˜åŠ£å–å†³äºŽé•¿æœŸæ‰§è¡Œè¿™ä¸€ç­–ç•¥åŽçš„ç´¯ç§¯å¥–èµï¼Œæ¢å¥è¯è¯´ï¼šå¯ä»¥ä½¿ç”¨ç´¯ç§¯å¥–èµæ¥è¯„ä¼°ç­–ç•¥çš„å¥½åï¼Œæœ€ä¼˜ç­–ç•¥åˆ™è¡¨ç¤ºåœ¨åˆå§‹çŠ¶æ€ä¸‹ä¸€ç›´æ‰§è¡Œè¯¥ç­–ç•¥åŽï¼Œæœ€åŽçš„ç´¯ç§¯å¥–èµå€¼æœ€é«˜ã€‚é•¿æœŸç´¯ç§¯å¥–èµé€šå¸¸ä½¿ç”¨ä¸‹è¿°ä¸¤ç§è®¡ç®—æ–¹æ³•ï¼š Kæ‘‡è‡‚èµŒåšæœºé¦–å…ˆæˆ‘ä»¬è€ƒè™‘å¼ºåŒ–å­¦ä¹ æœ€ç®€å•çš„æƒ…å½¢ï¼šä»…è€ƒè™‘ä¸€æ­¥æ“ä½œï¼Œå³åœ¨çŠ¶æ€xä¸‹åªéœ€æ‰§è¡Œä¸€æ¬¡åŠ¨ä½œaä¾¿èƒ½è§‚å¯Ÿåˆ°å¥–èµç»“æžœã€‚æ˜“çŸ¥ï¼šæ¬²æœ€å¤§åŒ–å•æ­¥å¥–èµï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ¯ä¸ªåŠ¨ä½œå¸¦æ¥çš„æœŸæœ›å¥–èµå€¼ï¼Œè¿™æ ·ä¾¿èƒ½é€‰æ‹©å¥–èµå€¼æœ€å¤§çš„åŠ¨ä½œæ¥æ‰§è¡Œã€‚è‹¥æ¯ä¸ªåŠ¨ä½œçš„å¥–èµå€¼ä¸ºç¡®å®šå€¼ï¼Œåˆ™åªéœ€è¦å°†æ¯ä¸ªåŠ¨ä½œå°è¯•ä¸€éå³å¯ï¼Œä½†å¤§å¤šæ•°æƒ…å½¢ä¸‹ï¼Œä¸€ä¸ªåŠ¨ä½œçš„å¥–èµå€¼æ¥æºäºŽä¸€ä¸ªæ¦‚çŽ‡åˆ†å¸ƒï¼Œå› æ­¤éœ€è¦è¿›è¡Œå¤šæ¬¡çš„å°è¯•ã€‚ å•æ­¥å¼ºåŒ–å­¦ä¹ å®žè´¨ä¸Šæ˜¯K-æ‘‡è‡‚èµŒåšæœºï¼ˆK-armed banditï¼‰çš„åŽŸåž‹ï¼Œä¸€èˆ¬æˆ‘ä»¬å°è¯•åŠ¨ä½œçš„æ¬¡æ•°æ˜¯æœ‰é™çš„ï¼Œé‚£å¦‚ä½•åˆ©ç”¨æœ‰é™çš„æ¬¡æ•°è¿›è¡Œæœ‰æ•ˆåœ°æŽ¢ç´¢å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸¤ç§åŸºæœ¬çš„æƒ³æ³•ï¼š ä»…æŽ¢ç´¢æ³•ï¼šå°†å°è¯•çš„æœºä¼šå¹³å‡åˆ†ç»™æ¯ä¸€ä¸ªåŠ¨ä½œï¼Œå³è½®æµæ‰§è¡Œï¼Œæœ€ç»ˆå°†æ¯ä¸ªåŠ¨ä½œçš„å¹³å‡å¥–èµä½œä¸ºæœŸæœ›å¥–èµçš„è¿‘ä¼¼å€¼ã€‚ ä»…åˆ©ç”¨æ³•ï¼šå°†å°è¯•çš„æœºä¼šåˆ†ç»™å½“å‰å¹³å‡å¥–èµå€¼æœ€å¤§çš„åŠ¨ä½œï¼Œéšå«ç€è®©ä¸€éƒ¨åˆ†äººå…ˆå¯Œèµ·æ¥çš„æ€æƒ³ã€‚ å¯ä»¥çœ‹å‡ºï¼šä¸Šè¿°ä¸¤ç§æ–¹æ³•æ˜¯ç›¸äº’çŸ›ç›¾çš„ï¼Œä»…æŽ¢ç´¢æ³•èƒ½è¾ƒå¥½åœ°ä¼°ç®—æ¯ä¸ªåŠ¨ä½œçš„æœŸæœ›å¥–èµï¼Œä½†æ˜¯æ²¡èƒ½æ ¹æ®å½“å‰çš„åé¦ˆç»“æžœè°ƒæ•´å°è¯•ç­–ç•¥ï¼›ä»…åˆ©ç”¨æ³•åœ¨æ¯æ¬¡å°è¯•ä¹‹åŽéƒ½æ›´æ–°å°è¯•ç­–ç•¥ï¼Œç¬¦åˆå¼ºåŒ–å­¦ä¹ çš„æ€ç»´ï¼Œä½†å®¹æ˜“æ‰¾ä¸åˆ°æœ€ä¼˜åŠ¨ä½œã€‚å› æ­¤éœ€è¦åœ¨è¿™ä¸¤è€…ä¹‹é—´è¿›è¡ŒæŠ˜ä¸­ã€‚ æŠ˜ä¸­1ï¼š Îµ-è´ªå¿ƒ Îµ-è´ªå¿ƒæ³•åŸºäºŽä¸€ä¸ªæ¦‚çŽ‡æ¥å¯¹æŽ¢ç´¢å’Œåˆ©ç”¨è¿›è¡ŒæŠ˜ä¸­ï¼Œå…·ä½“è€Œè¨€ï¼šåœ¨æ¯æ¬¡å°è¯•æ—¶ï¼Œä»¥Îµçš„æ¦‚çŽ‡è¿›è¡ŒæŽ¢ç´¢ï¼Œå³ä»¥å‡åŒ€æ¦‚çŽ‡éšæœºé€‰æ‹©ä¸€ä¸ªåŠ¨ä½œï¼›ä»¥1-Îµçš„æ¦‚çŽ‡è¿›è¡Œåˆ©ç”¨ï¼Œå³é€‰æ‹©å½“å‰æœ€ä¼˜çš„åŠ¨ä½œã€‚Îµ-è´ªå¿ƒæ³•åªéœ€è®°å½•æ¯ä¸ªåŠ¨ä½œçš„å½“å‰å¹³å‡å¥–èµå€¼ä¸Žè¢«é€‰ä¸­çš„æ¬¡æ•°ï¼Œä¾¿å¯ä»¥å¢žé‡å¼æ›´æ–°ã€‚ æŠ˜ä¸­2ï¼š Softmax Softmaxç®—æ³•åˆ™åŸºäºŽå½“å‰æ¯ä¸ªåŠ¨ä½œçš„å¹³å‡å¥–èµå€¼æ¥å¯¹æŽ¢ç´¢å’Œåˆ©ç”¨è¿›è¡ŒæŠ˜ä¸­ï¼ŒSoftmaxå‡½æ•°å°†ä¸€ç»„å€¼è½¬åŒ–ä¸ºä¸€ç»„æ¦‚çŽ‡ï¼Œå€¼è¶Šå¤§å¯¹åº”çš„æ¦‚çŽ‡ä¹Ÿè¶Šé«˜ï¼Œå› æ­¤å½“å‰å¹³å‡å¥–èµå€¼è¶Šé«˜çš„åŠ¨ä½œè¢«é€‰ä¸­çš„å‡ çŽ‡ä¹Ÿè¶Šå¤§ã€‚Softmaxå‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š æœ‰æ¨¡åž‹å­¦ä¹ è‹¥å­¦ä¹ ä»»åŠ¡ä¸­çš„å››ä¸ªè¦ç´ éƒ½å·²çŸ¥ï¼Œå³çŠ¶æ€ç©ºé—´ã€åŠ¨ä½œç©ºé—´ã€è½¬ç§»æ¦‚çŽ‡ä»¥åŠå¥–èµå‡½æ•°éƒ½å·²ç»ç»™å‡ºï¼Œè¿™æ ·çš„æƒ…å½¢ç§°ä¸ºâ€œæœ‰æ¨¡åž‹å­¦ä¹ â€ã€‚å‡è®¾çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´å‡ä¸ºæœ‰é™ï¼Œå³å‡ä¸ºç¦»æ•£å€¼ï¼Œè¿™æ ·æˆ‘ä»¬ä¸ç”¨é€šè¿‡å°è¯•ä¾¿å¯ä»¥å¯¹æŸä¸ªç­–ç•¥è¿›è¡Œè¯„ä¼°ã€‚ ç­–ç•¥è¯„ä¼°å‰é¢æåˆ°ï¼šåœ¨æ¨¡åž‹å·²çŸ¥çš„å‰æä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä»»æ„ç­–ç•¥çš„è¿›è¡Œè¯„ä¼°ï¼ˆåŽç»­ä¼šç»™å‡ºæ¼”ç®—è¿‡ç¨‹ï¼‰ã€‚ä¸€èˆ¬å¸¸ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§å€¼å‡½æ•°æ¥è¯„ä¼°æŸä¸ªç­–ç•¥çš„ä¼˜åŠ£ï¼š çŠ¶æ€å€¼å‡½æ•°ï¼ˆVï¼‰ï¼šVï¼ˆxï¼‰ï¼Œå³ä»ŽçŠ¶æ€xå‡ºå‘ï¼Œä½¿ç”¨Ï€ç­–ç•¥æ‰€å¸¦æ¥çš„ç´¯ç§¯å¥–èµï¼› çŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°ï¼ˆQï¼‰ï¼šQï¼ˆx,aï¼‰ï¼Œå³ä»ŽçŠ¶æ€xå‡ºå‘ï¼Œæ‰§è¡ŒåŠ¨ä½œaåŽå†ä½¿ç”¨Ï€ç­–ç•¥æ‰€å¸¦æ¥çš„ç´¯ç§¯å¥–èµã€‚ æ ¹æ®ç´¯ç§¯å¥–èµçš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥Tæ­¥ç´¯ç§¯å¥–èµä¸ŽræŠ˜æ‰£ç´¯ç§¯å¥–èµï¼š æŠ˜æ‰£ç´¯è®¡å¥–åŠ±ï¼š $\gamma$æ˜¯å¥–åŠ±è¡°å‡å› å­ï¼Œåœ¨[0ï¼Œ1]ä¹‹é—´ã€‚å¦‚æžœä¸º0ï¼Œåˆ™æ˜¯è´ªå©ªæ³•ï¼Œå³ä»·å€¼åªç”±å½“å‰å»¶æ—¶å¥–åŠ±å†³å®šï¼Œå¦‚æžœæ˜¯1ï¼Œåˆ™æ‰€æœ‰çš„åŽç»­çŠ¶æ€å¥–åŠ±å’Œå½“å‰å¥–åŠ±ä¸€è§†åŒä»ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå–ä¸€ä¸ª0åˆ°1ä¹‹é—´çš„æ•°å­—ï¼Œå³å½“å‰å»¶æ—¶å¥–åŠ±çš„æƒé‡æ¯”åŽç»­å¥–åŠ±çš„æƒé‡å¤§ã€‚ å«ä¹‰æ˜¯è™½ç„¶å½“å‰åŠ¨ä½œä¼šç»™ä¸€ä¸ªå»¶æ—¶å¥–åŠ±$r_t$ï¼Œå³ä½¿å½“å‰å¥–åŠ±å¾ˆé«˜ï¼Œä½†åˆ°äº†$t+1ã€t+2$ç­‰æ—¶åˆ»ï¼ŒåŽç»­çš„å»¶æ—¶å¥–åŠ±ä¸ä¸€å®šä¹Ÿé«˜ã€‚æ¯”å¦‚ä¸‹è±¡æ£‹ï¼Œæˆ‘ä»¬å¯ä»¥æŸä¸ªåŠ¨ä½œå¯ä»¥åƒæŽ‰å¯¹æ–¹çš„è½¦ï¼Œè¿™ä¸ªå»¶æ—¶å¥–åŠ±æ˜¯å¾ˆé«˜ï¼Œä½†æ˜¯æŽ¥ç€åŽé¢æˆ‘ä»¬è¾“æ£‹äº†ã€‚æ­¤æ—¶åƒè½¦çš„åŠ¨ä½œå¥–åŠ±å€¼é«˜ä½†æ˜¯ä»·å€¼å¹¶ä¸é«˜ã€‚ ç”±äºŽMDPå…·æœ‰é©¬å°”å¯å¤«æ€§ï¼Œå³çŽ°åœ¨å†³å®šæœªæ¥ï¼Œå°†æ¥å’Œè¿‡åŽ»æ— å…³ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æ‰¾åˆ°å€¼å‡½æ•°çš„é€’å½’å…³ç³»ï¼š å…³äºŽä¸Šé¢çš„æŽ¨å¯¼ï¼š Ï€ï¼ˆxï¼Œaï¼‰æŒ‡çš„æ˜¯åœ¨xçŠ¶æ€ä¸‹æ‰§è¡ŒaåŠ¨ä½œçš„æ¦‚çŽ‡ æ‰§è¡ŒaåŠ¨ä½œåŽè¾¾åˆ°çš„çŠ¶æ€ä¸æ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ¦‚çŽ‡ï¼Œæ‰€ä»¥$P^a_{x\rightarrow x^{â€˜}}$æŒ‡çš„æ˜¯æ‰§è¡ŒaåŠ¨ä½œåŽåˆ°è¾¾xçŠ¶æ€çš„æ¦‚çŽ‡ ä»¥ä¸Šçš„å…¬å¼å¯ä»¥ç†è§£ä¸ºï¼ŒTæ­¥çš„ç´¯è®¡å¥–åŠ±åˆ†ä¸ºç¬¬ä¸€æ­¥çš„å¥–åŠ±å’ŒåŽT-1æ­¥çš„ç´¯ç§¯å¥–åŠ± åŽT-1æ­¥çš„å¥–åŠ±ä¸º$V^Ï€_{T-1}(x^{â€˜})$ï¼Œæƒé‡ä¸º$\frac{T-1}{T}$ ç¬¬ä¸€æ­¥çš„å¥–åŠ±ä¸º$R^a_{x\rightarrow x^{â€˜}}$ æœ€åŽéœ€è¦åœ¨å¤–é¢è€ƒè™‘æ‰§è¡ŒaåŠ¨ä½œçš„æ¦‚çŽ‡å’Œæ‰§è¡ŒaåŠ¨ä½œåŽåˆ°è¾¾$x^{â€˜}$çŠ¶æ€çš„æ¦‚çŽ‡ ç±»ä¼¼åœ°ï¼Œå¯¹äºŽræŠ˜æ‰£ç´¯ç§¯å¥–èµå¯ä»¥å¾—åˆ°ï¼š æ˜“çŸ¥ï¼šå½“æ¨¡åž‹å·²çŸ¥æ—¶ï¼Œç­–ç•¥çš„è¯„ä¼°é—®é¢˜è½¬åŒ–ä¸ºä¸€ç§åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå³ä»¥å¡«è¡¨æ ¼çš„å½¢å¼è‡ªåº•å‘ä¸Šï¼Œå…ˆæ±‚è§£æ¯ä¸ªçŠ¶æ€çš„å•æ­¥ç´¯ç§¯å¥–èµï¼Œå†æ±‚è§£æ¯ä¸ªçŠ¶æ€çš„ä¸¤æ­¥ç´¯ç§¯å¥–èµï¼Œä¸€ç›´è¿­ä»£é€æ­¥æ±‚è§£å‡ºæ¯ä¸ªçŠ¶æ€çš„Tæ­¥ç´¯ç§¯å¥–èµã€‚ç®—æ³•æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š å¯¹äºŽçŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°ï¼Œåªéœ€é€šè¿‡ç®€å•çš„è½¬åŒ–ä¾¿å¯å¾—åˆ°ï¼š ç­–ç•¥æ”¹è¿›ç†æƒ³çš„ç­–ç•¥åº”èƒ½ä½¿å¾—æ¯ä¸ªçŠ¶æ€çš„ç´¯ç§¯å¥–èµä¹‹å’Œæœ€å¤§ï¼Œç®€å•æ¥ç†è§£å°±æ˜¯ï¼šä¸ç®¡å¤„äºŽä»€ä¹ˆçŠ¶æ€ï¼Œåªè¦é€šè¿‡è¯¥ç­–ç•¥æ‰§è¡ŒåŠ¨ä½œï¼Œæ€»èƒ½å¾—åˆ°è¾ƒå¥½çš„ç»“æžœã€‚å› æ­¤å¯¹äºŽç»™å®šçš„æŸä¸ªç­–ç•¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œæ”¹è¿›ï¼Œä»Žè€Œå¾—åˆ°æœ€ä¼˜çš„å€¼å‡½æ•° æœ€ä¼˜Bellmanç­‰å¼æ”¹è¿›ç­–ç•¥çš„æ–¹å¼ä¸ºï¼šå°†ç­–ç•¥é€‰æ‹©çš„åŠ¨ä½œæ”¹ä¸ºå½“å‰æœ€ä¼˜çš„åŠ¨ä½œï¼Œè€Œä¸æ˜¯åƒä¹‹å‰é‚£æ ·å¯¹æ¯ç§å¯èƒ½çš„åŠ¨ä½œè¿›è¡Œæ±‚å’Œã€‚æ˜“çŸ¥ï¼šé€‰æ‹©å½“å‰æœ€ä¼˜åŠ¨ä½œç›¸å½“äºŽå°†æ‰€æœ‰çš„æ¦‚çŽ‡éƒ½èµ‹ç»™ç´¯ç§¯å¥–èµå€¼æœ€å¤§çš„åŠ¨ä½œï¼Œå› æ­¤æ¯æ¬¡æ”¹è¿›éƒ½ä¼šä½¿å¾—å€¼å‡½æ•°å•è°ƒé€’å¢žã€‚ ç­–ç•¥è¿­ä»£ï¼š åˆå§‹ç­–ç•¥ï¼Œç­–ç•¥è¯„ä¼°ï¼Œç„¶åŽç­–ç•¥æ”¹è¿›â€¦â€¦ä¸æ–­è¿­ä»£ å°†ç­–ç•¥è¯„ä¼°ä¸Žç­–ç•¥æ”¹è¿›ç»“åˆèµ·æ¥ï¼Œæˆ‘ä»¬ä¾¿å¾—åˆ°äº†ç”Ÿæˆæœ€ä¼˜ç­–ç•¥çš„æ–¹æ³•ï¼šå…ˆç»™å®šä¸€ä¸ªéšæœºç­–ç•¥ï¼ŒçŽ°å¯¹è¯¥ç­–ç•¥è¿›è¡Œè¯„ä¼°ï¼Œç„¶åŽå†æ”¹è¿›ï¼ŒæŽ¥ç€å†è¯„ä¼°/æ”¹è¿›ä¸€ç›´åˆ°ç­–ç•¥æ”¶æ•›ã€ä¸å†å‘ç”Ÿæ”¹å˜ã€‚è¿™ä¾¿æ˜¯ç­–ç•¥è¿­ä»£ç®—æ³•ï¼Œç®—æ³•æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š å¯ä»¥çœ‹å‡ºï¼šç­–ç•¥è¿­ä»£æ³•åœ¨æ¯æ¬¡æ”¹è¿›ç­–ç•¥åŽéƒ½è¦å¯¹ç­–ç•¥è¿›è¡Œé‡æ–°è¯„ä¼°ï¼Œå› æ­¤æ¯”è¾ƒè€—æ—¶ã€‚ å€¼è¿­ä»£ï¼šç­–ç•¥æ”¹è¿›ä¸Žå€¼å‡½æ•°çš„æ”¹è¿›æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤å¯ä»¥å°†ç­–ç•¥æ”¹è¿›è§†ä¸ºå€¼å‡½æ•°çš„æ”¹å–„ è‹¥ä»Žæœ€ä¼˜åŒ–å€¼å‡½æ•°çš„è§’åº¦å‡ºå‘ï¼Œå³å…ˆè¿­ä»£å¾—åˆ°æœ€ä¼˜çš„å€¼å‡½æ•°ï¼Œå†æ¥è®¡ç®—å¦‚ä½•æ”¹å˜ç­–ç•¥ï¼Œè¿™ä¾¿æ˜¯å€¼è¿­ä»£ç®—æ³•ï¼Œç®—æ³•æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š å…æ¨¡åž‹å­¦ä¹ è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ åœ¨çŽ°å®žçš„å¼ºåŒ–å­¦ä¹ ä»»åŠ¡ä¸­ï¼ŒçŽ¯å¢ƒçš„è½¬ç§»å‡½æ•°ä¸Žå¥–èµå‡½æ•°å¾€å¾€å¾ˆéš¾å¾—çŸ¥ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è€ƒè™‘åœ¨ä¸ä¾èµ–äºŽçŽ¯å¢ƒå‚æ•°çš„æ¡ä»¶ä¸‹å»ºç«‹å¼ºåŒ–å­¦ä¹ æ¨¡åž‹ï¼Œè¿™ä¾¿æ˜¯å…æ¨¡åž‹å­¦ä¹ ã€‚è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ ä¾¿æ˜¯å…¶ä¸­çš„ä¸€ç§ç»å…¸æ–¹æ³•ã€‚ ç”±äºŽæ¨¡åž‹å‚æ•°æœªçŸ¥ï¼ŒçŠ¶æ€å€¼å‡½æ•°ä¸èƒ½åƒä¹‹å‰é‚£æ ·è¿›è¡Œå…¨æ¦‚çŽ‡å±•å¼€ï¼Œä»Žè€Œè¿ç”¨åŠ¨æ€è§„åˆ’æ³•æ±‚è§£ã€‚ä¸€ç§ç›´æŽ¥çš„æ–¹æ³•ä¾¿æ˜¯é€šè¿‡é‡‡æ ·æ¥å¯¹ç­–ç•¥è¿›è¡Œè¯„ä¼°/ä¼°ç®—å…¶å€¼å‡½æ•°ï¼Œè’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ æ­£æ˜¯åŸºäºŽé‡‡æ ·æ¥ä¼°è®¡çŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°ï¼šå¯¹é‡‡æ ·è½¨è¿¹ä¸­çš„æ¯ä¸€å¯¹çŠ¶æ€-åŠ¨ä½œï¼Œè®°å½•å…¶åŽçš„å¥–èµå€¼ä¹‹å’Œï¼Œä½œä¸ºè¯¥çŠ¶æ€-åŠ¨ä½œçš„ä¸€æ¬¡ç´¯ç§¯å¥–èµï¼Œé€šè¿‡å¤šæ¬¡é‡‡æ ·åŽï¼Œä½¿ç”¨ç´¯ç§¯å¥–èµçš„å¹³å‡ä½œä¸ºçŠ¶æ€-åŠ¨ä½œå€¼çš„ä¼°è®¡ï¼Œå¹¶å¼•å…¥Îµ-è´ªå¿ƒç­–ç•¥ä¿è¯é‡‡æ ·çš„å¤šæ ·æ€§ã€‚ åœ¨ä¸Šé¢çš„ç®—æ³•æµç¨‹ä¸­ï¼Œè¢«è¯„ä¼°å’Œè¢«æ”¹è¿›çš„éƒ½æ˜¯åŒä¸€ä¸ªç­–ç•¥ï¼Œå› æ­¤ç§°ä¸ºåŒç­–ç•¥è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ ç®—æ³•ã€‚å¼•å…¥Îµ-è´ªå¿ƒä»…æ˜¯ä¸ºäº†ä¾¿äºŽé‡‡æ ·è¯„ä¼°ï¼Œè€Œåœ¨ä½¿ç”¨ç­–ç•¥æ—¶å¹¶ä¸éœ€è¦Îµ-è´ªå¿ƒï¼Œé‚£èƒ½å¦ä»…åœ¨è¯„ä¼°æ—¶ä½¿ç”¨Îµ-è´ªå¿ƒç­–ç•¥ï¼Œè€Œåœ¨æ”¹è¿›æ—¶ä½¿ç”¨åŽŸå§‹ç­–ç•¥å‘¢ï¼Ÿè¿™ä¾¿æ˜¯å¼‚ç­–ç•¥è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ ç®—æ³•ã€‚ å‚è€ƒï¼š å‘¨å¿—åŽã€ŠMachine Learningã€‹å¼ºåŒ–å­¦ä¹  äº•å­—æ£‹å®žä¾‹æ¥è‡ªï¼š https://www.cnblogs.com/pinard/p/9385570.html ä»£ç ï¼šgithub é¦–å…ˆçœ‹ç¬¬ä¸€ä¸ªè¦ç´ çŽ¯å¢ƒçš„çŠ¶æ€$S$ã€‚è¿™æ˜¯ä¸€ä¸ªä¹å®«æ ¼ï¼Œæ¯ä¸ªæ ¼å­æœ‰ä¸‰ç§çŠ¶æ€ï¼Œå³æ²¡æœ‰æ£‹å­(å–å€¼0)ï¼Œæœ‰ç¬¬ä¸€ä¸ªé€‰æ‰‹çš„æ£‹å­ï¼ˆå–å€¼1ï¼‰ï¼Œæœ‰ç¬¬äºŒä¸ªé€‰æ‰‹çš„æ£‹å­ï¼ˆå–å€¼-1ï¼‰ã€‚é‚£ä¹ˆè¿™ä¸ªæ¨¡åž‹çš„çŠ¶æ€ä¸€å…±æœ‰$3^9=1968339=19683$ä¸ª æŽ¥ç€æˆ‘ä»¬çœ‹ä¸ªä½“çš„åŠ¨ä½œ$A$ï¼Œè¿™é‡Œåªæœ‰9ä¸ªæ ¼å­ï¼Œæ¯æ¬¡ä¹Ÿåªèƒ½ä¸‹ä¸€æ­¥ï¼Œæ‰€ä»¥æœ€å¤šåªæœ‰9ä¸ªåŠ¨ä½œé€‰é¡¹ã€‚å®žé™…ä¸Šç”±äºŽå·²ç»æœ‰æ£‹å­çš„æ ¼å­æ˜¯ä¸èƒ½å†ä¸‹çš„ï¼Œæ‰€ä»¥åŠ¨ä½œé€‰é¡¹ä¼šæ›´å°‘ã€‚å®žé™…å¯ä»¥é€‰æ‹©åŠ¨ä½œçš„å°±æ˜¯é‚£äº›å–å€¼ä¸º0çš„æ ¼å­ã€‚ ç¬¬ä¸‰ä¸ªæ˜¯çŽ¯å¢ƒçš„å¥–åŠ±$R$ï¼Œè¿™ä¸ªä¸€èˆ¬æ˜¯æˆ‘ä»¬è‡ªå·±è®¾è®¡ã€‚ç”±äºŽæˆ‘ä»¬çš„ç›®çš„æ˜¯èµ¢æ£‹ï¼Œæ‰€ä»¥å¦‚æžœæŸä¸ªåŠ¨ä½œå¯¼è‡´çš„æ”¹å˜åˆ°çš„çŠ¶æ€å¯ä»¥ä½¿æˆ‘ä»¬èµ¢æ£‹ï¼Œç»“æŸæ¸¸æˆï¼Œé‚£ä¹ˆå¥–åŠ±æœ€é«˜ï¼Œåä¹‹åˆ™å¥–åŠ±æœ€ä½Žã€‚å…¶ä½™çš„åŒæ–¹ä¸‹æ£‹åŠ¨ä½œéƒ½æœ‰å¥–åŠ±ï¼Œä½†å¥–åŠ±è¾ƒå°‘ã€‚ç‰¹åˆ«çš„ï¼Œå¯¹äºŽå…ˆä¸‹çš„æ£‹æ‰‹ï¼Œä¸ä¼šå¯¼è‡´ç»“æŸçš„åŠ¨ä½œå¥–åŠ±è¦æ¯”åŽä¸‹çš„æ£‹æ‰‹å°‘ã€‚]]></content>
      <categories>
        <category>AI</category>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>NLP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NLPä¸€]]></title>
    <url>%2F2020%2F08%2F02%2FNLP%E4%B8%80%2F</url>
    <content type="text"><![CDATA[NLP æ­£åˆ™è¡¨è¾¾å¼éªŒè¯å·¥å…·ï¼šhttp://regexr.com/ ç»ƒä¹ åœ°å€ï¼š https://alf.nu/RegexGolf 1234567891011import re # å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆPatternå¯¹è±¡pattern = re.compile(r'hello.*\!') # ä½¿ç”¨PatternåŒ¹é…æ–‡æœ¬ï¼ŒèŽ·å¾—åŒ¹é…ç»“æžœï¼Œæ— æ³•åŒ¹é…æ—¶å°†è¿”å›žNonematch = pattern.match('hello, hanxiaoyang! How are you?') if match: # ä½¿ç”¨MatchèŽ·å¾—åˆ†ç»„ä¿¡æ¯ print match.group() jiebajiebaä¸€èˆ¬ç”¨æ¥å®Œæˆä¸­æ–‡åˆ†è¯ jieba.cut ä»¥åŠ jieba.cut_for_search è¿”å›žçš„ç»“æž„éƒ½æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„ generator 123456789101112131415161718192021import jiebaseg_list = jieba.cut("æˆ‘åœ¨å­¦ä¹ è‡ªç„¶è¯­è¨€å¤„ç†", cut_all=True)print seg_listprint("Full Mode: " + "/ ".join(seg_list)) # å…¨æ¨¡å¼seg_list = jieba.cut("æˆ‘åœ¨å­¦ä¹ è‡ªç„¶è¯­è¨€å¤„ç†", cut_all=False)print("Default Mode: " + "/ ".join(seg_list)) # ç²¾ç¡®æ¨¡å¼seg_list = jieba.cut("ä»–æ¯•ä¸šäºŽä¸Šæµ·äº¤é€šå¤§å­¦ï¼Œåœ¨ç™¾åº¦æ·±åº¦å­¦ä¹ ç ”ç©¶é™¢è¿›è¡Œç ”ç©¶") # é»˜è®¤æ˜¯ç²¾ç¡®æ¨¡å¼print(", ".join(seg_list))seg_list = jieba.cut_for_search("å°æ˜Žç¡•å£«æ¯•ä¸šäºŽä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼ŒåŽåœ¨å“ˆä½›å¤§å­¦æ·±é€ ") # æœç´¢å¼•æ“Žæ¨¡å¼print(", ".join(seg_list))'''Full Mode: æˆ‘/ åœ¨/ å­¦ä¹ / è‡ªç„¶/ è‡ªç„¶è¯­è¨€/ è¯­è¨€/ å¤„ç†Default Mode: æˆ‘/ åœ¨/ å­¦ä¹ / è‡ªç„¶è¯­è¨€/ å¤„ç†ä»–, æ¯•ä¸š, äºŽ, ä¸Šæµ·äº¤é€šå¤§å­¦, ï¼Œ, åœ¨, ç™¾åº¦, æ·±åº¦, å­¦ä¹ , ç ”ç©¶é™¢, è¿›è¡Œ, ç ”ç©¶å°æ˜Ž, ç¡•å£«, æ¯•ä¸š, äºŽ, ä¸­å›½, ç§‘å­¦, å­¦é™¢, ç§‘å­¦é™¢, ä¸­å›½ç§‘å­¦é™¢, è®¡ç®—, è®¡ç®—æ‰€, ï¼Œ, åŽ, åœ¨, å“ˆä½›, å¤§å­¦, å“ˆä½›å¤§å­¦, æ·±é€ ''' jieba.lcutä»¥åŠjieba.lcut_for_searchç›´æŽ¥è¿”å›ž list 12345678910result_lcut = jieba.lcut("å°æ˜Žç¡•å£«æ¯•ä¸šäºŽä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼ŒåŽåœ¨å“ˆä½›å¤§å­¦æ·±é€ ")print result_lcutprint " ".join(result_lcut)print " ".join(jieba.lcut_for_search("å°æ˜Žç¡•å£«æ¯•ä¸šäºŽä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼ŒåŽåœ¨å“ˆä½›å¤§å­¦æ·±é€ "))'''[u'\u5c0f\u660e', u'\u7855\u58eb', u'\u6bd5\u4e1a', u'\u4e8e', u'\u4e2d\u56fd\u79d1\u5b66\u9662', u'\u8ba1\u7b97\u6240', u'\uff0c', u'\u540e', u'\u5728', u'\u54c8\u4f5b\u5927\u5b66', u'\u6df1\u9020']å°æ˜Ž ç¡•å£« æ¯•ä¸š äºŽ ä¸­å›½ç§‘å­¦é™¢ è®¡ç®—æ‰€ ï¼Œ åŽ åœ¨ å“ˆä½›å¤§å­¦ æ·±é€ å°æ˜Ž ç¡•å£« æ¯•ä¸š äºŽ ä¸­å›½ ç§‘å­¦ å­¦é™¢ ç§‘å­¦é™¢ ä¸­å›½ç§‘å­¦é™¢ è®¡ç®— è®¡ç®—æ‰€ ï¼Œ åŽ åœ¨ å“ˆä½› å¤§å­¦ å“ˆä½›å¤§å­¦ æ·±é€ ''' æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰å­—å…¸å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦é’ˆå¯¹è‡ªå·±çš„åœºæ™¯è¿›è¡Œåˆ†è¯ï¼Œä¼šæœ‰ä¸€äº›é¢†åŸŸå†…çš„ä¸“æœ‰è¯æ±‡ã€‚ 1.å¯ä»¥ç”¨jieba.load_userdict(file_name)åŠ è½½ç”¨æˆ·å­—å…¸ 2.å°‘é‡çš„è¯æ±‡å¯ä»¥è‡ªå·±ç”¨ä¸‹é¢æ–¹æ³•æ‰‹åŠ¨æ·»åŠ ï¼š ç”¨ add_word(word, freq=None, tag=None) å’Œ del_word(word) åœ¨ç¨‹åºä¸­åŠ¨æ€ä¿®æ”¹è¯å…¸ ç”¨ suggest_freq(segment, tune=True) å¯è°ƒèŠ‚å•ä¸ªè¯è¯­çš„è¯é¢‘ï¼Œä½¿å…¶èƒ½ï¼ˆæˆ–ä¸èƒ½ï¼‰è¢«åˆ†å‡ºæ¥ã€‚ 12345678print('/'.join(jieba.cut('å¦‚æžœæ”¾åˆ°æ—§å­—å…¸ä¸­å°†å‡ºé”™ã€‚', HMM=False)))# å¦‚æžœ/æ”¾åˆ°/æ—§/å­—å…¸/ä¸­å°†/å‡ºé”™/ã€‚jieba.suggest_freq(('ä¸­', 'å°†'), True)# 494print('/'.join(jieba.cut('å¦‚æžœæ”¾åˆ°æ—§å­—å…¸ä¸­å°†å‡ºé”™ã€‚', HMM=False)))# å¦‚æžœ/æ”¾åˆ°/æ—§/å­—å…¸/ä¸­/å°†/å‡ºé”™/ã€‚ å…³é”®è¯æå–åŸºäºŽ TF-IDF ç®—æ³•çš„å…³é”®è¯æŠ½å–import jieba.analyse jieba.analyse.extract_tags(sentence, topK=20, withWeight=False, allowPOS=()) sentence ä¸ºå¾…æå–çš„æ–‡æœ¬ topK ä¸ºè¿”å›žå‡ ä¸ª TF/IDF æƒé‡æœ€å¤§çš„å…³é”®è¯ï¼Œé»˜è®¤å€¼ä¸º 20 withWeight ä¸ºæ˜¯å¦ä¸€å¹¶è¿”å›žå…³é”®è¯æƒé‡å€¼ï¼Œé»˜è®¤å€¼ä¸º False allowPOS ä»…åŒ…æ‹¬æŒ‡å®šè¯æ€§çš„è¯ï¼Œé»˜è®¤å€¼ä¸ºç©ºï¼Œå³ä¸ç­›é€‰ 12345678910import jieba.analyse as analyselines = open('NBA.txt').read()print " ".join(analyse.extract_tags(lines, topK=20, withWeight=False, allowPOS=()))éŸ¦å°‘ æœå…°ç‰¹ å…¨æ˜Žæ˜Ÿ å…¨æ˜Žæ˜Ÿèµ› MVP å¨å°‘ æ­£èµ› ç§‘å°” æŠ•ç¯® å‹‡å£« çƒå‘˜ æ–¯å¸ƒé²å…‹ æ›´è¡£æŸœ å¼ å«å¹³ ä¸‰è¿žåº„ NBA è¥¿éƒ¨ æŒ‡å¯¼ é›·éœ† æ˜Žæ˜Ÿé˜Ÿlines = open(u'è¥¿æ¸¸è®°.txt').read()print " ".join(analyse.extract_tags(lines, topK=20, withWeight=False, allowPOS=()))è¡Œè€… å…«æˆ’ å¸ˆçˆ¶ ä¸‰è— å”åƒ§ å¤§åœ£ æ²™åƒ§ å¦–ç²¾ è©è¨ å’Œå°š é‚£æ€ª é‚£é‡Œ é•¿è€ å‘†å­ å¾’å¼Ÿ æ€Žä¹ˆ ä¸çŸ¥ è€å­™ å›½çŽ‹ ä¸€ä¸ª åŸºäºŽ TextRank ç®—æ³•çš„å…³é”®è¯æŠ½å– jieba.analyse.textrank(sentence, topK=20, withWeight=False, allowPOS=(â€˜nsâ€™, â€˜nâ€™, â€˜vnâ€™, â€˜vâ€™)) ç›´æŽ¥ä½¿ç”¨ï¼ŒæŽ¥å£ç›¸åŒï¼Œæ³¨æ„é»˜è®¤è¿‡æ»¤è¯æ€§ã€‚ jieba.analyse.TextRank() æ–°å»ºè‡ªå®šä¹‰ TextRank å®žä¾‹ ç®—æ³•è®ºæ–‡ï¼š TextRank: Bringing Order into Texts åŸºæœ¬æ€æƒ³: å°†å¾…æŠ½å–å…³é”®è¯çš„æ–‡æœ¬è¿›è¡Œåˆ†è¯ ä»¥å›ºå®šçª—å£å¤§å°(é»˜è®¤ä¸º5ï¼Œé€šè¿‡spanå±žæ€§è°ƒæ•´)ï¼Œè¯ä¹‹é—´çš„å…±çŽ°å…³ç³»ï¼Œæž„å»ºå›¾ è®¡ç®—å›¾ä¸­èŠ‚ç‚¹çš„PageRankï¼Œæ³¨æ„æ˜¯æ— å‘å¸¦æƒå›¾ è¯æ€§æ ‡æ³¨ jieba.posseg.POSTokenizer(tokenizer=None) æ–°å»ºè‡ªå®šä¹‰åˆ†è¯å™¨ï¼Œtokenizer å‚æ•°å¯æŒ‡å®šå†…éƒ¨ä½¿ç”¨çš„ jieba.Tokenizer åˆ†è¯å™¨ã€‚jieba.posseg.dt ä¸ºé»˜è®¤è¯æ€§æ ‡æ³¨åˆ†è¯å™¨ã€‚ æ ‡æ³¨å¥å­åˆ†è¯åŽæ¯ä¸ªè¯çš„è¯æ€§ï¼Œé‡‡ç”¨å’Œ ictclas å…¼å®¹çš„æ ‡è®°æ³•ã€‚ å…·ä½“çš„è¯æ€§å¯¹ç…§è¡¨å‚è§è®¡ç®—æ‰€æ±‰è¯­è¯æ€§æ ‡è®°é›† 123456789import jieba.posseg as psegwords = pseg.cut("æˆ‘çˆ±è‡ªç„¶è¯­è¨€å¤„ç†")for word, flag in words: print('%s %s' % (word, flag)) æˆ‘ rçˆ± vè‡ªç„¶è¯­è¨€ lå¤„ç† v å¹¶è¡Œåˆ†è¯åŽŸç†ï¼šå°†ç›®æ ‡æ–‡æœ¬æŒ‰è¡Œåˆ†éš”åŽï¼ŒæŠŠå„è¡Œæ–‡æœ¬åˆ†é…åˆ°å¤šä¸ª Python è¿›ç¨‹å¹¶è¡Œåˆ†è¯ï¼Œç„¶åŽå½’å¹¶ç»“æžœï¼Œä»Žè€ŒèŽ·å¾—åˆ†è¯é€Ÿåº¦çš„å¯è§‚æå‡ åŸºäºŽ python è‡ªå¸¦çš„ multiprocessing æ¨¡å—ï¼Œç›®å‰æš‚ä¸æ”¯æŒ Windows 12jieba.enable_parallel(4) # å¼€å¯å¹¶è¡Œåˆ†è¯æ¨¡å¼ï¼Œå‚æ•°ä¸ºå¹¶è¡Œè¿›ç¨‹æ•°jieba.disable_parallel() # å…³é—­å¹¶è¡Œåˆ†è¯æ¨¡å¼ Word2VecWord2vecï¼ŒæŠŠè¯æ˜ å°„ä¸ºå®žæ•°åŸŸå‘é‡çš„æŠ€æœ¯ä¹Ÿå«è¯åµŒå…¥ï¼ˆword embeddingï¼‰,ä¸ä½¿ç”¨onehotç¼–ç  ä¸¤ä¸ªç”Ÿæˆè¯æ±‡å‘é‡çš„ç®—æ³• ä¸¤å¥—æ•ˆçŽ‡ä¸­ç­‰çš„è®­ç»ƒç®—æ³• Skip-gramç”±äºŽonthotç¼–ç çš„å‘é‡ç›¸äº’æ­£äº¤ï¼Œæ— æ³•é€šè¿‡å†…ç§¯è¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—ï¼Œå› æ­¤å°†onthotç¼–ç çš„è¯å‘é‡è½¬æ¢ä¸ºdç»´çš„å‘é‡ã€‚ æ–¹æ³•æ˜¯ç”¨ç›‘ç£å­¦ä¹ ï¼ˆçª—å£å†…çš„èƒŒæ™¯è¯ä½œä¸ºç›‘ç£ä¿¡æ¯ï¼‰è¿›è¡Œè®­ç»ƒï¼Œæœ€åŽåªå–éšå±‚ä¿¡æ¯ï¼ˆfake taskï¼‰ï¼Œä¹Ÿå°±æ˜¯æƒé‡çŸ©é˜µä½œä¸ºæ˜ å°„åŽçš„å‘é‡è¡¨è¾¾ã€‚ä¸ºäº†å°†onthotç¼–ç æ˜ å°„åˆ°dç»´ï¼ˆå‡è®¾d=300ï¼‰ï¼Œé‚£ä¹ˆæƒ³åˆ°çš„æ–¹æ³•æ˜¯çŸ©é˜µè¿ç®—ï¼Œç”±äºŽä¸€ä¸ªå•è¯çš„onthotç¼–ç å¤§å°æ˜¯nç»´ï¼ˆnä¸ºå•è¯æ•°ï¼‰ï¼Œä¸ºäº†æ˜ å°„åˆ°300ç»´ï¼Œéœ€è¦ä¸€ä¸ªn*300å¤§å°çš„çŸ©é˜µã€‚ å¯¹äºŽè¾“å…¥çš„ä¸€ä¸ªè¯ï¼ˆonehotï¼‰å’Œæƒé‡çŸ©é˜µç›¸ä¹˜ï¼Œå–å…¶å¯¹åº”çš„åˆ—ï¼ˆlookupï¼‰,å¾—åˆ°ç¨ å¯†çš„å‘é‡è¡¨ç¤ºã€‚ç¬¬ä¸€ä¸ªæƒé‡çŸ©é˜µä¸ºä¸­å¿ƒè¯çŸ©é˜µï¼Œç¬¬äºŒä¸ªä¸ºä¸Šä¸‹æ–‡çŸ©é˜µï¼Œä¸€ä¸ªè¯æœ‰ä¸¤ç§å‘é‡è¡¨è¾¾ï¼ˆå¯èƒ½ä½œä¸ºä¸­å¿ƒè¯ï¼Œä¹Ÿå¯èƒ½ä½œä¸ºä¸Šä¸‹æ–‡ï¼‰ã€‚çŸ©é˜µéšæœºåˆå§‹åŒ– è®­ç»ƒæ ·æœ¬æ˜¯ï¼ˆinput word, output word ) è¿™æ ·çš„å•è¯å¯¹ï¼Œå¦‚ï¼ˆdirve, carï¼‰,è¿™ç§å•è¯å¯¹ä»Žçª—å£é‡Œé¢å– è¿™ä¸€ä¸ªçº¢æ¡†å°±ä»£è¡¨ä¸€ä¸ªæ ·æœ¬ï¼Œè¿™ä¸‰ä¸ªçº¢æ¡†å…¶å®žæ˜¯ç”¨ä¸‰ä¸ªæ ·æœ¬è®­ç»ƒäº†ä¸‰æ¬¡ å’Œæ‰€æœ‰å•è¯åšå†…ç§¯ï¼ˆè¿‘ä¼¼ä¸ºç›¸ä¼¼åº¦ï¼‰ï¼Œé€šè¿‡ç›‘ç£å­¦ä¹ è¿›è¡Œè®­ç»ƒ https://blog.csdn.net/weixin_41843918/article/details/90312339 n-gramå¦‚æžœæœ‰ä¸€ä¸ªç”± m ä¸ªè¯ç»„æˆçš„åºåˆ—ï¼ˆæˆ–è€…è¯´ä¸€ä¸ªå¥å­ï¼‰ï¼Œæˆ‘ä»¬å¸Œæœ›ç®—å¾—æ¦‚çŽ‡ ï¼Œæ ¹æ®é“¾å¼è§„åˆ™ï¼Œå¯å¾— è¿™ä¸ªæ¦‚çŽ‡æ˜¾ç„¶å¹¶ä¸å¥½ç®—ï¼Œä¸å¦¨åˆ©ç”¨é©¬å°”ç§‘å¤«é“¾çš„å‡è®¾ï¼Œå³å½“å‰è¿™ä¸ªè¯ä»…ä»…è·Ÿå‰é¢å‡ ä¸ªæœ‰é™çš„è¯ç›¸å…³ï¼Œå› æ­¤ä¹Ÿå°±ä¸å¿…è¿½æº¯åˆ°æœ€å¼€å§‹çš„é‚£ä¸ªè¯ï¼Œè¿™æ ·ä¾¿å¯ä»¥å¤§å¹…ç¼©å‡ä¸Šè¿°ç®—å¼çš„é•¿åº¦ã€‚å³ è¿™ä¸ªé©¬å°”ç§‘å¤«é“¾çš„å‡è®¾ä¸ºä»€ä¹ˆå¥½ç”¨ï¼Ÿæˆ‘æƒ³å¯èƒ½æ˜¯åœ¨çŽ°å®žæƒ…å†µä¸­ï¼Œå¤§å®¶é€šè¿‡çœŸå®žæƒ…å†µå°†n=1ï¼Œ2ï¼Œ3ï¼Œâ€¦.è¿™äº›å€¼éƒ½è¯•è¿‡ä¹‹åŽï¼Œå¾—åˆ°çš„çœŸå®žçš„æ•ˆæžœå’Œæ—¶é—´ç©ºé—´çš„å¼€é”€æƒè¡¡ä¹‹åŽï¼Œå‘çŽ°èƒ½å¤Ÿä½¿ç”¨ ä¸‹é¢ç»™å‡ºä¸€å…ƒæ¨¡åž‹ï¼ŒäºŒå…ƒæ¨¡åž‹ï¼Œä¸‰å…ƒæ¨¡åž‹çš„å®šä¹‰ï¼š å½“ n=1, ä¸€ä¸ªä¸€å…ƒæ¨¡åž‹ï¼ˆunigram model)å³ä¸º ï¼š å½“ n=2, ä¸€ä¸ªäºŒå…ƒæ¨¡åž‹ï¼ˆbigram model)å³ä¸º ï¼š å½“ n=3, ä¸€ä¸ªä¸‰å…ƒæ¨¡åž‹ï¼ˆtrigram model)å³ä¸º ç„¶åŽä¸‹é¢çš„æ€è·¯å°±å¾ˆç®€å•äº†ï¼Œåœ¨ç»™å®šçš„è®­ç»ƒè¯­æ–™ä¸­ï¼Œåˆ©ç”¨è´å¶æ–¯å®šç†ï¼Œå°†ä¸Šè¿°çš„æ¡ä»¶æ¦‚çŽ‡å€¼ï¼ˆå› ä¸ºä¸€ä¸ªå¥å­å‡ºçŽ°çš„æ¦‚çŽ‡éƒ½è½¬å˜ä¸ºå³è¾¹æ¡ä»¶æ¦‚çŽ‡å€¼ç›¸ä¹˜äº†ï¼‰éƒ½ç»Ÿè®¡è®¡ç®—å‡ºæ¥å³å¯ã€‚ä¸‹é¢ä¼šç»™å‡ºå…·ä½“ä¾‹å­è®²è§£ã€‚è¿™é‡Œå…ˆç»™å‡ºå…¬å¼ï¼š å¯¹ç¬¬ä¸€ä¸ªè¿›è¡Œè§£é‡Šï¼ŒåŽé¢åŒç†,å¦‚ä¸‹ï¼š ä¸‹é¢ç»™å‡ºå…·ä½“çš„ä¾‹å­ã€‚ ä¸‹é¢ä¾‹å­æ¥è‡ªäºŽï¼šè‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„N-Gramæ¨¡åž‹è¯¦è§£ - ç™½é©¬è´Ÿé‡‘ç¾ - CSDNåšå®¢å’Œã€ŠåŒ—äº¬å¤§å­¦ å¸¸å®å® ä»¥åŠ The University of Melbourne â€œWeb Search and Text Analysisâ€ è¯¾ç¨‹çš„å¹»ç¯ç‰‡ç´ æã€‹ å‡è®¾çŽ°åœ¨æœ‰ä¸€ä¸ªè¯­æ–™åº“ï¼Œæˆ‘ä»¬ç»Ÿè®¡äº†ä¸‹é¢çš„ä¸€äº›è¯å‡ºçŽ°çš„æ•°é‡ ä¸‹é¢çš„è¿™äº›æ¦‚çŽ‡å€¼ä½œä¸ºå·²çŸ¥æ¡ä»¶ï¼š p(want|&lt; s&gt;) = 0.25â€‹ ä¸‹é¢è¿™ä¸ªè¡¨ç»™å‡ºçš„æ˜¯åŸºäºŽBigramæ¨¡åž‹è¿›è¡Œè®¡æ•°ä¹‹ç»“æžœ ä¾‹å¦‚ï¼Œå…¶ä¸­ç¬¬ä¸€è¡Œï¼Œç¬¬äºŒåˆ— è¡¨ç¤ºç»™å®šå‰ä¸€ä¸ªè¯æ˜¯ $i$æ—¶ï¼Œå½“å‰è¯ä¸º$want$çš„æƒ…å†µä¸€å…±å‡ºçŽ°äº†827æ¬¡ã€‚æ®æ­¤ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ç®—å¾—ç›¸åº”çš„é¢‘çŽ‡åˆ†å¸ƒè¡¨å¦‚ä¸‹ã€‚ æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å°±ä»¥è¡¨ä¸­çš„$p(eat|i)=0.0036$è¿™ä¸ªæ¦‚çŽ‡å€¼è®²è§£ï¼Œä»Žè¡¨ä¸€å¾—å‡º$i$ä¸€å…±å‡ºçŽ°äº†2533æ¬¡ï¼Œè€Œå…¶åŽå‡ºçŽ°$eat$çš„æ¬¡æ•°ä¸€å…±æœ‰9æ¬¡ï¼Œ$p(eat|i)=p(eat,i)/p(i)=count(i,eat)/count(i)=9/2533 = 0.0036$ ä¸‹é¢æˆ‘ä»¬é€šè¿‡åŸºäºŽè¿™ä¸ªè¯­æ–™åº“æ¥åˆ¤æ–­s1= &lt; s&gt; i want english food&lt; /s&gt; â€‹ä¸Žâ€‹s2 = &lt; s&gt; want i english food&lt; /s>â€‹å“ªä¸ªå¥å­æ›´åˆç†ï¼š é¦–å…ˆåˆ¤æ–­p(s1) P(s1)=P(i|)P(want|i)P(english|want)P(food|english)P(|food) =\\0.25Ã—0.33Ã—0.0011Ã—0.5Ã—0.68=0.000031å†æ±‚p(s2)ï¼Ÿ P(s2)=P(want|)P(i|want)P(english|want)P(food|english)P(|food) =\\0.25*0.0022*0.0011*0.5*0.68 = 0.00000002057é€šè¿‡æ¯”è¾ƒæˆ‘ä»¬å¯ä»¥æ˜Žæ˜¾å‘çŽ°$0.00000002057&lt;0.000031$,ä¹Ÿå°±æ˜¯è¯´s1= i want english foodæ›´åƒäººè¯ã€‚ å†æ·±å±‚æ¬¡çš„åˆ†æžï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªå¥å­çš„æ¦‚çŽ‡çš„ä¸åŒï¼Œä¸»è¦æ˜¯ç”±äºŽé¡ºåºi wantè¿˜æ˜¯want içš„é—®é¢˜ï¼Œæ ¹æ®æˆ‘ä»¬çš„ç›´è§‰å’Œå¸¸ç”¨æ­é…è¯­æ³•ï¼Œi wantè¦æ¯”want iå‡ºçŽ°çš„å‡ çŽ‡è¦å¤§å¾ˆå¤šã€‚æ‰€ä»¥ä¸¤è€…çš„å·®å¼‚ï¼Œç¬¬ä¸€ä¸ªæ¦‚çŽ‡å¤§ï¼Œç¬¬äºŒä¸ªæ¦‚çŽ‡å°ï¼Œä¹Ÿå°±èƒ½è¯´çš„é€šäº†ã€‚ Beam SearchBeam searchï¼ˆé›†æŸï¼‰å’ŒGreedy searchï¼ˆè´ªå¿ƒï¼‰è§£ç å¸¸ç”¨çš„ç®—æ³•ã€‚ åœ¨æœºå™¨ç¿»è¯‘ä¸­ï¼Œbeam searchç®—æ³•åœ¨æµ‹è¯•çš„æ—¶å€™ç”¨çš„ï¼Œå› ä¸ºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ªdecoderçš„è¾“å‡ºæ˜¯æœ‰ä¸Žä¹‹å¯¹åº”çš„æ­£ç¡®ç­”æ¡ˆåšå‚ç…§ï¼Œä¹Ÿå°±ä¸éœ€è¦beam searchåŽ»åŠ å¤§è¾“å‡ºçš„å‡†ç¡®çŽ‡ã€‚ ä»¥ä¸­ç¿»è‹±ä½œä¸ºä¾‹å­ï¼š 12æˆ‘ çˆ± å­¦ä¹ ï¼Œå­¦ä¹  ä½¿ æˆ‘ å¿«ä¹I love learning, learning makes me happy è®°ä¸­æ–‡åºåˆ—ä¸º$X$ï¼Œé¦–å…ˆä½¿ç”¨seq2seqä¸­çš„encoderå¯¹ä¸­æ–‡åºåˆ—è¿›è¡Œç¼–ç ï¼Œå¾—åˆ°è¯­ä¹‰å‘é‡$C$ ä¹‹åŽdecoderå¯¹è¯­ä¹‰å‘é‡$C$è¿›è¡Œè§£ç ï¼Œç¿»è¯‘æˆç›®æ ‡è¯­è¨€ã€‚è§£ç ä¹‹å‰éœ€è¦è®¾ç½®beam sizeï¼Œä¸ºkä¸ªæœ€æœ‰å¯èƒ½çš„ç»“æžœã€‚æ­¤å¤„è®¾ç½®ä¸º3. æ¥çœ‹è§£ç å™¨çš„ç¬¬ä¸€ä¸ªè¾“å‡º$y_1$ï¼Œåœ¨ç»™å®šè¯­ä¹‰å‘é‡$C$çš„æƒ…å†µä¸‹ï¼Œé¦–å…ˆé€‰æ‹©è‹±è¯­è¯æ±‡è¡¨ä¸­æœ€æœ‰å¯èƒ½kä¸ªå•è¯ï¼Œä¹Ÿå°±æ˜¯ä¾æ¬¡é€‰æ‹©æ¡ä»¶æ¦‚çŽ‡$P(y_1âˆ£C)$å‰3å¤§å¯¹åº”çš„å•è¯ï¼Œæ¯”å¦‚è¿™é‡Œæ¦‚çŽ‡æœ€å¤§çš„å‰ä¸‰ä¸ªå•è¯ä¾æ¬¡æ˜¯ï¼š$Iï¼Œlearningï¼Œhappy$ æŽ¥ç€ç”Ÿæˆç¬¬äºŒä¸ªè¾“å‡º$y_2$ï¼Œåœ¨è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¾—åˆ°äº†é‚£äº›ä¸œè¥¿å‘¢ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—åˆ°äº†ç¼–ç é˜¶æ®µçš„è¯­ä¹‰å‘é‡$C$ï¼Œè¿˜æœ‰ç¬¬ä¸€ä¸ªè¾“å‡º$y_1$ã€‚æ­¤æ—¶æœ‰ä¸ªé—®é¢˜ï¼Œ$y_1$æœ‰ä¸‰ä¸ªï¼Œæ€Žä¹ˆä½œä¸ºè¿™ä¸€æ—¶åˆ»çš„è¾“å…¥å‘¢ï¼ˆè§£ç é˜¶æ®µéœ€è¦å°†å‰ä¸€æ—¶åˆ»çš„è¾“å‡ºä½œä¸ºå½“å‰æ—¶åˆ»çš„è¾“å…¥ï¼‰ï¼Œç­”æ¡ˆå°±æ˜¯éƒ½è¯•ä¸‹ï¼Œå…·ä½“åšæ³•æ˜¯ï¼š ç¡®å®š$I$ä¸ºç¬¬ä¸€æ—¶åˆ»çš„è¾“å‡ºï¼Œå°†å…¶ä½œä¸ºç¬¬äºŒæ—¶åˆ»çš„è¾“å…¥ï¼Œå¾—åˆ°åœ¨å·²çŸ¥$(C, I)$çš„æ¡ä»¶ä¸‹ï¼Œå„ä¸ªå•è¯ä½œä¸ºè¯¥æ—¶åˆ»è¾“å‡ºçš„æ¡ä»¶æ¦‚çŽ‡$P(y_2|C,I)$ï¼Œæœ‰6ä¸ªç»„åˆï¼Œæ¯ä¸ªç»„åˆçš„æ¦‚çŽ‡ä¸º$P(I|C)P(y_2|C, I)$ã€‚ ç¡®å®š$leanring$ä¸ºç¬¬ä¸€æ—¶åˆ»çš„è¾“å‡ºï¼Œå°†å…¶ä½œä¸ºç¬¬äºŒæ—¶åˆ»çš„è¾“å…¥ï¼Œå¾—åˆ°è¯¥æ¡ä»¶ä¸‹ï¼Œè¯æ±‡è¡¨ä¸­å„ä¸ªå•è¯ä½œä¸ºè¯¥æ—¶åˆ»è¾“å‡ºçš„æ¡ä»¶æ¦‚çŽ‡$P(y_2|C, learning)$ï¼Œè¿™é‡ŒåŒæ ·æœ‰6ç§ç»„åˆï¼› ç¡®å®š$happy$ä¸ºç¬¬ä¸€æ—¶åˆ»çš„è¾“å‡ºï¼Œå°†å…¶ä½œä¸ºç¬¬äºŒæ—¶åˆ»çš„è¾“å…¥ï¼Œå¾—åˆ°è¯¥æ¡ä»¶ä¸‹å„ä¸ªå•è¯ä½œä¸ºè¾“å‡ºçš„æ¡ä»¶æ¦‚çŽ‡$P(y_2|C, happy)$ï¼Œå¾—åˆ°6ç§ç»„åˆï¼Œæ¦‚çŽ‡çš„è®¡ç®—æ–¹å¼å’Œå‰é¢ä¸€æ ·ã€‚ è¿™æ ·å°±å¾—åˆ°äº†18ä¸ªç»„åˆï¼Œæ¯ä¸€ç§ç»„åˆå¯¹åº”ä¸€ä¸ªæ¦‚çŽ‡å€¼$P(y_1|C)P(y_2|C, y_1)$ï¼ŒæŽ¥ç€åœ¨è¿™18ä¸ªç»„åˆä¸­é€‰æ‹©æ¦‚çŽ‡å€¼top3çš„é‚£ä¸‰ç§ç»„åˆï¼Œå‡è®¾å¾—åˆ°$Ilove,Ihappy,leanring make$ã€‚æŽ¥ä¸‹æ¥è¦åšçš„é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œé€æ­¥ç”Ÿæˆå•è¯ï¼Œç›´åˆ°é‡åˆ°ç»“æŸæ ‡è¯†ç¬¦åœæ­¢ã€‚æœ€åŽå¾—åˆ°æ¦‚çŽ‡æœ€å¤§çš„é‚£ä¸ªç”Ÿæˆåºåˆ—ã€‚å…¶æ¦‚çŽ‡ä¸ºï¼š P(Y|C)=P(y_1|C)P(y_2|C,y_1),...,P(y_6|C,y_1,y_2,y_3,y_4,y_5)ä»¥ä¸Šå°±æ˜¯Beam searchç®—æ³•çš„æ€æƒ³ï¼Œå½“beam size=1æ—¶ï¼Œå°±å˜æˆäº†è´ªå¿ƒç®—æ³•ã€‚]]></content>
      <categories>
        <category>AI</category>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>AIï¼ŒNLP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çº¿æ€§ä»£æ•°ã€æ¦‚çŽ‡è®º]]></title>
    <url>%2F2020%2F04%2F08%2F%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E3%80%81%E6%A6%82%E7%8E%87%E8%AE%BA%2F</url>
    <content type="text"><![CDATA[çº¿æ€§ä»£æ•°ç‰¹å¾å€¼ã€ç‰¹å¾å‘é‡ å¯¹è§’çŸ©é˜µ A= \begin{bmatrix} \lambda_{1}\\ &\lambda_{2}\\ &&\ddots \\ &&& \lambda_{n} \end{bmatrix} çŸ©é˜µç›¸ä¼¼ è‹¥çŸ©é˜µ$A$å’ŒçŸ©é˜µ$B$éƒ½æ˜¯né˜¶çŸ©é˜µï¼Œå¦‚æžœå­˜åœ¨å¯é€†çŸ©é˜µ$P$ï¼Œä½¿å¾— $P^{-1}AP=B$ï¼Œåˆ™ç§°$A$ã€$B$ç›¸ä¼¼ï¼Œè®°ä½œ$A\sim B$ çŸ©é˜µç›¸ä¼¼å¯¹è§’åŒ– å¦‚æžœä¸€ä¸ªné˜¶çŸ©é˜µ$A$æœ‰nä¸ªçº¿æ€§æ— å…³çš„ç‰¹å¾å‘é‡ï¼Œé‚£ä¹ˆçŸ©é˜µ$A$ä¸Žç”±å…¶ç‰¹å¾å€¼æ‰€ç»„æˆçš„å¯¹è§’çŸ©é˜µï¼ˆ$Î›$ï¼‰ç›¸ä¼¼ï¼Œå³ï¼š $A\simÎ›$ å¯¹$A$çš„ç‰¹å¾åˆ†è§£ï¼š æœ‰ä¸€ä¸ªNxNçš„çŸ©é˜µ$A$ $A$æœ‰Nä¸ªçº¿æ€§æ— å…³çš„ç‰¹å¾å‘é‡ï¼ˆ$A\simÎ›$ï¼‰ ç”±çŸ©é˜µç›¸ä¼¼å®šä¹‰ï¼Œåˆ™$P^{-1}AP=Î›$ ä¸¤è¾¹åŒæ—¶å·¦ä¹˜$P$ï¼Œå³ä¹˜$P^{-1}$ï¼Œå¾—åˆ°$A=PÎ›P^{-1}$ å¦‚æžœ $\upsilon$ æ˜¯$A$çš„ç‰¹å¾å‘é‡ï¼Œé‚£ä¹ˆä»»ä½•ç¼©æ”¾åŽçš„å‘é‡ $s\upsilon\ (sâˆˆRï¼Œs\neq0 ) $ä¹Ÿæ˜¯ $A$ çš„ ç‰¹å¾å‘é‡ã€‚æ­¤å¤–ï¼Œ$s\upsilon$å’Œ $\upsilon$ æœ‰ç›¸åŒçš„ç‰¹å¾å€¼ã€‚åŸºäºŽè¿™ä¸ªåŽŸå› ï¼Œé€šå¸¸æˆ‘ä»¬åªè€ƒè™‘å•ä½ç‰¹å¾å‘é‡ã€‚ å‡è®¾çŸ©é˜µ$A$æœ‰ n ä¸ªçº¿æ€§æ— å…³çš„ç‰¹å¾å‘é‡ ${\upsilon^{(1)},â€¦,\upsilon^{(n)}}$ï¼Œå¯¹åº”ç€ç‰¹å¾å€¼ ${Î»1,â€¦,Î»n}$ã€‚æˆ‘ä»¬å°†ç‰¹å¾å‘é‡è¿žæŽ¥æˆä¸€ä¸ªçŸ©é˜µï¼Œä½¿å¾—æ¯ä¸€åˆ—æ˜¯ä¸€ä¸ªç‰¹å¾å‘é‡ï¼š$V = [\upsilon^{(1)},â€¦,\upsilon^{(n)}]$ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ç‰¹å¾å€¼è¿žæŽ¥æˆä¸€ä¸ªå‘é‡ $Î» =[Î»1,â€¦,Î»n]^âŠ¤$ã€‚ å› æ­¤$A$çš„ç‰¹å¾åˆ†è§£ï¼ˆeigendecompositionï¼‰å¯ä»¥è®°ä½œ A = Vdiag(Î»)V^{-1}æˆ‘ä»¬å°†å®žå¯¹ç§°çŸ©é˜µåˆ†è§£æˆå®žç‰¹å¾å‘é‡å’Œå®žç‰¹å¾å€¼ï¼š A=QÎ›Q^{T}å…¶ä¸­$Q$æ˜¯$A$çš„ç‰¹å¾å‘é‡ç»„æˆçš„æ­£äº¤çŸ©é˜µï¼Œ$Î›$æ˜¯å¯¹è§’çŸ©é˜µï¼Œç‰¹å¾å€¼$Î›_{i,i}$å¯¹åº”çš„ç‰¹å¾å‘é‡æ˜¯çŸ©é˜µ$Q$çš„ç¬¬$i$åˆ—ï¼Œè®°ä½œ$Q_{:,i}$ï¼Œç”±äºŽ$Q$æ˜¯æ­£äº¤çŸ©é˜µï¼Œå¯ä»¥å°†$A$çœ‹ä½œæ²¿æ–¹å‘$v^{i}$å»¶å±•$Î»_{i}$å€çš„ç©ºé—´ã€‚ è™½ç„¶ä»»æ„ä¸€ä¸ªå®žå¯¹ç§°çŸ©é˜µ$A$éƒ½æœ‰ç‰¹å¾åˆ†è§£ï¼Œä½†æ˜¯ç‰¹å¾åˆ†è§£å¯èƒ½å¹¶ä¸å”¯ä¸€ã€‚å¦‚æžœä¸¤ä¸ªæˆ–å¤šä¸ªç‰¹å¾å‘é‡æ‹¥æœ‰ç›¸åŒçš„ç‰¹å¾å€¼ï¼Œé‚£ä¹ˆåœ¨ç”±è¿™äº›ç‰¹å¾å‘é‡äº§ç”Ÿçš„ç”Ÿæˆå­ç©ºé—´ä¸­ï¼Œä»»æ„ä¸€ç»„æ­£äº¤å‘é‡éƒ½æ˜¯è¯¥ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç­‰ä»·åœ°ä»Žè¿™ äº›ç‰¹å¾å‘é‡ä¸­æž„æˆ$Q$ä½œä¸ºæ›¿ä»£ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬é€šå¸¸æŒ‰é™åºæŽ’åˆ—$Î›$çš„å…ƒç´ ã€‚åœ¨è¯¥ çº¦å®šä¸‹ï¼Œç‰¹å¾åˆ†è§£å”¯ä¸€å½“ä¸”ä»…å½“æ‰€æœ‰çš„ç‰¹å¾å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚ çŸ©é˜µçš„ç‰¹å¾åˆ†è§£ç»™äº†æˆ‘ä»¬å¾ˆå¤šå…³äºŽçŸ©é˜µçš„æœ‰ç”¨ä¿¡æ¯ã€‚çŸ©é˜µæ˜¯å¥‡å¼‚çš„å½“ä¸”ä»…å½“å« æœ‰é›¶ç‰¹å¾å€¼ã€‚ æ‰€æœ‰ç‰¹å¾å€¼éƒ½æ˜¯æ­£æ•°çš„çŸ©é˜µè¢«ç§°ä¸ºæ­£å®šï¼ˆpositive deï¬niteï¼‰ï¼›æ‰€æœ‰ç‰¹å¾å€¼éƒ½æ˜¯éž è´Ÿæ•°çš„çŸ©é˜µè¢«ç§°ä¸ºåŠæ­£å®šï¼ˆpositive semideï¬niteï¼‰ã€‚åŒæ ·åœ°ï¼Œæ‰€æœ‰ç‰¹å¾å€¼éƒ½æ˜¯è´Ÿæ•°çš„ çŸ©é˜µè¢«ç§°ä¸ºè´Ÿå®šï¼ˆnegative deï¬niteï¼‰ï¼›æ‰€æœ‰ç‰¹å¾å€¼éƒ½æ˜¯éžæ­£æ•°çš„çŸ©é˜µè¢«ç§°ä¸º åŠè´Ÿå®š ï¼ˆnegative semideï¬niteï¼‰ã€‚ åŠæ­£å®šçŸ©é˜µå—åˆ°å…³æ³¨æ˜¯å› ä¸ºå®ƒä»¬ä¿è¯ $âˆ€x,x^{T}Axâ‰¥0$ã€‚æ­¤å¤–ï¼Œ æ­£å®šçŸ©é˜µè¿˜ä¿è¯$x^{T}Ax=0\Rightarrow x=0$ã€‚ çŸ©é˜µçš„ç§©ã€å¥‡å¼‚å€¼ã€æ•°æ®é™ç»´ å¥‡å¼‚å€¼åˆ†è§£ä¸Žä½Žç§©è¿‘ä¼¼ å¥‡å¼‚å€¼åˆ†è§£çŸ©é˜µé™¤äº†ç‰¹å¾åˆ†è§£è¿˜æœ‰å¦ä¸€ç§åˆ†è§£æ–¹æ³•ï¼Œè¢«ç§°ä¸ºå¥‡å¼‚å€¼åˆ†è§£ï¼ˆsingular value decomposition, SVDï¼‰ï¼Œå°†çŸ©é˜µåˆ† è§£ä¸ºå¥‡å¼‚å‘é‡ï¼ˆsingular vectorï¼‰å’Œå¥‡å¼‚å€¼ï¼ˆsingular valueï¼‰ã€‚é€šè¿‡å¥‡å¼‚å€¼åˆ†è§£ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€äº›ä¸Žç‰¹å¾åˆ†è§£ç›¸åŒç±»åž‹çš„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œå¥‡å¼‚å€¼åˆ†è§£æœ‰æ›´å¹¿æ³›çš„åº”ç”¨ã€‚æ¯ ä¸ªå®žæ•°çŸ©é˜µéƒ½æœ‰ä¸€ä¸ªå¥‡å¼‚å€¼åˆ†è§£ï¼Œä½†ä¸ä¸€å®šéƒ½æœ‰ç‰¹å¾åˆ†è§£ã€‚ä¾‹å¦‚ï¼Œéžæ–¹é˜µçš„çŸ©é˜µæ²¡æœ‰ç‰¹å¾åˆ†è§£ï¼Œè¿™æ—¶æˆ‘ä»¬åªèƒ½ä½¿ç”¨å¥‡å¼‚å€¼åˆ†è§£ã€‚ å¥‡å¼‚å€¼åˆ†è§£å°†çŸ©é˜µ$A$åˆ†è§£æˆä¸‰ä¸ªçŸ©é˜µçš„ä¹˜ç§¯ï¼š A=UDV^{T}å‡è®¾$A$æ˜¯ä¸€ä¸ª mÃ—n çš„çŸ©é˜µï¼Œé‚£ä¹ˆ$U$æ˜¯ä¸€ä¸ª mÃ—m çš„çŸ©é˜µï¼Œ$D$æ˜¯ä¸€ä¸ª mÃ—n çš„çŸ©é˜µï¼Œ$V$æ˜¯ä¸€ä¸ª nÃ—n çŸ©é˜µã€‚ è¿™äº›çŸ©é˜µä¸­çš„æ¯ä¸€ä¸ªç»å®šä¹‰åŽéƒ½æ‹¥æœ‰ç‰¹æ®Šçš„ç»“æž„ã€‚çŸ©é˜µ$U$å’Œ$V$éƒ½å®šä¹‰ä¸ºæ­£äº¤ çŸ©é˜µï¼Œè€ŒçŸ©é˜µ$D$å®šä¹‰ä¸ºå¯¹è§’çŸ©é˜µã€‚æ³¨æ„ï¼ŒçŸ©é˜µ$D$ä¸ä¸€å®šæ˜¯æ–¹é˜µã€‚ å¯¹è§’çŸ©é˜µ$D$å¯¹è§’çº¿ä¸Šçš„å…ƒç´ è¢«ç§°ä¸ºçŸ©é˜µ$A$çš„å¥‡å¼‚å€¼ï¼ˆsingular valueï¼‰ã€‚çŸ©é˜µ$U$çš„åˆ—å‘é‡è¢«ç§°ä¸ºå·¦å¥‡å¼‚å‘é‡ï¼ˆleft singular vectorï¼‰ï¼ŒçŸ©é˜µ$V$çš„åˆ—å‘é‡è¢«ç§°å³å¥‡å¼‚å‘é‡ï¼ˆright singular vectorï¼‰ã€‚ äº‹å®žä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸Ž$A$ç›¸å…³çš„ç‰¹å¾åˆ†è§£åŽ»è§£é‡Š$A$çš„å¥‡å¼‚å€¼åˆ†è§£ã€‚$A$çš„å·¦å¥‡å¼‚å‘é‡ï¼ˆleftsingularvectorï¼‰æ˜¯$AA^{T}$çš„ç‰¹å¾å‘é‡ã€‚$A$çš„å³å¥‡å¼‚å‘é‡ï¼ˆrightsingular vectorï¼‰æ˜¯$A^{T}A$çš„ç‰¹å¾å‘é‡ã€‚$A$çš„éžé›¶å¥‡å¼‚å€¼æ˜¯$A^{T}A$ç‰¹å¾å€¼çš„å¹³æ–¹æ ¹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯$AA^{T}$ç‰¹å¾å€¼çš„å¹³æ–¹æ ¹ã€‚ SVDæœ‰ç”¨çš„ä¸€ä¸ªæ€§è´¨å¯èƒ½æ˜¯æ‹“å±•çŸ©é˜µæ±‚é€†åˆ°éžæ–¹çŸ©é˜µä¸Šã€‚ è¿¹è¿ç®—è¿¹è¿ç®—è¿”å›žçš„æ˜¯çŸ©é˜µå¯¹è§’å…ƒç´ çš„å’Œï¼š Tr(A)=\sum_{i}A_{i,iÂ·}è¿¹è¿ç®—æœ‰å¦‚ä¸‹æ€§è´¨ï¼š Tr(A)=Tr(A^{T})å¾ªçŽ¯ç½®æ¢ï¼ˆå°†æœ€åŽä¸€ä¸ªç§»åˆ°æœ€å‰é¢ï¼‰ï¼š Tr(ABC)=Tr(CAB)=Tr(BCA)å¯¹äºŽæ ‡é‡aï¼š a=Tr(a)PCA http://blog.codinglabs.org/articles/pca-tutorial.html code1234567891011121314def pca(dataMat, topNfeat=9999999): # topNfeatï¼šoutput top N features meanVals = np.mean(dataMat, axis=0) # to compute the mean value meanRemoved = dataMat - meanVals # to remove the mean value covMat = np.cov(meanRemoved, rowvar=0) # to compute the covariance matrix # if rowvar = True -&gt; row store dimension , col store Observation value eigVals, eigVects = np.linalg.eig(np.mat(covMat)) # to compute the eigenvalues and eigenvectors eigValInd = np.argsort(eigVals) # to sort from the smallest to the largest eigValInd = eigValInd[:-(topNfeat + 1):-1] # to get the nth largest eigenvalues and eigenvectors redEigVects = eigVects[:, eigValInd] lowDDataMat = meanRemoved * redEigVects # to transform into low dimensions reconMat = (lowDDataMat * redEigVects.T) + meanVals cumCont = sum(eigVals[eigValInd]) / sum(eigVals) # to compute cumulative contribution return lowDDataMat, reconMat, cumCont æ¦‚çŽ‡è®ºæ–¹å·®ã€åæ–¹å·® åæ–¹å·® åæ–¹å·®çš„ç»å¯¹å€¼å¦‚æžœå¾ˆå¤§åˆ™æ„å‘³ç€å˜é‡å€¼å˜åŒ–å¾ˆå¤§å¹¶ä¸”å®ƒä»¬åŒæ—¶è·ç¦»å„è‡ªçš„å‡å€¼å¾ˆè¿œã€‚å¦‚æžœåæ–¹å·®æ˜¯æ­£çš„ï¼Œé‚£ä¹ˆä¸¤ä¸ªå˜é‡éƒ½å€¾å‘äºŽåŒæ—¶å–å¾—ç›¸å¯¹è¾ƒå¤§çš„å€¼ã€‚å¦‚æžœåæ–¹å·®æ˜¯è´Ÿçš„ï¼Œé‚£ä¹ˆå…¶ä¸­ä¸€ä¸ªå˜é‡å€¾å‘äºŽå–å¾—ç›¸å¯¹è¾ƒå¤§çš„å€¼çš„åŒæ—¶ï¼Œå¦ä¸€ä¸ªå˜é‡å€¾å‘äºŽ å–å¾—ç›¸å¯¹è¾ƒå°çš„å€¼ï¼Œåä¹‹äº¦ç„¶ã€‚å…¶ä»–çš„è¡¡é‡æŒ‡æ ‡å¦‚ç›¸å…³ç³»æ•°ï¼ˆcorrelationï¼‰å°†æ¯ä¸ªå˜é‡çš„è´¡çŒ®å½’ä¸€åŒ–ï¼Œä¸ºäº†åªè¡¡é‡å˜é‡çš„ç›¸å…³æ€§è€Œä¸å—å„ä¸ªå˜é‡å°ºåº¦å¤§å°çš„å½±å“ã€‚ åæ–¹å·®å’Œç›¸å…³æ€§æ˜¯æœ‰è”ç³»çš„ï¼Œä½†å®žé™…ä¸Šæ˜¯ä¸åŒçš„æ¦‚å¿µã€‚å®ƒä»¬æ˜¯æœ‰è”ç³»çš„ï¼Œå› ä¸º ä¸¤ä¸ªå˜é‡å¦‚æžœç›¸äº’ç‹¬ç«‹é‚£ä¹ˆå®ƒä»¬çš„åæ–¹å·®ä¸ºé›¶ï¼Œå¦‚æžœä¸¤ä¸ªå˜é‡çš„åæ–¹å·®ä¸ä¸ºé›¶é‚£ä¹ˆ å®ƒä»¬ä¸€å®šæ˜¯ç›¸å…³çš„ã€‚ç„¶è€Œï¼Œç‹¬ç«‹æ€§åˆæ˜¯å’Œåæ–¹å·®å®Œå…¨ä¸åŒçš„æ€§è´¨ã€‚ä¸¤ä¸ªå˜é‡å¦‚æžœå æ–¹å·®ä¸ºé›¶ï¼Œå®ƒä»¬ä¹‹é—´ä¸€å®šæ²¡æœ‰çº¿æ€§å…³ç³»ã€‚ç‹¬ç«‹æ€§æ¯”é›¶åæ–¹å·®çš„è¦æ±‚æ›´å¼ºï¼Œå› ä¸ºç‹¬ç«‹ æ€§è¿˜æŽ’é™¤äº†éžçº¿æ€§çš„å…³ç³»ã€‚ä¸¤ä¸ªå˜é‡ç›¸äº’ä¾èµ–ä½†å…·æœ‰é›¶åæ–¹å·®æ˜¯å¯èƒ½çš„ã€‚ä¾‹å¦‚ï¼Œå‡ è®¾æˆ‘ä»¬é¦–å…ˆä»ŽåŒºé—´ [âˆ’1,1] ä¸Šçš„å‡åŒ€åˆ†å¸ƒä¸­é‡‡æ ·å‡ºä¸€ä¸ªå®žæ•° $x$ã€‚ç„¶åŽæˆ‘ä»¬å¯¹ä¸€ä¸ªéšæœºå˜é‡ $s$ è¿›è¡Œé‡‡æ ·ã€‚$s$ ä»¥ $\frac{1}{2}$ çš„æ¦‚çŽ‡å€¼ä¸º 1ï¼Œå¦åˆ™ä¸º-1ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¤ $y = sx$ æ¥ç”Ÿæˆ ä¸€ä¸ªéšæœºå˜é‡ $y$ã€‚æ˜¾ç„¶ï¼Œ$x$ å’Œ $y$ ä¸æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå› ä¸º $x$ å®Œå…¨å†³å®šäº† $y$ çš„å°ºåº¦ã€‚ç„¶ è€Œï¼Œ$Cov(x,y)=0$ã€‚ åæ–¹å·®çŸ©é˜µ éšæœºå‘é‡ $xâˆˆR^{n}$ çš„åæ–¹å·®çŸ©é˜µï¼ˆcovariance matrixï¼‰æ˜¯ä¸€ä¸ª nÃ—n çš„çŸ©é˜µï¼Œå¹¶ ä¸”æ»¡è¶³ Cov(x)_{i,j}=Cov(x_{i},x_{j})åæ–¹å·®çŸ©é˜µçš„å¯¹è§’å…ƒæ˜¯æ–¹å·®ï¼š Cov(x_{i},x_{j})=Var(x_{i}) åˆ†å¸ƒBeinoulliåˆ†å¸ƒ Multinoulliåˆ†å¸ƒMultinoulli åˆ†å¸ƒï¼ˆmultinoulli distributionï¼‰æˆ–è€…èŒƒç•´åˆ†å¸ƒï¼ˆcategorical distributionï¼‰æ˜¯æŒ‡åœ¨å…·æœ‰ $k$ ä¸ªä¸åŒçŠ¶æ€çš„å•ä¸ªç¦»æ•£åž‹éšæœºå˜é‡ä¸Šçš„åˆ†å¸ƒï¼Œå…¶ä¸­ $k$ æ˜¯ä¸€ ä¸ªæœ‰é™å€¼ã€‚Multinoulli åˆ†å¸ƒç”±å‘é‡ $pâˆˆ [0,1]^{kâˆ’1}$ å‚æ•°åŒ–ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªåˆ†é‡ $p_i$ è¡¨ç¤º ç¬¬ $i$ ä¸ªçŠ¶æ€çš„æ¦‚çŽ‡ã€‚åŽçš„ç¬¬ $k$ ä¸ªçŠ¶æ€çš„æ¦‚çŽ‡å¯ä»¥é€šè¿‡ $1âˆ’1^âŠ¤p$ ç»™å‡ºã€‚æ³¨æ„æˆ‘ä»¬å¿… é¡»é™åˆ¶ $1^âŠ¤pâ‰¤ 1$ã€‚Multinoulli åˆ†å¸ƒç»å¸¸ç”¨æ¥è¡¨ç¤ºå¯¹è±¡åˆ†ç±»çš„åˆ†å¸ƒï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆå°‘å‡è®¾çŠ¶æ€ 1 å…·æœ‰æ•°å€¼ 1 ä¹‹ç±»çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸ä¸éœ€è¦åŽ»è®¡ç®— Multinoulli åˆ†å¸ƒçš„éšæœº å˜é‡çš„æœŸæœ›å’Œæ–¹å·® é«˜æ–¯åˆ†å¸ƒ N(x;Âµ,Ïƒ^2)=\frac{1}{\sqrt{2Ï€Ïƒ^2}}exp(-\frac{1}{2Ïƒ^2}(x-Âµ^2))\\ Âµ âˆˆR \ , Ïƒ âˆˆ (0,âˆž)ã€‚$Âµ$ ä¸ºä¸­å¿ƒå³°å€¼åæ ‡ï¼Œä¹Ÿæ˜¯æœŸæœ›ï¼Œæ ‡å‡†å·®æ˜¯Ïƒ Diracåˆ†å¸ƒ p(x)=\delta (x-\mu)Dirac delta å‡½æ•°è¢«å®šä¹‰æˆåœ¨é™¤äº†åœ¨0å–æ— ç©·ï¼Œ0ä»¥å¤–çš„æ‰€æœ‰ç‚¹çš„å€¼éƒ½ä¸º 0ï¼Œä½†æ˜¯ç§¯åˆ†ä¸º 1ã€‚ é«˜æ–¯æ··åˆæ¨¡åž‹GMMGMMæ˜¯ä¸€ç§ä¸šç•Œå¹¿æ³›ä½¿ç”¨çš„èšç±»ç®—æ³•ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨äº†é«˜æ–¯åˆ†å¸ƒä½œä¸ºå‚æ•°æ¨¡åž‹ï¼Œå¹¶ä½¿ç”¨äº†æœŸæœ›æœ€å¤§ï¼ˆExpectation Maximizationï¼Œç®€ç§°EMï¼‰ç®—æ³•è¿›è¡Œè®­ç»ƒï¼Œè®­ç»ƒè¿‡ç¨‹é€šè¿‡æ¨¡åž‹æ¥è®¡ç®—æ•°æ®çš„æœŸæœ›å€¼ã€‚é€šè¿‡æ›´æ–°å‚æ•°Î¼å’ŒÏƒæ¥è®©æœŸæœ›å€¼æœ€å¤§åŒ–ã€‚ p(x)=\sum_{i=1}^{K}\phi_i\frac{1}{\sqrt{2Ï€Ïƒ_i^2}}exp(-\frac{1}{2Ïƒ_i^2}(x-Âµ_i^2))\\é¦–å…ˆåˆ†å¸ƒæ¦‚çŽ‡æ˜¯Kä¸ªé«˜æ–¯åˆ†å¸ƒçš„å’Œï¼Œæ¯ä¸ªé«˜æ–¯åˆ†å¸ƒæœ‰å±žäºŽè‡ªå·±çš„$\mu$å’Œ$\sigma$å‚æ•°ï¼Œä»¥åŠå¯¹åº”çš„æƒé‡å‚æ•°ï¼Œæƒé‡å€¼å¿…é¡»ä¸ºæ­£æ•°ï¼Œæ‰€æœ‰æƒé‡çš„å’Œå¿…é¡»ç­‰äºŽ1ï¼Œä»¥ç¡®ä¿å…¬å¼ç»™å‡ºæ•°å€¼æ˜¯åˆç†çš„æ¦‚çŽ‡å¯†åº¦å€¼ ã€‚ å‡½æ•°logistic sigmoid \sigma(x)=\frac{1}{1+exp(-x)}sigmoidå‡½æ•°é€šå¸¸ç”¨æ¥äº§ç”ŸBeinoulliåˆ†å¸ƒä¸­çš„å‚æ•°$\phi$ï¼Œå› ä¸ºèŒƒå›´æ˜¯(0,1) softplus \zeta(x)=log(1+exp(x))softpluså¯ä»¥ç”¨æ¥äº§ç”Ÿæ­£æ€åˆ†å¸ƒçš„$\beta$å’Œ$\sigma$å‚æ•°ï¼Œå› ä¸ºèŒƒå›´æ˜¯$(0,âˆž)$ æ€§è´¨ é€»è¾‘å›žå½’ä¸Žæœ€å¤§ä¼¼ç„¶ é¢‘çŽ‡å­¦æ´¾ã€è´å¶æ–¯ è´å¶æ–¯è´å¶æ–¯å…¬å¼ P(x|y)=\frac{P(x)P(y|x)}{P(y)} P(A_i|B)=\frac{P(B|A_i)P(A_i)}{\sum_jP(B|A_j)P(A_j)}Pr(A)æ˜¯Açš„å…ˆéªŒæ¦‚çŽ‡æˆ–è¾¹ç¼˜æ¦‚çŽ‡ã€‚ä¹‹æ‰€ä»¥ç§°ä¸ºâ€å…ˆéªŒâ€æ˜¯å› ä¸ºå®ƒä¸è€ƒè™‘ä»»ä½•Bæ–¹é¢çš„å› ç´ ã€‚ Pr(A|B)æ˜¯å·²çŸ¥Bå‘ç”ŸåŽAçš„æ¡ä»¶æ¦‚çŽ‡ï¼Œä¹Ÿç”±äºŽå¾—è‡ªBçš„å–å€¼è€Œè¢«ç§°ä½œAçš„åŽéªŒæ¦‚çŽ‡ã€‚ Pr(B|A)æ˜¯å·²çŸ¥Aå‘ç”ŸåŽBçš„æ¡ä»¶æ¦‚çŽ‡ï¼Œä¹Ÿç”±äºŽå¾—è‡ªAçš„å–å€¼è€Œè¢«ç§°ä½œBçš„åŽéªŒæ¦‚çŽ‡ã€‚ Pr(B)æ˜¯Bçš„å…ˆéªŒæ¦‚çŽ‡æˆ–è¾¹ç¼˜æ¦‚çŽ‡ï¼Œä¹Ÿä½œæ ‡å‡†åŒ–å¸¸é‡ï¼ˆnormalized constantï¼‰ã€‚ æ„ä¹‰123456789ä¾‹å¦‚ï¼šä¸€åº§åˆ«å¢…åœ¨è¿‡åŽ»çš„ 20 å¹´é‡Œä¸€å…±å‘ç”Ÿè¿‡ 2 æ¬¡è¢«ç›—ï¼Œåˆ«å¢…çš„ä¸»äººæœ‰ä¸€æ¡ç‹—ï¼Œç‹—å¹³å‡æ¯å‘¨æ™šä¸Šå« 3 æ¬¡ï¼Œåœ¨ç›—è´¼å…¥ä¾µæ—¶ç‹—å«çš„æ¦‚çŽ‡è¢«ä¼°è®¡ä¸º 0.9ï¼Œé—®é¢˜æ˜¯ï¼šåœ¨ç‹—å«çš„æ—¶å€™å‘ç”Ÿå…¥ä¾µçš„æ¦‚çŽ‡æ˜¯å¤šå°‘ï¼Ÿæˆ‘ä»¬å‡è®¾ A äº‹ä»¶ä¸ºç‹—åœ¨æ™šä¸Šå«ï¼ŒB ä¸ºç›—è´¼å…¥ä¾µï¼Œåˆ™ä»¥å¤©ä¸ºå•ä½ç»Ÿè®¡ï¼ŒP(A) = 3/7ï¼ŒP(B) = 2/(20*365) = 2/7300ï¼ŒP(A|B) = 0.9ï¼ŒæŒ‰ç…§å…¬å¼å¾ˆå®¹æ˜“å¾—å‡ºç»“æžœï¼šP(B|A) = 0.9*(2/7300) / (3/7) = 0.00058å¦ä¸€ä¸ªä¾‹å­ï¼ŒçŽ°åˆ†åˆ«æœ‰ Aã€B ä¸¤ä¸ªå®¹å™¨ï¼Œåœ¨å®¹å™¨ A é‡Œåˆ†åˆ«æœ‰ 7 ä¸ªçº¢çƒå’Œ 3 ä¸ªç™½çƒï¼Œåœ¨å®¹å™¨ B é‡Œæœ‰ 1 ä¸ªçº¢çƒå’Œ 9 ä¸ªç™½çƒï¼ŒçŽ°å·²çŸ¥ä»Žè¿™ä¸¤ä¸ªå®¹å™¨é‡Œä»»æ„æŠ½å‡ºäº†ä¸€ä¸ªçº¢çƒï¼Œé—®è¿™ä¸ªçƒæ¥è‡ªå®¹å™¨ A çš„æ¦‚çŽ‡æ˜¯å¤šå°‘?å‡è®¾å·²ç»æŠ½å‡ºçº¢çƒä¸ºäº‹ä»¶ Bï¼Œé€‰ä¸­å®¹å™¨ A ä¸ºäº‹ä»¶ Aï¼Œåˆ™æœ‰ï¼šP(B) = 8/20ï¼ŒP(A) = 1/2ï¼ŒP(B|A) = 7/10ï¼ŒæŒ‰ç…§å…¬å¼ï¼Œåˆ™æœ‰ï¼šP(A|B) = (7/10)*(1/2) / (8/20) = 0.875è´å¶æ–¯å…¬å¼ä¸ºåˆ©ç”¨æœé›†åˆ°çš„ä¿¡æ¯å¯¹åŽŸæœ‰åˆ¤æ–­è¿›è¡Œä¿®æ­£æä¾›äº†æœ‰æ•ˆæ‰‹æ®µã€‚åœ¨é‡‡æ ·ä¹‹å‰ï¼Œç»æµŽä¸»ä½“å¯¹å„ç§å‡è®¾æœ‰ä¸€ä¸ªåˆ¤æ–­ï¼ˆå…ˆéªŒæ¦‚çŽ‡ï¼‰ï¼Œå…³äºŽå…ˆéªŒæ¦‚çŽ‡çš„åˆ†å¸ƒï¼Œé€šå¸¸å¯æ ¹æ®ç»æµŽä¸»ä½“çš„ç»éªŒåˆ¤æ–­ç¡®å®šï¼ˆå½“æ— ä»»ä½•ä¿¡æ¯æ—¶ï¼Œä¸€èˆ¬å‡è®¾å„å…ˆéªŒæ¦‚çŽ‡ç›¸åŒï¼‰ï¼Œè¾ƒå¤æ‚ç²¾ç¡®çš„å¯åˆ©ç”¨åŒ…æ‹¬æœ€å¤§ç†µæŠ€æœ¯æˆ–è¾¹é™…åˆ†å¸ƒå¯†åº¦ä»¥åŠç›¸äº’ä¿¡æ¯åŽŸç†ç­‰æ–¹æ³•æ¥ç¡®å®šå…ˆéªŒæ¦‚çŽ‡åˆ†å¸ƒ ä¿¡æ¯è®ºä¿¡æ¯è®ºæ˜¯åº”ç”¨æ•°å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä¸»è¦ç ”ç©¶çš„æ˜¯å¯¹ä¸€ä¸ªä¿¡å·åŒ…å«ä¿¡æ¯çš„å¤šå°‘è¿›è¡Œé‡åŒ–ã€‚å®ƒåˆè¢«å‘æ˜Žæ˜¯ç”¨æ¥ç ”ç©¶åœ¨ä¸€ä¸ªå«æœ‰å™ªå£°çš„ä¿¡é“ä¸Šç”¨ç¦»æ•£çš„å­—æ¯è¡¨æ¥å‘é€æ¶ˆæ¯ï¼Œä¾‹å¦‚é€šè¿‡æ— çº¿ç”µä¼ è¾“æ¥é€šä¿¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¿¡æ¯è®ºå‘Šè¯‰æˆ‘ä»¬å¦‚ä½•å¯¹æ¶ˆæ¯è®¾è®¡æœ€ä¼˜ç¼–ç ä»¥åŠè®¡ç®—æ¶ˆæ¯çš„æœŸæœ›é•¿åº¦ï¼Œè¿™äº›æ¶ˆæ¯æ˜¯ä½¿ç”¨å¤šç§ä¸åŒç¼–ç æœºåˆ¶ã€ä»Žç‰¹å®šçš„æ¦‚çŽ‡åˆ†å¸ƒä¸Šé‡‡æ ·å¾—åˆ°çš„ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠä¿¡æ¯è®ºåº”ç”¨äºŽè¿žç»­åž‹å˜é‡ï¼Œ æ­¤æ—¶æŸäº›æ¶ˆæ¯é•¿åº¦çš„è§£é‡Šä¸å†é€‚ç”¨ã€‚ä¿¡æ¯è®ºæ˜¯ç”µå­å·¥ç¨‹å’Œè®¡ç®—æœºç§‘å­¦ä¸­è®¸å¤šé¢†åŸŸçš„åŸºç¡€ã€‚æˆ‘ä»¬ä¸»è¦ä½¿ç”¨ä¿¡æ¯è®ºçš„ä¸€äº›å…³é”®æ€æƒ³æ¥æè¿°æ¦‚çŽ‡åˆ†å¸ƒæˆ–è€…é‡åŒ–æ¦‚çŽ‡åˆ†å¸ƒä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚ é‡åŒ–ä¿¡æ¯çš„åŸºæœ¬æƒ³æ³• éžå¸¸å¯èƒ½å‘ç”Ÿçš„äº‹ä»¶ä¿¡æ¯é‡è¦æ¯”è¾ƒå°‘ï¼Œå¹¶ä¸”æžç«¯æƒ…å†µä¸‹ï¼Œç¡®ä¿èƒ½å¤Ÿå‘ç”Ÿçš„äº‹ä»¶åº”è¯¥æ²¡æœ‰ä¿¡æ¯é‡ã€‚ è¾ƒä¸å¯èƒ½å‘ç”Ÿçš„äº‹ä»¶å…·æœ‰æ›´é«˜çš„ä¿¡æ¯é‡ã€‚ ç‹¬ç«‹äº‹ä»¶åº”å…·æœ‰å¢žé‡çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼ŒæŠ•æŽ·çš„ç¡¬å¸ä¸¤æ¬¡æ­£é¢æœä¸Šä¼ é€’çš„ä¿¡æ¯é‡ï¼Œ åº”è¯¥æ˜¯æŠ•æŽ·ä¸€æ¬¡ç¡¬å¸æ­£é¢æœä¸Šçš„ä¿¡æ¯é‡çš„ä¸¤å€ å®šä¹‰ä¸€ä¸ªäº‹ä»¶ x = $x$ çš„è‡ªä¿¡æ¯ï¼ˆself-informationï¼‰ä¸ºï¼š I(x)=-logP(x)$I(x)$ å• ä½æ˜¯å¥ˆç‰¹ï¼ˆnatsï¼‰ã€‚ä¸€å¥ˆç‰¹æ˜¯ä»¥ $\frac{1}{e}$ çš„æ¦‚çŽ‡è§‚æµ‹åˆ°ä¸€ä¸ªäº‹ä»¶æ—¶èŽ·å¾—çš„ä¿¡æ¯é‡ã€‚å…¶ä»–çš„ææ–™ä¸­ä½¿ç”¨åº•æ•°ä¸º 2 çš„å¯¹æ•°ï¼Œå•ä½æ˜¯æ¯”ç‰¹ï¼ˆbitï¼‰æˆ–è€…é¦™å†œï¼ˆshannonsï¼‰ï¼›é€šè¿‡æ¯”ç‰¹åº¦é‡çš„ä¿¡æ¯åªæ˜¯é€šè¿‡å¥ˆç‰¹åº¦é‡ä¿¡æ¯çš„å¸¸æ•°å€ã€‚ å½“ x æ˜¯è¿žç»­çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ç±»ä¼¼çš„å…³äºŽä¿¡æ¯çš„å®šä¹‰ï¼Œä½†æœ‰äº›æ¥æºäºŽç¦»æ•£å½¢å¼çš„æ€§è´¨å°±ä¸¢å¤±äº†ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…·æœ‰å•ä½å¯†åº¦çš„äº‹ä»¶ä¿¡æ¯é‡ä»ç„¶ä¸º 0ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯å®ƒä¸€å®š å‘ç”Ÿã€‚ è‡ªä¿¡æ¯åªå¤„ç†å•ä¸ªçš„è¾“å‡ºã€‚æˆ‘ä»¬å¯ä»¥ç”¨é¦™å†œç†µï¼ˆShannon entropyï¼‰æ¥å¯¹æ•´ä¸ªæ¦‚ çŽ‡åˆ†å¸ƒä¸­çš„ä¸ç¡®å®šæ€§æ€»é‡è¿›è¡Œé‡åŒ–ï¼š H(x)=E_{x\sim P}[I(x)]=-E_{x\sim P}[log(P(x))]ä¸€ä¸ªåˆ†å¸ƒçš„é¦™å†œç†µæ˜¯æŒ‡éµå¾ªè¿™ä¸ªåˆ†å¸ƒçš„äº‹ä»¶æ‰€äº§ç”Ÿçš„æœŸæœ›ä¿¡æ¯æ€»é‡ã€‚å®ƒç»™å‡ºäº†å¯¹ä¾æ®æ¦‚çŽ‡åˆ†å¸ƒ $P$ ç”Ÿæˆçš„ç¬¦å·è¿›è¡Œç¼–ç æ‰€éœ€çš„æ¯”ç‰¹æ•°åœ¨å¹³å‡æ„ä¹‰ä¸Šçš„ä¸‹ç•Œ (å½“å¯¹æ•°åº•æ•°ä¸æ˜¯ 2 æ—¶ï¼Œå•ä½å°†æœ‰æ‰€ä¸åŒ)ã€‚é‚£äº›æŽ¥è¿‘ç¡®å®šæ€§çš„åˆ†å¸ƒ (è¾“å‡ºå‡  ä¹Žå¯ä»¥ç¡®å®š) å…·æœ‰è¾ƒä½Žçš„ç†µï¼›é‚£äº›æŽ¥è¿‘å‡åŒ€åˆ†å¸ƒçš„æ¦‚çŽ‡åˆ†å¸ƒå…·æœ‰è¾ƒé«˜çš„ç†µã€‚ä¸‹å›¾ç»™å‡ºäº†ä¸€ä¸ªè¯´æ˜Žã€‚å½“xæ˜¯è¿žç»­çš„ï¼Œé¦™å†œç†µè¢«ç§°ä¸ºå¾®åˆ†ç†µï¼ˆdiï¬€erential entropyï¼‰ã€‚ KLæ•£åº¦å¦‚æžœæˆ‘ä»¬å¯¹äºŽåŒä¸€ä¸ªéšæœºå˜é‡ t æœ‰ä¸¤ä¸ªå•ç‹¬çš„æ¦‚çŽ‡åˆ†å¸ƒ $P(x)$ å’Œ $Q(x)$ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨KL æ•£åº¦ï¼ˆKullback-Leibler (KL) divergenceï¼‰æ¥è¡¡é‡è¿™ä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚ D_{KL}(P||Q)=E_{x\sim P}[log\frac{P(x)}{Q(x)}]=E_{x\sim P}[logP(x)-logQ(x)]åœ¨ç¦»æ•£åž‹å˜é‡çš„æƒ…å†µä¸‹ï¼ŒKL æ•£åº¦è¡¡é‡çš„æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸€ç§è¢«è®¾è®¡æˆèƒ½å¤Ÿä½¿å¾—æ¦‚çŽ‡åˆ†å¸ƒ$Q$äº§ç”Ÿçš„æ¶ˆæ¯çš„é•¿åº¦æœ€å°çš„ç¼–ç ï¼Œå‘é€åŒ…å«ç”±æ¦‚çŽ‡åˆ†å¸ƒ$P$äº§ç”Ÿçš„ç¬¦å· çš„æ¶ˆæ¯æ—¶ï¼Œæ‰€éœ€è¦çš„é¢å¤–ä¿¡æ¯é‡ (å¦‚æžœæˆ‘ä»¬ä½¿ç”¨åº•æ•°ä¸º 2 çš„å¯¹æ•°æ—¶ï¼Œä¿¡æ¯é‡ç”¨æ¯”ç‰¹è¡¡é‡ï¼Œä½†åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨å¥ˆç‰¹å’Œè‡ªç„¶å¯¹æ•°ã€‚) KL æ•£åº¦æœ‰å¾ˆå¤šæœ‰ç”¨çš„æ€§è´¨ï¼Œæœ€é‡è¦çš„æ˜¯å®ƒæ˜¯éžè´Ÿçš„ã€‚KL æ•£åº¦ä¸º 0 å½“ä¸”ä»…å½“$P$å’Œ$Q$åœ¨ç¦»æ•£åž‹å˜é‡çš„æƒ…å†µä¸‹æ˜¯ç›¸åŒçš„åˆ†å¸ƒï¼Œæˆ–è€…åœ¨è¿žç»­åž‹å˜é‡çš„æƒ…å†µä¸‹æ˜¯ â€˜â€˜å‡ ä¹Žå¤„å¤„â€™â€™ ç›¸åŒçš„ã€‚å› ä¸º KL æ•£åº¦æ˜¯éžè´Ÿçš„å¹¶ä¸”è¡¡é‡çš„æ˜¯ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ï¼Œå®ƒç»å¸¸è¢«ç”¨ä½œåˆ†å¸ƒä¹‹é—´çš„æŸç§è·ç¦»ã€‚ç„¶è€Œï¼Œå®ƒå¹¶ä¸æ˜¯çœŸçš„è·ç¦»å› ä¸ºå®ƒä¸æ˜¯å¯¹ç§°çš„ï¼šå¯¹äºŽæŸ äº›$P$å’Œ$Q$ï¼Œ$D_{KL}(P||Q)\neq D_{KL}(Q||P)$ã€‚è¿™ç§éžå¯¹ç§°æ€§æ„å‘³ç€é€‰æ‹©$D_{KL}(P||Q)$ è¿˜æ˜¯$D_{KL}(Q||P)$ å½±å“å¾ˆå¤§ ä¸€ä¸ªå’Œ KL æ•£åº¦å¯†åˆ‡è”ç³»çš„é‡æ˜¯äº¤å‰ç†µï¼ˆcross-entropyï¼‰$H(P,Q)=H(P)+ D_{KL}(P||Q)$ï¼Œå®ƒå’Œ KL æ•£åº¦å¾ˆåƒä½†æ˜¯ç¼ºå°‘å·¦è¾¹ä¸€é¡¹ï¼š H(P,Q)=-E_{x\sim P}logQ(x)é’ˆå¯¹ $Q$ æœ€å°åŒ–äº¤å‰ç†µç­‰ä»·äºŽæœ€å°åŒ– KL æ•£åº¦ï¼Œå› ä¸º $Q$ å¹¶ä¸å‚ä¸Žè¢«çœç•¥çš„é‚£ä¸€é¡¹ã€‚ å½“æˆ‘ä»¬è®¡ç®—è¿™äº›é‡æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ° $0log0$ è¿™ä¸ªè¡¨è¾¾å¼ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œåœ¨ä¿¡æ¯è®ºä¸­ï¼Œ æˆ‘ä»¬å°†è¿™ä¸ªè¡¨è¾¾å¼å¤„ç†ä¸º $lim_{x\rightarrow0}xlogx=0$]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GAN]]></title>
    <url>%2F2020%2F03%2F09%2FGAN%2F</url>
    <content type="text"><![CDATA[GAN åˆ¤åˆ«å™¨çš„ç›®æ ‡å‡½æ•°ï¼š æœ€å¤§åŒ–çœŸå®žæ ·æœ¬çš„æœŸæœ›ï¼ˆè¾“å‡ºä¸ºRealï¼‰ï¼Œæœ€å°åŒ–ä»Žäººä¸ºå®šä¹‰çš„åˆ†å¸ƒä¸­éšæœºé‡‡æ ·çš„å‘é‡ï¼ˆè¾“å‡ºä¸ºFakeï¼‰ ç”Ÿæˆå™¨ç›®æ ‡å‡½æ•°ï¼š æœ€å¤§åŒ–ä»Žäººä¸ºå®šä¹‰çš„åˆ†å¸ƒä¸­éšæœºé‡‡æ ·çš„å‘é‡ï¼ŒåŽ»æ¬ºéª—åˆ¤åˆ«å™¨ è®­ç»ƒç®—æ³• KLæ•£åº¦ã€JSæ•£åº¦KLæ•£åº¦ï¼šè¡¡é‡ä¸¤ä¸ªæ¦‚çŽ‡åˆ†å¸ƒåŒ¹é…ç¨‹åº¦çš„æŒ‡æ ‡ï¼Œå½“P1=P2æ—¶ï¼ŒKLæ•£åº¦ä¸º0 KLæ•£åº¦å…·æœ‰éžè´Ÿæ€§ï¼Œæ ¹æ®å‰å¸ƒæ–¯ä¸ç­‰å¼ï¼š KLæ•£åº¦ä¸å…·æœ‰å¯¹ç§°æ€§ï¼Œå³ KL(P1||P2) â‰  KL(P2||P1) å› æ­¤åœ¨è¯•å›¾åŽ»æ‹Ÿåˆä¸¤ç§åˆ†å¸ƒï¼Œä½¿KLæ•£åº¦æœ€å°æ—¶ï¼Œé‡‡ç”¨KL(p||q)ï¼Œå’ŒKL(q||p)ä¼šå¾—åˆ°ä¸¤ç§ä¸åŒçš„ç»“æžœ JSæ•£åº¦ï¼š æžå¤§ä¼¼ç„¶ä¸Žæœ€å°åŒ–KLæ•£åº¦ åˆ¤åˆ«å™¨D ç”Ÿæˆå™¨Gæœ€å¤§åŒ–åˆ¤åˆ«å™¨æŸå¤±ï¼Œç­‰ä»·äºŽè®¡ç®—åˆæˆæ•°æ®åˆ†å¸ƒå’ŒçœŸå®žæ•°æ®åˆ†å¸ƒçš„JSæ•£åº¦ æœ€å°åŒ–ç”Ÿæˆå™¨æŸå¤±ï¼Œç­‰ä»·äºŽæœ€å°åŒ–JSæ•£åº¦ï¼ˆä¹Ÿå°±æ˜¯ä¼˜åŒ–ç”Ÿæˆæ¨¡åž‹ï¼‰ cGAN DCGAN WGAN Wassersteinè·ç¦» WassersteinæŸå¤± æƒé‡æˆªæ–­ WGANç¼ºé™· WGAN-GP SN-GANSN-GANï¼š æ¯å±‚æƒé‡é™¤ä»¥è¯¥å±‚çŸ©é˜µè°±èŒƒæ•°å³å¯æ»¡è¶³åˆ©æ™®å¸ŒèŒ¨è¿žç»­ Self-Attention GAN U-Net Patch GAN Cycle GAN]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RNN]]></title>
    <url>%2F2020%2F03%2F09%2FRNN%2F</url>
    <content type="text"><![CDATA[ä¸ŽCNNåŒºåˆ« CNNè¾“å…¥ã€è¾“å‡ºç›¸äº’ç‹¬ç«‹ RNNå¯ä»¥æ›´å¥½åœ°å¤„ç†æœ‰æ—¶åºå…³ç³»çš„ä»»åŠ¡ RNNé€šè¿‡å¾ªçŽ¯ç»“æž„å¼•å…¥â€œè®°å¿†â€æ¦‚å¿µï¼ˆè¾“å‡ºä¸ä»…ä¾èµ–äºŽè¾“å…¥ï¼Œè¿˜ä¾èµ–äºŽè®°å¿†ï¼Œå°†åŒä¸€ä¸ªç»“æž„å¾ªçŽ¯åˆ©ç”¨ï¼‰ åŸºæœ¬ç»“æž„ æ·±åº¦RNN åŒå‘RNN BPTTç®—æ³• æ¯ä¸€ä¸ªæ—¶åˆ»tçš„æŸå¤±ï¼Œå–è¾“å‡ºçš„yä¸ŽçœŸå®žå€¼çš„äº¤å‰ç†µ æ€»æŸå¤±ä¸ºå„ä¸ªæ—¶åˆ»tçš„æ€»æŸå¤± ç”±äºŽh3ä¸Žh2ç›¸å…³ï¼Œå…·æœ‰æ—¶åºå…³ç³»ï¼Œæ‰€ä»¥éœ€è¦å±•å¼€å¯¹h2æ±‚åå¯¼ï¼Œæ ¹æ®é“¾å¼æ³•åˆ™ï¼Œå¾—åˆ°åå¯¼ï¼š ä¼ ç»ŸRNNé—®é¢˜ å¯¹æƒé‡æ±‚åå¯¼ï¼Œå¯¹äºŽç´¯ä¹˜é¡¹æ¥è¯´ï¼Œå½“tæ¯”è¾ƒå¤§æ—¶ï¼Œ å¦‚æžœ0&lt;W&lt;1,æ¢¯åº¦è¶‹äºŽ0 å¦‚æžœW&gt;1,æ¢¯åº¦è¶‹äºŽæ— ç©· LSTM LSTMä¸ŽRNNåŒºåˆ« RNNè®°å¿†å•å…ƒhtæ˜¯ç´¯ä¹˜å½¢å¼ï¼Œå¤åˆå‡½æ•°çš„åµŒå¥—ã€‚ LSTMæ˜¯ç´¯åŠ å½¢å¼ ç”±äºŽRNNæ˜¯é€šè¿‡tanhéžçº¿æ€§å˜æ¢ï¼Œæ‰€ä»¥ç»è¿‡è¾ƒé•¿æ—¶é—´åŽï¼Œä¹‹å‰çš„è®°å¿†ä¼šè¢«è¦†ç›– è€ŒLSTMæ˜¯çº¿æ€§ç›¸åŠ ï¼Œè€Œé—å¿˜é—¨fté€šå¸¸æŽ¥è¿‘1ï¼Œæ‰€ä»¥ä¹‹å‰çš„è®°å¿†ä¼šä¸€å®šç¨‹åº¦ä¿å­˜ï¼Œè§£å†³äº†æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ ä¸ºäº†è§£å†³æ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼Œå¯ä»¥è®¾ç½®è¾ƒå°çš„learning rate GRUé—¨æŽ§å¾ªçŽ¯å•å…ƒ Clockwise RNNClockwise RNN: æ™®é€š RNN éƒ½æ˜¯éšå±‚ä»Žå‰ä¸€ä¸ªæ—¶é—´æ­¥è¿žæŽ¥åˆ°å½“å‰æ—¶é—´ æ­¥ã€‚è€Œ CW-RNN æŠŠéšå±‚åˆ†æˆå¾ˆå¤šç»„ï¼Œæ¯ç»„æœ‰ä¸åŒçš„å¾ªçŽ¯å‘¨æœŸï¼Œæœ‰çš„å‘¨ æœŸæ˜¯ 1ï¼ˆå’Œæ™®é€š RNN ä¸€æ ·ï¼‰ï¼Œæœ‰çš„å‘¨æœŸæ›´é•¿ï¼ˆä¾‹å¦‚ä»Žå‰ä¸¤ä¸ªæ—¶é—´æ­¥è¿ž æŽ¥åˆ°å½“å‰æ—¶é—´æ­¥ï¼Œä¸åŒå‘¨æœŸçš„ cell ä¹‹é—´ä¹Ÿæœ‰ä¸€äº›è¿žæŽ¥ã€‚è¿™æ ·ä¸€æ¥ï¼Œè·ç¦» è¾ƒè¿œçš„æŸä¸ªä¾èµ–å…³ç³»å°±å¯ä»¥é€šè¿‡å‘¨æœŸè¾ƒé•¿çš„ cell å°‘æ•°å‡ æ¬¡å¾ªçŽ¯è®¿é—®åˆ°ï¼Œ ä»Žè€Œç½‘ç»œå±‚æ•°ä¸å¤ªæ·±ï¼Œæ›´å®¹æ˜“å­¦åˆ°ã€‚ Attention äººä»¬åœ¨è¿›è¡Œè§‚å¯Ÿå›¾åƒçš„æ—¶å€™ï¼Œå¤§å¤šæ˜¯æ ¹æ®éœ€æ±‚å°†æ³¨æ„åŠ›é›†ä¸­åˆ°å›¾åƒçš„ç‰¹å®šéƒ¨åˆ†ã€‚è€Œä¸”äººç±»ä¼šæ ¹æ®ä¹‹å‰è§‚å¯Ÿçš„å›¾åƒå­¦ä¹ åˆ°æœªæ¥è¦è§‚å¯Ÿå›¾åƒæ³¨æ„åŠ›åº”è¯¥é›†ä¸­çš„ä½ç½®ã€‚ è¯„ä»·å‡†åˆ™ æ›´é«˜çš„å¬å›žçŽ‡å¯èƒ½å¯¼è‡´å‡†ç¡®çŽ‡ä¸‹é™ï¼ŒäºŒè€…å›´æˆçš„é¢ç§¯ç§°ä¸ºå¹³å‡å‡†ç¡®çŽ‡ã€‚ R-CNN ç”¨Selective Searchæ–¹æ³•äº§ç”Ÿç›®æ ‡å€™é€‰ ç”±äºŽå·ç§¯æ—¶å…¨è¿žæŽ¥å±‚å¯¹è¾“å…¥å°ºå¯¸çš„è¦æ±‚ï¼Œå…ˆè¿›æ€§è§„æ•´ï¼Œç„¶åŽåˆ©ç”¨CNNæå–ç‰¹å¾ ä¼ å…¥SVMè¿›è¡Œåˆ†ç±» ï¼ˆ1ï¼‰CNNéœ€è¦å¤§é‡çš„è®­ç»ƒæ ·æœ¬ï¼ˆå¯¹æ ·æœ¬è´¨é‡çš„è¦æ±‚æ¾ï¼‰ï¼› ï¼ˆ2ï¼‰SVMç”¨å°‘é‡çš„æ ·æœ¬å°±å¯ä»¥è®­ç»ƒï¼ˆå¯¹æ ·æœ¬è´¨é‡çš„è¦æ±‚ä¸¥ï¼‰ã€‚ SPP-NET ä¼ ç»ŸCNNè¦æ±‚è¾“å…¥å›¾ç‰‡å°ºå¯¸ä¸€è‡´ï¼ŒSPP-netåœ¨å…¨è¿žæŽ¥å±‚ä¹‹å‰åŠ å…¥ä¸€ä¸ªç©ºé—´é‡‘å­—å¡”æ± åŒ–å±‚ Fast-RCNN å°†å›¾ç‰‡çš„è§„æ•´è½¬åŒ–ä¸ºå¯¹ç‰¹å¾å›¾çš„è§„æ•´ å°†å•ç‹¬çš„SVMåˆ†ç±»ä»»åŠ¡è½¬åŒ–ä¸ºCNNä¸­çš„Softmaxåˆ†ç±»ä»»åŠ¡ï¼Œå¹¶ä¸”å°†è¯¯å·®åå‘ä¼ æ’­ï¼Œè¿›è¡Œå…¨å±€çš„ä¼˜åŒ– Faster RCNNæ²¡æœ‰ä½¿ç”¨ssæå–æ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨RPNæ–¹æ³•,RPNæ’å…¥åˆ°æœ€åŽä¸€ä¸ªå·ç§¯å±‚åŽï¼Œç”¨äºŽç›´æŽ¥äº§ç”Ÿå€™é€‰åŒºåŸŸï¼Œä¸éœ€è¦é¢å¤–ç®—æ³•ï¼ŒRPNä¹‹åŽï¼Œä½¿ç”¨ROI Polingå’ŒåŽç»­çš„åˆ†ç±»å™¨ã€å›žå½’å™¨ Faster-RCNN RoI Poolingå±‚åˆ©ç”¨proposalsä»Žfeature mapsä¸­æå–proposal featureé€å…¥åŽç»­å…¨è¿žæŽ¥å’Œsoftmaxç½‘ç»œä½œclassificationï¼ˆå³åˆ†ç±»proposalåˆ°åº•æ˜¯ä»€ä¹ˆobjectï¼‰ Conv layersã€‚ä½œä¸ºä¸€ç§CNNç½‘ç»œç›®æ ‡æ£€æµ‹æ–¹æ³•ï¼ŒFaster RCNNé¦–å…ˆä½¿ç”¨ä¸€ç»„åŸºç¡€çš„conv+relu+poolingå±‚æå–imageçš„feature mapsã€‚è¯¥feature mapsè¢«å…±äº«ç”¨äºŽåŽç»­RPNå±‚å’Œå…¨è¿žæŽ¥å±‚ã€‚ Region Proposal Networksã€‚RPNç½‘ç»œç”¨äºŽç”Ÿæˆregion proposalsã€‚è¯¥å±‚é€šè¿‡softmaxåˆ¤æ–­anchorså±žäºŽpositiveæˆ–è€…negativeï¼Œå†åˆ©ç”¨bounding box regressionä¿®æ­£anchorsèŽ·å¾—ç²¾ç¡®çš„proposalsã€‚ Roi Poolingã€‚è¯¥å±‚æ”¶é›†è¾“å…¥çš„feature mapså’Œproposalsï¼Œç»¼åˆè¿™äº›ä¿¡æ¯åŽæå–proposal feature mapsï¼Œé€å…¥åŽç»­å…¨è¿žæŽ¥å±‚åˆ¤å®šç›®æ ‡ç±»åˆ«ã€‚ Classificationã€‚åˆ©ç”¨proposal feature mapsè®¡ç®—proposalçš„ç±»åˆ«ï¼ŒåŒæ—¶å†æ¬¡bounding box regressionèŽ·å¾—æ£€æµ‹æ¡†æœ€ç»ˆçš„ç²¾ç¡®ä½ç½®ã€‚ RPN RFCN å…±æœ‰kk = 9ä¸ªé¢œè‰²ï¼Œæ¯ä¸ªé¢œè‰²çš„ç«‹ä½“å—ï¼ˆWH(C+1)ï¼‰è¡¨ç¤ºçš„æ˜¯ä¸åŒä½ç½®å­˜åœ¨ç›®æ ‡çš„æ¦‚çŽ‡å€¼ï¼ˆç¬¬ä¸€å—é»„è‰²è¡¨ç¤ºçš„æ˜¯å·¦ä¸Šè§’ä½ç½®ï¼Œæœ€åŽä¸€å—æ·¡è“è‰²è¡¨ç¤ºçš„æ˜¯å³ä¸‹è§’ä½ç½®ï¼‰ã€‚å…±æœ‰k^2(C+1)ä¸ªfeature mapã€‚æ¯ä¸ªfeature mapï¼Œz(i,j,c)æ˜¯ç¬¬i+k(j-1)ä¸ªç«‹ä½“å—ä¸Šçš„ç¬¬cä¸ªmapï¼ˆ1&lt;= i,j &lt;=3ï¼‰ã€‚(i,j)å†³å®šäº†9ç§ä½ç½®çš„æŸä¸€ç§ä½ç½®ï¼Œå‡è®¾ä¸ºå·¦ä¸Šè§’ä½ç½®ï¼ˆi=j=1ï¼‰ï¼Œcå†³å®šäº†å“ªä¸€ç±»ï¼Œå‡è®¾ä¸ºpersonç±»ã€‚åœ¨z(i,j,c)è¿™ä¸ªfeature mapä¸Šçš„æŸä¸€ä¸ªåƒç´ çš„ä½ç½®æ˜¯ï¼ˆx,yï¼‰ï¼Œåƒç´ å€¼æ˜¯valueï¼Œåˆ™valueè¡¨ç¤ºçš„æ˜¯åŽŸå›¾å¯¹åº”çš„(x,y)è¿™ä¸ªä½ç½®ä¸Šå¯èƒ½æ˜¯äººï¼ˆc=â€˜personâ€™ï¼‰ä¸”æ˜¯äººçš„å·¦ä¸Šéƒ¨ä½ï¼ˆi=j=1ï¼‰çš„æ¦‚çŽ‡å€¼ YOLO æŠŠè¾“å…¥å›¾åƒåˆ’åˆ†ä¸ºS*Sä¸ªç½‘æ ¼ï¼ˆS=7ï¼‰ã€‚ä½äºŽç›®æ ‡ä¸­å¿ƒçš„ç½‘æ ¼è´Ÿè´£æ£€æµ‹è¯¥ç›®æ ‡ (1) æ¯ä¸ªç½‘æ ¼é¢„æµ‹Bä¸ªè¾¹ç•Œæ¡†å’Œè¿™ä¸ªè¾¹ç•Œæ¡†æ˜¯ç‰©ä½“çš„æ¦‚çŽ‡ï¼ˆObjectnessï¼‰ï¼›å…·ä½“ çš„ï¼Œæ¯ä¸ªè¾¹ç•Œæ¡†ä¼šé¢„æµ‹å‡º5ä¸ªå€¼ï¼šx,y,w,hå’Œç½®ä¿¡åº¦Pr(Object)*IOU(truth&amp;pred) (2) æ¯ä¸ªç½‘æ ¼é¢„æµ‹Cä¸ªæ¡ä»¶æ¦‚çŽ‡Prï¼ˆClassi|Objectï¼‰ åœ¨æµ‹è¯•é˜¶æ®µï¼Œé¢„æµ‹æ¯ä¸ªæ£€æµ‹æ¡†çš„åˆ†æ•°ï¼š SSD åœ¨Yoloä¸­ï¼Œæ¯ä¸ªå•å…ƒé¢„æµ‹å¤šä¸ªè¾¹ç•Œæ¡†ï¼Œä½†æ˜¯å…¶éƒ½æ˜¯ç›¸å¯¹è¿™ä¸ªå•å…ƒæœ¬èº«ï¼ˆæ­£æ–¹å—ï¼‰ï¼Œä½†æ˜¯çœŸå®žç›®æ ‡çš„å½¢çŠ¶æ˜¯å¤šå˜çš„ï¼ŒYoloéœ€è¦åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è‡ªé€‚åº”ç›®æ ‡çš„å½¢çŠ¶ã€‚è€ŒSSDå€Ÿé‰´äº†Faster R-CNNä¸­anchorçš„ç†å¿µï¼Œæ¯ä¸ªå•å…ƒè®¾ç½®å°ºåº¦æˆ–è€…é•¿å®½æ¯”ä¸åŒçš„å…ˆéªŒæ¡†ï¼Œé¢„æµ‹çš„è¾¹ç•Œæ¡†ï¼ˆbounding boxesï¼‰æ˜¯ä»¥è¿™äº›å…ˆéªŒæ¡†ä¸ºåŸºå‡†çš„ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘è®­ç»ƒéš¾åº¦ã€‚ å¯¹äºŽæ¯ä¸ªå•å…ƒçš„æ¯ä¸ªå…ˆéªŒæ¡†ï¼Œå…¶éƒ½è¾“å‡ºä¸€å¥—ç‹¬ç«‹çš„æ£€æµ‹å€¼ï¼Œå¯¹åº”ä¸€ä¸ªè¾¹ç•Œæ¡†ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚ç¬¬ä¸€éƒ¨åˆ†æ˜¯å„ä¸ªç±»åˆ«çš„ç½®ä¿¡åº¦æˆ–è€…è¯„åˆ†ï¼ŒSSDå°†èƒŒæ™¯ä¹Ÿå½“åšäº†ä¸€ä¸ªç‰¹æ®Šçš„ç±»åˆ«ï¼Œå¦‚æžœæ£€æµ‹ç›®æ ‡å…±æœ‰ cä¸ªç±»åˆ«ï¼ŒSSDå…¶å®žéœ€è¦é¢„æµ‹ c+1 ä¸ªç½®ä¿¡åº¦å€¼ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªç½®ä¿¡åº¦æŒ‡çš„æ˜¯ä¸å«ç›®æ ‡æˆ–è€…å±žäºŽèƒŒæ™¯çš„è¯„åˆ†ã€‚ ç¬¬äºŒéƒ¨åˆ†å°±æ˜¯è¾¹ç•Œæ¡†çš„locationï¼ŒåŒ…å«4ä¸ªå€¼ (cxã€cyã€wã€h)ï¼Œåˆ†åˆ«è¡¨ç¤ºè¾¹ç•Œæ¡†çš„ä¸­å¿ƒåæ ‡ä»¥åŠå®½é«˜ã€‚ Retina Netç”±äºŽOne Stageæ–¹æ³•èƒŒæ™¯è¾ƒå¤šï¼Œæ¨¡åž‹å¤§é‡èšç„¦åœ¨èƒŒæ™¯ä¸­ï¼Œè™½ç„¶æœ‰äº›èƒŒæ™¯å¾ˆå®¹æ˜“åˆ†ç±»ï¼Œä½†ç”±äºŽæ•°é‡å·¨å¤§ï¼Œå¯¼è‡´æ€»å’Œçš„losså¯¹æ£€æµ‹å™¨äº§ç”Ÿå½±å“ã€‚ æ‰€ä»¥Retina Neté€šè¿‡Focal Lossä½¿å¾—è¶ŠæŽ¥è¿‘èƒŒæ™¯çš„æ ·æœ¬æƒé‡è¶Šå°ï¼Œä»Žè€Œä½¿lossä¸»è¦æ¥æºäºŽæ›´å¤æ‚çš„æ ·æœ¬ï¼Œè€Œä¸æ˜¯ç®€å•çš„èƒŒæ™¯æ ·æœ¬]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PyTorchå®žè·µ]]></title>
    <url>%2F2020%2F03%2F05%2FPyTorch%E5%AE%9E%E8%B7%B5%2F</url>
    <content type="text"><![CDATA[PyTorchå®žè·µæ•°æ®é›†å¤„ç†å®˜æ–¹æ•°æ®é›†ä»ŽPyTorchå¼€æºé¡¹ç›®ï¼švisionæˆ–è€…textä¸­åŠ è½½æ•°æ®é›†ï¼Œå¯¹åº”çš„åŒ…æ˜¯torchvisionã€torchtext 12345678910111213#torchvisionimport torchvisionmnist = torchvision.datasets.MNIST(root='./',download="True")#torchtextimport torchtextWORD = torchtext.data.Field(init_token="&lt;bos&gt;",eos_token="&lt;eos&gt;")UD_TAG = torchtext.data.Field(init_token="&lt;bos&gt;",eos_token="&lt;eos&gt;")train,val,text = torchtext.datasets.UDPOS.splits(field=(('word',WORD),('udtag',UD_TAG),(None,None)))print(train.examples[0].word)print(train.examples[0].udtag) æž„å»ºè‡ªå®šä¹‰æ•°æ®é›†1234567import torch.utils.data as Datax = torch.tensor([1,2,3])y = torch.tensor([0,0,1])#å°äºŽ2éƒ½æ˜¯0ï¼Œå¤§äºŽ2ä¸º1dataset = Data.TensorDataset(x,y) ç»†ç²’åº¦æž„å»ºè‡ªå®šä¹‰æ•°æ®é›†ç»§æ‰¿torch.utils.data.Dataset ï¼Œç„¶åŽé‡è½½å‡½æ•°lenï¼Œgetitemæ¥æž„å»º 1234567891011121314import torch.utils.data as Dataclass Mydataset(Data.Dataset): def __init__(self): #è¯»å–æ–‡ä»¶ pass def __getitem__(self): #èŽ·å–æ•°æ® #é¢„å¤„ç† #è¿”å›žæ•°æ®å¯¹ï¼ˆx,yï¼‰ pass def __len__(self): #è¿”å›žæ•°æ®é›†å¤§å° pass 12345678910111213141516171819202122232425262728293031import torch.utils.data as Dataperson_1 = ['tall','rich','handsome','1']person_2 = ['n_tall','rich','handsome','1']person_3 = ['n_tall','n_rich','handsome','1']person_4 = ['n_tall','n_rich','n_handsome','0']person = [person_1,person_2,person_3,person_4]class Person(Data.Dataset): def __init__(self,person): self.data = person def __getitem__(self,index): item = self.data[index] x = item[:3] y = item[-1] return x,y def __len__(self): return(len(self.data)) p = Person(person)for index, (x,y) in enumerate(p): print(f"&#123;index&#125; : x:&#123;x&#125;,y:&#123;y&#125;") """0 : x:['tall', 'rich', 'handsome'],y:11 : x:['n_tall', 'rich', 'handsome'],y:12 : x:['n_tall', 'n_rich', 'handsome'],y:13 : x:['n_tall', 'n_rich', 'n_handsome'],y:0""" åŠ è½½æ•°æ®é›†ä½¿ç”¨torch.utils.data.DataloaderåŠ è½½æ•°æ®é›† 12345tensor_person_data_loader = Data.DataLoader(dataset = person_dataset, batch_size = batch_size, shuffle = True, sampler = sampler, #æ€Žä¹ˆæŠ½æ · collate_fn = my_collate_fn) #æŠ½æ ·çš„æ ·æœ¬æ€Žä¹ˆå¤„ç† åŠ è½½è‡ªå®šä¹‰æ•°æ®é›†ï¼š 1234567891011person_loader = Data.Dataloader(dataset = p, batch_size = 2)for index,data in enumerate(person_loader): x,y = data print(f"&#123;index&#125; : x:&#123;x&#125;,y:&#123;y&#125;") """0 : x:[('tall', 'n_tall'), ('rich', 'rich'), ('handsome', 'handsome')],y:('1', '1')1 : x:[('n_tall', 'n_tall'), ('n_rich', 'n_rich'), ('handsome', 'n_handsome')],y:('1', '0')""" é¢„å¤„ç†æ•°æ®é›†é€šè¿‡__getitem__æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637word2id = &#123;'tall':1,'rich':1,'handsome':1,'n_tall':0,'n_rich':0,'n_handsome':0,'1':1,'0':0&#125;class TensorPerson(Data.Dataset): def __init__(self,person): self.data = person def __getitem__(self,index): item = self.data[index] new_item = [] for feature in item: new_item.append(word2id[feature]) x = new_item[:3] y = new_item[-1] return x,y def __len__(self): return(len(self.data)) p = TensorPerson(person)person_loader = Data.DataLoader(dataset = p, batch_size = 2)for index, data in enumerate(person_loader): x,y = data print(f"&#123;index&#125; : x:&#123;x&#125;,y:&#123;y&#125;") """0 : x:[tensor([1, 0]), tensor([1, 1]), tensor([1, 1])],y:tensor([1, 1])1 : x:[tensor([0, 0]), tensor([0, 0]), tensor([1, 0])],y:tensor([1, 0])""" é€šè¿‡collate_fn123456789101112131415161718192021222324252627282930313233#å®šä¹‰æŠ½æ ·æ ·æœ¬å¤„ç†æ–¹æ³•ï¼šdef my_collate_fn(batch_data): print("----------") x_batch = [] y_batch = [] for example in batch_data: x,y = example x_batch.append(x) y_batch.append(y) x_batch = torch.tensor(x_batch,dtype = torch.float32) y_batch = torch.tensor(y_batch,dtype = torch.float32) print("----------") return x_batch,y_batchperson_loader = Data.DataLoader(dataset = p, batch_size = 2, collate_fn = my_collate_fn)for index, data in enumerate(person_loader): x,y = data print(f"&#123;index&#125; : x:&#123;x&#125;,y:&#123;y&#125;") """--------------------0 : x:tensor([[1., 1., 1.], [0., 1., 1.]]),y:tensor([1., 1.])--------------------1 : x:tensor([[0., 0., 1.], [0., 0., 0.]]),y:tensor([1., 0.])""" æ¨¡åž‹TorchVisionæ”¯æŒä¸€äº›ç»å…¸æ¨¡åž‹ Alexnet VGG ResNet SqueezeNet DenseNet Inception v3 TorchTextæ²¡æœ‰ç»Ÿä¸€æ¨¡åž‹ ç»å…¸æ¨¡åž‹ä»¥åŠå¯è§†åŒ–123456789import torchimport torchvision.modelsimport hiddenlayer as hlfrom torchviz import make_dotresnet = torchvision.models.resnet18()# hl.build_graph(resnet,torch.randn([1,3,224,224]))# ç”±äºŽç‰ˆæœ¬é—®é¢˜ï¼Œä½¿ç”¨hiddenlayerçš„å¯è§†åŒ–å¯èƒ½æ‰¾ä¸åˆ°get_trace_graphæ–¹æ³•ï¼Œä»Žè€ŒæŠ¥é”™make_dot(resnet(torch.randn([1,3,224,224]))).view() å¯ä»¥ä½¿ç”¨torchvizçš„æ–¹æ³•è¿›è¡Œå¯è§†åŒ–ï¼Œä¼šåœ¨ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªpdfæ–‡ä»¶ æž„å»ºè‡ªå·±çš„ç¥žç»ç½‘ç»œç»“æž„sample1234567891011121314my_net = torch.nn.Sequential( torch.nn.Linear(1,10), torch.nn.ReLU(inplace=True), torch.nn.Linear(10,1))my_net"""Sequential( (0): Linear(in_features=1, out_features=10, bias=True) (1): ReLU(inplace=True) (2): Linear(in_features=10, out_features=1, bias=True))""" æž„å»ºå¤šå±‚ç½‘ç»œ12345678hun_layer = [torch.nn.Linear(10,10) for _ in range(100)]"""[Linear(in_features=10, out_features=10, bias=True), Linear(in_features=10, out_features=10, bias=True), `````````````````````````` Linear(in_features=10, out_features=10, bias=True)]""" æ·±åº¦è‡ªå®šä¹‰123456789101112131415161718192021222324import torch.nn as nnclass MyNET(nn.Module): def __init__(self): super(MyNET,self).__init__() pass def forward(self,x): passclass SingleDogCls(nn.Module): def __init__(self,n_feature,n_hidden,n_output): super(SingleDogCls,self).__init__() self.hidden = nn.Linear(n_feature,n_hidden) self.relu = nn.ReLU() self.predict = nn.Linear(n_hidden,n_output) def forward(self,x): x = self.hidden(x) x = self.relu(x) x = self.predict(x) return xw = SingleDogCls(n_feature=3, n_hidden=10, n_output=1)make_dot(w(torch.randn([10,3]))).view() ä½¿ç”¨torchvizäº§ç”Ÿçš„å¯è§†åŒ–å›¾ä¸å¦‚hiddenlayerçš„ç®€æ´ï¼š 1234567891011121314151617181920212223for index,data in enumerate(person_loader): print(f"è¿­ä»£æ¬¡æ•°&#123;index&#125;") print(f"data:&#123;data&#125;") input_x,ground_truth = data predict = w(input_x) print(predict,ground_truth)"""--------------------è¿­ä»£æ¬¡æ•°0data:(tensor([[1., 1., 1.], [0., 1., 1.]]), tensor([1., 1.]))tensor([[-0.2159], [-0.2262]], grad_fn=&lt;AddmmBackward&gt;) tensor([1., 1.])--------------------è¿­ä»£æ¬¡æ•°1data:(tensor([[0., 0., 1.], [0., 0., 0.]]), tensor([1., 0.]))tensor([[-0.0682], [-0.2633]], grad_fn=&lt;AddmmBackward&gt;) tensor([1., 0.])""" å®šä¹‰æŸå¤±å®˜æ–¹å®šä¹‰çš„æŸå¤±å‡½æ•°åœ¨ä¸¤ä¸ªåœ°æ–¹ torch.nn torch.nn.functional torch.nnä¸‹é¢çš„losså‡½æ•°ï¼Œæ˜¯ä½œä¸ºæ¨¡åž‹çš„ä¸€éƒ¨åˆ†å­˜åœ¨ï¼Œå®žé™…ä¸Šæ˜¯torch.nn.functionalä¸‹losså‡½æ•°çš„å°è£…ï¼Œå®žé™…ä¸Šå®ƒè¿˜æ˜¯è°ƒç”¨äº†torch.nn.functionalä¸‹é¢çš„å‡½æ•° 123456789a = torch.tensor(2.)b = torch.tensor(5.)print(F.l1_loss(a,b))print(F.mse_loss(a,b))"""tensor(3.)tensor(9.)""" æŸå¤±å‡½æ•°torch.nn.functional: binary_cross_entropy binary_cross_entropy_with_logits poisson_nll_loss cross_entropy cosine_embedding_loss ctc_loss hinge_embedding_loss kl_div l1_loss mse_loss margin_ranking_loss multilabel_margin_loss multilabel_soft_margin_loss multi_margin_loss nll_loss smooth_l1_loss soft_margin_loss triplet_margin_loss å¦‚æžœè¦å®šä¹‰è‡ªå·±çš„æŸå¤±å‡½æ•°ï¼Œå¯ä»¥ï¼š ç»§æ‰¿torch.nn.moduleå®žçŽ°lossï¼ˆå½“æˆæ¨¡åž‹ï¼Œè®¡ç®—å›¾ä¸­çš„æ–¹å—ï¼‰ ç»§æ‰¿torch.autograd.functionå®žçŽ°lossï¼ˆå½“æˆå‡½æ•°ï¼Œè®¡ç®—å›¾ä¸­çš„æ¤­åœ†ï¼‰ å®žé™…åŒºåˆ«åœ¨äºŽè°åŽ»è¿›è¡Œåå‘ä¼ æ’­ï¼Œå®˜æ–¹å®žçŽ°ä¸­ï¼Œlossæ˜¯ä¸€ä¸ªmodule ç»§æ‰¿torch.nn.moduleå®žçŽ°loss12345678910class MyLoss(nn.Module): def __init__(self): super(MyLoss,self).__init__() def forward(self,x,y): return x*100-y loss = MyLoss()loss(a,b)# tensor(195.) ç»§æ‰¿torch.autograd.funcionå®žçŽ°lossé€‚åˆæŸå¤±å‡½æ•°éžå¸¸éš¾æ±‚å¯¼æ—¶ 123456789101112131415from torch.autograd import Functionclass MyLossFunc(torch.autograd.Function): def forward(self,a,b): return 2*(a-b) def backward(self,grad_output): print("----------") return grad_output*2,grad_output*2 # a_grad, b_grad a = torch.tensor(1.,requires_grad=True)b = torch.tensor(2.,requires_grad=True)f_loss = MyLossFunc()c = f_loss(a,b)# tensor(-2., grad_fn=&lt;MyLossFunc&gt;) å®žçŽ°ä¼˜åŒ–ç®—æ³•pytorché›†æˆäº†å¸¸è§çš„ä¼˜åŒ–ç®—æ³•ï¼š torch.optim.Adadelta torch.optim.Adagrad torch.optim.Adam torch.optim.Adamax torch.optim.SparseAdam torch.optim.LBFGS torch.optim..RMSprop torch.optim.Rprop torch.optim.SGD 123from torch.optim import Optimizeroptimizer = torch.optim.SGD(w.parameters(),lr=0.05,mometum=0.9) å¦‚æžœè‡ªå®šä¹‰ä¼˜åŒ–ç®—æ³•ï¼š 1234class MyOptimizer(Optimizer): def step(self,closure=None): #æ¯ä¸€æ­¥æ˜¯æ€Žä¹ˆä¼˜åŒ–çš„ pass è°ƒæ•´å­¦ä¹ çŽ‡pytorchå®˜æ–¹ï¼Œæä¾›äº†torch.optim.lr_schedulerç±»æ¥åŸºäºŽåŠ¨æ€è°ƒæ•´å­¦ä¹ çŽ‡ torch.optim.lr.scheduler.LambdaLR torch.optim.lr.scheduler.StepLR torch.optim.lr.scheduler.MultiStepLR torch.optim.lr.scheduler.ExponentialLR torch.optim.lr.scheduler.CosineAnnealingLR torch.optim.lr.scheduler.ReduceLROnPlateau 12345from torch.optim.lr_scheduler import StepLRscheduler = StepLR(optimizer,step_size=30,gamma=0.1)# æ¯éš”30æ¬¡è¿­ä»£å°±ä¹˜gamma,åœ¨è¿­ä»£å›ºå®šçš„æ¬¡æ•°ä¹‹åŽä»¥ä¸€å®šçš„æ¯”ä¾‹é™ä½Žå­¦ä¹ çŽ‡ è¿­ä»£è®­ç»ƒ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108import torchimport torch.utils.data as Dataimport torch.nn as nnfrom torch.optim import Optimizerfrom torch.optim.lr_scheduler import StepLRperson_1 = ['tall','rich','handsome','1']person_2 = ['n_tall','rich','handsome','1']person_3 = ['n_tall','n_rich','handsome','1']person_4 = ['n_tall','n_rich','n_handsome','0']person = [person_1,person_2,person_3,person_4]word2id = &#123;'tall':1,'rich':1,'handsome':1,'n_tall':0,'n_rich':0,'n_handsome':0,'1':1,'0':0&#125;# å°†æ•°æ®è¡¨è¿›è¡Œå°è£…class ManDataset(Data.Dataset): def __init__(self,person): self.data = person; def __getitem__(self,index): item = self.data[index] new_item = [] for feature in item: new_item.append(word2id[feature]) x = new_item[:3] y = new_item[-1] return x,y def __len__(self): return(len(self.data))# å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†def my_collate_fn(batch_data): x_batch = [] y_batch = [] for example in batch_data: x,y = example x_batch.append(x) y_batch.append(y) x_batch = torch.tensor(x_batch,dtype = torch.float32) y_batch = torch.tensor(y_batch,dtype = torch.float32) return x_batch,y_batch# åˆ›å»ºæ•°æ®é›†å®žä¾‹person_dataset = ManDataset(person)# åˆ›å»ºåŠ è½½å™¨ï¼ŒåŠ è½½æ•°æ®é›†batch_size = 1person_data_loader = Data.DataLoader( dataset=person_dataset, batch_size=batch_size, collate_fn=my_collate_fn)# å®žçŽ°æ¨¡åž‹class SingleDog(nn.Module): def __init__(self,n_feature,n_hidden,n_output): super(SingleDog,self).__init__() self.hidden = nn.Linear(n_feature,n_hidden) self.relu = nn.ReLU() self.predict = nn.Linear(n_hidden,n_output) def forward(self,x): x = self.hidden(x) x = self.relu(x) x = self.predict(x) return x# åˆ›å»ºæ¨¡åž‹å®žä¾‹will_u_be_single = SingleDog(n_feature=3,n_hidden=10,n_output=1)#########will_u_be_single.cuda()########## åˆ›å»ºlosså‡½æ•°single_loss = nn.L1Loss()# åˆ›å»ºä¼˜åŒ–å™¨optimizer = torch.optim.SGD(will_u_be_single.parameters(),lr=0.1,momentum=0.9)# æ ¹æ®epochï¼Œè‡ªåŠ¨æ›´æ–°ä¼˜åŒ–å™¨å‚æ•°scheduled_optimizer = StepLR(optimizer,step_size=10,gamma=0.1)# å¼€å§‹è¿­ä»£è®­ç»ƒtotal_epoch = 100for epoch in range(total_epoch): for index,data in enumerate(person_data_loader): input_x,ground_truth = data ########## input_x = input_x.cuda() ground_truth = ground_truth.cuda() ########## predict = will_u_be_single(input_x) loss = single_loss(predict.squeeze(),ground_truth) optimizer.zero_grad() loss.backward() optimizer.step() scheduled_optimizer.step() print(f"Epoch &#123;epoch&#125;,loss: &#123;loss.item()&#125;, current lr:&#123;scheduled_optimizer.get_lr()&#125;") æµ‹è¯•ï¼š 1will_u_be_single(torch.tensor([1.,1.,0.])) åŠ é€Ÿè®¡ç®—12345678910torch.cuda.is_available()#########will_u_be_single.cuda()###################input_x = input_x.cuda()ground_truth = ground_truth.cuda()########## å‚¨å­˜å’ŒåŠ è½½æ¨¡åž‹å‚¨å­˜æ•´ä¸ªæ¨¡åž‹ï¼š torch.save(will_u_be_single,&quot;./will_u_be_single.pkl&quot;) åŠ è½½æ•´ä¸ªæ¨¡åž‹ï¼š model_from_file = torch.load(&quot;./will_u_be_single.pkl&quot;) å‚¨å­˜å‚æ•°ï¼š torch.save(will_u_be_single.state_dict(),&quot;./will_u_be_single_2.pkl&quot;) åŠ è½½å‚æ•° 12model_parameter = torch.load("./will_u_be_single_2.pkl")will_u_be_single.load_state_dict(model_parameter)]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PytorchåŸºç¡€]]></title>
    <url>%2F2020%2F03%2F05%2FPyTorch%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[PyTorchåŸºç¡€pytorchPyTorchæ˜¯ä¸€ä¸ªpythonåº“ï¼Œå®ƒä¸»è¦æä¾›äº†ä¸¤ä¸ªé«˜çº§åŠŸèƒ½ï¼š GPUåŠ é€Ÿçš„å¼ é‡è®¡ç®— æž„å»ºåœ¨åå‘è‡ªåŠ¨æ±‚å¯¼ç³»ç»Ÿä¸Šçš„æ·±åº¦ç¥žç»ç½‘ç»œ æ•°æ®ç±»åž‹æ•°æ®ç±»åž‹ï¼š torch.float32, torch.float64, torch.float16, torch.uint8, torch.int8, torch.int16, torch.int32, torch.int64 åˆ›å»ºTensoræ–¹æ³•ï¼šones, zeros, eye, arange, linspace, rand, randn, normal, uniform, randperm å®šä¹‰æ•°æ®1234567891011121314151617181920212223242526272829303132333435363738394041424344x = torch.tensor(666)# tensor(666)x = torch.tensor([1,2,3,4,5,6])# tensor([1,2,3,4,5,6])x = torch.ones(2,3)"""tensor([[1., 1., 1.], [1., 1., 1.]])"""x = torch.empty(5,3)"""tensor([[1.4178e-36, 0.0000e+00, 4.4842e-44], [0.0000e+00, nan, 0.0000e+00], [1.0979e-05, 4.2008e-05, 2.1296e+23], [1.0386e+21, 4.4160e-05, 1.0742e-05], [2.6963e+23, 4.2421e-08, 3.4548e-09]])"""x = torch.rand(5,3)"""tensor([[0.3077, 0.0347, 0.3033], [0.9099, 0.2716, 0.4310], [0.8286, 0.3317, 0.0536], [0.9529, 0.4905, 0.1403], [0.6899, 0.8349, 0.4015]])"""x = torch.zeros(5,3,dtype=torch.long)"""tensor([[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]])"""# åŸºäºŽçŽ°æœ‰çš„tensorï¼Œåˆ›å»ºä¸€ä¸ªæ–°tensorï¼Œ# ä»Žè€Œå¯ä»¥åˆ©ç”¨åŽŸæœ‰çš„tensorçš„dtypeï¼Œdeviceï¼Œsizeä¹‹ç±»çš„å±žæ€§ä¿¡æ¯y = x.new_ones(5,3) #tensor new_* æ–¹æ³•ï¼Œåˆ©ç”¨åŽŸæ¥tensorçš„dtypeï¼Œdevicez = torch.randn_like(x, dtype=torch.float) # åˆ©ç”¨åŽŸæ¥çš„tensorçš„å¤§å°ï¼Œä½†æ˜¯é‡æ–°å®šä¹‰äº†dtype å®šä¹‰æ“ä½œ å‡¡æ˜¯ç”¨Tensorè¿›è¡Œå„ç§è¿ç®—çš„ï¼Œéƒ½æ˜¯Function åŸºæœ¬è¿ç®—ï¼ŒåŠ å‡ä¹˜é™¤ï¼Œæ±‚å¹‚æ±‚ä½™ å‡½æ•° åŠŸèƒ½ abs/sqrt/div/exp/fmod/log/pow ç»å¯¹å€¼/å¹³æ–¹æ ¹/é™¤æ³•/æŒ‡æ•°/æ±‚ä½™/æ±‚å¹‚ cos/sin/asin/atan2 Â·Â·Â· ä¸‰è§’å‡½æ•° ceil/round/floor/trunc ä¸Šå–æ•´/å››èˆäº”å…¥/ä¸‹å–æ•´/åªä¿ç•™æ•´æ•° clamp(input, min, max) è¶…è¿‡minå’Œmaxæˆªæ–­ mean/sum/mode å‡å€¼/å’Œ/ä¼—æ•° norm/dist èŒƒæ•°/è·ç¦» std/var æ ‡å‡†å·®/æ–¹å·® cumsum/cumprod ç´¯åŠ /ç´¯ä¹˜ å¸ƒå°”è¿ç®—ï¼Œå¤§äºŽå°äºŽï¼Œæœ€å¤§æœ€å° å‡½æ•° åŠŸèƒ½ gt/lt/ge/le/eq/ne å¤§äºŽ/å°äºŽ/å¤§äºŽç­‰äºŽ/å°äºŽç­‰äºŽ/ç­‰äºŽ/ä¸ç­‰ topk æœ€å¤§çš„kä¸ªæ•° sort æŽ’åº max/min æ¯”è¾ƒä¸¤ä¸ªtensoræœ€å¤§æœ€å°å€¼ çº¿æ€§è¿ç®—ï¼ŒçŸ©é˜µä¹˜æ³•ï¼Œæ±‚æ¨¡ï¼Œæ±‚è¡Œåˆ—å¼ å‡½æ•° åŠŸèƒ½ trace å¯¹è§’çº¿å…ƒç´ ä¹‹å’Œï¼ˆçŸ©é˜µçš„è¿¹ï¼‰ diag å¯¹è§’çº¿å…ƒç´  triu/tril çŸ©é˜µçš„ä¸Šä¸‰è§’/ä¸‹ä¸‰è§’ï¼Œå¯æŒ‡å®šåç§» mm/bmm çŸ©é˜µä¹˜æ³•ï¼Œbatchçš„çŸ©é˜µä¹˜æ³• addmm/addbmm/addmv/addr/badbmm çŸ©é˜µè¿ç®— t è½¬ç½® dot/cross å†…ç§¯/å¤–ç§¯ inverse æ±‚é€†çŸ©é˜µ svd å¥‡å¼‚å€¼åˆ†è§£ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465# åˆ›å»ºä¸€ä¸ª 2x4 çš„tensorm = torch.Tensor([[2, 5, 3, 7], [4, 2, 1, 9]])# è¿”å›ž m ä¸­å…ƒç´ çš„æ•°é‡print(m.numel())# è¿”å›ž ç¬¬1åˆ—çš„å…¨éƒ¨å…ƒç´ print(m[:, 1])# è¿”å›ž ç¬¬0è¡Œçš„å…¨éƒ¨å…ƒç´ print(m[0, :])# Create tensor of numbers from 1 to 5# æ³¨æ„è¿™é‡Œç»“æžœæ˜¯1åˆ°4ï¼Œæ²¡æœ‰5v = torch.arange(1, 5)# tensor([1, 2, 3, 4])# Scalar product ç‚¹ç§¯m @ v# tensor([49., 47.])# Calculated by 1*2 + 2*5 + 3*3 + 4*7m[[0], :] @ v# tensor([49.])# è½¬ç½®ï¼Œç”± 2x4 å˜ä¸º 4x2print(m.t())# ä½¿ç”¨ transpose ä¹Ÿå¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæžœprint(m.transpose(0, 1))"""tensor([[2., 4.], [5., 2.], [3., 1.], [7., 9.]])tensor([[2., 4.], [5., 2.], [3., 1.], [7., 9.]])"""# returns a 1D tensor of steps equally spaced points between start=3, end=8 and steps=20torch.linspace(3, 8, 20)"""tensor([3.0000, 3.2632, 3.5263, 3.7895, 4.0526, 4.3158, 4.5789, 4.8421, 5.1053, 5.3684, 5.6316, 5.8947, 6.1579, 6.4211, 6.6842, 6.9474, 7.2105, 7.4737, 7.7368, 8.0000])"""# åˆ›å»ºä¸¤ä¸ª 1x4 çš„tensora = torch.Tensor([[1, 2, 3, 4]])b = torch.Tensor([[5, 6, 7, 8]])# åœ¨ 0 æ–¹å‘æ‹¼æŽ¥ ï¼ˆå³åœ¨ Y æ–¹å„ä¸Šæ‹¼æŽ¥ï¼‰, ä¼šå¾—åˆ° 2x4 çš„çŸ©é˜µprint( torch.cat((a,b), 0))"""tensor([[1., 2., 3., 4.], [5., 6., 7., 8.]])"""# åœ¨ 1 æ–¹å‘æ‹¼æŽ¥ ï¼ˆå³åœ¨ X æ–¹å„ä¸Šæ‹¼æŽ¥ï¼‰, ä¼šå¾—åˆ° 1x8 çš„çŸ©é˜µprint( torch.cat((a,b), 1))"""tensor([[1., 2., 3., 4., 5., 6., 7., 8.]])""" å¼ é‡ åå‘ä¼ æ’­ PyTorché‡Œå¹¶æ²¡æœ‰æ˜¾å¼çš„Graphå®šä¹‰ï¼Œè®¡ç®—æ­¥éª¤ï¼Œå­˜åœ¨Tensorçš„grad_fné‡Œï¼Œæ²¿ç€Tensorçš„grad_fnå¾€åŽèµ°ï¼Œå°±æ˜¯åå‘ä¼ æ’­ è®¡ç®—å›¾ å¯¹äºŽä¸Šè¿°è¿‡ç¨‹ï¼Œå…¬å¼å¦‚ä¸‹ï¼š \begin{cases} x_i = 1\\ y_i = x_i+2\\ z_i = 3y_i^2\\ out = \frac{1}{4}\sum_i z_i\\ \end{cases}æ‰€ä»¥ï¼š \frac{\partial out}{\partial z_i} = \frac{1}{4}\\ \frac{\partial z_i}{\partial y_i} = 6y_i\\ \frac{\partial y_i}{\partial x_i} = 1æ‰€ä»¥ï¼š \frac{\partial out}{\partial x_i} = \frac{1}{4}*6y_i=\frac{3}{2}(x_i+2)\\ \frac{\partial out}{\partial x_i} \vert_{x_i=1}=\frac{2}{9}=4.5]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[tensorflowå­¦ä¹ ]]></title>
    <url>%2F2020%2F02%2F05%2Ftensorflow%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[Tensorflowhello world123456789import tensorflow.compat.v1 as tftf.disable_v2_behavior()vec_1 = tf.constant([1, 2, 3, 4])vec_2 = tf.constant([1, 2, 3, 4])v_add = tf.add(vec_1,vec_2)with tf.Session() as sess: print(sess.run(v_add)) 12345678910111213import tensorflow.compat.v1 as tftf.disable_v2_behavior()vec_1 = tf.constant([1, 2, 3, 4])vec_2 = tf.constant([1, 2, 3, 4])sess = tf.InteractiveSession()v_add = tf.add(vec_1,vec_2)print(v_add.eval())sess.close() å¼ é‡æ‰€æœ‰çš„æ•°æ®éƒ½é€šè¿‡å¼ é‡çš„å½¢å¼æ¥è¡¨ç¤º TensorFlowçš„å¼ é‡å’ŒNumpyçš„æ•°ç»„ä¸åŒï¼Œä»–è®¡ç®—çš„ç»“æžœä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æ•°å­—ï¼Œè€Œæ˜¯ä¸€ä¸ªå¼ é‡çš„ç»“æž„ã€‚ä»Žä¸Šé¢ç»“æžœæ¥çœ‹ï¼Œä¸€ä¸ªå¼ é‡ä¸»è¦ä¿å­˜äº†ä¸‰ä¸ªå±žæ€§ï¼Œåå­—ï¼ˆnameï¼‰ï¼Œç»´åº¦ï¼ˆshapeï¼‰å’Œç±»åž‹ï¼ˆtypeï¼‰ 123456789#_*_coding:utf-8_*_import tensorflow as tf # tf.constant æ˜¯ä¸€ä¸ªè®¡ç®—ï¼Œè¿™ä¸ªè®¡ç®—çš„ç»“æžœä¸ºä¸€ä¸ªå¼ é‡ï¼Œä¿å­˜åœ¨å˜é‡aä¸­a = tf.constant([1.0, 2.0], name='a')b = tf.constant([2.0, 3.0], name='b') result = a + b# print(result) # Tensor("add:0", shape=(2,), dtype=float32) å¼ é‡çš„ç¬¬ä¸€ä¸ªå±žæ€§åå­—ä¸ä»…æ˜¯ä¸€ä¸ªå¼ é‡çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå®ƒåŒæ ·ä¹Ÿç»™å‡ºäº†è¿™ä¸ªå¼ é‡æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼ŒTensorFlowçš„è®¡ç®—éƒ½å¯ä»¥é€šè¿‡è®¡ç®—å›¾çš„æ¨¡åž‹æ¥å»ºç«‹ï¼Œè€Œè®¡ç®—å›¾ä¸Šçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªè®¡ç®—ï¼Œè®¡ç®—çš„ç»“æžœå°±ä¿å­˜åœ¨å¼ é‡ä¹‹ä¸­ã€‚æ‰€ä»¥å¼ é‡å’Œè®¡ç®—å›¾ä¸ŠèŠ‚ç‚¹æ‰€ä»£è¡¨çš„è®¡ç®—ç»“æžœæ˜¯å¯¹åº”çš„ã€‚æ‰€ä»¥å¼ é‡çš„å‘½åå°±å¯ä»¥é€šè¿‡â€œnode : src_outputâ€çš„å½¢å¼æ¥ç»™å‡ºã€‚å…¶ä¸­nodeä¸ºèŠ‚ç‚¹çš„åç§°ï¼Œsrc_output è¡¨ç¤ºå½“å‰å¼ é‡æ¥è‡ªèŠ‚ç‚¹çš„ç¬¬å‡ ä¸ªè¾“å‡ºã€‚æ¯”å¦‚ä¸Šé¢çš„â€œadd:0â€ å°±è¯´æ˜Žäº†resultè¿™ä¸ªå¼ é‡æ˜¯è®¡ç®—èŠ‚ç‚¹â€œaddâ€ è¾“å‡ºçš„ç¬¬ä¸€ä¸ªç»“æžœï¼ˆç¼–å·ä»Ž0 å¼€å§‹ï¼‰ã€‚ å¼ é‡çš„ç¬¬äºŒä¸ªå±žæ€§æ˜¯å¼ é‡çš„ç»´åº¦ã€‚è¿™ä¸ªå±žæ€§æè¿°äº†ä¸€ä¸ªå¼ é‡çš„ç»´åº¦ä¿¡æ¯ï¼Œæ¯”å¦‚ä¸Šé¢æ ·ä¾‹ä¸­ shape = (2, ) è¯´æ˜Žäº†å¼ é‡ result æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„é•¿åº¦ä¸º2ã€‚ç»´åº¦æ˜¯å¼ é‡ä¸€ä¸ªå¾ˆé‡è¦çš„å±žæ€§ï¼Œå›´ç»•å¼ é‡çš„ç»´åº¦TensorFlowä¹Ÿç»™å‡ºäº†å¾ˆå¤šæœ‰ç”¨çš„è¿ç®—ã€‚ å¼ é‡çš„ç¬¬ä¸‰ä¸ªå±žæ€§å°±æ˜¯ç±»åž‹ï¼ˆtypeï¼‰ï¼Œæ¯ä¸€ä¸ªå¼ é‡ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„ç±»åž‹ã€‚TensorFlow ä¼šå¯¹å‚ä¸Žè¿ç®—çš„æ‰€æœ‰å¼ é‡è¿›è¡Œç±»åž‹çš„æ£€æŸ¥ï¼Œå½“å‘çŽ°ç±»åž‹ä¸åŒ¹é…çš„æ—¶å€™ä¼šæŠ¥é”™ å¸¸é‡ã€éšæœºæ•°ã€å˜é‡å¤§è§„æ¨¡å¸¸é‡å¼ é‡å¯¹è±¡æœ€å¥½å®šä¹‰æˆ t_large = tf.Varible(large_array,trainable = False) å¯è®­ç»ƒæ ‡å¿—ä½ä¸ºFalse 12345678910111213t_1 = tf.constant(4)zero_t = tf.zeros([2,3],tf.int32)tf.zeros_like(t_2)tf.ones_like(t_2)range_t = tf.linspace(2.0,5.0,5)#We get:[2. 2.75 3.5 4.25 5.]tf.range(start,limit,delta)#start é»˜è®¤0ï¼Œdelta é»˜è®¤1range_t = tf.range(10)#Result:[0 1 2 3 4 5 6 7 8 9] 123456#éšæœºæ•°t_random = tf.random_normal([2,3],mean=2.0,stddev=4,seed = 12)#è¦æƒ³å¾—åˆ°åŒæ ·çš„éšæœºæ•°ï¼Œseedéœ€è¦è®¾ç½®ç›¸åŒï¼Œå‡å€¼é»˜è®¤0ï¼Œæ ‡å‡†å·®é»˜è®¤1tf.random_crop(t_random,[2,5],seed=12)#å°†ç»™å®šçš„å¼ é‡éšæœºå‰ªè£ä¸ºæŒ‡å®šçš„å¤§å° 123456789rand_t = tf.random_uniform([50,50]ï¼Œ0ï¼Œ10ï¼Œseed=0)t_a = tf.Variable(rand_t)#éšæœºå‡åŒ€åˆ†å¸ƒï¼Œmin 0 max 10weight2 = tf.Variable(weights.initialized_value(),name='w2')#ç”¨åŽŸæœ‰å˜é‡å®šä¹‰saver = tf.train.Saver()#ä¿å­˜å˜é‡ å ä½ç¬¦å®šä¹‰è¿‡ç¨‹ï¼Œæ‰§è¡Œæ—¶å†èµ‹å…·ä½“å€¼ 1tf.placeholder(dtype,shape=None,name=None) å¸¸ç”¨å‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687(1)tf.argmax(input, axis=None, name=None, dimension=None)æ­¤å‡½æ•°æ˜¯å¯¹çŸ©é˜µæŒ‰è¡Œæˆ–åˆ—è®¡ç®—æœ€å¤§å€¼å‚æ•° inputï¼šè¾“å…¥Tensor axisï¼š0è¡¨ç¤ºæŒ‰åˆ—ï¼Œ1è¡¨ç¤ºæŒ‰è¡Œ nameï¼šåç§° dimensionï¼šå’ŒaxisåŠŸèƒ½ä¸€æ ·ï¼Œé»˜è®¤axiså–å€¼ä¼˜å…ˆã€‚æ–°åŠ çš„å­—æ®µè¿”å›žï¼šTensor è¡Œæˆ–åˆ—çš„æœ€å¤§å€¼ä¸‹æ ‡å‘é‡ (2)tf.equal(a, b)æ­¤å‡½æ•°æ¯”è¾ƒç­‰ç»´åº¦çš„a, bçŸ©é˜µç›¸åº”ä½ç½®çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å›žTrue,å¦åˆ™ä¸ºFalseè¿”å›žï¼šåŒç»´åº¦çš„çŸ©é˜µï¼Œå…ƒç´ å€¼ä¸ºTrueæˆ–False (3)tf.cast(x, dtype, name=None)å°†xçš„æ•°æ®æ ¼å¼è½¬åŒ–æˆdtype.ä¾‹å¦‚ï¼ŒåŽŸæ¥xçš„æ•°æ®æ ¼å¼æ˜¯boolï¼Œé‚£ä¹ˆå°†å…¶è½¬åŒ–æˆfloatä»¥åŽï¼Œå°±èƒ½å¤Ÿå°†å…¶è½¬åŒ–æˆ0å’Œ1çš„åºåˆ—ã€‚åä¹‹ä¹Ÿå¯ä»¥ (4)tf.reduce_max(input_tensor, reduction_indices=None,keep_dims=False, name=None) åŠŸèƒ½ï¼šæ±‚æŸç»´åº¦çš„æœ€å¤§å€¼ (5)tf.reduce_mean(input_tensor, reduction_indices=None, keep_dims=False, name=None)åŠŸèƒ½ï¼šæ±‚æŸç»´åº¦çš„å‡å€¼å‚æ•°1--input_tensor:å¾…æ±‚å€¼çš„tensorã€‚å‚æ•°2--reduction_indices:åœ¨å“ªä¸€ç»´ä¸Šæ±‚è§£ã€‚0è¡¨ç¤ºæŒ‰åˆ—ï¼Œ1è¡¨ç¤ºæŒ‰è¡Œå‚æ•°ï¼ˆ3ï¼‰ï¼ˆ4ï¼‰å¯å¿½ç•¥ä¾‹ï¼šx = [ 1, 2 3, 4]x = tf.constant([[1,2],[3,4]], &quot;float&quot;)tf.reduce_mean(x) = 2.5tf.reduce_mean(x, 0) = [2, 3]tf.reduce_mean(x, 1) = [1.5, 3.5] (6)tf.truncated_normal(shape, mean=0.0, stddev=1.0,dtype=tf.float32, seed=None, name=None)ä»Žæˆªæ–­çš„æ­£æ€åˆ†å¸ƒä¸­è¾“å‡ºéšæœºå€¼ shape: è¾“å‡ºçš„å¼ é‡çš„ç»´åº¦å°ºå¯¸ã€‚ mean: æ­£æ€åˆ†å¸ƒçš„å‡å€¼ã€‚ stddev: æ­£æ€åˆ†å¸ƒçš„æ ‡å‡†å·®ã€‚ dtype: è¾“å‡ºçš„ç±»åž‹ã€‚ seed: ä¸€ä¸ªæ•´æ•°ï¼Œå½“è®¾ç½®ä¹‹åŽï¼Œæ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°éƒ½ä¸€æ ·ã€‚ name: æ“ä½œçš„åå­—ã€‚ (7ï¼‰tf.random_normal(shape, mean=0.0, stddev=1.0, dtype=tf.float32, seed=None, name=None)ä»Žæ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­è¾“å‡ºéšæœºå€¼ (8) tf.nn.conv2d(input, filter, strides, padding,use_cudnn_on_gpu=None, data_format=None, name=None)åœ¨ç»™å®šçš„4D inputä¸Ž filterä¸‹è®¡ç®—2Då·ç§¯ 1ï¼Œè¾“å…¥shapeä¸º [batch, height, width, in_channels]: batchä¸ºå›¾ç‰‡æ•°é‡ï¼Œin_channelsä¸ºå›¾ç‰‡é€šé“æ•° 2ï¼Œç¬¬äºŒä¸ªå‚æ•°filterï¼šç›¸å½“äºŽCNNä¸­çš„å·ç§¯æ ¸ï¼Œå®ƒè¦æ±‚æ˜¯ä¸€ä¸ªTensorï¼Œå…·æœ‰[filter_height, filter_width, in_channels, out_channels]è¿™æ ·çš„shapeï¼Œå…·ä½“å«ä¹‰æ˜¯[å·ç§¯æ ¸çš„é«˜åº¦ï¼Œå·ç§¯æ ¸çš„å®½åº¦ï¼Œå›¾åƒé€šé“æ•°ï¼Œå·ç§¯æ ¸ä¸ªæ•°]ï¼Œè¦æ±‚ç±»åž‹ä¸Žå‚æ•°inputç›¸åŒï¼Œæœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼Œç¬¬ä¸‰ç»´in_channelsï¼Œå°±æ˜¯å‚æ•°inputçš„ç¬¬å››ç»´ 3ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°stridesï¼šå·ç§¯æ—¶åœ¨å›¾åƒæ¯ä¸€ç»´çš„æ­¥é•¿ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸€ç»´çš„å‘é‡ï¼Œé•¿åº¦4 4ï¼Œç¬¬å››ä¸ªå‚æ•°paddingï¼šstringç±»åž‹çš„é‡ï¼Œåªèƒ½æ˜¯&quot;SAME&quot;,&quot;VALID&quot;å…¶ä¸­ä¹‹ä¸€ï¼Œè¿™ä¸ªå€¼å†³å®šäº†ä¸åŒçš„å·ç§¯æ–¹å¼ï¼ˆåŽé¢ä¼šä»‹ç»ï¼‰ 5ï¼Œç¬¬äº”ä¸ªå‚æ•°ï¼šuse_cudnn_on_gpu:boolç±»åž‹ï¼Œæ˜¯å¦ä½¿ç”¨cudnnåŠ é€Ÿï¼Œé»˜è®¤ä¸ºtrue ç»“æžœè¿”å›žä¸€ä¸ªTensorï¼Œè¿™ä¸ªè¾“å‡ºï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„feature mapï¼Œshapeä»ç„¶æ˜¯[batch, height, width, channels]è¿™ç§å½¢å¼ã€‚ (9)tf.nn.max_pool(value, ksize, strides, padding, name=None)å‚æ•°æ˜¯å››ä¸ªï¼Œå’Œå·ç§¯å¾ˆç±»ä¼¼ï¼šç¬¬ä¸€ä¸ªå‚æ•°valueï¼šéœ€è¦æ± åŒ–çš„è¾“å…¥ï¼Œä¸€èˆ¬æ± åŒ–å±‚æŽ¥åœ¨å·ç§¯å±‚åŽé¢ï¼Œæ‰€ä»¥è¾“å…¥é€šå¸¸æ˜¯feature mapï¼Œä¾ç„¶æ˜¯[batch, height, width, channels]è¿™æ ·çš„shapeç¬¬äºŒä¸ªå‚æ•°ksizeï¼šæ± åŒ–çª—å£çš„å¤§å°ï¼Œå–ä¸€ä¸ªå››ç»´å‘é‡ï¼Œä¸€èˆ¬æ˜¯[1, height, width, 1]ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æƒ³åœ¨batchå’Œchannelsä¸Šåšæ± åŒ–ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªç»´åº¦è®¾ä¸ºäº†1ç¬¬ä¸‰ä¸ªå‚æ•°stridesï¼šå’Œå·ç§¯ç±»ä¼¼ï¼Œçª—å£åœ¨æ¯ä¸€ä¸ªç»´åº¦ä¸Šæ»‘åŠ¨çš„æ­¥é•¿ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯[1, stride,stride, 1]ç¬¬å››ä¸ªå‚æ•°paddingï¼šå’Œå·ç§¯ç±»ä¼¼ï¼Œå¯ä»¥å–&apos;VALID&apos; æˆ–è€…&apos;SAME&apos; è¿”å›žä¸€ä¸ªTensorï¼Œç±»åž‹ä¸å˜ï¼Œshapeä»ç„¶æ˜¯[batch, height, width, channels]è¿™ç§å½¢å¼ (10) tf.reshape(tensor, shape, name=None)å‡½æ•°çš„ä½œç”¨æ˜¯å°†tensorå˜æ¢ä¸ºå‚æ•°shapeçš„å½¢å¼ã€‚å…¶ä¸­shapeä¸ºä¸€ä¸ªåˆ—è¡¨å½¢å¼ï¼Œç‰¹æ®Šçš„ä¸€ç‚¹æ˜¯åˆ—è¡¨ä¸­å¯ä»¥å­˜åœ¨-1ã€‚-1ä»£è¡¨çš„å«ä¹‰æ˜¯ä¸ç”¨æˆ‘ä»¬è‡ªå·±æŒ‡å®šè¿™ä¸€ç»´çš„å¤§å°ï¼Œå‡½æ•°ä¼šè‡ªåŠ¨è®¡ç®—ï¼Œä½†åˆ—è¡¨ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ª-1ã€‚ï¼ˆå½“ç„¶å¦‚æžœå­˜åœ¨å¤šä¸ª-1ï¼Œå°±æ˜¯ä¸€ä¸ªå­˜åœ¨å¤šè§£çš„æ–¹ç¨‹äº†ï¼‰ (11)tf.nn.dropout(x, keep_prob, noise_shape=None, seed=None,name=None)ä¸ºäº†å‡å°‘è¿‡æ‹Ÿåˆï¼Œéšæœºæ‰”æŽ‰ä¸€äº›ç¥žç»å…ƒï¼Œè¿™äº›ç¥žç»å…ƒä¸å‚ä¸Žæƒé‡çš„æ›´æ–°å’Œè¿ç®—å‚æ•°ï¼š x : è¾“å…¥tensor keep_prob : floatç±»åž‹ï¼Œæ¯ä¸ªå…ƒç´ è¢«ä¿ç•™ä¸‹æ¥çš„æ¦‚çŽ‡ noise_shape : ä¸€ä¸ª1ç»´çš„int32å¼ é‡ï¼Œä»£è¡¨äº†éšæœºäº§ç”Ÿâ€œä¿ç•™/ä¸¢å¼ƒâ€æ ‡å¿—çš„shapeã€‚ seed : æ•´å½¢å˜é‡ï¼Œéšæœºæ•°ç§å­ã€‚ name : åå­—ï¼Œæ²¡å•¥ç”¨ã€‚ feed_dictå­—ç¬¦ä¸²æ‹¼æŽ¥123456789Str1 = tf.placeholder(tf.string)Str2 = tf.placeholder(tf.string)Str3 = tf.placeholder(tf.string)Str = tf.string_join([Str1, Str2, Str3], separator=" ") with tf.Session() as sess: output = sess.run(Str, feed_dict=&#123;Str1: 'I', Str2: 'like', Str3: 'TensorFlow !'&#125;) print(output.decode()) æµ®ç‚¹æ•°ä¹˜ç§¯1234567Num1 = tf.placeholder(tf.float32)Num2 = tf.placeholder(tf.float32)Result = tf.multiply(Num1, Num2)with tf.Session() as sess: print(sess.run(Result, feed_dict=&#123;Num1:[5.],Num2:[6.]&#125;)) tensorboard12345678910import tensorflow.compat.v1 as tftf.disable_v2_behavior()A = tf.random_uniform([2,3] , 2 , 10 , dtype = tf.int32 ,name = "A")B = tf.eye(3 , dtype = tf.int32 , name = "B")C = tf.matmul(A , B , name = "ans")with tf.Session() as sess: write = tf.summary.FileWriter('logs' , sess.graph) sess.run(C) logsä¸Šçº§ç›®å½•ä¸‹æ‰“å¼€shellï¼Œå‘½ä»¤ï¼š tensorboard --logdir &quot;logs&quot;ï¼Œæ–°ç‰ˆtensorflowå°† = æ¢æˆäº†åŒå¼•å· æ›´æ”¹å‘½åç©ºé—´ï¼š 1234567891011121314import tensorflow.compat.v1 as tftf.disable_v2_behavior()with tf.name_scope("A"): A = tf.random_uniform([2,3] , 2 , 10 , dtype = tf.int32 ,name = "A")with tf.name_scope("B"): B = tf.eye(3 , dtype = tf.int32 , name = "B")C = tf.matmul(A , B , name = "ans")with tf.Session() as sess: write = tf.summary.FileWriter('logs' , sess.graph) sess.run(C)]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>tensorflow</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HBase]]></title>
    <url>%2F2020%2F01%2F01%2FHBase%2F</url>
    <content type="text"><![CDATA[HBaseå®‰è£…hbaseä¸‹è½½wget https://archive.apache.org/dist/hbase/2.0.0-alpha4/hbase-2.0.0-alpha4-bin.tar.gz å®‰è£…åŽè§£åŽ‹åˆ°/opt/hbaseæ–‡ä»¶å¤¹ é…ç½®çŽ¯å¢ƒå˜é‡ä¿®æ”¹~/.bashrcæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç  12export HBASE_HOME=/opt/hbase export PATH=$PATH:$HBASE_HOME/bin ç«‹å³ç”Ÿæ•ˆï¼Œsource ~/.bashrc ä¿®æ”¹é…ç½®æ–‡ä»¶ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼Œ/opt/hbase/conf/hbase-env.sh 12export HBASE_MANAGES_ZK=true export JAVA_HOME=/opt/jdk ä½¿ç”¨hbaseè‡ªå¸¦çš„zookeeperï¼Œjavaè·¯å¾„ä¸º/opt/jdk ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼Œ/opt/hbase/conf/hbase-site.xml 1234567891011121314151617181920&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hbase.rootdir&lt;/name&gt; &lt;value&gt;hdfs://Master:9000/hbase&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt; &lt;value&gt;Master:2181,Slave1:2181,Slave2:2181&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.cluster.distributed&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt; &lt;value&gt;/home/hadoop/zookeeper&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; è®¾ç½®å‚¨å­˜ä½ç½®ä¸ºhdfs://Master:9000/hbase ä½¿ç”¨å®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ï¼ŒæŒ‡å®šzookeeperé›†ç¾¤çš„åœ°å€åˆ—è¡¨ï¼ŒæŒ‡å®šzookeeperæœ¬åœ°å¿«ç…§ä½ç½® ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š/opt/hbase/conf/regionservers 123MasterSlave1Slave2 HMasteré—ªé€€1ã€æ—¶é—´åŒæ­¥é€ æˆHMasteré—ªé€€ï¼Œå¯èƒ½æ˜¯ç”±äºŽèŠ‚ç‚¹çš„æ—¶é—´æœªåŒæ­¥ï¼Œä½¿ç”¨ntpdate 123456yum install -y ntpdate#è®¾ç½®æ—¶åŒºcp /usr/share/zoneinfo/Asia/Shanghai /etc/localtimeyes | cp -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime#åŒæ­¥æ—¶é—´ntpdate us.pool.ntp.org é…ç½®åŽæ£€æŸ¥å„ä¸ªèŠ‚ç‚¹çš„dateï¼Œçœ‹æ—¶é—´æ˜¯å¦åŒæ­¥ 2ã€zookeeperæœªè¿žæŽ¥ä½¿ç”¨hbaseè‡ªå¸¦çš„zookeeperçš„è¯ï¼Œè¦ä¿è¯ä¹‹å‰å®‰è£…çš„zookeeperä¸ä¼šæŠ¢å 2181ç«¯å£ï¼Œå¦‚æžœå·²æœ‰è¿›ç¨‹æŠ¢å 2181ç«¯å£ï¼Œä½¿ç”¨killå‘½ä»¤æ€æ­»è¿›ç¨‹ã€‚ ä¿è¯å„ä¸ªèŠ‚ç‚¹é˜²ç«å¢™å·²å…³é—­ï¼Œä½¿2181ç«¯å£èƒ½å¤Ÿæ­£å¸¸è®¿é—® 1service iptables stop å¯åŠ¨hbaseå…ˆå¯åŠ¨Hadoopï¼Œstart -all.sh ï¼Œä¹‹åŽå¯åŠ¨hbaseï¼Œä½¿ç”¨shell HBase Shellcreate alteråˆ é™¤menberä¸­çš„member_idåˆ—æ— list put12345678910111213put 'member','scutshuxue','info:age','24' put 'member','scutshuxue','info:birthday','1987-06-17' put 'member','scutshuxue','info:company','alibaba' put 'member','scutshuxue','address:contry','china' put 'member','scutshuxue','address:province','zhejiang' put 'member','scutshuxue','address:city','hangzhou' put 'member','xiaofeng','info:birthday','1987-4-17' put 'member','xiaofeng','info:favorite','movie' put 'member','xiaofeng','info:company','alibaba' put 'member','xiaofeng','address:contry','china' put 'member','xiaofeng','address:province','guangdong' put 'member','xiaofeng','address:city','jieyang' put 'member','xiaofeng','address:town','xianqiao' get12get 'member','scutshuxue','info' get 'member','scutshuxue','info:age' count Java APIwindowsä¸‹å®‰è£…hadoopä¸‹è½½hadoop_2.8.2 è§£åŽ‹åˆ°åˆé€‚ä½ç½®åŽï¼Œæ·»åŠ çŽ¯å¢ƒå˜é‡ ç”±äºŽæ˜¯åœ¨windowsä¸Šå®‰è£…ï¼Œä½¿ç”¨ç¼–è¯‘å¥½çš„windowsç‰ˆæœ¬äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œæ›¿æ¢ï¼Œä¸‹è½½åœ°å€ï¼š https://github.com/steveloughran/winutils ç”±äºŽæ²¡æœ‰2.8.2ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä½¿ç”¨2.8.3ç‰ˆæœ¬æ›¿æ¢binæ–‡ä»¶å¤¹ä¸‹å…¨éƒ¨å†…å®¹ ä¿®æ”¹é…ç½®æ–‡ä»¶åŽï¼Œæ ¼å¼åŒ–hdfsï¼Œåˆ°sbinç›®å½•ä¸‹å¯åŠ¨hadoop å¯ä»¥é€šè¿‡http://localhost:8088/ ã€ http://localhost:50070/ æŸ¥çœ‹hadoopç›¸å…³ä¿¡æ¯ windowsä¸‹å®‰è£…hbaseå®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œç‰ˆæœ¬é€‰æ‹©çš„æ˜¯ HBase 2.0.0-alpha4ï¼Œä¸‹è½½åœ°å€ï¼šhttp://archive.apache.org/dist/hbase/ ä¿®æ”¹çŽ¯å¢ƒå˜é‡ç­‰é…ç½®æ–‡ä»¶ï¼Œåœ¨è¿è¡Œæ—¶æŠ¥é”™ åŽŸå› æ˜¯ç¼ºå°‘jaråŒ…å¯¼è‡´ï¼Œåœ¨ç½‘ä¸Šä¸‹è½½ jline-2.12.1.jarï¼Œæ›¿æ¢æŽ‰hadoopç›®å½•é‡Œçš„ä¸¤ä¸ªä½Žç‰ˆæœ¬çš„ jline-0.9.94.jarï¼Œå¹¶å¤åˆ¶ä¸€ä»½æ·»åŠ åˆ°yarn/libä¸­åŽ» è¿è¡Œ javaé¡¹ç›®åˆ›å»ºJavaé¡¹ç›®ï¼Œå¯¼å…¥æœ¬æœºhbase\libä¸‹çš„æ‰€æœ‰jaråŒ… åˆ›å»ºHBaseUtilsç±»ã€Runç±» å»ºç«‹è¿žæŽ¥ 12345678 HBaseUtils() throws IOException &#123; conf = HBaseConfiguration.create(); conf.set("hbase.rootdir", "hdfs://Master:9000/hbase"); conf.set("hbase.zookeeper.quorum", "Master,Slave1,Slave2"); config.set("hbase.zookeeper.property.clientPort", "2181");// zookeeperç«¯å£connection = ConnectionFactory.createConnection(config);admin = conn.getAdmin(); &#125; åˆ›å»ºè¡¨ 12345678910111213public void createTable(String tableName, String[] family) throws Exception &#123; HTableDescriptor desc =new HTableDescriptor(tableName); for(int i=0;i&lt;family.length;i++)&#123; desc.addFamily(new HColumnDescriptor(family[i])); &#125; if(admin.tableExists(tableName))&#123; System.out.println("Already Exits"); &#125;else&#123; admin.createTable(desc); System.out.println("Create Success"); &#125;&#125; æ’å…¥æ•°æ® 12345678910public void insertRecord(String tableName, String row, String col, String values) throws IOException &#123; createConn(); Table table = conn.getTable(TableName.valueOf(tableName)); Put put = new Put(row.getBytes()); String[] cols = col.split(":"); put.addColumn(cols[0].getBytes(), cols[1].getBytes(), values.getBytes()); table.put(put); table.close(); closeConn();&#125; åˆ é™¤æ•°æ® 1234567public void deleteRow(String tName, String row) throws IOException &#123; createConn(); Table table = conn.getTable(TableName.valueOf(tName)); Delete del = new Delete(row.getBytes()); table.delete(del); table.close();&#125; éåŽ†è¡¨ 12345678910111213141516171819202122public ResultScanner getResultScann(String tableName) throws Exception &#123; Scan scan=new Scan(); ResultScanner rs =null; HTable htable=new HTable(conf, tableName); try&#123; rs=htable.getScanner(scan); for(Result r: rs)&#123; for(KeyValue kv:r.list())&#123; System.out.println(Bytes.toString(kv.getRow())); System.out.println(Bytes.toString(kv.getFamily())); System.out.println(Bytes.toString(kv.getQualifier())); System.out.println(Bytes.toString(kv.getValue())); System.out.println(kv.getTimestamp()); &#125; &#125; &#125;finally&#123; rs.close(); &#125; return rs; &#125; ç»“æžœ åœ¨è™šæ‹Ÿæœºä¸­æŸ¥çœ‹ç»“æžœï¼Œå¯ä»¥çœ‹åˆ°é€šè¿‡java apiæˆåŠŸåˆ›å»ºäº†menberè¡¨ å¦‚æžœåœ¨è™šæ‹Ÿæœºä¸­ä½¿ç”¨hbase shellæ—¶å‡ºçŽ°é”™è¯¯ Can&#39;t get master address from ZooKeeper; znode data == null åªéœ€é‡æ–°å¯åŠ¨hbase]]></content>
      <categories>
        <category>äº‘è®¡ç®—</category>
      </categories>
      <tags>
        <tag>Exp</tag>
        <tag>äº‘è®¡ç®—</tag>
        <tag>Hadoop</tag>
        <tag>HBase</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MapReduce]]></title>
    <url>%2F2020%2F01%2F01%2FMapReduce%2F</url>
    <content type="text"><![CDATA[MapReduceçš„ç¼–ç¨‹æ–¹æ³•ä¸Žå®žè·µMapReduceæ¡†æž¶ MapReduceå°†å¤æ‚çš„ï¼Œè¿è¡Œå¤§è§„æ¨¡é›†ç¾¤ä¸Šçš„å¹¶è¡Œè®¡ç®—è¿‡ç¨‹é«˜åº¦åœ°æŠ½è±¡ä¸¤ä¸ªå‡½æ•°ï¼šMapå’ŒReduce MapReduceé‡‡ç”¨â€œåˆ†è€Œæ²»ä¹‹â€ç­–ç•¥ï¼Œå°†ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„å¤§è§„æ¨¡æ•°æ®é›†ï¼Œåˆ†æˆè®¸å¤šç‹¬ç«‹çš„åˆ†ç‰‡ã€‚è¿™äº›åˆ†ç‰‡å¯ä»¥è¢«å¤šä¸ªMapä»»åŠ¡å¹¶è¡Œå¤„ç†ã€‚ MapReduceè®¾è®¡çš„ä¸€ä¸ªç†å¿µå°±æ˜¯â€œè®¡ç®—å‘æ•°æ®é æ‹¢â€ï¼Œè€Œä¸æ˜¯â€œæ•°æ®å‘è®¡ç®—é æ‹¢â€ï¼ŒåŽŸå› æ˜¯ï¼Œç§»åŠ¨æ•°æ®éœ€è¦å¤§é‡çš„ç½‘ç»œä¼ è¾“å¼€é”€ MapReduceæ¡†æž¶é‡‡ç”¨äº†Master/Slaveæž¶æž„ï¼ŒåŒ…æ‹¬ä¸€ä¸ªMasterå’Œè‹¥å¹²ä¸ªSlaveï¼ŒMasterä¸Šè¿è¡ŒJobTrackerï¼ŒSlaveè¿è¡ŒTaskTracker Hadoopæ¡†æž¶æ˜¯ç”¨JAVAæ¥å†™çš„ï¼Œä½†æ˜¯,MapReduceåº”ç”¨ç¨‹åºåˆ™ä¸ä¸€å®šè¦ç”¨Javaæ¥å†™ã€‚ Mapper1234567891011121314151617public static class WordCountMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;&#123; private final static IntWritable plugOne = new IntWritable(1); private Text word = new Text(); @Override public void map(Object key, Text value, Context context ) throws IOException, InterruptedException &#123; //ä½¿ç”¨é»˜è®¤çš„åˆ†éš”ç¬¦ï¼Œç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€å›žè½¦ã€æ¢è¡Œ StringTokenizer st = new StringTokenizer(value.toString().toLowerCase().replaceAll(&quot;[\\pPâ€˜â€™â€œâ€]&quot;, &quot;&quot;)); while (st.hasMoreTokens()) &#123; word.set(st.nextToken()); context.write(word, plugOne); &#125; &#125;&#125; åœ¨mapé˜¶æ®µï¼Œkey/valueé”®å€¼å¯¹ä½œä¸ºè¾“å…¥ï¼Œäº§ç”Ÿå¦å¤–ä¸€ç³»åˆ—key/valueé”®å€¼å¯¹ä½œä¸ºä¸­é—´è¾“å‡ºå†™å…¥æœ¬åœ°ç£ç›˜ã€‚mapreduceæ¡†æž¶è‡ªåŠ¨å°†è¿™äº›ä¸­é—´æ•°æ®æŒ‰ç…§keyå€¼è¿›è¡Œèšé›†ï¼Œkeyå€¼ç›¸åŒçš„æ•°æ®å°†ä¸€èµ·è¢«reduceå¤„ç†ã€‚ å»ºç«‹test1.txtå’Œtest2.txt test1.txt 12I am JackI am the king of the world test2.txt 12I am RoseI am looking for Jack åˆ™mapé˜¶æ®µå¾—åˆ°çš„ç»“æžœä¸º test1.txt 12345678910&lt;I,1&gt;&lt;am,1&gt;&lt;Jack,1&gt;&lt;I,1&gt;&lt;am,1&gt;&lt;the,1&gt;&lt;king,1&gt;&lt;of,1&gt;&lt;the,1&gt;&lt;world,1&gt; Reduce1234567891011121314151617public static class WordCountReducer extends Reducer&lt;Text,IntWritable,Text,IntWritable&gt; &#123; private IntWritable result = new IntWritable(); @Override public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context ) throws IOException, InterruptedException &#123; int reduceSum = 0; for (IntWritable val : values) &#123; reduceSum += val.get(); &#125; result.set(reduceSum); context.write(key, result); &#125;&#125; reduceé˜¶æ®µä»¥keyåŠå¯¹åº”çš„valueåˆ—è¡¨ä½œä¸ºè¾“å…¥ï¼Œç»è¿‡åˆå¹¶keyç›¸åŒçš„valueå€¼åŽï¼Œäº§ç”Ÿå¦å¤–ä¸€ç³»åˆ—key/valueå¯¹ä½œä¸ºæœ€ç»ˆè¾“å‡ºå†™å…¥hdfs mapå¤„ç†å®ŒåŽï¼Œå¾—åˆ°çš„KVå¯¹ä¼šåˆ†ç»„ä¿å­˜ï¼Œkeyå€¼ç›¸åŒçš„åˆ†ä¸ºä¸€ç»„ï¼Œç„¶åŽä¼ é€’ä¸€ä¸ªç»„ä¼šè°ƒç”¨ä¸€æ¬¡reduceï¼Œåœ¨è¯é¢‘ç»Ÿè®¡ä¸­ï¼ŒåŒä¸€ä¸ªå•è¯ä¼šåˆ†ä¸ºä¸€ç»„ï¼Œvalueçš„å€¼ä¸º1ï¼Œæ‰€ä»¥reduceSum += val.get() ç»Ÿè®¡äº†æ¯ä¸€ä¸ªå•è¯çš„ä¸ªæ•°ã€‚ ç»“æžœï¼š Sortç”±äºŽåªéœ€è¦å‡ºçŽ°æ¬¡æ•°æœ€å¤šçš„100ä¸ªå•è¯ï¼Œæ‰€ä»¥é‡‡ç”¨TreeMapç»“æž„ å»ºç«‹æ–°çš„sortjobï¼Œç»§æ‰¿mapperå’Œreducer mapper 12345678910111213public void map(final Object key, final Text value, final Context context) throws IOException, InterruptedException &#123; final String line = value.toString(); final String[] keyValueStrings = line.split(&quot;\t&quot;); final int count = Integer.parseInt(keyValueStrings[1]); final String word = keyValueStrings[0]; map1.put(count, word); if (map1.size() &gt; K) &#123; map1.remove(map1.firstKey()); &#125; &#125; reducer 1234567891011121314public void reduce(final Text key, final Iterable&lt;IntWritable&gt; values, final Context context) throws IOException, InterruptedException &#123; final String word = key.toString(); int count = 0; for (final IntWritable val : values) &#123; count = val.get(); &#125; map1.put(count, word); if (map1.size() &gt; K) &#123; map1.remove(map1.firstKey()); &#125; &#125; ä¸Šä¼ ebooksåœ¨hdfsæ ¹ç›®å½•å»ºç«‹æ–‡ä»¶å¤¹ebooks ä½¿ç”¨scpå°†200æœ¬è‹±æ–‡ä¹¦ä¸Šä¼ åˆ°è™šæ‹Ÿæœºï¼š hadoop fs -put /ebooks / å°†æ–‡ä»¶ä¸Šä¼ åˆ°hdfsç›®å½•ä¸‹ å¯ä»¥çœ‹åˆ°æ–‡ä»¶ä¸Šä¼ æˆåŠŸ è¿è¡Œç¼–è¾‘run.sh ç¼–è¯‘åŽçš„ç»“æžœï¼š ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šè¢«å¼ºåˆ¶killæŽ‰è¿›ç¨‹ï¼Œè¿”å›žç ä¸º137 åŽŸå› æ˜¯å†…å­˜åˆ†é…ä¸è¶³é€ æˆï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ yarn-site.xml ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ 1234567891011121314151617&lt;property&gt; &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt; &lt;value&gt;22528&lt;/value&gt; &lt;discription&gt;æ¯ä¸ªèŠ‚ç‚¹å¯ç”¨å†…å­˜,å•ä½MB&lt;/discription&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;/name&gt; &lt;value&gt;1500&lt;/value&gt; &lt;discription&gt;å•ä¸ªä»»åŠ¡å¯ç”³è¯·æœ€å°‘å†…å­˜ï¼Œé»˜è®¤1024MB&lt;/discription&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.scheduler.maximum-allocation-mb&lt;/name&gt; &lt;value&gt;16384&lt;/value&gt; &lt;discription&gt;å•ä¸ªä»»åŠ¡å¯ç”³è¯·æœ€å¤§å†…å­˜ï¼Œé»˜è®¤8192MB&lt;/discription&gt; &lt;/property&gt; mapred-site.xml ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ 12345678910111213141516171819202122232425&lt;property&gt; &lt;name&gt;mapreduce.map.memory.mb&lt;/name&gt; &lt;value&gt;1500&lt;/value&gt; &lt;description&gt;æ¯ä¸ªMapä»»åŠ¡çš„ç‰©ç†å†…å­˜é™åˆ¶&lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;mapreduce.reduce.memory.mb&lt;/name&gt; &lt;value&gt;3000&lt;/value&gt; &lt;description&gt;æ¯ä¸ªReduceä»»åŠ¡çš„ç‰©ç†å†…å­˜é™åˆ¶&lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;mapreduce.map.java.opts&lt;/name&gt; &lt;value&gt;-Xmx1200m&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;mapreduce.reduce.java.opts&lt;/name&gt; &lt;value&gt;-Xmx2600m&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt; &lt;/property&gt; result]]></content>
      <categories>
        <category>äº‘è®¡ç®—</category>
      </categories>
      <tags>
        <tag>Exp</tag>
        <tag>äº‘è®¡ç®—</tag>
        <tag>Hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hdfsä½¿ç”¨æ–¹æ³•]]></title>
    <url>%2F2020%2F01%2F01%2Fhdfs%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[HDFSä½¿ç”¨æ–¹æ³•ä¸€ã€ä½¿ç”¨å‘½ä»¤æ“ä½œHDFSæŸ¥çœ‹æ–‡ä»¶ã€å‘é€æ–‡ä»¶hadoop fs -ls / æŸ¥çœ‹hdfsæ ¹ç›®å½•æ–‡ä»¶ hadoop fs -put ./test/file1 / å°†testç›®å½•ä¸‹çš„file1å‘é€åˆ°hdfsæ ¹ç›®å½• åˆ›å»ºç›®å½•hadoop fs -mkdir -p /test/user/ -pä¸ºé€’å½’åˆ›å»ºï¼Œå¯ä»¥åˆ›å»ºå¤šçº§ç›®å½• ä¸‹è½½æ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶hadoop fs -get sourcepath savepath å°†hdfs test æ–‡ä»¶å¤¹ä¸‹çš„useræ–‡ä»¶å¤¹ ä¸‹è½½åˆ°æœ¬åœ°çš„testæ–‡ä»¶å¤¹ä¸‹ hadoop fs -rm -r /test/user/del åˆ é™¤ test/user ä¸‹çš„delæ–‡ä»¶ï¼Œ-rå¾ªçŽ¯åˆ é™¤æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ æŸ¥æ‰¾æ–‡ä»¶hadoop fs -find / -name xxx ä»Žæ ¹ç›®å½•å¼€å§‹æŸ¥æ‰¾åä¸ºxxxçš„æ–‡ä»¶ä½ç½® äºŒã€ä½¿ç”¨JavaæŽ¥å£æ“ä½œHDFSæ·»åŠ çŽ¯å¢ƒå˜é‡123ä¿®æ”¹ .bashrcï¼Œæ·»åŠ export HADOOP_CLASSPATH=$JAVA_HOME/lib/tools.jarsource .bashrc ç¼–å†™Javaä»£ç å®žçŽ° put ã€ deleteã€getä¸‰ä¸ªæ–¹æ³• å‚è€ƒè€å¸ˆçš„PPT ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061import java.io.IOException;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.FileSystem;import org.apache.hadoop.fs.Path;public class hadoop_try&#123; public static Boolean put(String src , String dst , Configuration conf)&#123; Path dstPath = new Path(dst) ; try&#123; FileSystem hdfs = dstPath.getFileSystem(conf) ; hdfs.copyFromLocalFile(false, new Path(src), dstPath) ; &#125; catch(IOException ie)&#123; ie.printStackTrace() ; return false ; &#125; return true ; &#125; public static Boolean get(String src , String dst , Configuration conf)&#123; Path dstPath = new Path(dst) ; try&#123; FileSystem dhfs = dstPath.getFileSystem(conf) ; dhfs.copyToLocalFile(false, new Path(src), dstPath) ; &#125; catch(IOException ie)&#123; ie.printStackTrace() ; return false ; &#125; return true ; &#125; public static Boolean Delete(final String path , Configuration conf)&#123; Path dstPath = new Path(path) ; try&#123; FileSystem dhfs = dstPath.getFileSystem(conf) ; if(dhfs.exists(dstPath))&#123; dhfs.delete(dstPath, true) ; &#125; else&#123; return false ; &#125; &#125; catch(IOException ie )&#123; ie.printStackTrace() ; return false ; &#125; return true ; &#125; public static void main(String[] args) &#123; String dst = "hdfs://Master:9000/test/user" ; String src = "/root/test/tryfile"; Boolean status = false ; Configuration conf = new Configuration() ; status = put( src , dst , conf) ; System.out.println("put status="+status) ; src = "hdfs://Master:9000/test/user/tryfile"; dst = "/root/" ; status = get( src , dst , conf) ; System.out.println("get status="+status) ; dst = "hdfs://Master:9000/test/user/tryfile"; status = Delete( dst , conf) ; System.out.println("del status="+status) ; &#125;&#125; ç¼–è¯‘ã€æ‰“åŒ…ã€è¿è¡Œ123ç¼–è¯‘ ï¼š hadoop com.sun.tools.javac.Main hadoop_try.javaæ‰“åŒ… ï¼š jar cf hadoop_try.jar hadoop_try*.classè¿è¡Œ ï¼š hadoop jar hadoop_try.jar hadoop_try é€šè¿‡getæ–¹æ³•ï¼Œå°†hdfsä¸Š /test/user/tryfile ä¸‹è½½åˆ°äº† rootæ–‡ä»¶å¤¹ä¸‹ ï¼Œ éªŒè¯ï¼š]]></content>
      <categories>
        <category>äº‘è®¡ç®—</category>
      </categories>
      <tags>
        <tag>Exp</tag>
        <tag>äº‘è®¡ç®—</tag>
        <tag>Hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hadoopå®‰è£…é…ç½®]]></title>
    <url>%2F2019%2F11%2F05%2FHadoop%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[Hadoopå¹³å°å®‰è£…ä¸Žé…ç½®ä¸€ã€åˆ›å»ºä¸‰å°è™šæ‹Ÿæœº1ã€ ä¸ºåˆ›å»ºå¥½çš„è™šæ‹Ÿæœºé…ç½®ç½‘ç»œä½¿ç”¨å‘½ä»¤ vi /etc/sysconfig/network-scripts/ifcfg-eth0 é‡å¯æœåŠ¡ï¼Œå¹¶éªŒè¯é…ç½®å¥½çš„ç½‘ç»œ 2ã€ ä½¿ç”¨æ¨¡æ¿åˆ›å»ºå¦å¤–ä¸¤å°è™šæ‹Ÿæœºä½¿ç”¨å®žéªŒä¸€ä¸­åˆ›å»ºçš„CentOS 6è™šæ‹Ÿæœºï¼Œå¹¶ä½¿ç”¨OVFæ¨¡æ¿åˆ›å»ºå¦å¤–ä¸¤å°è™šæ‹Ÿæœº äºŒã€é…ç½®ç½‘ç»œ1ã€ ç”ŸæˆMACåœ°å€ç”±äºŽç›´æŽ¥ä½¿ç”¨OVFæ¨¡æ¿åˆ›å»ºäº†è™šæ‹Ÿæœºï¼Œæ‰€ä»¥éœ€è¦ä¸ºä¸¤å°æ¨¡æ¿è™šæ‹Ÿæœºç”ŸæˆMACåœ°å€ 2ã€ ä¿®æ”¹MACåœ°å€ä½¿ç”¨å‘½ä»¤ vi /etc/sysconfig/network-scripts/ifcfg-eth0 åˆ é™¤æ—§ç½‘å¡è§„åˆ™æ˜ å°„ ä½¿ç”¨å‘½ä»¤ rm /etc/udev/rules.d/70-persistent-net.rules åˆ é™¤åŽé‡å¯æœºå™¨ 3ã€ ä¿®æ”¹ipã€å­ç½‘æŽ©ç ã€ç½‘å…³ä½¿ç”¨å‘½ä»¤ ifconfig ã€ netstat -rn æŸ¥çœ‹ipã€å­ç½‘æŽ©ç ã€ç½‘å…³åœ°å€ ä¿®æ”¹ipã€å­ç½‘æŽ©ç ã€ç½‘å…³ï¼Œåœ¨ç½‘å¡é…ç½®ä¸­å¢žåŠ  IPADDRã€NETMASKã€GATEWAY 4ã€é‡å¯æœåŠ¡ï¼Œå…³é—­é˜²ç«å¢™12service network restartservice iptables stop 5ã€ æµ‹è¯•ç½‘ç»œä¸‰ä¸ªè™šæ‹Ÿæœºip: 123CentOS 6 : 192.168.112.129CentOS 6 - 1 : 192.168.112.130CentOS 6 - 2 : 192.168.112.131 æµ‹è¯•ç½‘ç»œï¼š ä¸‰ã€ä¿®æ”¹hosts1ã€åˆ†åˆ«ä¿®æ”¹è™šæ‹Ÿæœºhostsæ–‡ä»¶ä½¿ç”¨å‘½ä»¤ vi /etc/hosts å››ã€é…ç½®SSHå…ç™»å½•1ã€ssh-keygenä½¿ç”¨å‘½ä»¤ ssh-kengen 2ã€é…ç½®ä¸¤ä¸¤é—´çš„å…ç™»å½•12ssh-copy-id -i .ssh/id_rsa.pub root@Slave1 ssh-copy-id -i .ssh/id_rsa.pub root@Slave2 äº”ã€å®‰è£…Hadoopå¹³å°1ã€å®‰è£…java 2ã€å°†ä¸‹è½½çš„javaå®‰è£…åŒ…ä¼ å…¥è™šæ‹Ÿæœº 3ã€è§£åŽ‹12tar -zxvf jdk-8u231-linux-x64.tar.gz mv ./jdk1.8.0_231 /opt/jdk 4ã€æ·»åŠ çŽ¯å¢ƒå˜é‡vi /etc/profile 12export JAVA_HOME=/opt/jdkCLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar export PATH=$PATH:$JAVA_HOME/bin 5ã€å®‰è£…Hadoopç½‘å€ï¼š https://archive.apache.org/dist/hadoop/core/hadoop-2.8.2/ è§£åŽ‹åŽæ·»åŠ çŽ¯å¢ƒå˜é‡ï¼Œä¿®æ”¹ .bashrc æ·»åŠ  12export HADOOP_HOME=/opt/hadoop export PATH=$PATH:$HADOOP_HOME/sbin:$HADOOP_HOME/bin ä¿®æ”¹ hadoop-env.sh å’Œ yarn-env.sh 1export JAVA_HOME=/opt/jdk ä¿®æ”¹ slaves ï¼Œæ·»åŠ Slave1ã€Slave2 ä¿®æ”¹ core-site.xml 12345678910&lt;configuration&gt; &lt;property&gt; &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://Master:9000&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/home/hadoop/tmp&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; ä¿®æ”¹ hdfs-site.xml ï¼Œ è®¾ç½®å‰¯æœ¬æ•°ã€å¿ƒè·³é—´éš” 12345678910111213141516171819202122&lt;configuration&gt; &lt;property&gt; &lt;name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;2&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.http.address&lt;/name&gt; &lt;value&gt;Master:50070&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.heartbeat.interval&lt;/name&gt; &lt;value&gt;2&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; &lt;value&gt;/home/hadoop/tmp/name&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; &lt;value&gt;/home/hadoop/tmp/data&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; ä¿®æ”¹ mapred-site.xml 123456&lt;configuration&gt; &lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; ä¿®æ”¹ yarn-site.xml 123456&lt;configuration&gt; &lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ hdfs namenode -format å¯åŠ¨Hadoop start-all.sh æŸ¥çœ‹jps]]></content>
      <categories>
        <category>äº‘è®¡ç®—</category>
      </categories>
      <tags>
        <tag>Exp</tag>
        <tag>äº‘è®¡ç®—</tag>
        <tag>Hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nextä¸»é¢˜baiduéªŒè¯]]></title>
    <url>%2F2019%2F10%2F11%2Fhexo_baidu_verify%2F</url>
    <content type="text"><![CDATA[baiduéªŒè¯éªŒè¯æœªæ”¶å½•ç™¾åº¦æœç´¢ site:yourgithub.github.io , éªŒè¯æœªæ”¶å½• ç™¾åº¦æœç´¢å¹³å°è¿›å…¥ç™¾åº¦æœç´¢å¹³å°ï¼Œç‚¹å‡»é“¾æŽ¥æäº¤ï¼Œå¡«å†™githubåœ°å€ è®°å½•contentå€¼éªŒè¯ç«™ç‚¹ï¼Œé€‰æ‹©htmlæ ‡ç­¾éªŒè¯ï¼Œè®°å½•contentå€¼ æ·»åŠ ä»£ç åœ¨themes/nextä¸‹çš„é…ç½®æ–‡ä»¶æœ€åŽæ·»åŠ ä»£ç  baidu_site_verification: 5xxxxxxQ é‡æ–°ç”Ÿæˆæäº¤ï¼Œæ— éœ€ä¿®æ”¹headæ–‡ä»¶ åˆ·æ–°githubé¡µé¢ï¼ŒæŸ¥çœ‹ç½‘ç«™æºä»£ç ï¼Œå½“å¯ä»¥æ‰¾åˆ°æ­£ç¡®çš„éªŒè¯æ ‡ç­¾æ—¶ï¼Œè¿›è¡ŒéªŒè¯ã€‚ éªŒè¯é€šè¿‡ ç­‰å¾…é€šè¿‡ï¼Œé€šè¿‡åŽè¿›è¡ŒæŽ¨é€ æŽ¨é€ä¸»åŠ¨æŽ¨é€æœ€ä¸ºå¿«é€Ÿçš„æäº¤æ–¹å¼ï¼ŒæŽ¨èæ‚¨å°†ç«™ç‚¹å½“å¤©æ–°äº§å‡ºé“¾æŽ¥ç«‹å³é€šè¿‡æ­¤æ–¹å¼æŽ¨é€ç»™ç™¾åº¦ï¼Œä»¥ä¿è¯æ–°é“¾æŽ¥å¯ä»¥åŠæ—¶è¢«ç™¾åº¦æ”¶å½•ã€‚ è‡ªåŠ¨æŽ¨é€æœ€ä¸ºä¾¿æ·çš„æäº¤æ–¹å¼ï¼Œè¯·å°†è‡ªåŠ¨æŽ¨é€çš„JSä»£ç éƒ¨ç½²åœ¨ç«™ç‚¹çš„æ¯ä¸€ä¸ªé¡µé¢æºä»£ç ä¸­ï¼Œéƒ¨ç½²ä»£ç çš„é¡µé¢åœ¨æ¯æ¬¡è¢«æµè§ˆæ—¶ï¼Œé“¾æŽ¥ä¼šè¢«è‡ªåŠ¨æŽ¨é€ç»™ç™¾åº¦ã€‚å¯ä»¥ä¸Žä¸»åŠ¨æŽ¨é€é…åˆä½¿ç”¨ã€‚ sitemapæ‚¨å¯ä»¥å®šæœŸå°†ç½‘ç«™é“¾æŽ¥æ”¾åˆ°sitemapä¸­ï¼Œç„¶åŽå°†sitemapæäº¤ç»™ç™¾åº¦ã€‚ç™¾åº¦ä¼šå‘¨æœŸæ€§çš„æŠ“å–æ£€æŸ¥æ‚¨æäº¤çš„sitemapï¼Œå¯¹å…¶ä¸­çš„é“¾æŽ¥è¿›è¡Œå¤„ç†ï¼Œä½†æ”¶å½•é€Ÿåº¦æ…¢äºŽä¸»åŠ¨æŽ¨é€ã€‚ æ‰‹åŠ¨æäº¤ä¸€æ¬¡æ€§æäº¤é“¾æŽ¥ç»™ç™¾åº¦ï¼Œå¯ä»¥ä½¿ç”¨æ­¤ç§æ–¹å¼ã€‚ ä¸»åŠ¨æŽ¨é€&gt;è‡ªåŠ¨æŽ¨é€&gt;sitemapä¸»åŠ¨æŽ¨é€å®‰è£…hexo-baidu-url-submitæ’ä»¶git bash å‘½ä»¤ npm install hexo-baidu-url-submit --save æ·»åŠ baidu-url-submitçš„é…ç½®é¡¹ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š #è®¾ç½®ç™¾åº¦ä¸»åŠ¨æŽ¨é€baidu_url_submit: count: 200 #æ¯”å¦‚200ï¼Œä»£è¡¨æäº¤æœ€æ–°çš„200ä¸ªé“¾æŽ¥ host: www.lansheng.net.cn # åœ¨ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸåï¼Œè¿™ä¸ªæ”¹ä¸ºä½ è‡ªå·±çš„åŸŸå token: your_token # è¯·æ³¨æ„è¿™æ˜¯æ‚¨çš„ç§˜é’¥ï¼Œ æ‰€ä»¥è¯·ä¸è¦æŠŠåšå®¢æºä»£ç å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ! path: baidu_urls.txt # æ–‡æœ¬æ–‡æ¡£çš„åœ°å€ï¼Œ æ–°é“¾æŽ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œï¼Œè¿™ä¸ªé»˜è®¤ åŒæ—¶æ³¨æ„ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„urlå€¼ åŠ å…¥æ–°çš„deployé…ç½®é¡¹ä¸¤ä¸ªtypeå‰éƒ½è¦åŠ â€˜ - â€™ï¼Œè¡¨æ˜Žå±‚æ¬¡ deploy: - type: gitrepo: coding: git@git.coding.net:ä½ çš„codingç”¨æˆ·å/ä½ çš„codingç”¨æˆ·å.coding.me.git #codingåœ°å€ github: git@github.com:ä½ çš„githubç”¨æˆ·å/ä½ çš„githubç”¨æˆ·å.github.io.git # Githubåœ°å€branch: master - type: baidu_url_submitter éªŒè¯é…ç½®æ˜¯å¦æˆåŠŸhexo déƒ¨ç½²åŽæŸ¥çœ‹åé¦ˆï¼š è‡ªåŠ¨æŽ¨é€è®¾ç½®baidu_pushå°†ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„baidu_pushç½®ä¸º true è‡ªåŠ¨æŽ¨é€ä»£ç ä½äºŽ themes\next\layout\_third-party\baidu-push.swig Sitemapå®‰è£…baidu ã€Googleæ’ä»¶git bashå‘½ä»¤ npm install hexo-generator-sitemap --save npm install hexo-generator-baidu-sitemap --save ä¿®æ”¹é…ç½®æ–‡ä»¶ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  # è‡ªåŠ¨ç”Ÿæˆsitemapsitemap:path: sitemap.xmlbaidusitemap:path: baidusitemap.xml ç¼–è¯‘hexo clean &amp;&amp; hexo g æ›´æ¢ç«™ç‚¹åœ°å›¾æ–‡ä»¶urlå°†åœ°å›¾æ–‡ä»¶ä¸­çš„yoursite.comæ›´æ¢æˆè‡ªå·±çš„url åœ¨ç«™é•¿ç®¡ç†ä¸­æäº¤åœ°å›¾]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>baidu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2019%2F10%2F11%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>hexo</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ±½è½¦ç‰Œç…§æå–]]></title>
    <url>%2F2019%2F06%2F05%2F%E6%B1%BD%E8%BD%A6%E7%89%8C%E7%85%A7%E6%8F%90%E5%8F%96%2F</url>
    <content type="text"><![CDATA[â€‹ é—®é¢˜åˆ†æžè½¦ç‰Œç‰¹ç‚¹æ ·ä¾‹è½¦ç‰Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š ï¼ˆ1ï¼‰ å°åŠŸçŽ‡æ±½è½¦ä½¿ç”¨çš„è“åº•ç™½å­—ç‰Œç…§ï¼› ï¼ˆ2ï¼‰ å›½å¤–é©»åŽæœºæž„ä½¿ç”¨é»‘åº•ç™½å­—ç‰Œç…§ è¿™äº›ç‰Œç…§çš„é•¿åº¦å‡ä¸º45cmï¼Œå®½ä¸º15cmï¼Œå…±æœ‰å­—ç¬¦7ä¸ªã€‚ä¸€èˆ¬æ°‘ç”¨ç‰Œç…§ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºæ±‰å­—ï¼Œä¸”æ˜¯å„çœå¸‚çš„ç®€ç§°ï¼›ç¬¬äºŒä¸ªå­—ç¬¦ä¸ºå¤§å†™è‹±æ–‡å­—æ¯ï¼Œå¦‚â€œEâ€ï¼›ç¬¬ä¸‰ä¸ªå­—ç¬¦æ˜¯è‹±æ–‡å­—æ¯æˆ–é˜¿æ‹‰ä¼¯æ•°å­—ï¼Œç¬¬å››è‡³ç¬¬ä¸ƒä¸ªå­—ç¬¦ä¸ºé˜¿æ‹‰ä¼¯æ•°å­—ã€‚ å®žéªŒæµç¨‹å®žéªŒæµç¨‹åŒ…æ‹¬ï¼šè½¦ç‰Œå®šä½ã€å€¾æ–œæ ¡æ­£ã€å­—ç¬¦åˆ†å‰²ã€å­—ç¬¦è¯†åˆ«4ä¸ªéƒ¨åˆ† (1) åŽŸå§‹å›¾åƒï¼šæ ·ä¾‹ä¸­æ‰€ç»™çš„æ±½è½¦å›¾åƒï¼› (2) å›¾åƒé¢„å¤„ç†ï¼šå¯¹åŽŸå§‹å›¾åƒè¿›è¡ŒäºŒå€¼åŒ–ç­‰é¢„å¤„ç†æ“ä½œï¼› (3) è½¦ç‰Œå®šä½ï¼šå®šä½å‡ºæ±½è½¦ç‰Œç…§æ‰€åœ¨çš„çŸ©å½¢èŒƒå›´ï¼› (4) å€¾æ–œæ ¡æ­£ï¼šå¯¹å®šä½åŽçš„è½¦ç‰Œè¿›è¡Œå€¾æ–œæ ¡æ­£ï¼› (5) å­—ç¬¦åˆ†å‰²ï¼šå®šä½åˆ†å‰²å¾—åˆ°çš„è½¦ç‰Œå›¾åƒï¼Œå¾—åˆ°å•ä¸ªçš„å­—ç¬¦ï¼› (6) å›¾åƒé¢„å¤„ç†ï¼šé‡æ–°å®šä¹‰åˆ†å‰²åŽçš„å­—ç¬¦å›¾åƒå¤§å°ï¼Œå¹¶è½¬åŒ–ä¸ºä¸€ç»´çŸ©é˜µï¼› (7) å­—ç¬¦è¯†åˆ«ï¼šé€šè¿‡BPç¥žç»ç½‘ç»œè®­ç»ƒï¼Œå¾—åˆ°æœ€åŽçš„æ±½è½¦ç‰Œç…§ï¼ŒåŒ…æ‹¬è‹±æ–‡å­—æ¯å’Œæ•°å­—ã€‚ å®žéªŒè¿‡ç¨‹è§£å†³æ€è·¯è½¦ç‰Œå®šä½1) åŸºäºŽç°åº¦è¾¹ç¼˜æ£€æµ‹ä¸Žå½¢æ€å­¦é‡æž„çš„æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•åªè¦åˆ©ç”¨è½¦ç‰ŒåŒºåŸŸå±€éƒ¨å¯¹æ¯”åº¦æ˜Žæ˜¾å’Œæœ‰è§„å¾‹çš„çº¹ç†ç‰¹å¾æ¥å®šä½ï¼Œç„¶åŽåˆ©ç”¨å½¢æ€å­¦æ–¹æ³•å°†è½¦ç‰ŒåŒºåŸŸä¸Žå…¶å®ƒèƒŒæ™¯åŒºåŸŸåˆ†ç¦»ã€‚ 2) åŸºäºŽç›´çº¿æ£€æµ‹çš„æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•ä¸»è¦Houghå˜æ¢çš„æ–¹æ³•æ¥æ£€æµ‹è½¦ç‰Œå‘¨å›´è¾¹æ¡†ç›´çº¿ï¼Œåˆ©ç”¨è½¦ç‰Œå½¢çŠ¶ç‰¹æ€§æ¥å®šä½è½¦ç‰Œã€‚ 3) æ ¹æ®è½¦ç‰Œçš„å›ºæœ‰é•¿å®½æ¯”è¿›è¡Œå®šä½çš„æ–¹æ³•ã€‚å› ä¸ºä¸­å¤–è½¦ç‰Œçš„é•¿å®½æ¯”éƒ½æ˜¯å›ºå®šçš„3.1ï¼š1ï¼Œåœ¨é¢„å¤„ç†å®ŒæˆåŽå¯¹äºŒå€¼åŒ–çš„å›¾åƒè¿›è¡Œè†¨èƒ€è…èš€ï¼Œè®¡ç®—è”é€šåŒºåŸŸé•¿å®½æ¯”ç¡®å®šè½¦ç‰Œä½ç½®ã€‚ 4) åŸºäºŽå½©è‰²å›¾åƒçš„è½¦ç‰Œå®šä½æ–¹æ³•ã€‚çŽ°åœ¨çš„ç‰Œç…§æœ‰å››ç§ç±»åž‹:ç¬¬ä¸€ç§æ˜¯æœ€å¸¸è§çš„å°åž‹æ±½è½¦æ‰€ç”¨çš„è“åº•ç™½å­—ç‰Œç…§ï¼›ç¬¬äºŒç§æ˜¯å¤§åž‹æ±½è½¦æ‰€ç”¨çš„é»„åº•é»‘å­—ç‰Œç…§ï¼›ç¬¬ä¸‰ç§æ˜¯å†›ç”¨æˆ–è­¦ç”¨çš„ç™½åº•é»‘å­—ã€çº¢å­—ç‰Œç…§ï¼›ç¬¬å››ç§æ˜¯å›½å¤–é©»åŽæœºæž„ç”¨çš„é»‘åº•ç™½å­—ã€çº¢å­—ç‰Œç…§ã€‚åŸºäºŽå½©è‰²å›¾åƒçš„è½¦ç‰Œå®šä½æ–¹æ³•ä¸»è¦åˆ©ç”¨è½¦ç‰Œé¢œè‰²ä¸Žè½¦èº«å…¶ä»–éƒ¨ä½é¢œè‰²å…·æœ‰æ˜Žæ˜¾ä¸åŒçš„å·®å¼‚æ¥åˆ†å‰²ä¸Žæå–è½¦ç‰Œã€‚ 5) ç›®å‰è¾ƒä¸ºæˆç†Ÿçš„è½¦ç‰ŒåŒºåŸŸå®šä½ç®—æ³•æœ‰è‡ªé€‚åº”è¾¹ç•Œæœç´¢æ³•ã€åŒºåŸŸç”Ÿé•¿æ³•ã€ç°åº¦å›¾åƒæ•°å­¦å½¢æ€å­¦è¿ç®—æ³•ã€åŸºäºŽçº¹ç†æˆ–é¢œè‰²çš„åˆ†å‰²æ–¹æ³•ä»¥åŠæ¨¡ç³Šèšç±»æ³•ç­‰ã€‚ å­—ç¬¦åˆ†å‰²1) æŠ•å½±åˆ†æžå¸¸é‡‡ç”¨çš„æ˜¯æ°´å¹³æŠ•å½±æ³•ã€‚å³æ²¿æ°´å¹³æ–¹å‘è®¡ç®—æ¯ä¸€åˆ—å±žäºŽè½¦ç‰Œå­—ç¬¦çš„è±¡ç´ æ•°ç›®ï¼Œåœ¨å­—ç¬¦çš„é—´éš™å¤„å–å¾—å±€éƒ¨æœ€å°å€¼ï¼Œåˆ†å‰²ä½ç½®åº”åœ¨å…¶é™„è¿‘ã€‚å…ˆæ ¹æ®è½¦ç‰Œæ°´å¹³æŠ•å½±çš„ç»Ÿè®¡ç‰¹å¾å‘ˆçŽ°å‡ºæ˜Žæ˜¾â€œæ³¢å³°â€”â€”æ³¢è°·â€”â€”æ³¢å³°â€ï¼Œè¿›è¡Œæ°´å¹³æ–¹å‘ä¸Šçš„ç²—åˆ†å‰²ï¼Œè‹¥å­—ç¬¦å‡ºçŽ°åˆå¹¶å’Œç²˜è¿žçŽ°è±¡ï¼Œå†é‡‡ç”¨é€’å½’å›žå½’åŠžæ³•è¿›è¡ŒäºŒæ¬¡å­—ç¬¦åˆ†å‰²ã€‚ 2) æŠ•å½±æ³•è¿›è¡Œå­—ç¬¦åˆ†å‰²å®žçŽ°èµ·è¾ƒä¸ºç®€å•ï¼Œä½†åœ¨é¢„å¤„ç†æ•ˆæžœä¸å¥½çš„æƒ…å†µä¸‹ï¼Œè¾ƒéš¾èŽ·å¾—æ»¡è¶³æ¡ä»¶çš„åˆ—ã€‚è‹¥å¢žåŠ é¢„å¤„ç†ï¼Œåˆ™ä½¿å¤„ç†åŽçš„å›¾åƒä¸å¯é¿å…åœ°æŸå¤±ä¸€éƒ¨åˆ†æœ‰ç”¨ä¿¡æ¯ï¼Œè¿˜å¯èƒ½å¯¼è‡´é¢å¤–è¯¯å·®ã€‚åŸºäºŽè¿žé€šåŸŸèšç±»åˆ†æžåˆ‡åˆ†è½¦ç‰Œå­—ç¬¦çš„æ–¹æ³•æŒ‰ç…§å±žäºŽåŒä¸€ä¸ªå­—ç¬¦çš„åƒç´ æž„æˆä¸€ä¸ªè¿žé€šåŸŸçš„åŽŸåˆ™ï¼Œç»“åˆç‰Œç…§å­—ç¬¦çš„å›ºå®šé«˜åº¦å’Œé—´è·æ¯”ä¾‹å…³ç³»ç­‰å…ˆéªŒçŸ¥è¯†ï¼Œè¾ƒå¥½åœ°è§£å†³äº†æ±½è½¦ç‰Œç…§åœ¨å¤æ‚èƒŒæ™¯æ¡ä»¶ä¸‹çš„å­—ç¬¦åˆ‡åˆ†é—®é¢˜ï¼Œé™ä½Žäº†å¯¹è½¦ç‰Œå®šä½å‡†ç¡®åº¦çš„è¦æ±‚ï¼Œå¯¹ä¸è§„èŒƒçš„è½¦ç‰Œè¯†åˆ«ä¹Ÿå…·æœ‰ä¸€å®šçš„é€‚ç”¨æ€§ã€‚ å­—ç¬¦è¯†åˆ«1) æ¨¡æ¿åŒ¹é…æ³•æ˜¯æœ€ç®€å•çš„ä¸€ç§å­—ç¬¦è¯†åˆ«æ–¹æ³•ã€‚å°†å¾…è¯†åˆ«å­—ç¬¦ç»åˆ†å‰²å½’ä¸€åŒ–æˆæ¨¡æ¿å­—ä½“çš„å¤§å°ï¼Œå°†å®ƒè¾“å…¥å­—ç¬¦è¯†åˆ«æ¨¡å—è¿›è¡ŒåŒ¹é…ã€‚æ ¹æ®å®žé™…å­—ç¬¦å’Œæ¨¡æ¿å›¾åƒä¹‹é—´åŒ¹é…æ–¹å·®æœ€å°çš„åŽŸåˆ™ï¼Œåˆ¤å®šè½¦ç‰Œå›¾åƒå­—ç¬¦æ‰€å±žç±»åˆ«ã€‚è¿™ç§æ–¹æ³•å¯¹äºŽæ ‡å‡†ã€è§„èŒƒçš„å­—ç¬¦è¯†åˆ«æ•ˆæžœè¾ƒå¥½ã€‚ä½†åœ¨å¤æ‚çŽ¯å¢ƒä¸‹çš„è½¦ç‰Œå­—ç¬¦ä¼šä¸Žç†æƒ³æ¨¡æ¿å­—ç¬¦ä¸å®Œå…¨ä¸€è‡´ï¼Œè¿™å¯¼è‡´äº†è¯†åˆ«ç»“æžœå­˜åœ¨è¾ƒå¤§è¯¯å·®ã€‚ 2) æ¨¡ç‰ˆåŒ¹é…æ³•ç®€å•ã€æˆç†Ÿï¼Œä½†å…¶è‡ªé€‚åº”ä¸å¼ºã€‚å¯¹äºŽå­—ç¬¦æœ‰æ–­è£‚å’Œç²˜è¿žç­‰æƒ…å†µå®¹æ˜“é€ æˆè¯¯åˆ¤ã€‚ç¥žç»ç½‘ç»œåŒ¹é…æ³•å…·æœ‰è‰¯å¥½çš„å®¹é”™æ€§ã€è‡ªé€‚åº”å’Œå­¦ä¹ èƒ½åŠ›ï¼Œä½†æ ·æœ¬çš„è®­ç»ƒæ”¶æ•›é€Ÿåº¦æ…¢ï¼Œè€Œå¤§è§„æ¨¡å¹¶è¡Œå¤„ç†ä¸ºæ­¤æä¾›äº†è§£å†³é€”å¾„ã€‚å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯é‡‡ç”¨å¹¶è¡Œè¯†åˆ«çš„BPç½‘ç»œï¼Œè®©æ±‰å­—ã€è‹±æ–‡ã€é˜¿æ‹‰ä¼¯æ•°å­—ï¼Œé˜¿æ‹‰ä¼¯æ•°å­—åˆ†åˆ«é€åˆ°å„è‡ªçš„ç½‘ç»œè¯†åˆ«ã€‚è¿˜æœ‰å­¦è€…ç»“åˆå°æ³¢å˜åŒ–çš„ä¼˜ç‚¹ï¼Œæå‡ºåŸºäºŽå°æ³¢å’ŒBPç¥žç»ç½‘ç»œçš„è½¦ç‰Œå­—ç¬¦è¯†åˆ«æ–°æ–¹æ³•ï¼Œé‡‡ç”¨å°æ³¢å˜æ¢æå–å­—ç¬¦ç‰¹å¾ï¼Œç¥žç»ç½‘ç»œå®žçŽ°å­—ç¬¦è¯†åˆ«ï¼ŒåŠ å¿«äº†ç®—æ³•çš„æ‰§è¡Œï¼Œæé«˜äº†è¯†åˆ«çŽ‡ã€‚ æ–¹æ³•è®¾è®¡è½¦ç‰Œå®šä½1) è¾¹ç¼˜æ£€æµ‹æ–¹æ³• é‡‡ç”¨robertã€prewittã€sobleç®—å­è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ï¼Œä¹‹åŽåˆ©ç”¨æ•°å­¦å½¢æ€å­¦çš„æ–¹æ³•å¯¹è¾¹ç¼˜æ£€æµ‹åŽå¾—åˆ°çš„å›¾åƒè¿›è¡Œçº¿æ€§è…èš€ã€é—­è¿ç®—ç­‰æ“ä½œå¾—åˆ°åˆæ­¥å®šä½çš„äºŒå€¼åŒ–è½¦ç‰Œä½ç½® 2) é¢œè‰²æå–æ–¹æ³• é’ˆå¯¹è“åº•ã€é»‘åº•è½¦ç‰Œï¼Œç¡®å®šé¢œè‰²æå–çš„èŒƒå›´ï¼Œè¿›è¡Œé¢œè‰²æå–ï¼Œæå–åŽå¾—åˆ°å›¾åƒçš„é€»è¾‘çŸ©é˜µï¼Œé€»è¾‘ä¸ºçœŸçš„éƒ¨åˆ†ä¸ºåˆæ­¥å®šä½çš„äºŒå€¼åŒ–è½¦ç‰Œä½ç½® 3) æ ¹æ®è¡Œã€åˆ—åƒç´ ç°åº¦å€¼ç´¯ç§¯å€¼ç¡®å®šè¡Œåˆ—èµ·å§‹ã€ç»ˆæ­¢ä½ç½®ã€‚ 4) å°†é€»è¾‘çŸ©é˜µåˆæ­¥ç¡®å®šçš„è½¦ç‰Œä½ç½®çš„å¤–æŽ¥çŸ©å½¢ä½œä¸ºè½¦ç‰Œæœ€ç»ˆå®šä½ä½ç½® å€¾æ–œæ ¡æ­£1) ç†æƒ³æƒ…å†µä¸‹ï¼Œå°†è½¦ç‰Œå·¦ä¸Šè§’ï¼Œå³ä¸Šè§’è¿žçº¿ä¸Žæ°´å¹³æ–¹å‘çš„å¤¹è§’ä½œä¸ºå€¾è§’ã€‚ 2) å°†å®šä½åŽçš„è½¦ç‰Œç­‰åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œæ±‚å‡ºå¹³å‡yå€¼ï¼Œä½œä¸ºå€¾è§’ã€‚ å­—ç¬¦åˆ†å‰²1) æ°´å¹³æŠ•å½±æ³•ã€‚æ²¿æ°´å¹³æ–¹å‘è®¡ç®—æ¯ä¸€åˆ—å±žäºŽè½¦ç‰Œå­—ç¬¦çš„åƒç´ æ•°ç›®ï¼Œåœ¨å­—ç¬¦çš„é—´éš™å¤„å–å¾—å±€éƒ¨æœ€å°å€¼ï¼Œåˆ†å‰²ä½ç½®åº”åœ¨å…¶é™„è¿‘ã€‚å…ˆæ ¹æ®è½¦ç‰Œæ°´å¹³æŠ•å½±çš„ç»Ÿè®¡ç‰¹å¾å‘ˆçŽ°å‡ºæ˜Žæ˜¾â€œæ³¢å³°â€”â€”æ³¢è°·â€”â€”æ³¢å³°â€ï¼Œè¿›è¡Œåˆ†å‰²ã€‚ 2) é¦–å…ˆè®¡ç®—åˆ—çº§ç°åº¦å€¼ï¼Œç¡®å®šé˜ˆå€¼èŒƒå›´ï¼Œå°†æ»¡è¶³é˜ˆå€¼èŒƒå›´çš„åˆ—å·è®¾ä¸ºé€»è¾‘çœŸå€¼1ï¼Œç”¨è¿žç»­çš„ä¸¤ä¸ª0ä½œä¸ºåˆ†å‰²ç¬¦ï¼Œè¿›è¡Œåˆæ­¥åˆ†å‰²ï¼Œå¯¹åˆ†å‰²åŽçš„éƒ¨åˆ†è¿›è¡Œåˆ¤æ–­ï¼Œå–è¿žç»­è¶…è¿‡5ä¸ªçš„é€»è¾‘çœŸå€¼åˆ—ï¼Œä½œä¸ºåˆ†å‰²åŽçš„å­—ç¬¦ä½ç½®ã€‚ å­—ç¬¦è¯†åˆ«1) ä½¿ç”¨matlabè‡ªå¸¦çš„bpç¥žç»ç½‘ç»œè¿›è¡Œè®­ç»ƒ å°ç»„åˆ†å·¥æè¿°å°ç»„æˆå‘˜çš„åˆ†å·¥æƒ…å†µï¼Œæ¯ä¸ªäººéœ€è¦å®Œæˆçš„ä»»åŠ¡ å®žçŽ°è¿‡ç¨‹ç‰Œç…§å®šä½è¾¹ç¼˜æ£€æµ‹é¦–å…ˆé‡‡ç”¨è¾¹ç¼˜æ£€æµ‹çš„æ–¹æ³•è¿›è¡Œå®šä½ï¼Œåˆ©ç”¨robertç®—å­ï¼Œè¿›è¡Œè¾¹ç¼˜æå–ï¼Œä¹‹åŽåˆ©ç”¨è…èš€ï¼Œé—­è¿ç®—å¡«å……çš„æ–¹æ³•ï¼Œå¾—åˆ°åˆæ­¥çš„ç»“æžœï¼Œä¹‹åŽæ ¹æ®è½¦ç‰Œçš„å¤§å°ï¼Œé€šè¿‡åšå·®ï¼Œæå–å‡ºè½¦ç‰Œéƒ¨åˆ† 123456789101112131415161718192021222324252627282930313233a = imread(&apos;pics/2.jpg&apos;);I = edge(rgb2gray(a),&apos;roberts&apos;,0.07,&apos;both&apos;); %é‡‡ç”¨robertç®—å­è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ figure , subplot(1,2,1);imshow(I) , title(&apos;è¾¹ç¼˜æ£€æµ‹&apos;); se = [1;1;1];I1 = imerode(I,se);%figure , imshow(I1) , title(&apos;è†¨èƒ€åŽ&apos;); se=strel(&apos;rectangle&apos;,[25,25]); %çŸ©å½¢ç»“æž„å…ƒç´ I2 = imclose(I1,se); %åˆæ­¥å¡«å……I3 = bwareaopen(I2,9000); %åŽ»é™¤èšå›¢ç°åº¦å€¼å°äºŽ9000çš„éƒ¨åˆ†I4 = bwareaopen(I2,11000); subplot(1,2,2)imshow(I3-I4) , title(&apos;å¡«å……åŽ&apos;); ä½†æ˜¯è¿™ç§æ–¹æ³•å¯¹äºŽæ ·ä¾‹4ï¼Œå¾—åˆ°çš„ç»“æžœå¹¶ä¸ç†æƒ³ å› æ­¤æ”¹ç”¨é¢œè‰²æå–çš„æ–¹æ³• é¢œè‰²æå–æ ¹æ®è“åº•å’Œé»‘åº•è½¦ç‰Œï¼Œç¡®å®šä¸åŒçš„é¢œè‰²èŒƒå›´ï¼Œè¿›è¡Œé¢œè‰²æå–ã€‚ ä»¥è“åº•è½¦ç‰Œä¸ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233a = imread(&apos;pics/2.jpg&apos;); dd1 = (a(:,:,1)&lt;=40&amp;a(:,:,1)&gt;=10&amp;a(:,:,2)&lt;=85&amp;a(:,:,2)&gt;=55&amp;a(:,:,3&lt;=240&amp;a(:,:,3)&gt;=110); %ç”±RGBé¢œè‰²èŒƒå›´æŠ å›¾ ç»“æžœä¸ºé€»è¾‘çŸ©é˜µï¼ˆåªåŒ…å«0ä¸Ž1ï¼‰figure , subplot(1,2,1),imshow(dd1) , title(&apos;é¢œè‰²æå–&apos;); se = strel(&apos;square&apos;,3); %çº¿åž‹ç»“æž„å…ƒç´  I1 = imdilate(imdilate(dd1,se),se); %è†¨èƒ€å›¾åƒ se=strel(&apos;rectangle&apos;,[20,20]); %çŸ©å½¢ç»“æž„å…ƒç´ I2 = imclose(I1,se); %åˆæ­¥å¡«å…… I3 = bwareaopen(I2,2000); %åŽ»é™¤èšå›¢ç°åº¦å€¼å°äºŽ2000çš„éƒ¨åˆ† se=strel(&apos;rectangle&apos;,[100,100]); %çŸ©å½¢ç»“æž„å…ƒç´ I = imclose(I3,se); %å†æ¬¡å¡«å……subplot(1,2,2)imshow(I) , title(&apos;å¡«å……åŽ&apos;); ç¡®å®šèŒƒå›´é¦–å…ˆå°è¯•é€šè¿‡è¡Œåˆ—çš„åƒç´ ç°åº¦å€¼è¿›è¡Œæœ€ç»ˆèŒƒå›´çš„ç¡®å®šï¼Œä½†å¾—åˆ°çš„æœ€ç»ˆèŒƒå›´ä¼šæŸå¤±ä¸€äº›æœ‰ç”¨ä¿¡æ¯ï¼Œå› æ­¤æ”¹ç”¨å¤–æŽ¥çŸ©å½¢çš„æ–¹æ³•ã€‚ ç”±äºŽé¢œè‰²æå–åŽçš„è½¦ç‰Œä½ç½®å·²ç»æ¯”è¾ƒå‡†ç¡®ï¼Œæ‰€ä»¥å°†é¢œè‰²æå–åŽè½¦ç‰Œä½ç½®çš„x,yè½´æžå¤§æžå°å€¼ä½œä¸ºæœ€ç»ˆçš„èŒƒå›´ å€¾æ–œæ ¡æ­£(1) åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œç”±äºŽè½¦ç‰Œä¸ºçŸ©å½¢ï¼Œå¯ä»¥é€šè¿‡è½¦ç‰Œçš„å·¦ä¸Šè§’å’Œå³ä¸Šè§’ç¡®å®šå€¾è§’ã€‚ä½†åœ¨å®žé™…è¯†åˆ«è¿‡ç¨‹ä¸­ï¼Œå®šä½çš„è½¦ç‰Œå·¦ä¸Šè§’ä»¥åŠå³ä¸Šè§’å¹¶ä¸å‡†ç¡®ï¼Œå¯¼è‡´å€¾è§’è¯¯å·®è¾ƒå¤§ã€‚ (2) å°†å®šä½åŽçš„è½¦ç‰Œç­‰åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œæ±‚å‡ºå¹³å‡yå€¼ï¼Œä½œä¸ºå€¾è§’ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137[y,x,]=size(I); minx = 0;maxx = x;for i = 1:y for j = 1:x if(I(i,j,1) == 1) if(minx == 0) minx = j; elseif(minx &gt; j) minx = j; end if(maxx == x) maxx = j; elseif(maxx &lt; j) maxx = j; end end endend miny = 0;maxy = y;sumofleft = 0;sumofright = 0;heightofleft = 0;heightofright = 0; for j = minx:int64((minx+maxx)/2) for i = 1:y if(I(i,j,1) == 1) sumofleft = sumofleft + 1; heightofleft = heightofleft + i; if(miny == 0) miny = i; elseif(miny &gt; i) miny = i; end if(maxy == y) maxy = i; elseif(maxy &lt; i) maxy = i; end end endend for j = int64((minx+maxx)/2):maxx for i = 1:y if(I(i,j,1) == 1) sumofright = sumofright + 1; heightofright = heightofright + i; if(miny &gt; i) miny = i; end if(maxy &lt; i) maxy = i; end end endend æ—‹è½¬aveleft = heightofleft/sumofleft;averight = heightofright/sumofright;k = (aveleft - averight)/((maxx - minx)/2);DW = imrotate(DW,-atan(k)*180/pi); å­—ç¬¦åˆ†å‰²(1) é¦–å…ˆè®¡ç®—åˆ—çº§ç°åº¦å€¼ï¼Œç¡®å®šé˜ˆå€¼èŒƒå›´ï¼Œå°†æ»¡è¶³é˜ˆå€¼èŒƒå›´çš„åˆ—å·è®¾ä¸ºé€»è¾‘çœŸå€¼1ï¼Œç”¨è¿žç»­çš„ä¸¤ä¸ª0ä½œä¸ºåˆ†å‰²ç¬¦ï¼Œè¿›è¡Œåˆæ­¥åˆ†å‰²ï¼Œå¯¹åˆ†å‰²åŽçš„éƒ¨åˆ†è¿›è¡Œåˆ¤æ–­ï¼Œå–è¿žç»­è¶…è¿‡5ä¸ªçš„é€»è¾‘çœŸå€¼åˆ—ï¼Œä½œä¸ºåˆ†å‰²åŽçš„å­—ç¬¦ä½ç½®ã€‚ å…ˆå¯¹å®šä½åŽçš„å›¾åƒè¿›è¡Œå†æ¬¡æŠ å›¾ï¼Œå¾—åˆ°æ›´ç²¾ç¡®çš„é€»è¾‘çŸ©é˜µï¼Œä¹‹åŽè®¾ç«‹ä¸€ç»´çŸ©é˜µselectcolï¼Œå¦‚æžœåˆ—çº§ç°åº¦å€¼çš„èŒƒå›´åœ¨ï¼ˆ2ï¼Œ20ï¼‰ï¼Œåˆ™å°†selectcolå¯¹åº”çš„åˆ—ç½®ä¸º1 12345678910111213141516171819202122232425262728293031323334353637383940414243444546a = DW;dd1 = (a(:,:,1)&lt;=200&amp;a(:,:,1)&gt;=100&amp;a(:,:,2)&lt;=220&amp;a(:,:,2)&gt;=100&amp;a(:,:,3)&lt;=220&amp;a(:,:,3)&gt;=100); %ç”±RGBé¢œè‰²èŒƒå›´æŠ å›¾ ç»“æžœä¸ºé€»è¾‘çŸ©é˜µï¼ˆåªåŒ…å«0ä¸Ž1ï¼‰% figure , subplot(1,2,1),imshow(dd1);[y,x,]=size(dd1);sumofrow = 0;sumofcol = 0;selectrow = zeros(y,1);selectcol = zeros(1,x);row_min = 1;row_max = y;for i = 1:y sumofrow = 0; for j = 1:x if(dd1(i,j) == 1) sumofrow = sumofrow + 1; end end if(sumofrow &gt; 0 &amp;&amp; sumofrow &lt; 20) selectrow(i,1) = 1; endendfor i = 1:y if(selectrow(i,1) == 1) row_min = i; break; endendfor i = y:-1:1 if(selectrow(i,1) == 1) row_max = i; break; endendfor j = 1:x sumofcol = 0; for i = row_min:row_max if(dd1(i,j) == 1) sumofcol = sumofcol + 1; end if(sumofcol &gt; 2 &amp;&amp; sumofcol &lt; 20) selectcol(1,j) = 1; end endend ä¹‹æ‰€ä»¥è¦å°†èŒƒå›´ä¸‹é™è®¾ç½®ä¸º2ï¼Œæ˜¯ä¸ºäº†æŽ’é™¤ä¸€äº›å¹²æ‰°ï¼Œç”±äºŽä¸‹ä¸€æ­¥çš„åˆ†å‰²è¦ç”¨è¿žç»­çš„ä¸¤ä¸ª0ä½œä¸ºåˆ†å‰²ç¬¦ï¼Œä½†æ˜¯å¯¹äºŽå›¾ç‰‡äº”æ¥è¯´ï¼Œç¬¬å››ä¸ªå’Œç¬¬äº”ä¸ªæ•°å­—â€˜0â€™ä¸Šæ–¹å‡ºçŽ°äº†è½¦ç‰Œé“†é’‰çš„å¹²æ‰°ï¼Œå¦‚æžœä¸è®¾ç½®ä¸‹ç•Œï¼Œåˆ™ç¬¬å››ä¸ªå’Œç¬¬äº”ä¸ªæ•°å­—è¢«è¯†åˆ«ä¸ºè¿žç»­çš„éƒ¨åˆ†ï¼Œä¸èƒ½è¿›è¡Œåˆ†å‰²ã€‚ åˆ†å‰²ä»¥è¿žç»­çš„ä¸¤ä¸ª0ä½œä¸ºåˆ†å‰²ç¬¦ï¼Œå¹¶ä¸”åªå–é•¿åº¦è¶…è¿‡5çš„éƒ¨åˆ†ï¼ˆè¿™æ˜¯ä¸ºäº†æŽ’é™¤åŒ…æ‹¬è½¦ç‰Œä¸­ç‚¹å·åœ¨å†…çš„å¹²æ‰°ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243[y,x,]=size(dd1);sum = 0;cur = 1;% figure;for i = 1:7 sum = 0; while(sum &lt; 5) while(cur &lt; x &amp;&amp; selectcol(1,cur) == 0) cur = cur + 1; end if(cur &gt; x-3) break; end tempstart = cur; while(~(selectcol(1,cur+1) == 0 &amp;&amp; selectcol(1,cur+2) == 0) &amp;&amp; cur &lt; x-3) sum = sum + 1; cur = cur + 1; end cur = cur + 1; end tempend = cur; z = dd1(1:y,tempstart:tempend,:);% se=strel(&apos;rectangle&apos;,[2,2]); %çŸ©å½¢ç»“æž„å…ƒç´ % z = imclose(z,se); %å†æ¬¡å¡«å…… switch (i) case 1 pic1 = z; case 2 pic2 = z; case 3 pic3 = z; case 4 pic4 = z; case 5 pic5 = z; case 6 pic6 = z; case 7 pic7 = z; end subplot(1,7,i),imshow(z);end å­—ç¬¦è¯†åˆ«å»ºç«‹æ¨¡æ¿åº“æ¨¡æ¿åº“ä¸­åŒ…å«éƒ¨åˆ†å­—æ¯ä»¥åŠæ•°å­— é¢„å¤„ç†12345678910111213function inpt = pretreatment(I)% è®­ç»ƒæ ·æœ¬å‰æœŸå¤„ç†if (ndims(I)==3) I1 = rgb2gray(I);else I1=I;endI1=imresize(I1,[50 25]);%å°†å›¾ç‰‡ç»Ÿä¸€åˆ’ä¸º50*25å¤§å°I1=im2bw(I1,0.9);[m,n]=size(I1);inpt=zeros(1,m*n);% å°†å›¾åƒæŒ‰åˆ—è½¬æ¢æˆä¸€ä¸ªè¡Œå‘é‡for j=1:n BPç¥žç»ç½‘ç»œè®­ç»ƒ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112close all;clear all;% å½’ä¸€åŒ–è®­ç»ƒæ ·æœ¬I0=pretreatment(imread(&apos;pics/num0.png&apos;));I1=pretreatment(imread(&apos;pics/num1.png&apos;));I2=pretreatment(imread(&apos;pics/num2.png&apos;));I3=pretreatment(imread(&apos;pics/num3.png&apos;));I4=pretreatment(imread(&apos;pics/num4.png&apos;));I5=pretreatment(imread(&apos;pics/num5.png&apos;));I6=pretreatment(imread(&apos;pics/num6.png&apos;));I7=pretreatment(imread(&apos;pics/num7.png&apos;));I8=pretreatment(imread(&apos;pics/num8.png&apos;));I9=pretreatment(imread(&apos;pics/num9.png&apos;));I10=pretreatment(imread(&apos;pics/charA.png&apos;));I11=pretreatment(imread(&apos;pics/charB.png&apos;));I12=pretreatment(imread(&apos;pics/charC.png&apos;));I13=pretreatment(imread(&apos;pics/charD.png&apos;));I14=pretreatment(imread(&apos;pics/charK.png&apos;));I15=pretreatment(imread(&apos;pics/charM.png&apos;));I16=pretreatment(imread(&apos;pics/charP.png&apos;));I17=pretreatment(imread(&apos;pics/charQ.png&apos;));P=[I0&apos;,I1&apos;,I2&apos;,I3&apos;,I4&apos;,I5&apos;,I6&apos;,I7&apos;,I8&apos;,I9&apos;,I10&apos;,I11&apos;,I12&apos;,I13&apos;,I14&apos;,I15&apos;,I16&apos;,I17&apos;];T=eye(18,18); %è¾“å‡ºæ ·æœ¬% bpç¥žç»ç½‘ç»œå‚æ•°è®¾ç½®net=newff(minmax(P),[1250,300,18],&#123;&apos;logsig&apos;,&apos;logsig&apos;,&apos;logsig&apos;&#125;,&apos;trainrp&apos;);net.inputWeights&#123;1,1&#125;.initFcn =&apos;randnr&apos;;net.layerWeights&#123;2,1&#125;.initFcn =&apos;randnr&apos;;net.trainparam.epochs=5000;net.trainparam.show=50;%net.trainparam.lr=0.01;net.trainparam.goal=0.000000000001;net=init(net);[net,tr]=train(net,P,T); %è®­ç»ƒæ ·æœ¬% æµ‹è¯•path = &apos;pics/2.jpg&apos;;[PIN0,PIN1,PIN2,PIN3,PIN4,PIN5,PIN6]=blue_main(path);%å­—ç¬¦åˆ†å‰²åŠå¤„ç†% æµ‹è¯•å­—ç¬¦ï¼Œå¾—åˆ°è¯†åˆ«æ•°å€¼PIN0=pretreatment(PIN0);PIN1=pretreatment(PIN1);PIN2=pretreatment(PIN2);PIN3=pretreatment(PIN3);PIN4=pretreatment(PIN4);PIN5=pretreatment(PIN5);PIN6=pretreatment(PIN6);P0=[PIN0&apos;,PIN1&apos;,PIN2&apos;,PIN3&apos;,PIN4&apos;,PIN5&apos;,PIN6&apos;];for i=2:7 T0= sim(net ,P0(:,i)); T1 = compet (T0) ; d = find(T1 == 1) - 1; if (d==10) str=&apos;A&apos;; elseif (d==11) str=&apos;B&apos;; elseif (d==12) str=&apos;C&apos;; elseif (d==13) str=&apos;D&apos;; elseif (d==14) str=&apos;K&apos;; elseif (d==15) str=&apos;M&apos;; elseif (d==16) str=&apos;P&apos;; elseif (d==17) str=&apos;Q&apos;; elseif (d==0) str=&apos;0&apos;; elseif (d==1) str=&apos;1&apos;; elseif (d==2) str=&apos;2&apos;; elseif (d==3) str=&apos;3&apos;; elseif (d==4) str=&apos;4&apos;; elseif (d==5) str=&apos;5&apos;; elseif (d==6) str=&apos;6&apos;; elseif (d==7) str=&apos;7&apos;; elseif (d==8) str=&apos;8&apos;; elseif (d==9) str=&apos;9&apos;; else str=num2str(d); end switch i case 2 str2=str; case 3 str3=str; case 4 str4=str; case 5 str5=str; case 6 str6=str; otherwise str7=str; endend% è¯†åˆ«å‡ºçš„ç»“æžœä»¥æ ‡é¢˜å½¢å¼æ˜¾ç¤ºåœ¨å›¾ä¸ŠS=strcat(&apos;é²&apos;,str2,&apos; &apos;,str3,str4,str5,str6,str7); figure();imshow(imread(path)),title(S); ç»“æžœå‘ˆçŽ°]]></content>
      <categories>
        <category>æ•°å­—å›¾åƒå¤„ç†</category>
      </categories>
      <tags>
        <tag>Matlab</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“èŒƒå¼]]></title>
    <url>%2F2019%2F05%2F22%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[è§„èŒƒåŒ–è¿‡ç¨‹ è¿‡ç¨‹ å½±å“ 1NF â€”â€”-&gt; 2NF æ¶ˆé™¤éžä¸»å±žæ€§å¯¹ç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ– 2NF â€”â€”-&gt; 3NF æ¶ˆé™¤éžä¸»å±žæ€§å¯¹ç çš„ä¼ é€’å‡½æ•°ä¾èµ– 3NF â€”â€”-&gt; BCNF æ¶ˆé™¤ä¸»å±žæ€§å¯¹ç çš„éƒ¨åˆ†ã€ä¼ é€’å‡½æ•°ä¾èµ– BCNFâ€”â€”&gt; 4NF æ¶ˆé™¤éžå¹³å‡¡ä¸”éžå‡½æ•°ä»¥æ¥çš„å¤šå€¼ä¾èµ– 4NF â€”â€”-&gt; 5NF æ¶ˆé™¤è¿žæŽ¥ä¾èµ– èŒƒå¼1NFå®šä¹‰ç¬¦åˆ1NFçš„å…³ç³»ä¸­çš„æ¯ä¸ªå±žæ€§éƒ½ä¸å¯å†åˆ† ä¸æ»¡è¶³1NF ç‰¹ç‚¹1NFæ˜¯æ‰€æœ‰å…³ç³»åž‹æ•°æ®åº“çš„æœ€åŸºæœ¬è¦æ±‚ï¼Œåœ¨å…³ç³»åž‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRDBMSï¼‰ï¼Œä¾‹å¦‚SQL Serverï¼ŒOracleï¼ŒMySQLä¸­åˆ›å»ºæ•°æ®è¡¨çš„æ—¶å€™ï¼Œå¦‚æžœæ•°æ®è¡¨çš„è®¾è®¡ä¸ç¬¦åˆè¿™ä¸ªæœ€åŸºæœ¬çš„è¦æ±‚ï¼Œé‚£ä¹ˆæ“ä½œä¸€å®šæ˜¯ä¸èƒ½æˆåŠŸçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦åœ¨RDBMSä¸­å·²ç»å­˜åœ¨çš„æ•°æ®è¡¨ï¼Œä¸€å®šæ˜¯ç¬¦åˆ1NFçš„ã€‚ ä¿®æ”¹åŽæ»¡è¶³1NFçš„å…³ç³»ï¼š ç¼ºé™· å­¦å· å§“å ç³»å ç³»ä¸»ä»» è¯¾å åˆ†æ•° 101 Tom ç»æµŽ Jack æ•°æ®åº“ 95 101 Tom ç»æµŽ Jack è‹±è¯­ 85 101 Tom ç»æµŽ Jack è¯­æ–‡ 75 102 Jerry ç»æµŽ Jack æ•°æ®åº“ 98 102 Jerry ç»æµŽ Jack è‹±è¯­ 55 102 Jerry ç»æµŽ Jack éŸ³ä¹ 75 103 Pikachu æ³•å¾‹ Rose æ°‘æ³• 85 103 Pikachu æ³•å¾‹ Rose æ•°æ®åº“ 92 æ•°æ®å†—ä½™æ¯ä¸€åå­¦ç”Ÿçš„å­¦å·ã€å§“åã€ç³»åã€ç³»ä¸»ä»»è¿™äº›æ•°æ®é‡å¤å¤šæ¬¡ã€‚æ¯ä¸ªç³»ä¸Žå¯¹åº”çš„ç³»ä¸»ä»»çš„æ•°æ®ä¹Ÿé‡å¤å¤šæ¬¡ æ’å…¥å¼‚å¸¸å‡å¦‚å­¦æ ¡æ–°å»ºäº†ä¸€ä¸ªç³»ï¼Œä½†æ˜¯æš‚æ—¶è¿˜æ²¡æœ‰æ‹›æ”¶ä»»ä½•å­¦ç”Ÿï¼ˆæ¯”å¦‚3æœˆä»½å°±æ–°å»ºäº†ï¼Œä½†è¦ç­‰åˆ°8æœˆä»½æ‰æ‹›ç”Ÿï¼‰ï¼Œé‚£ä¹ˆæ˜¯æ— æ³•å°†ç³»åä¸Žç³»ä¸»ä»»çš„æ•°æ®å•ç‹¬åœ°æ·»åŠ åˆ°æ•°æ®è¡¨ä¸­åŽ»çš„ åˆ é™¤å¼‚å¸¸å‡å¦‚å°†æŸä¸ªç³»ä¸­æ‰€æœ‰å­¦ç”Ÿç›¸å…³çš„è®°å½•éƒ½åˆ é™¤ï¼Œé‚£ä¹ˆæ‰€æœ‰ç³»ä¸Žç³»ä¸»ä»»çš„æ•°æ®ä¹Ÿå°±éšä¹‹æ¶ˆå¤±äº†ï¼ˆä¸€ä¸ªç³»æ‰€æœ‰å­¦ç”Ÿéƒ½æ²¡æœ‰äº†ï¼Œå¹¶ä¸è¡¨ç¤ºè¿™ä¸ªç³»å°±æ²¡æœ‰äº†ï¼‰ ä¿®æ”¹å¤æ‚å‡å¦‚æŽå°æ˜Žè½¬ç³»åˆ°æ³•å¾‹ç³»ï¼Œé‚£ä¹ˆä¸ºäº†ä¿è¯æ•°æ®åº“ä¸­æ•°æ®çš„ä¸€è‡´æ€§ï¼Œéœ€è¦ä¿®æ”¹ä¸‰æ¡è®°å½•ä¸­ç³»ä¸Žç³»ä¸»ä»»çš„æ•°æ® 2NFæ”¹è¿›2NFåœ¨1NFçš„åŸºç¡€ä¹‹ä¸Šï¼Œæ¶ˆé™¤äº†éžä¸»å±žæ€§å¯¹äºŽç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ– æ¦‚å¿µå‡½æ•°ä¾èµ–è‹¥åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œåœ¨å±žæ€§ï¼ˆæˆ–å±žæ€§ç»„ï¼‰Xçš„å€¼ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œå¿…å®šèƒ½ç¡®å®šå±žæ€§Yçš„å€¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´Yå‡½æ•°ä¾èµ–äºŽXï¼Œå†™ä½œ X â†’ Yã€‚ åœ¨æ•°æ®è¡¨ä¸­ï¼Œä¸å­˜åœ¨ä»»æ„ä¸¤æ¡è®°å½•ï¼Œå®ƒä»¬åœ¨Xå±žæ€§ï¼ˆæˆ–å±žæ€§ç»„ï¼‰ä¸Šçš„å€¼ç›¸åŒï¼Œè€Œåœ¨Yå±žæ€§ä¸Šçš„å€¼ä¸åŒã€‚è¿™ä¹Ÿå°±æ˜¯â€œå‡½æ•°ä¾èµ–â€åå­—çš„ç”±æ¥ï¼Œç±»ä¼¼äºŽå‡½æ•°å…³ç³» y = f(x)ï¼Œåœ¨xçš„å€¼ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œyçš„å€¼ä¸€å®šæ˜¯ç¡®å®šçš„ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºŽä¸Šå›¾ä¸­çš„æ•°æ®ï¼Œæ‰¾ä¸åˆ°ä»»ä½•ä¸€æ¡è®°å½•ï¼Œå®ƒä»¬çš„å­¦å·ç›¸åŒè€Œå¯¹åº”çš„å§“åä¸åŒã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´å§“åå‡½æ•°ä¾èµ–äºŽå­¦å·ï¼Œå†™ä½œ å­¦å· â†’ å§“åã€‚ä½†æ˜¯åè¿‡æ¥ï¼Œå› ä¸ºå¯èƒ½å‡ºçŽ°åŒåçš„å­¦ç”Ÿï¼Œæ‰€ä»¥æœ‰å¯èƒ½å­˜åœ¨ä¸åŒçš„ä¸¤æ¡å­¦ç”Ÿè®°å½•ï¼Œå®ƒä»¬åœ¨å§“åä¸Šçš„å€¼ç›¸åŒï¼Œä½†å¯¹åº”çš„å­¦å·ä¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½è¯´å­¦å·å‡½æ•°ä¾èµ–äºŽå§“åã€‚ è¡¨ä¸­å…¶ä»–çš„å‡½æ•°ä¾èµ–å…³ç³»è¿˜æœ‰å¦‚ï¼š ç³»å â†’ ç³»ä¸»ä»» å­¦å· â†’ ç³»ä¸»ä»» ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ â†’ åˆ†æ•° ä½†ä»¥ä¸‹å‡½æ•°ä¾èµ–å…³ç³»åˆ™ä¸æˆç«‹ï¼š å­¦å· â†’ è¯¾å å­¦å· â†’ åˆ†æ•° è¯¾å â†’ ç³»ä¸»ä»» ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ â†’ å§“å å®Œå…¨å‡½æ•°ä¾èµ–åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œè‹¥ X â†’ Yï¼Œä¸”å¯¹äºŽ X çš„ä»»ä½•ä¸€ä¸ªçœŸå­é›†ï¼ˆå‡å¦‚å±žæ€§ç»„ X åŒ…å«è¶…è¿‡ä¸€ä¸ªå±žæ€§çš„è¯ï¼‰ï¼ŒX â€˜ â†’ Y ä¸æˆç«‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§° Y å¯¹äºŽ X å®Œå…¨å‡½æ•°ä¾èµ–ï¼Œè®°ä½œ$X-^F-&gt;Y$ ä¾‹å¦‚ï¼š å­¦å·$-F-&gt;$å§“å ï¼ˆå­¦å·ã€è¯¾åï¼‰$-F-&gt;$åˆ†æ•° éƒ¨åˆ†å‡½æ•°ä¾èµ–å‡å¦‚ Y å‡½æ•°ä¾èµ–äºŽ Xï¼Œä½†åŒæ—¶ Y å¹¶ä¸å®Œå…¨å‡½æ•°ä¾èµ–äºŽ Xï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç§° Y éƒ¨åˆ†å‡½æ•°ä¾èµ–äºŽ Xï¼Œè®°ä½œ X $-P-&gt;$ Y ä¾‹å¦‚ï¼šï¼ˆå­¦å·ã€è¯¾åï¼‰$-P-&gt;$ å§“å ä¼ é€’å‡½æ•°ä¾èµ–å‡å¦‚ Z å‡½æ•°ä¾èµ–äºŽ Yï¼Œä¸” Y å‡½æ•°ä¾èµ–äºŽ X ï¼ˆä¸¥æ ¼æ¥è¯´è¿˜æœ‰ä¸€ä¸ªX ä¸åŒ…å«äºŽYï¼Œä¸” Y ä¸å‡½æ•°ä¾èµ–äºŽZçš„å‰ææ¡ä»¶ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç§° Z ä¼ é€’å‡½æ•°ä¾èµ–äºŽ X ï¼Œè®°ä½œ X $-T-&gt;$ Z ç è®¾ K ä¸ºæŸè¡¨ä¸­çš„ä¸€ä¸ªå±žæ€§æˆ–å±žæ€§ç»„ï¼Œè‹¥é™¤ K ä¹‹å¤–çš„æ‰€æœ‰å±žæ€§éƒ½å®Œå…¨å‡½æ•°ä¾èµ–äºŽ Kï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§° K ä¸ºå€™é€‰ç ï¼Œç®€ç§°ä¸ºç ã€‚åœ¨å®žé™…ä¸­æˆ‘ä»¬é€šå¸¸å¯ä»¥ç†è§£ä¸ºï¼š å‡å¦‚å½“ K ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œè¯¥è¡¨é™¤ K ä¹‹å¤–çš„æ‰€æœ‰å±žæ€§çš„å€¼ä¹Ÿå°±éšä¹‹ç¡®å®šï¼Œé‚£ä¹ˆ K å°±æ˜¯ç ã€‚ä¸€å¼ è¡¨ä¸­å¯ä»¥æœ‰è¶…è¿‡ä¸€ä¸ªç ã€‚ï¼ˆå®žé™…åº”ç”¨ä¸­ä¸ºäº†æ–¹ä¾¿ï¼Œé€šå¸¸é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªç ä½œä¸ºä¸»ç ï¼‰ ä¾‹å¦‚ï¼šï¼ˆå­¦å·ã€è¯¾åï¼‰è¿™ä¸ªå±žæ€§ç»„å°±æ˜¯ç ã€‚è¯¥è¡¨ä¸­æœ‰ä¸”ä»…æœ‰è¿™ä¸€ä¸ªç ã€‚ï¼ˆå‡è®¾æ‰€æœ‰è¯¾æ²¡æœ‰é‡åçš„æƒ…å†µï¼‰ ä¸»å±žæ€§åŒ…å«åœ¨ä»»ä½•ä¸€ä¸ªç ä¸­çš„å±žæ€§æˆä¸ºä¸»å±žæ€§ éžä¸»å±žæ€§é™¤äº†ä¸»å±žæ€§ä¹‹å¤–çš„å±žæ€§ åˆ¤æ–­æ˜¯å¦ä¸º2NFæ ¹æ®2NFçš„å®šä¹‰ï¼Œåˆ¤æ–­çš„ä¾æ®å®žé™…ä¸Šå°±æ˜¯çœ‹æ•°æ®è¡¨ä¸­æ˜¯å¦å­˜åœ¨éžä¸»å±žæ€§å¯¹äºŽç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚ è‹¥å­˜åœ¨ï¼Œåˆ™æ•°æ®è¡¨æœ€é«˜åªç¬¦åˆ1NFçš„è¦æ±‚ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç¬¦åˆ2NFçš„è¦æ±‚ã€‚åˆ¤æ–­çš„æ–¹æ³•æ˜¯ï¼š ç¬¬ä¸€æ­¥ï¼šæ‰¾å‡ºæ•°æ®è¡¨ä¸­æ‰€æœ‰çš„ç ã€‚ ç¬¬äºŒæ­¥ï¼šæ ¹æ®ç¬¬ä¸€æ­¥æ‰€å¾—åˆ°çš„ç ï¼Œæ‰¾å‡ºæ‰€æœ‰çš„ä¸»å±žæ€§ã€‚ ç¬¬ä¸‰æ­¥ï¼šæ•°æ®è¡¨ä¸­ï¼Œé™¤åŽ»æ‰€æœ‰çš„ä¸»å±žæ€§ï¼Œå‰©ä¸‹çš„å°±éƒ½æ˜¯éžä¸»å±žæ€§äº†ã€‚ ç¬¬å››æ­¥ï¼šæŸ¥çœ‹æ˜¯å¦å­˜åœ¨éžä¸»å±žæ€§å¯¹ç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚ æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š ç¬¬ä¸€æ­¥ï¼š æŸ¥çœ‹æ‰€æœ‰æ¯ä¸€å•ä¸ªå±žæ€§ï¼Œå½“å®ƒçš„å€¼ç¡®å®šäº†ï¼Œæ˜¯å¦å‰©ä¸‹çš„æ‰€æœ‰å±žæ€§å€¼éƒ½èƒ½ç¡®å®šã€‚ æŸ¥çœ‹æ‰€æœ‰åŒ…å«æœ‰ä¸¤ä¸ªå±žæ€§çš„å±žæ€§ç»„ï¼Œå½“å®ƒçš„å€¼ç¡®å®šäº†ï¼Œæ˜¯å¦å‰©ä¸‹çš„æ‰€æœ‰å±žæ€§å€¼éƒ½èƒ½ç¡®å®šã€‚ â€¦â€¦ æŸ¥çœ‹æ‰€æœ‰åŒ…å«äº†å…­ä¸ªå±žæ€§ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å±žæ€§çš„å±žæ€§ç»„ï¼Œå½“å®ƒçš„å€¼ç¡®å®šäº†ï¼Œæ˜¯å¦å‰©ä¸‹çš„æ‰€æœ‰å±žæ€§å€¼éƒ½èƒ½ç¡®å®šã€‚ çœ‹èµ·æ¥å¾ˆéº»çƒ¦æ˜¯å§ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªè¯€çªï¼Œå°±æ˜¯å‡å¦‚Aæ˜¯ç ï¼Œé‚£ä¹ˆæ‰€æœ‰åŒ…å«äº†Açš„å±žæ€§ç»„ï¼Œ å¦‚ï¼ˆAï¼ŒBï¼‰ã€ï¼ˆAï¼ŒCï¼‰ã€ï¼ˆAï¼ŒBï¼ŒCï¼‰ç­‰ç­‰ï¼Œéƒ½ä¸æ˜¯ç äº†ï¼ˆå› ä¸ºä½œä¸ºç çš„è¦æ±‚é‡Œæœ‰ä¸€ä¸ªâ€œå®Œå…¨å‡½æ•°ä¾èµ–â€ï¼‰ å…³ç³»å¦‚ä¸‹ï¼š ç¬¬ä¸€æ­¥ï¼š ç åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯ï¼ˆå­¦å·ã€è¯¾åï¼‰ ç¬¬äºŒæ­¥ï¼š ä¸»å±žæ€§æœ‰ä¸¤ä¸ªï¼šå­¦å· ä¸Ž è¯¾å ç¬¬ä¸‰æ­¥ï¼š éžä¸»å±žæ€§æœ‰å››ä¸ªï¼šå§“åã€ç³»åã€ç³»ä¸»ä»»ã€åˆ†æ•° ç¬¬å››æ­¥ï¼š å¯¹äºŽï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ â†’ å§“åï¼Œæœ‰ å­¦å· â†’ å§“åï¼Œå­˜åœ¨éžä¸»å±žæ€§ å§“å å¯¹ç ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚å¯¹äºŽï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ â†’ ç³»åï¼Œæœ‰ å­¦å· â†’ ç³»åï¼Œå­˜åœ¨éžä¸»å±žæ€§ ç³»å å¯¹ç ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚å¯¹äºŽï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ â†’ ç³»ä¸»ä»»ï¼Œæœ‰ å­¦å· â†’ ç³»ä¸»ä»»ï¼Œå­˜åœ¨éžä¸»å±žæ€§ å¯¹ç ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚ æ‰€ä»¥ä¸Šå›¾åªæ»¡è¶³1NFè€Œä¸æ»¡è¶³2NF æ¨¡å¼åˆ†è§£ä¸ºäº†ç¬¦åˆ2NFçš„è¦æ±‚ï¼Œå¿…é¡»æ¶ˆé™¤è¿™äº›éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œåªæœ‰ä¸€ä¸ªåŠžæ³•ï¼Œå°±æ˜¯å°†å¤§æ•°æ®è¡¨æ‹†åˆ†æˆä¸¤ä¸ªæˆ–è€…æ›´å¤šä¸ªæ›´å°çš„æ•°æ®è¡¨ï¼Œåœ¨æ‹†åˆ†çš„è¿‡ç¨‹ä¸­ï¼Œè¦è¾¾åˆ°æ›´é«˜ä¸€çº§èŒƒå¼çš„è¦æ±‚ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšâ€æ¨¡å¼åˆ†è§£â€œã€‚æ¨¡å¼åˆ†è§£çš„æ–¹æ³•ä¸æ˜¯å”¯ä¸€çš„ï¼Œä»¥ä¸‹æ˜¯å…¶ä¸­ä¸€ç§æ–¹æ³•ï¼šé€‰è¯¾ï¼ˆå­¦å·ï¼Œè¯¾åï¼Œåˆ†æ•°ï¼‰å­¦ç”Ÿï¼ˆå­¦å·ï¼Œå§“åï¼Œç³»åï¼Œç³»ä¸»ä»»ï¼‰ éªŒè¯æ¨¡å¼åˆ†è§£åŽæ˜¯å¦æ»¡è¶³2NFï¼šå¯¹äºŽé€‰è¯¾è¡¨ï¼Œå…¶ç æ˜¯ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ï¼Œä¸»å±žæ€§æ˜¯å­¦å·å’Œè¯¾åï¼Œéžä¸»å±žæ€§æ˜¯åˆ†æ•°ï¼Œå­¦å·ç¡®å®šï¼Œå¹¶ä¸èƒ½å”¯ä¸€ç¡®å®šåˆ†æ•°ï¼Œè¯¾åç¡®å®šï¼Œä¹Ÿä¸èƒ½å”¯ä¸€ç¡®å®šåˆ†æ•°ï¼Œæ‰€ä»¥ä¸å­˜åœ¨éžä¸»å±žæ€§åˆ†æ•° å¯¹äºŽç  ï¼ˆå­¦å·ï¼Œè¯¾åï¼‰çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œæ‰€ä»¥æ­¤è¡¨ç¬¦åˆ2NFçš„è¦æ±‚ã€‚ å¯¹äºŽå­¦ç”Ÿè¡¨ï¼Œå…¶ç æ˜¯å­¦å·ï¼Œä¸»å±žæ€§æ˜¯å­¦å·ï¼Œéžä¸»å±žæ€§æ˜¯å§“åã€ç³»åå’Œç³»ä¸»ä»»ï¼Œå› ä¸ºç åªæœ‰ä¸€ä¸ªå±žæ€§ï¼Œæ‰€ä»¥ä¸å¯èƒ½å­˜åœ¨éžä¸»å±žæ€§å¯¹äºŽç  çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œæ‰€ä»¥æ­¤è¡¨ç¬¦åˆ2NFçš„è¦æ±‚ã€‚ æ¨¡å¼åˆ†è§£åŽï¼š å­¦å· è¯¾å åˆ†æ•° 101 æ•°æ®åº“ 95 101 è‹±è¯­ 85 101 è¯­æ–‡ 75 102 æ•°æ®åº“ 98 102 è‹±è¯­ 55 102 éŸ³ä¹ 75 103 æ°‘æ³• 85 103 æ•°æ®åº“ 92 2NF_T2: å­¦å· å§“å ç³»å ç³»ä¸»ä»» 101 Tom ç»æµŽ Jack 102 Jerry ç»æµŽ Jack 103 Pikachu æ³•å¾‹ Rose ç¼ºé™·æ•°æ®å†—ä½™å­¦ç”Ÿçš„å§“åã€ç³»åä¸Žç³»ä¸»ä»»ï¼Œä¸å†åƒä¹‹å‰ä¸€æ ·é‡å¤é‚£ä¹ˆå¤šæ¬¡äº† æ’å…¥å¼‚å¸¸å› ä¸ºå­¦ç”Ÿè¡¨çš„ç æ˜¯å­¦å·ï¼Œä¸èƒ½ä¸ºç©ºï¼Œæ‰€ä»¥æ­¤æ“ä½œä¸è¢«å…è®¸ åˆ é™¤å¼‚å¸¸åˆ é™¤æŸä¸ªç³»ä¸­æ‰€æœ‰çš„å­¦ç”Ÿè®°å½•ï¼Œè¯¥ç³»çš„ä¿¡æ¯ä»ç„¶å…¨éƒ¨ä¸¢å¤± ä¿®æ”¹å¤æ‚æŽå°æ˜Žè½¬ç³»åˆ°æ³•å¾‹ç³»ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€æ¬¡æŽå°æ˜Žå¯¹åº”çš„ç³»çš„å€¼å³å¯ 3NFæ”¹è¿›3NFåœ¨2NFçš„åŸºç¡€ä¹‹ä¸Šï¼Œæ¶ˆé™¤äº†éžä¸»å±žæ€§å¯¹äºŽç çš„ä¼ é€’å‡½æ•°ä¾èµ– åˆ¤æ–­æ˜¯å¦ä¸º3NFå¯¹äºŽé€‰è¯¾è¡¨ï¼Œä¸»ç ä¸ºï¼ˆå­¦å·ï¼Œè¯¾åï¼‰ï¼Œä¸»å±žæ€§ä¸ºå­¦å·å’Œè¯¾åï¼Œéžä¸»å±žæ€§åªæœ‰ä¸€ä¸ªï¼Œä¸ºåˆ†æ•°ï¼Œä¸å¯èƒ½å­˜åœ¨ä¼ é€’å‡½æ•°ä¾èµ–ï¼Œæ‰€ä»¥é€‰è¯¾è¡¨çš„è®¾è®¡ï¼Œç¬¦åˆ3NFçš„è¦æ±‚ã€‚ å¯¹äºŽå­¦ç”Ÿè¡¨ï¼Œä¸»ç ä¸ºå­¦å·ï¼Œä¸»å±žæ€§ä¸ºå­¦å·ï¼Œéžä¸»å±žæ€§ä¸ºå§“åã€ç³»åå’Œç³»ä¸»ä»»ã€‚å› ä¸º å­¦å· â†’ ç³»åï¼ŒåŒæ—¶ ç³»å â†’ ç³»ä¸»ä»»ï¼Œæ‰€ä»¥å­˜åœ¨éžä¸»å±žæ€§ç³»ä¸»ä»»å¯¹äºŽç å­¦å·çš„ä¼ é€’å‡½æ•°ä¾èµ–ï¼Œæ‰€ä»¥å­¦ç”Ÿè¡¨çš„è®¾è®¡ï¼Œä¸ç¬¦åˆ3NFçš„è¦æ±‚ã€‚ æ¨¡å¼åˆ†è§£åˆ†è§£ä¸ºï¼š é€‰è¯¾ï¼ˆå­¦å·ï¼Œè¯¾åï¼Œåˆ†æ•°ï¼‰å­¦ç”Ÿï¼ˆå­¦å·ï¼Œå§“åï¼Œç³»åï¼‰ç³»ï¼ˆç³»åï¼Œç³»ä¸»ä»»ï¼‰ å¯¹äºŽé€‰è¯¾è¡¨ï¼Œç¬¦åˆ3NFçš„è¦æ±‚ å¯¹äºŽå­¦ç”Ÿè¡¨ï¼Œç ä¸ºå­¦å·ï¼Œä¸»å±žæ€§ä¸ºå­¦å·ï¼Œéžä¸»å±žæ€§ä¸ºç³»åï¼Œä¸å¯èƒ½å­˜åœ¨éžä¸»å±žæ€§å¯¹äºŽç çš„ä¼ é€’å‡½æ•°ä¾èµ–ï¼Œæ‰€ä»¥ç¬¦åˆ3NFçš„è¦æ±‚ å¯¹äºŽç³»è¡¨ï¼Œç ä¸ºç³»åï¼Œä¸»å±žæ€§ä¸ºç³»åï¼Œéžä¸»å±žæ€§ä¸ºç³»ä¸»ä»»ï¼Œä¸å¯èƒ½å­˜åœ¨éžä¸»å±žæ€§å¯¹äºŽç çš„ä¼ é€’å‡½æ•°ä¾èµ–ï¼ˆè‡³å°‘è¦æœ‰ä¸‰ä¸ªå±žæ€§æ‰å¯èƒ½å­˜åœ¨ä¼ é€’å‡½æ•°ä¾èµ–å…³ç³»ï¼‰ï¼Œæ‰€ä»¥ç¬¦åˆ3NFçš„è¦æ±‚ å…³ç³»å¦‚ä¸‹ï¼š 3NF_T1: å­¦å· è¯¾å åˆ†æ•° 101 æ•°æ®åº“ 95 101 è‹±è¯­ 85 101 è¯­æ–‡ 75 102 æ•°æ®åº“ 98 102 è‹±è¯­ 55 102 éŸ³ä¹ 75 103 æ°‘æ³• 85 103 æ•°æ®åº“ 92 3NF_T2: å­¦å· å§“å ç³»å 101 Tom ç»æµŽ 102 Jerry ç»æµŽ 103 Pikachu æ³•å¾‹ 3NF_T3: ç³»å ç³»ä¸»ä»» ç»æµŽ Jack ç»æµŽ Jack æ³•å¾‹ Rose ç¼ºé™·æ•°æ®å†—ä½™è¿›ä¸€æ­¥å‡å°‘ æ’å…¥å¼‚å¸¸æ’å…¥ä¸€ä¸ªå°šæ— å­¦ç”Ÿçš„æ–°ç³»çš„ä¿¡æ¯ï¼Œå› ä¸ºç³»è¡¨ä¸Žå­¦ç”Ÿè¡¨ç›®å‰æ˜¯ç‹¬ç«‹çš„ä¸¤å¼ è¡¨ï¼Œæ‰€ä»¥ä¸å½±å“ åˆ é™¤å¼‚å¸¸åˆ é™¤æŸä¸ªç³»ä¸­æ‰€æœ‰çš„å­¦ç”Ÿè®°å½•ï¼Œè¯¥ç³»çš„ä¿¡æ¯ä¸ä¼šä¸¢å¤± ä¿®æ”¹å¤æ‚è¿›ä¸€æ­¥æ”¹å–„ BCNFæ”¹è¿›åœ¨ 3NF çš„åŸºç¡€ä¸Šæ¶ˆé™¤ä¸»å±žæ€§å¯¹äºŽç çš„éƒ¨åˆ†ä¸Žä¼ é€’å‡½æ•°ä¾èµ– è‹¥ï¼š æŸå…¬å¸æœ‰è‹¥å¹²ä¸ªä»“åº“ï¼› æ¯ä¸ªä»“åº“åªèƒ½æœ‰ä¸€åç®¡ç†å‘˜ï¼Œä¸€åç®¡ç†å‘˜åªèƒ½åœ¨ä¸€ä¸ªä»“åº“ä¸­å·¥ä½œï¼› ä¸€ä¸ªä»“åº“ä¸­å¯ä»¥å­˜æ”¾å¤šç§ç‰©å“ï¼Œä¸€ç§ç‰©å“ä¹Ÿå¯ä»¥å­˜æ”¾åœ¨ä¸åŒçš„ä»“åº“ä¸­ã€‚æ¯ç§ç‰©å“åœ¨æ¯ä¸ªä»“åº“ä¸­éƒ½æœ‰å¯¹åº”çš„æ•°é‡ã€‚ é‚£ä¹ˆå…³ç³»æ¨¡å¼ ä»“åº“ï¼ˆä»“åº“åï¼Œç®¡ç†å‘˜ï¼Œç‰©å“åï¼Œæ•°é‡ï¼‰ å±žäºŽå“ªä¸€çº§èŒƒå¼ï¼Ÿ ç­”ï¼š å·²çŸ¥å‡½æ•°ä¾èµ–é›†ï¼šä»“åº“å â†’ ç®¡ç†å‘˜ï¼Œç®¡ç†å‘˜ â†’ ä»“åº“åï¼Œï¼ˆä»“åº“åï¼Œç‰©å“åï¼‰â†’ æ•°é‡ç ï¼šï¼ˆç®¡ç†å‘˜ï¼Œç‰©å“åï¼‰ï¼Œï¼ˆä»“åº“åï¼Œç‰©å“åï¼‰ä¸»å±žæ€§ï¼šä»“åº“åã€ç®¡ç†å‘˜ã€ç‰©å“åéžä¸»å±žæ€§ï¼šæ•°é‡âˆµ ä¸å­˜åœ¨éžä¸»å±žæ€§å¯¹ç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–å’Œä¼ é€’å‡½æ•°ä¾èµ–ã€‚âˆ´ æ­¤å…³ç³»æ¨¡å¼å±žäºŽ3NF ä»“åº“å ç®¡ç†å‘˜ ç‰©å“å æ•°é‡ Shanghai Jack iphoneXXX 30 Shanghai Jack Ipadmini 50 Beijing Rose HuaweiP30 20 Beijing Rose Matebook14 100 æ’å…¥å¼‚å¸¸å¯¹äºŽä¸Šè¡¨ï¼Œå…ˆæ–°å¢žåŠ ä¸€ä¸ªä»“åº“ï¼Œä½†å°šæœªå­˜æ”¾ä»»ä½•ç‰©å“ï¼Œæ˜¯å¦å¯ä»¥ä¸ºè¯¥ä»“åº“æŒ‡æ´¾ç®¡ç†å‘˜ï¼Ÿ â€”â€”ä¸å¯ä»¥ï¼Œå› ä¸ºç‰©å“åä¹Ÿæ˜¯ä¸»å±žæ€§ï¼Œæ ¹æ®å®žä½“å®Œæ•´æ€§çš„è¦æ±‚ï¼Œä¸»å±žæ€§ä¸èƒ½ä¸ºç©º åˆ é™¤å¼‚å¸¸æŸä»“åº“è¢«æ¸…ç©ºåŽï¼Œéœ€è¦åˆ é™¤æ‰€æœ‰ä¸Žè¿™ä¸ªä»“åº“ç›¸å…³çš„ç‰©å“å­˜æ”¾è®°å½•ï¼Œä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ â€”â€”ä»“åº“æœ¬èº«ä¸Žç®¡ç†å‘˜çš„ä¿¡æ¯ä¹Ÿè¢«éšä¹‹åˆ é™¤äº† ä¿®æ”¹å¤æ‚å¦‚æžœæŸä»“åº“æ›´æ¢äº†ç®¡ç†å‘˜ï¼Œä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ â€”â€”è¿™ä¸ªä»“åº“æœ‰å‡ æ¡ç‰©å“å­˜æ”¾è®°å½•ï¼Œå°±è¦ä¿®æ”¹å¤šå°‘æ¬¡ç®¡ç†å‘˜ä¿¡æ¯ æ¨¡å¼åˆ†è§£ä»“åº“ï¼ˆä»“åº“åï¼Œç®¡ç†å‘˜ï¼‰åº“å­˜ï¼ˆä»“åº“åï¼Œç‰©å“åï¼Œæ•°é‡ï¼‰ ä»“åº“å ç®¡ç†å‘˜ Shanghai Jack Beijing Rose ä»“åº“å ç‰©å“å æ•°é‡ Shanghai iphoneXXX 30 Shanghai Ipadmini 50 Beijing HuaweiP30 20 Beijing Matebook14 100 æ•°æ®å†—ä½™æœ‰æ”¹è¿› æ’å…¥å¼‚å¸¸å¯ä»¥å•ç‹¬å¢žåŠ ä»“åº“ åˆ é™¤å¼‚å¸¸å½“åˆ é™¤æŸä¸ªä»“åº“æ‰€æœ‰ç‰©å“æ—¶ï¼Œä»“åº“ä¿¡æ¯å¾—ä»¥ä¿ç•™ ä¿®æ”¹å¤æ‚å½“æŸä¸ªä»“åº“æ›´æ”¹ç®¡ç†å‘˜æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€æ¡æ•°æ®]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>Exp</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¯­è¨€SUMåˆ°æ ˆå¼è®¡ç®—æœºSTACKçš„æœºå™¨è¯­è¨€çš„ç¿»è¯‘]]></title>
    <url>%2F2019%2F05%2F11%2F%E8%AF%AD%E8%A8%80SUM%E5%88%B0%E6%A0%88%E5%BC%8F%E8%AE%A1%E7%AE%97%E6%9C%BASTACK%E7%9A%84%E6%9C%BA%E5%99%A8%E8%AF%AD%E8%A8%80%E7%9A%84%E7%BF%BB%E8%AF%91%2F</url>
    <content type="text"><![CDATA[å®žéªŒå†…å®¹sum.cæ˜¯ç”¨cè¯­è¨€å†™çš„ä»Žsumè¯­è¨€åˆ°æ ˆå¼è®¡ç®—æœºSTACKçš„æœºå™¨è¯­è¨€çš„ç¼–è¯‘å™¨ï¼ˆçœç•¥äº†è¯æ³•è¯­æ³•åˆ†æžéƒ¨åˆ†ï¼‰ã€‚è¯¥ç¨‹åºçš„åŸºæœ¬åŠŸèƒ½æ˜¯å…ˆæž„é€ SUMè¯­è¨€çš„æŸå¥å­çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œç„¶åŽå°†è¯¥è¯­æ³•æ ‘ç¿»è¯‘æˆSTACKçš„æœºå™¨è¯­è¨€ç¨‹åºï¼Œå¹¶æŒ‰é¡ºåºæ‰“å°å‡ºè¯¥æœºå™¨è¯­è¨€ç¨‹åºçš„æŒ‡ä»¤ã€‚ç¨‹åºä¸­æœ‰ä¸¤æ®µå†…å®¹ä¸å®Œæ•´ï¼ˆåœ¨ç¨‹åºä¸­ç”¨TODOè¡¨ç¤ºï¼‰ï¼Œè¯·è¯»æ‡‚å¹¶ç¼–è¯‘é€šè¿‡è¯¥ç¨‹åºï¼Œå†å°†TODOçš„éƒ¨åˆ†è¡¥å……å®Œæ•´ï¼Œå¹¶ç¼–è¯‘é€šè¿‡ã€‚ è¯»æ‡‚ç¨‹åºsum.cå¹¶ç¼–è¯‘é€šè¿‡ã€‚ï¼ˆè¯¥ç¨‹åºå¯ä»¥ä½¿ç”¨gccç¼–è¯‘é€šè¿‡ï¼Œå…¶ä»–ç¼–è¯‘çŽ¯å¢ƒè¯·è‡ªè¡Œè°ƒè¯•ï¼‰ ç”¨ä½ è‡ªå·±å†™çš„ç¨‹åºæ®µæ›¿æ¢ç¨‹åºä¸­çš„TODOéƒ¨åˆ†ï¼Œä½¿ç¨‹åºåŠŸèƒ½ä¸Žå®žéªŒå†…å®¹çš„æè¿°ä¸€è‡´ã€‚ ï¼ˆæ­¤è¦æ±‚ä¸ºé¢å¤–è¦æ±‚ï¼Œä¾›å­¦æœ‰ä½™åŠ›çš„åŒå­¦è‡ªè¡Œé€‰æ‹©ã€‚ï¼‰å°†ç¨‹åºçš„è¾“å…¥æ”¹ä¸ºå¥å­1+(2+3)çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œå°è¯•ç¨‹åºèƒ½å¦è¾“å‡ºæ­£ç¡®çš„ç»“æžœã€‚ å®žéªŒå‚è€ƒ SUMè¯­è¨€ç®€ä»‹ï¼šSUMè¯­è¨€æ˜¯ä¸€ç§æè¿°ç®€å•è¡¨è¾¾å¼çš„è¯­è¨€ï¼Œè¯¥è¯­è¨€åªæœ‰ä¸¤ç§ç»ˆç»“ç¬¦numå’Œ+ï¼Œå…¶ä¸­numè¡¨ç¤ºæ•´åž‹æ•°ï¼Œ+è¡¨ç¤ºåŠ æ³•ã€‚å³è¯¥è¯­è¨€èƒ½è¡¨ç¤ºæ•´åž‹çš„åŠ æ³•è¡¨è¾¾å¼ã€‚åŠ æ³•ä¸ºå·¦ç»“åˆã€‚ è¯­è¨€çš„æ–‡æ³•ä¸ºï¼šE -&gt; num | E+E æ ˆå¼è®¡ç®—æœºSTACKç®€ä»‹ï¼šè¿™ç§æœºå™¨æœ‰ä¸€ä¸ªæ ˆï¼Œèƒ½åšçš„æ“ä½œæœ‰ä¸¤ç§ï¼Œç¬¬ä¸€æ˜¯å‘æ ˆä¸­åŽ‹å…¥ä¸€ä¸ªæ•´åž‹æ•°ï¼Œç¬¬äºŒæ˜¯å°†æ ˆé¡¶çš„ä¸¤ä¸ªæ•´åž‹æ•°å¼¹å‡ºå¹¶åšåŠ æ³•ï¼Œç„¶åŽå°†æ‰€å¾—ç»“æžœåŽ‹å…¥æ ˆä¸­ã€‚ å› æ­¤ï¼Œè¯¥è®¡ç®—æœºçš„æœºå™¨è¯­è¨€åªæœ‰ä¸¤ä¸ªæŒ‡ä»¤ï¼Œä¸€ä¸ºï¼šPUSH nï¼›ï¼ˆå°†æ•´åž‹æ•°nåŽ‹å…¥æ ˆä¸­ï¼‰ï¼›å¦ä¸€ä¸ºï¼šADDï¼›ï¼ˆæ— æ“ä½œæ•°ï¼Œé»˜è®¤å°†æ ˆé¡¶çš„ä¸¤ä¸ªæ•´åž‹æ•°å¼¹å‡ºæ ˆå¹¶ç›¸åŠ ï¼Œå†å°†ç»“æžœåŽ‹å…¥æ ˆä¸­ï¼‰ã€‚ sum.cé‡‡ç”¨çš„ç¿»è¯‘æ–¹æ³•ï¼š SUMè¯­è¨€çš„å¥å­å…ˆå†™æˆæŠ½è±¡è¯­æ³•æ ‘ï¼Œç„¶åŽå¯¹æŠ½è±¡è¯­æ³•æ ‘è¿›è¡ŒåŽç»­éåŽ†ï¼ŒéåŽ†åˆ°æ•´åž‹æ—¶å°±æ‰§è¡ŒPUSHæ“ä½œï¼ŒéåŽ†åˆ°+æ—¶å°±æ‰§è¡ŒADDæ“ä½œã€‚ SUMè¯­è¨€çš„å¥å­ç¿»è¯‘ä¸ºSTACKç¨‹åºçš„ä¾‹å­ï¼š SUMè¯­è¨€çš„å¥å­ï¼š 1+2+3 å¯¹åº”çš„æŠ½è±¡è¯­æ³•æ ‘: 12345 + / \ + 3 / \1 2 ç¿»è¯‘æˆçš„STACKæŒ‡ä»¤ï¼š â€‹ PUSH 1 â€‹ PUSH 2 â€‹ ADD â€‹ PUSH 3 â€‹ ADD å®Œæ•´ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#define TODO() \ do&#123; \ printf ("\nAdd your code here: file \"%s\", line %d\n", \ __FILE__, __LINE__); \ &#125;while(0)///////////////////////////////////////////////// Data structures for the Sum language.enum Exp_Kind_t &#123; EXP_INT, EXP_SUM &#125;;struct Exp_t &#123; enum Exp_Kind_t kind;&#125;;struct Exp_Int &#123; enum Exp_Kind_t kind; int i;&#125;;struct Exp_Sum &#123; enum Exp_Kind_t kind; struct Exp_t *left; struct Exp_t *right;&#125;;// "constructors"struct Exp_t *Exp_Int_new(int i) &#123; struct Exp_Int *p = (struct Exp_Int *)malloc(sizeof(*p)); p-&gt;kind = EXP_INT; p-&gt;i = i; return (struct Exp_t *)p;&#125;struct Exp_t *Exp_Sum_new(struct Exp_t *left, struct Exp_t *right) &#123; struct Exp_Sum *p = (struct Exp_Sum *)malloc(sizeof(*p)); p-&gt;kind = EXP_SUM; p-&gt;left = left; p-&gt;right = right; return (struct Exp_t *)p;&#125;// "printer"void Exp_print(struct Exp_t *exp) &#123; switch ( exp-&gt;kind ) &#123; case EXP_INT: &#123; struct Exp_Int *p = (struct Exp_Int *)exp; printf("%d ", p-&gt;i); break; &#125; case EXP_SUM: &#123; struct Exp_Sum *p = (struct Exp_Sum *)exp; Exp_print(p-&gt;left); printf("+ "); Exp_print(p-&gt;right); break; &#125; default: break; &#125;&#125;//////////////////////////////////////////////// Data structures for the Stack language.enum Stack_Kind_t &#123; STACK_ADD, STACK_PUSH &#125;;struct Stack_t &#123; enum Stack_Kind_t kind;&#125;;struct Stack_Add &#123; enum Stack_Kind_t kind;&#125;;struct Stack_Push &#123; enum Stack_Kind_t kind; int i;&#125;;// "printer"void Stack_print(struct Stack_t *stack) &#123; switch ( stack-&gt;kind ) &#123; case STACK_ADD: &#123; struct Stack_Add *p = (struct Stack_Add *)stack; printf("STACK_ADD\r\n"); break; &#125; case STACK_PUSH: &#123; struct Stack_Push *p = (struct Stack_Push *)stack; printf("STACK_PUSH %d\r\n", p-&gt;i); break; &#125; default: break; &#125;&#125;// "constructors"struct Stack_t *Stack_Add_new() &#123; struct Stack_Add *p = (struct Stack_Add *)malloc(sizeof(*p)); p-&gt;kind = STACK_ADD; return (struct Stack_t *)p;&#125;struct Stack_t *Stack_Push_new(int i) &#123; struct Stack_Push *p = (struct Stack_Push *)malloc(sizeof(*p)); p-&gt;kind = STACK_PUSH; p-&gt;i = i; return (struct Stack_t *)p;&#125;/// instruction liststruct List_t &#123; struct Stack_t *instr; struct List_t *next;&#125;;struct List_t *List_new(struct Stack_t *instr, struct List_t *next) &#123; struct List_t *p = (struct List_t *)malloc(sizeof(*p)); p-&gt;instr = instr; p-&gt;next = next; return p;&#125;// "printer"void List_reverse_print(struct List_t *list) &#123; struct List_t *next = NULL; struct List_t *reverse = NULL; struct List_t *cur = list; while ( cur != NULL ) &#123; next = cur-&gt;next; cur-&gt;next = reverse; reverse = cur; cur = next; &#125; //print printf("\n"); cur = reverse; while ( cur != NULL ) &#123; Stack_print(cur-&gt;instr); cur = cur-&gt;next; &#125;&#125;//////////////////////////////////////////////////// a compiler from Sum to Stackstruct List_t *all = 0;void emit(struct Stack_t *instr) &#123; all = List_new(instr, all);&#125;// ä»ŽæŠ½è±¡è¯­æ³•æ ‘ --&gt; ä¸­é—´è¯­è¨€void compile(struct Exp_t *exp) &#123; switch ( exp-&gt;kind ) &#123; case EXP_INT: &#123; struct Exp_Int *p = (struct Exp_Int *)exp; emit(Stack_Push_new(p-&gt;i)); break; &#125; case EXP_SUM: &#123; struct Exp_Sum *p = (struct Exp_Sum *)exp; compile(p-&gt;left); compile(p-&gt;right); emit(Stack_Add_new()); break; &#125; default: break; &#125;&#125;//////////////////////////////////////////////////// program entryint main() &#123; printf("Compile starting\n"); // build an expression tree: // + // / \ // + 4 // / \ // 2 3 struct Exp_t *exp = Exp_Sum_new(Exp_Sum_new(Exp_Int_new(2) , Exp_Int_new(3)) , Exp_Int_new(4)); // print out this tree: printf("the expression is:\n"); Exp_print(exp); // compile this tree to Stack machine instructions compile(exp); // print out the generated Stack instructons: List_reverse_print(all); printf("\nCompile finished\n"); return 0;&#125; List_reverse_print å’Œ compileçš„case EXP_SUMä¸ºå¡«å……éƒ¨åˆ† å®žéªŒç»“æžœ]]></content>
      <categories>
        <category>ç¼–è¯‘åŽŸç†</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘åŽŸç†</tag>
        <tag>Exp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éªŒè¯Yaccçš„ä½¿ç”¨]]></title>
    <url>%2F2019%2F05%2F11%2F%E9%AA%8C%E8%AF%81Yacc%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[å®žéªŒå†…å®¹ è¾“å…¥ä¸ºä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ï¼Œä»¥æ¢è¡Œç»“æŸã€‚è¾“å‡ºä¸ºè¿™ä¸ªå¸ƒå°”è¡¨è¾¾å¼çš„çœŸå€¼ï¼ˆtrueæˆ–falseï¼‰ã€‚ å°è¯•äºŒä¹‰æ–‡æ³•å’ŒéžäºŒä¹‰æ–‡æ³•ä¸¤ç§ä¸åŒçš„å®žçŽ°æ–¹å¼ã€‚å¸ƒå°”è¡¨è¾¾å¼äºŒä¹‰æ–‡æ³•ä¸ºï¼šS â€“&gt; S or S | S and S | not S | (S) | true | falseï¼Œå…¶ä¸­ä¼˜å…ˆçº§or &lt; and &lt; notï¼Œor å’Œ and å·¦ç»“åˆï¼Œnot å³ç»“åˆã€‚ éžäºŒä¹‰æ–‡æ³•è¯·å‚ç…§è¡¨è¾¾å¼éžäºŒä¹‰æ–‡æ³•è‡ªå·±å†™å‡ºæ¥ã€‚ å®žéªŒè¿‡ç¨‹cal.l12345678910111213141516171819202122232425262728%&#123;#include "cal.tab.h"int yywrap(void)&#123; return 1;&#125;%&#125;delim [ \t ]ws &#123;delim&#125;+digit [0-9]num &#123;digit&#125;+%%0 &#123;return FALSE;&#125;&#123;num&#125; &#123;return TRUE;&#125;"+" &#123;return PLUS;&#125;"-" &#123;return MINUS;&#125;"*" &#123;return TIMES;&#125;"/" &#123;return DIVIDE;&#125;"||" &#123;return OR;&#125;"&amp;&amp;" &#123;return AND;&#125;"!" &#123;return NOT;&#125;"(" &#123;return LPAREN;&#125;")" &#123;return RPAREN;&#125;&#123;ws&#125; &#123;;&#125;"\n" &#123;return ENTER;&#125;. &#123;printf("\nLEX:ERROR! c=%s\n", yytext);&#125; äºŒä¹‰æ–‡æ³•äºŒä¹‰æ–‡æ³•12345678910S â€“&gt; S or S | S and S | not S | (S) | true | falseè¡¨ç¤ºä¸ºï¼šexpr1 : expr1 OR expr1 &#123;$$ = ($1) ? 1 : ($3);&#125; | expr1 AND expr1 &#123;$$ = ($1) ? ($3) : 0;&#125; | NOT expr1 &#123;$$ = ($2) ? 0 : 1;&#125; | TRUE &#123;$$ = 1;&#125; | FALSE &#123;$$ = 0;&#125; ; ä¼˜å…ˆçº§123456%token NUM LPAREN RPAREN ENTER PLUS MINUS TIMES DIVIDE AND OR NOT TRUE FALSE%left OR%left AND%right NOT%left PLUS MINUS%left TIMES DIVIDE cal.y123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657%&#123; #include &lt;ctype.h&gt; #include &lt;stdio.h&gt; int yylex(); int yyerror(char* s); #define YYSTYPE double /* å°†Yaccæ ˆå®šä¹‰ä¸ºdoubleç±»åž‹ */ #define YYDEBUG 1 /* å…è®¸debugæ¨¡å¼ */%&#125;%token NUM LPAREN RPAREN ENTER PLUS MINUS TIMES DIVIDE AND OR NOT TRUE FALSE%left OR%left AND%right NOT%left PLUS MINUS%left TIMES DIVIDE%% /* è¿™æ ·å†™progå¯ä»¥è®©åˆ†æžå™¨æ¯æ¬¡è¯»å…¥ä¸€è¡Œè¿›è¡Œåˆ†æžï¼Œä¸‹ä¸€è¡Œé‡æ–°åˆ†æžexpr */prog : prog expln | expln ;expln : expr ENTER &#123;if($$) printf("true\n");else printf("false\n");&#125; ; expr : expr PLUS term &#123;$$ = $1 + $3;&#125; | expr MINUS term &#123;$$ = $1 - $3;&#125; | term ; term : term TIMES factor &#123;$$ = $1 * $3;&#125; | term DIVIDE factor &#123;$$ = $1 / $3;&#125; | factor ; factor : LPAREN expr RPAREN &#123;$$ = $2;&#125; | MINUS factor &#123;$$ = - $2;&#125; | NUM &#123;$$ = $1;&#125; | expr1 ;expr1 : expr1 OR expr1 &#123;$$ = ($1) ? 1 : ($3);&#125; | expr1 AND expr1 &#123;$$ = ($1) ? ($3) : 0;&#125; | NOT expr1 &#123;$$ = ($2) ? 0 : 1;&#125; | TRUE &#123;$$ = 1;&#125; | FALSE &#123;$$ = 0;&#125; ; %%int main()&#123; // yydebug = 1; yyparse(); return 0;&#125; éžäºŒä¹‰æ–‡æ³•éžäºŒä¹‰æ–‡æ³•12345678910111213141516E -&gt; E OR T | TT -&gt; T AND F | FF -&gt; NOT F | (F) | true | falseexpr1 : expr1 OR expr2 &#123;$$ = ($1) ? 1 : ($3);&#125; | expr2 ;expr2 : expr2 AND expr3 &#123;$$ = ($1) ? ($3) : 0;&#125; | expr3 ;expr3 : NOT expr3 &#123;$$ = ($2) ? 0 : 1;&#125; | TRUE &#123;$$ = 1;&#125; | FALSE &#123;$$ = 0;&#125; ; cal.y123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263%&#123; #include &lt;ctype.h&gt; #include &lt;stdio.h&gt; int yylex(); int yyerror(char* s); #define YYSTYPE double /* å°†Yaccæ ˆå®šä¹‰ä¸ºdoubleç±»åž‹ */ #define YYDEBUG 1 /* å…è®¸debugæ¨¡å¼ */%&#125;%token NUM LPAREN RPAREN ENTER PLUS MINUS TIMES DIVIDE AND OR NOT TRUE FALSE%left OR%left AND%right NOT%left PLUS MINUS%left TIMES DIVIDE%% /* è¿™æ ·å†™progå¯ä»¥è®©åˆ†æžå™¨æ¯æ¬¡è¯»å…¥ä¸€è¡Œè¿›è¡Œåˆ†æžï¼Œä¸‹ä¸€è¡Œé‡æ–°åˆ†æžexpr */prog : prog expln | expln ;expln : expr ENTER &#123;if($$) printf("true\n");else printf("false\n");&#125; ; expr : expr PLUS term &#123;$$ = $1 + $3;&#125; | expr MINUS term &#123;$$ = $1 - $3;&#125; | term ; term : term TIMES factor &#123;$$ = $1 * $3;&#125; | term DIVIDE factor &#123;$$ = $1 / $3;&#125; | factor ; factor : LPAREN expr RPAREN &#123;$$ = $2;&#125; | MINUS factor &#123;$$ = - $2;&#125; | NUM &#123;$$ = $1;&#125; | expr1 ;expr1 : expr1 OR expr2 &#123;$$ = ($1) ? 1 : ($3);&#125; | expr2 ;expr2 : expr2 AND expr3 &#123;$$ = ($1) ? ($3) : 0;&#125; | expr3 ;expr3 : NOT expr3 &#123;$$ = ($2) ? 0 : 1;&#125; | TRUE &#123;$$ = 1;&#125; | FALSE &#123;$$ = 0;&#125; ; %%int main()&#123; // yydebug = 1; yyparse(); return 0;&#125; makefile1234567891011121314151617181920cal3: cal.tab.o lex.yy.o gcc -o cal3 cal.tab.o lex.yy.o -lylex.yy.o: lex.yy.c cal.tab.h gcc -c lex.yy.ccal.tab.o: cal.tab.c gcc -c cal.tab.clex.yy.c: cal.l flex cal.lcal.tab.c: cal.y bison -dv cal.ycal.tab.h: cal.y echo "cal.tab.h was created at the same time as cal.tab.c."clean: rm -f cal3.exe lex.yy.o cal.tab.o lex.yy.c cal.tab.c cal.tab.h cal3.exe.stackdump cal.output å®žéªŒç»“æžœ]]></content>
      <categories>
        <category>ç¼–è¯‘åŽŸç†</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘åŽŸç†</tag>
        <tag>Exp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨Lexè®¾è®¡è¯æ³•åˆ†æžå™¨]]></title>
    <url>%2F2019%2F05%2F11%2F%E7%94%A8Lex%E8%AE%BE%E8%AE%A1%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8%2F</url>
    <content type="text"><![CDATA[å®žéªŒå†…å®¹Exp2ä½¿ç”¨lexä¸ºä¸‹è¿°æ–‡æ³•è¯­è¨€å†™ä¸€ä¸ªè¯æ³•åˆ†æžå™¨ã€‚ &lt;ç¨‹åº&gt; -&gt; PROGRAM &lt;æ ‡è¯†ç¬¦&gt; ; &lt;åˆ†ç¨‹åº&gt;&lt;åˆ†ç¨‹åº&gt; -&gt; &lt;å˜é‡è¯´æ˜Ž&gt; BEGIN &lt;è¯­å¥è¡¨&gt; END.&lt;å˜é‡è¯´æ˜Ž&gt; -&gt; VAR &lt;å˜é‡è¯´æ˜Žè¡¨&gt;;&lt;å˜é‡è¯´æ˜Žè¡¨&gt; -&gt;&lt;å˜é‡è¡¨&gt;: &lt;ç±»åž‹&gt; | &lt;å˜é‡è¡¨&gt;: &lt;ç±»åž‹&gt;; &lt;å˜é‡è¯´æ˜Žè¡¨&gt;&lt;ç±»åž‹&gt;- &gt; INTEGER | REAL&lt;å˜é‡è¡¨&gt; -&gt; &lt;å˜é‡&gt; | &lt;å˜é‡&gt;, &lt;å˜é‡è¡¨&gt;&lt;è¯­å¥è¡¨&gt; -&gt; &lt;è¯­å¥&gt; | &lt;è¯­å¥&gt;; &lt;è¯­å¥è¡¨&gt;&lt;è¯­å¥&gt; -&gt; &lt;èµ‹å€¼è¯­å¥&gt; | &lt;æ¡ä»¶è¯­å¥&gt; | | &lt;å¤åˆè¯­å¥&gt;&lt;èµ‹å€¼è¯­å¥&gt; -&gt; &lt;å˜é‡&gt; := &lt;ç®—æœ¯è¡¨è¾¾å¼&gt;&lt;æ¡ä»¶è¯­å¥&gt; -&gt; IF &lt;å…³ç³»è¡¨è¾¾å¼&gt; THEN &lt;è¯­å¥&gt; ELSE &lt;è¯­å¥&gt; -&gt; WHILE &lt;å…³ç³»è¡¨è¾¾å¼&gt; DO &lt;è¯­å¥&gt;&lt;å¤åˆè¯­å¥&gt; -&gt; BEGIN &lt;è¯­å¥è¡¨&gt; END&lt;ç®—æœ¯è¡¨è¾¾å¼&gt; -&gt; &lt;é¡¹&gt; | &lt;ç®—æœ¯è¡¨è¾¾å¼&gt; + &lt;é¡¹&gt; | &lt;ç®—æœ¯è¡¨è¾¾å¼&gt; - &lt;é¡¹&gt;&lt;é¡¹&gt; -&gt; &lt;å› å¼&gt; | &lt;é¡¹&gt; * &lt;å› å¼&gt; | &lt;é¡¹&gt; / &lt;å› å¼&gt;&lt;å› å¼&gt; -&gt; &lt;å˜é‡&gt; | &lt;å¸¸æ•°&gt; | (&lt;ç®—æœ¯è¡¨è¾¾å¼&gt;)&lt;å…³ç³»è¡¨è¾¾å¼&gt; -&gt; &lt;ç®—æœ¯è¡¨è¾¾å¼&gt; &lt;å…³ç³»ç¬¦&gt; &lt;ç®—æœ¯è¡¨è¾¾å¼&gt;&lt;å˜é‡&gt; -&gt; &lt;æ ‡è¯†ç¬¦&gt;&lt;æ ‡è¯†ç¬¦&gt; -&gt; &lt;æ ‡è¯†ç¬¦&gt;&lt;å­—æ¯&gt; | &lt;æ ‡è¯†ç¬¦&gt;&lt;æ•°å­—&gt; | &lt;å­—æ¯&gt;&lt;å¸¸æ•°&gt; -&gt; &lt;æ•´æ•°&gt; | &lt;æµ®ç‚¹æ•°&gt;&lt;æ•´æ•°&gt; -&gt; &lt;æ•°å­—&gt; | &lt;æ•°å­—&gt; &lt;æ•´æ•°&gt;&lt;æµ®ç‚¹æ•°&gt; -&gt; .&lt;æ•´æ•°&gt; | &lt;æ•´æ•°&gt;.&lt;æ•´æ•°&gt;&lt;å…³ç³»ç¬¦&gt; -&gt; &lt; | &lt;= | = | &gt; | &gt;=| &lt;&gt;&lt;å­—æ¯&gt; -&gt; A | B | â€¦| X | Y | Z | a | b | â€¦| x | y | z&lt;æ•°å­—&gt; -&gt; 0|1|2|â€¦|9 Exp3 è¦æ±‚æ¯æ¬¡è°ƒç”¨è¯æ³•åˆ†æžå‡½æ•°yylexæ—¶ï¼Œåªè¿”å›žä¸€ä¸ªè®°å·(token)ï¼› ä¸ºè®°å·é€‰æ‹©é€‚å½“çš„å±žæ€§å€¼ï¼Œå¹¶ä¸”æ¯æ¬¡è¯æ³•åˆ†æžå‡½æ•°è¿”å›žè®°å·å‰ï¼Œéƒ½å°†è®°å·çš„å±žæ€§å€¼å­˜å…¥å…¨å±€å˜é‡yylvalä¸­ã€‚ï¼ˆyylvalå¯ä»¥è‡ªå·±å®šä¹‰ä¸ºå…¨å±€å˜é‡ï¼‰ï¼› è®°å·å±žæ€§å€¼çš„é€‰æ‹©ï¼šæ ‡è¯†ç¬¦çš„å±žæ€§ä¸ºæ ‡è¯†ç¬¦çš„åå­—å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ï¼Œæ ‡è¯†ç¬¦name1çš„å±žæ€§ä¸ºå­—ç¬¦ä¸²â€name1â€ï¼‰ï¼Œæ•´æ•°çš„å±žæ€§ä¸ºæ•´æ•°å€¼ï¼Œæµ®ç‚¹æ•°çš„å±žæ€§ä¸ºæµ®ç‚¹æ•°å€¼ã€‚å…¶ä»–è®°å·å±žæ€§å€¼å¯è‡ªå·±é€‰æ‹©ã€‚å…³é”®å­—å¯ä»¥çœç•¥å±žæ€§ã€‚ æ³¨æ„ï¼šç”±äºŽå±žæ€§å€¼éœ€è¦å­˜å…¥yylvalä¸­ï¼Œå¹¶ä¸”è®°å·å±žæ€§å€¼çš„ç±»åž‹æ¯”è¾ƒå¤šï¼ˆå¯èƒ½ä¸ºå­—ç¬¦ä¸²ã€æ•´æ•°ã€æµ®ç‚¹æ•°ç­‰ï¼‰ï¼Œå› æ­¤yylvalå¿…é¡»èƒ½åŒæ—¶å­˜æ”¾å„ç§ç±»åž‹çš„å€¼ï¼ˆæç¤ºï¼šå°†yylvalè®¾ç½®ä¸ºunionç±»åž‹ï¼‰ã€‚ åœ¨cygwinä¸‹ç”¨flexå’Œgccå·¥å…·å°†å®žéªŒè°ƒè¯•é€šè¿‡ï¼Œå¹¶èƒ½é€šè¿‡ä¾‹å­parser0ä¸­testcasesç›®å½•ä¸‹çš„test1.pæµ‹è¯•ä¾‹çš„æµ‹è¯•ã€‚ å®žéªŒè¿‡ç¨‹æ·»åŠ è®°å·å12345678910#define PROGRAM 36#define BEGIN1 37#define VAR 38#define THEN 39#define INT 40#define FLOAT 41#define END 42#define REAL 43#define COMMA 44#define COLON 45 æ­£è§„å®šä¹‰12345int &#123;digit&#125;+(E[+-]?&#123;digit&#125;+)?float &#123;digit&#125;*(\.&#123;digit&#125;+)(E[+-]?&#123;digit&#125;+)? allow ((\\\\)|(\\\")|(\\\')|(\\&#123;letter&#125;)|(\\&#123;digit&#125;))*str (&#123;allow&#125;|[^\"\'\n\\])*\"end END|END. å®šä¹‰yylval12345union data&#123; int inum; float fnum; char c[20];&#125;yylval; å®Œæ•´ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203/* æŠŠè®¨åŽŒçš„æ³¨é‡ŠåŽ»æŽ‰ */%&#123;#include &lt;stdio.h&gt; #define LT 1#define LE 2#define GT 3#define GE 4#define EQ 5#define NE 6#define WHILE 18#define DO 19#define ID 20//#define NUMBER 21#define RELOP 22#define NEWLINE 23#define ERRORCHAR 24#define LEFTBRACKET 25#define RIGHTBRACKET 26#define SEMICOLON 27#define ASSIGN 28#define ARITHMETIC 29#define NOTE 30#define IF 31#define ELSE 32#define LEFTBRACES 33#define RIGHTBRACES 34#define STRING 35#define STRERROR 46#define PROGRAM 36#define BEGIN1 37#define VAR 38#define THEN 39#define INT 40#define FLOAT 41#define END 42#define REAL 43#define COMMA 44#define COLON 45union data&#123; int inum; float fnum; char c[20];&#125;yylval;%&#125;underline [_] delim [ \t \n]ws &#123;delim&#125;+letter [A-Za-z]digit [0-9]id &#123;underline&#125;*&#123;letter&#125;(&#123;letter&#125;|&#123;digit&#125;)*int &#123;digit&#125;+(E[+-]?&#123;digit&#125;+)?float &#123;digit&#125;*(\.&#123;digit&#125;+)(E[+-]?&#123;digit&#125;+)? allow ((\\\\)|(\\\")|(\\\')|(\\&#123;letter&#125;)|(\\&#123;digit&#125;))*str (&#123;allow&#125;|[^\"\'\n\\])*\"end END|END./* çŠ¶æ€ï¼ˆæˆ–æ¡ä»¶ï¼‰å®šä¹‰å¯ä»¥å®šä¹‰åœ¨è¿™é‡Œ * INITIALæ˜¯ä¸€ä¸ªé»˜è®¤çš„çŠ¶æ€ï¼Œä¸éœ€è¦å®šä¹‰ */%s COMMENT%s NOTE1%s QUOTE%%&lt;INITIAL&gt;"/*" &#123;BEGIN COMMENT;&#125;&lt;COMMENT&gt;"*/" &#123;BEGIN INITIAL;&#125;&lt;COMMENT&gt;.|\n &#123;;&#125;&lt;INITIAL&gt;"//" &#123;BEGIN NOTE1;&#125;&lt;NOTE1&gt;\n &#123;BEGIN INITIAL;&#125;&lt;NOTE1&gt;. &#123;;&#125;&lt;INITIAL&gt;"\"" &#123;BEGIN QUOTE;&#125;&lt;QUOTE&gt;"\"" &#123;BEGIN INITIAL;&#125;&lt;QUOTE&gt;"\n" &#123;BEGIN INITIAL;&#125;&lt;QUOTE&gt;&#123;str&#125; &#123;BEGIN INITIAL; return (STRING);&#125;&lt;QUOTE&gt;[^\"\n] &#123;;&#125;&lt;INITIAL&gt;&#123;ws&#125; &#123;;&#125;&lt;INITIAL&gt;PROGRAM &#123;return (PROGRAM);&#125;&lt;INITIAL&gt;BEGIN &#123;return (BEGIN1);&#125;&lt;INITIAL&gt;&#123;end&#125; &#123;return (END);&#125;&lt;INITIAL&gt;WHILE &#123;return (WHILE);&#125;&lt;INITIAL&gt;DO &#123;return (DO);&#125;&lt;INITIAL&gt;IF &#123;return (IF);&#125;&lt;INITIAL&gt;THEN &#123;return (THEN);&#125;&lt;INITIAL&gt;ELSE &#123;return (ELSE);&#125;&lt;INITIAL&gt;while &#123;return (WHILE);&#125;&lt;INITIAL&gt;do &#123;return (DO);&#125;&lt;INITIAL&gt;if &#123;return (IF);&#125;&lt;INITIAL&gt;else &#123;return (ELSE);&#125;&lt;INITIAL&gt;then &#123;return (THEN);&#125;&lt;INITIAL&gt;VAR &#123;return (VAR);&#125;&lt;INITIAL&gt;&#123;int&#125; &#123;sscanf(yytext,"%d",&amp;yylval.inum); return (INT);&#125;&lt;INITIAL&gt;&#123;float&#125; &#123;sscanf(yytext,"%f",&amp;yylval.fnum); return (FLOAT);&#125;&lt;INITIAL&gt;REAL &#123;return (REAL);&#125;&lt;INITIAL&gt;&#123;id&#125; &#123;sscanf(yytext,"%s",&amp;yylval.c); return (ID);&#125;&lt;INITIAL&gt;"&lt;" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"&lt;=" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"==" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"!=" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"&gt;" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"&gt;=" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"(" &#123;return (LEFTBRACKET);&#125;&lt;INITIAL&gt;")" &#123;return (RIGHTBRACKET);&#125;&lt;INITIAL&gt;"&#123;" &#123;return (LEFTBRACES);&#125;&lt;INITIAL&gt;"&#125;" &#123;return (RIGHTBRACES);&#125;&lt;INITIAL&gt;";" &#123;return (SEMICOLON);&#125;&lt;INITIAL&gt;"=" &#123;return (ASSIGN);&#125;&lt;INITIAL&gt;":=" &#123;return (ASSIGN);&#125;&lt;INITIAL&gt;":" &#123;return (COLON);&#125;&lt;INITIAL&gt;"+" &#123;return (ARITHMETIC);&#125;&lt;INITIAL&gt;"-" &#123;return (ARITHMETIC);&#125;&lt;INITIAL&gt;"*" &#123;return (ARITHMETIC);&#125;&lt;INITIAL&gt;"/" &#123;return (ARITHMETIC);&#125;&lt;INITIAL&gt;"," &#123;return (COMMA);&#125;&lt;INITIAL&gt;. &#123;return ERRORCHAR;&#125;%%int yywrap ()&#123; return 1;&#125;void writeout(int c)&#123; switch(c)&#123; case ERRORCHAR: fprintf(yyout, "(ERRORCHAR, \"%s\") ", yytext);break; case PROGRAM: fprintf(yyout, "(PROGRAM, \"%s\") ", yytext);break; case BEGIN1: fprintf(yyout, "(BEGIN, \"%s\") ", yytext);break; case END: fprintf(yyout, "(END, \"%s\") ", yytext);break; case IF: fprintf(yyout, "(IF, \"%s\") ", yytext);break; case THEN: fprintf(yyout, "(THEN, \"%s\") ", yytext);break; case ELSE: fprintf(yyout, "(ELSE, \"%s\") ", yytext);break; case VAR: fprintf(yyout, "(VAR, \"%s\") ", yytext);break; case INT: fprintf(yyout, "(INT, \"%s\") ", yytext);break; case FLOAT: fprintf(yyout, "(FLOAT, \"%s\") ", yytext);break; case REAL: fprintf(yyout, "(REAL, \"%s\") ", yytext);break; case COMMA: fprintf(yyout, "(COMMA, \"%s\") ", yytext);break; case COLON: fprintf(yyout, "(COLON, \"%s\") ", yytext);break; case RELOP: fprintf(yyout, "(RELOP, \"%s\") ", yytext);break; case WHILE: fprintf(yyout, "(WHILE, \"%s\") ", yytext);break; case DO: fprintf(yyout, "(DO, \"%s\") ", yytext);break; case ID: fprintf(yyout, "(ID, \"%s\") ", yytext);break; case LEFTBRACKET: fprintf(yyout, "(LEFTBRACKET, \"%s\") ", yytext);break; case RIGHTBRACKET: fprintf(yyout, "(RIGHTBRACKET, \"%s\") ", yytext);break; case LEFTBRACES: fprintf(yyout, "(LEFTBRACES, \"%s\") ", yytext);break; case RIGHTBRACES: fprintf(yyout, "(RIGHTBRACES, \"%s\") ", yytext);break; case SEMICOLON: fprintf(yyout, "(SEMICOLON, \"%s\") ", yytext);break; case ASSIGN: fprintf(yyout, "(ASSIGN, \"%s\") ", yytext);break; case ARITHMETIC: fprintf(yyout, "(ARITHMETIC, \"%s\") ", yytext);break; case NOTE: fprintf(yyout, "(NOTE, \"%s\") ", yytext);break; case NEWLINE: fprintf(yyout, "\n");break; case STRING: fprintf(yyout, "(STRING, \"%s\") ", yytext);break; default:break; &#125; return;&#125;int main (int argc, char ** argv)&#123; int c,j=0; if (argc&gt;=2)&#123; if ((yyin = fopen(argv[1], "r")) == NULL)&#123; printf("Can't open file %s\n", argv[1]); return 1; &#125; if (argc&gt;=3)&#123; yyout=fopen(argv[2], "w"); &#125; &#125; while (c = yylex())&#123; writeout(c); j++; if (j%5 == 0) writeout(NEWLINE); &#125; if(argc&gt;=2)&#123; fclose(yyin); if (argc&gt;=3) fclose(yyout); &#125; return 0;&#125; å®žéªŒç»“æžœæµ‹è¯•æ ·ä¾‹ è¿è¡Œç»“æžœ]]></content>
      <categories>
        <category>ç¼–è¯‘åŽŸç†</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘åŽŸç†</tag>
        <tag>Exp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CygwinçŽ¯å¢ƒçš„ç†Ÿæ‚‰å’Œlexçš„ä½¿ç”¨1]]></title>
    <url>%2F2019%2F05%2F11%2FCygwin%E7%8E%AF%E5%A2%83%E7%9A%84%E7%86%9F%E6%82%89%E5%92%8Clex%E7%9A%84%E4%BD%BF%E7%94%A81%2F</url>
    <content type="text"><![CDATA[å®žéªŒå†…å®¹Exp1è¯»æ‡‚exam1.lå’Œexam2.lä¸¤ä¸ªä¾‹å­ï¼Œä½¿ç”¨cygwinä¸‹çš„flexå·¥å…·å°†exam1.lå’Œexam2.lç¼–è¯‘å¹¶è°ƒè¯•é€šè¿‡ã€‚å¹¶ä¸”ä¿®æ”¹exam2.lï¼Œåœ¨å…¶åŸºç¡€ä¸Šå¢žåŠ å¦‚ä¸‹è®°å·ï¼š å·¦å³å¤§å°æ‹¬å·ï¼š{ } ( ) å°†å…³ç³»ç®—ç¬¦æ”¹å†™æˆCä¸­çš„å½¢å¼ åˆ†å·ã€èµ‹å€¼å·ï¼š; = å…³é”®å­—ï¼šif else åŒæ–œçº¿è¡¨ç¤ºçš„æ³¨é‡Šï¼š// ç®—æœ¯è¿ç®—ç¬¦å·ï¼š+ - * / å°†æ ‡è¯†ç¬¦æ”¹ä¸ºå¯å«æœ‰ä¸‹åˆ’çº¿ï¼Œå¹¶ä¸”å¯ä»¥ä»¥ä¸‹åˆ’çº¿å¼€å¤´ å°†æ³¨é‡Šå†…å®¹å¿½ç•¥ Exp e1åœ¨å®žéªŒ1æ‰€æ”¹å†™çš„ç¨‹åºçš„åŸºç¡€ä¸Šå¢žåŠ è¯†åˆ«stringè®°å·ã€‚stringæ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æžœâ€å‡ºçŽ°åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œåˆ™å¿…é¡»è½¬ä¹‰ï¼Œå†™æˆ\â€å½¢å¼ï¼›å¦‚æžœ\å‡ºçŽ°åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œä¹Ÿå¿…é¡»è½¬ä¹‰ï¼Œå†™æˆ\å½¢å¼ã€‚ åœ¨cygwinä¸‹ç”¨flexå’Œgccå·¥å…·å°†å®žéªŒè°ƒè¯•é€šè¿‡ï¼Œå¹¶å†™å‡ºæµ‹è¯•ä¾‹æµ‹è¯•æ­£ç¡®æ€§ã€‚åŒæ—¶è¯¥å®žéªŒå¿…é¡»æ»¡è¶³å¦‚ä¸‹è¦æ±‚ï¼š stringæ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯ä»¥åŒå¼•å·æ‹¬èµ·çš„ä¸€ä¸²å­—ç¬¦ã€‚ åŒå¼•å·å†…çš„å­—ç¬¦æœ‰å¦‚ä¸‹è¦æ±‚ï¼š ä¸èƒ½åŒ…å«å•ç‹¬çš„â€æˆ–è€…\ï¼Œé™¤éžç”¨\è¿›è¡Œè½¬ä¹‰ã€‚ä¾‹å¦‚å­—ç¬¦ä¸²å†…çš„â€å†™æˆ\â€ï¼Œè€Œ\å†™æˆ\ã€‚ å­—ç¬¦ä¸²å†…å¯ä»¥å‡ºçŽ°è½¬ä¹‰å­—ç¬¦ã€‚è½¬ä¹‰å­—ç¬¦å¯ç®€åŒ–è¡¨ç¤ºä¸º\cï¼Œå…¶ä¸­cä¸ºä»»æ„å­—æ¯æˆ–(åæ–œæ ),â€ï¼ˆåŒå¼•å·ï¼‰,â€™ï¼ˆå•å¼•å·ï¼‰ä¸‰ä¸ªç¬¦å·ä¸­çš„ä¸€ä¸ªã€‚ å­—ç¬¦ä¸²å†…ä¸å¯åŒ…å«å®žä½“çš„æ¢è¡Œã€‚ï¼ˆå¯ä»¥åŒ…å«\nï¼Œä½†æ˜¯å¦‚æžœä¸¤ä¸ªâ€œâ€ä¸­çš„å­—ç¬¦ä¸²å‡ºçŽ°åœ¨ä¸¤è¡Œä¸­ï¼Œå³åŒ…å«äº†å®žä½“æ¢è¡Œï¼Œåˆ™ä¸åº”è¯†åˆ«ä¸ºå­—ç¬¦ä¸²ï¼‰ å®žéªŒè¿‡ç¨‹Exp1æ·»åŠ è®°å·å12345678910111213#define NEWLINE 23#define ERRORCHAR 24#define LEFTBRACKET 25 //bracket ä¸ºå°æ‹¬å· ï¼š ï¼ˆï¼‰#define RIGHTBRACKET 26#define SEMICOLON 27 //åˆ†å·#define ASSIGN 28 //èµ‹å€¼#define ARITHMETIC 29 //ç®—æœ¯#define NOTE 30 æ³¨é‡Š#define IF 31#define ELSE 32#define LEFTBRACES 33 //braces ä¸ºå¤§æ‹¬å· ï¼š &#123; &#125;#define RIGHTBRACES 34 å®šä¹‰åŠ¨ä½œ123456789101112131415161718&lt;INITIAL&gt;"&lt;" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"&lt;=" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"==" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"!=" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"&gt;" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"&gt;=" &#123;return (RELOP);&#125;&lt;INITIAL&gt;"(" &#123;return (LEFTBRACKET);&#125;&lt;INITIAL&gt;")" &#123;return (RIGHTBRACKET);&#125;&lt;INITIAL&gt;"&#123;" &#123;return (LEFTBRACES);&#125;&lt;INITIAL&gt;"&#125;" &#123;return (RIGHTBRACES);&#125;&lt;INITIAL&gt;";" &#123;return (SEMICOLON);&#125;&lt;INITIAL&gt;"=" &#123;return (ASSIGN);&#125;&lt;INITIAL&gt;"+" &#123;return (ARITHMETIC);&#125;&lt;INITIAL&gt;"-" &#123;return (ARITHMETIC);&#125;&lt;INITIAL&gt;"*" &#123;return (ARITHMETIC);&#125;&lt;INITIAL&gt;"/" &#123;return (ARITHMETIC);&#125;&lt;INITIAL&gt;. &#123;return ERRORCHAR;&#125; æ›´æ”¹writeoutå‡½æ•°1234567891011121314151617181920212223void writeout(int c)&#123; switch(c)&#123; case ERRORCHAR: fprintf(yyout, "(ERRORCHAR, \"%s\") ", yytext);break; case RELOP: fprintf(yyout, "(RELOP, \"%s\") ", yytext);break; case WHILE: fprintf(yyout, "(WHILE, \"%s\") ", yytext);break; case DO: fprintf(yyout, "(DO, \"%s\") ", yytext);break; case NUMBER: fprintf(yyout, "(NUM, \"%s\") ", yytext);break; case ID: fprintf(yyout, "(ID, \"%s\") ", yytext);break; case LEFTBRACKET: fprintf(yyout, "(LEFTBRACKET, \"%s\") ", yytext);break; case RIGHTBRACKET: fprintf(yyout, "(RIGHTBRACKET, \"%s\") ", yytext);break; case LEFTBRACES: fprintf(yyout, "(LEFTBRACES, \"%s\") ", yytext);break; case RIGHTBRACES: fprintf(yyout, "(RIGHTBRACES, \"%s\") ", yytext);break; case SEMICOLON: fprintf(yyout, "(SEMICOLON, \"%s\") ", yytext);break; case ASSIGN: fprintf(yyout, "(ASSIGN, \"%s\") ", yytext);break; case ARITHMETIC: fprintf(yyout, "(ARITHMETIC, \"%s\") ", yytext);break; case NOTE: fprintf(yyout, "(NOTE, \"%s\") ", yytext);break; case IF: fprintf(yyout, "(IF, \"%s\") ", yytext);break; case ELSE: fprintf(yyout, "(ELSE, \"%s\") ", yytext);break; case NEWLINE: fprintf(yyout, "\n");break; default:break; &#125; return;&#125; Exp e1å¢žåŠ Stringè®°å·12#define STRING 35#define STRERROR 36 è¿›è¡Œæ­£è§„å®šä¹‰12allow ((\\\\)|(\\\")|(\\\')|(\\&#123;letter&#125;)|(\\&#123;digit&#125;))*str (&#123;allow&#125;|[^\"\'\n\\])*\" å¢žåŠ å¼•ç”¨çŠ¶æ€12345&lt;INITIAL&gt;"\"" &#123;BEGIN QUOTE;&#125;&lt;QUOTE&gt;"\"" &#123;BEGIN INITIAL;&#125;&lt;QUOTE&gt;"\n" &#123;BEGIN INITIAL;&#125;&lt;QUOTE&gt;&#123;str&#125; &#123;BEGIN INITIAL; return (STRING);&#125;&lt;QUOTE&gt;[^\"\n] &#123;;&#125; QUOTEçŠ¶æ€ä»¥åŒå¼•å·å¼€å§‹ï¼ŒåŒå¼•å·ç»“æŸï¼Œå½“åŒ¹é…åˆ°é™¤å­—ç¬¦ä¸²strå’Œå•å¼•å·ã€å›žè½¦ä¹‹å¤–çš„ä»»æ„å­—ç¬¦ï¼Œè¿”å›žERRORCHAR å½“QUOTEçŠ¶æ€ä¸‹ï¼Œé‡åˆ°å›žè½¦åˆ™è¿›å…¥INITIALçŠ¶æ€ å®žéªŒç»“æžœç¼–è¯‘è¿è¡Œ123flex exam2.lettergcc lex.yy.c -lfl./a.out test2.p å¯¹äºŽä¸æ»¡è¶³stringæ¡ä»¶çš„STRERRORç›´æŽ¥ä¸è¾“å‡º å¯¹äºŽstring6 , åœ¨æœ¬åˆ†æžå™¨ä¸­å½“é‡åˆ°ç¬¬ä¸€ä¸ªåŒå¼•å·æ—¶ï¼Œè¿›å…¥QUOTEçŠ¶æ€ï¼Œä¹‹åŽstring6â€è¢«è¯†åˆ«ä¸ºstrç±»åž‹ï¼Œä½†è™½ç„¶strä»¥åŒå¼•å·ç»“å°¾ï¼Œä½†ä¸å°†åŒå¼•å·ä½œä¸ºå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œï¼ˆå¦‚æžœstring6â€è¢«ä½œä¸ºå­—ç¬¦ä¸²çš„è¯ï¼Œstring6â€â€åº”è¯¥è¢«è¯†åˆ«ä¸ºstrç±»åž‹ï¼‰ ä¹‹åŽï¼ŒQUOTEçŠ¶æ€ç»“æŸï¼Œé‡åˆ°åŒå¼•å·åˆè¿›å…¥QUOTEçŠ¶æ€ï¼Œé‡åˆ°å›žè½¦ï¼Œç»“æŸQUOTEçŠ¶æ€ å¯¹äºŽstring2 ï¼Œ string3: â€‹ allow ((\\\\)|(\\\&quot;)|(\\\&#39;)|(\\{letter})|(\\{digit}))* â€‹ â€œ \ â€ã€â€œ \â€ â€å±žäºŽallowèŒƒå›´ï¼Œå› æ­¤åŒ…å«åœ¨å­—ç¬¦ä¸²å†… å¯¹äºŽstring4: â€œ\n \â€™ \0 \aâ€å‡å±žäºŽallowèŒƒå›´ï¼ŒåŒ…å«åœ¨å­—ç¬¦ä¸²å†… å¯¹äºŽstring5ï¼Œstring7ï¼Œstringï¼Œ8ï¼Œæ²¡æœ‰åŒ¹é…åˆ°åˆé€‚çš„strç±»åž‹ï¼Œå› æ­¤åŒ¹é…åˆ°çš„STRERRORç±»åž‹ä¸è¾“å‡ºï¼Œæœ€åŽä¸ä¼šæœ‰è¾“å‡ºç»“æžœ]]></content>
      <categories>
        <category>ç¼–è¯‘åŽŸç†</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘åŽŸç†</tag>
        <tag>Exp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åšå®¢æ­å»º]]></title>
    <url>%2F2019%2F04%2F08%2F%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[æ–°å»ºä»“åº“æ–°å»ºåä¸º yourgithubname.github.io çš„ä»“åº“ Git Nodejsç›´æŽ¥å®˜ç½‘å®‰è£… Git ã€Nodejs é…ç½®SSH-KEYssh-keygen -t rsa -C &quot;é‚®ä»¶åœ°å€&quot; è¿žç»­ä¸‰æ¬¡å›žè½¦ï¼Œä¼šç”Ÿæˆkeyåœ¨ç”¨æˆ·æ–‡ä»¶ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°.ssh\id_rsa.pubæ–‡ä»¶ï¼Œè®°äº‹æœ¬æ‰“å¼€å¹¶å¤åˆ¶é‡Œé¢çš„å†…å®¹ï¼Œæ‰“å¼€ä½ çš„ githubä¸»é¡µï¼Œè¿›å…¥ä¸ªäººè®¾ç½® -&gt; SSH and GPG keys -&gt; New SSH keyï¼š $ git config --global user.name &quot;liuxianan&quot;// ä½ çš„githubç”¨æˆ·åï¼Œéžæ˜µç§°$ git config --global user.email &quot;xxx@qq.com&quot;// å¡«å†™ä½ çš„githubæ³¨å†Œé‚®ç®± æµ‹è¯•KEY$ ssh -T git@github.com é‚®ç®±åœ°å€ä¸ç”¨æ¢ å¦‚æžœçœ‹åˆ° Hi XX! You&#39;ve successfully authenticated, but GitHub does not provide shell access. è¯æ˜Žå·²ç»æˆåŠŸ Host key verification failedå¦‚æžœæç¤º Host key verification failed ï¼Œ è¾“å…¥ ssh-keyscan -H github.com &gt;&gt; ~/.ssh/known_hosts ä¹‹åŽé‡æ–°æµ‹è¯• npm install hexoå®‰è£…hexo]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°å­—å›¾åƒå¤„ç†-å›¾åƒåˆæˆ]]></title>
    <url>%2F2019%2F03%2F28%2F%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86-%E5%9B%BE%E5%83%8F%E5%90%88%E6%88%90%2F</url>
    <content type="text"><![CDATA[å›¾åƒåˆ†å‰²é€‰æ‹©ç‰¹å®šæ‹“å±•å12345678img_path = &apos;pics/&apos;;ext = &#123;&apos;*.jpeg&apos;,&apos;*.jpg&apos;,&apos;*.png&apos;&#125;;img_list = [];for i = 1:numel(ext) img_list = [img_list ; dir(fullfile(img_path,ext&#123;i&#125;))];endimg_num = length(img_list); è½¬æ¢ä¸ºç‰¹å®šå°ºå¯¸çš„ç°åº¦å›¾åƒ1234567891011if img_num &gt; 0 for j = 1 : img_num img_name = img_list(j).name; img = imread(strcat(img_path,img_name)); img = imresize(img,[640 480]); G = rgb2gray(img); strname = strsplit(img_name,&apos;.&apos;); name = strname&#123;1,1&#125;; imwrite(G , strcat(img_path, name , &apos;.gif&apos;)); endend æ±‚ç´ æå›¾ç‰‡çš„RGBå¹³å‡å€¼123456789101112131415161718192021SIZE = 5;img_RGB = zeros(img_num,SIZE,SIZE,3);average_rgb = zeros(img_num,3);if img_num &gt; 0 for j = 1:img_num img_name = img_list(j).name; img = imread(strcat(img_path,img_name)); img = imresize(img,[SIZE SIZE]); img_RGB(j,:,:,:) = img; R = img(:,:,1); G = img(:,:,2); B = img(:,:,3); average_rgb(j,1)=mean(mean(R)); average_rgb(j,2)=mean(mean(G)); average_rgb(j,3)=mean(mean(B)); endend æ›¿æ¢ä¸ºç´ æå›¾ç‰‡123456789101112131415161718192021222324252627original_Img = (&apos;original.png&apos;);Image_size = size(original_Img);Image_RGB = zeros(Image_size(1),Image_size(2),3);Image_RGB = original_Img(:,:,:);for row = 1 : SIZE :Image_size(1)-SIZE for col = 1 : SIZE :Image_size(2)-SIZE rgb_mean = zeros(3); for k = 1:3 temp = original_Img(row:row+SIZE-1 ,col:col+SIZE-1,k); rgb_mean(k) = mean(mean(temp)); end deviation = zeros(1,img_num); for k = 1:img_num deviation(k) = abs(average_rgb(k,1) - rgb_mean(1)) + abs(average_rgb(k,2) - rgb_mean(2)) + abs(average_rgb(k,3) - rgb_mean(3)); æ±‚ç›®æ ‡åŒºåŸŸä¸Žæ¯ä¸€ä¸ªç´ æå›¾ç‰‡çš„RGBè¯¯å·® end [min_value,min_position] = min(deviation); %å¾—åˆ°æœ€å°å€¼ä¸‹æ ‡ Image_RGB(row:row+SIZE-1 ,col:col+SIZE-1,:) = img_RGB(min_position,:,:,:); endendImage_RGB = uint8(Image_RGB);imwrite(Image_RGB,&apos;0.jpg&apos;); å®žéªŒç»“æžœç´ æå›¾ç‰‡ original pic After]]></content>
      <categories>
        <category>æ•°å­—å›¾åƒå¤„ç†</category>
      </categories>
      <tags>
        <tag>Matlab</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AI-02æ·±åº¦å­¦ä¹ æ¦‚è¿°]]></title>
    <url>%2F2019%2F03%2F04%2FAI-02%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[M-Pç¥žç»å…ƒ ä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•° æ¿€æ´»å‡½æ•°ä¸¾ä¾‹ æƒé‡äººå·¥è®¾ç½®m-pç¥žç»å…ƒçš„æƒé‡ç”±äººå·¥è®¾ç½®ï¼Œæ— æ³•å­¦ä¹  å•å±‚æ„ŸçŸ¥å™¨é¦–ä¸ªå¯ä»¥å­¦ä¹ çš„ç¥žç»ç½‘ç»œ é€»è¾‘å®žçŽ° å¤šå±‚æ„ŸçŸ¥å™¨å¼‚æˆ– å•å±‚æ„ŸçŸ¥å™¨ï¼Œæ— æ³•å®žçŽ°å¼‚æˆ–å…³ç³»ï¼Œæ— æ³•æ‰¾åˆ°ä¸€æ¡çº¿å®Œç¾Žåˆ†å¼€æ•°æ®ï¼ˆ0ã€1ï¼‰ åŒæˆ–ä¸‰å±‚æ„ŸçŸ¥æœºå®žçŽ°åŒæˆ–å…³ç³» å•éšå±‚ç¥žç»ç½‘ç»œå¯è§†åŒ–urlhttp://playground.tensorflow.org/ ä¸‡æœ‰é€¼è¿‘å®šç† åŒéšå±‚æ„ŸçŸ¥å™¨ ç¥žç»ç½‘ç»œæ¯ä¸€å±‚ä½œç”¨ æ›´æ·± or æ›´å®½ è¯¯å·®åå‘ä¼ æ’­åœ¨è®­ç»ƒç¥žç»ç½‘ç»œçš„è¿‡ç¨‹ä¸­ï¼Œå„ä¸ªç¥žç»å…ƒçš„æƒé‡æ˜¯é€šè¿‡è¯¯å·®çš„åå‘ä¼ æ’­ç¡®å®šçš„ï¼Œæ›´æ–°æƒé‡æ—¶ï¼Œæƒé‡æ²¿ç€è¯¯å·®å‡½æ•°æ¢¯åº¦ä¸‹é™æ–¹å‘æ”¹å˜ï¼Œä½¿è¯¯å·®ä¸‹é™æœ€å¿«ã€‚ å¯¹äºŽæ•´ä¸ªç¥žç»ç½‘ç»œæœ€åŽçš„è¯¯å·®æ¥è¯´ï¼Œæ¯ä¸€ä¸ªç¥žç»å…ƒå¯¹äºŽè¯¯å·®åšå‡ºçš„è´¡çŒ®ä¸åŒï¼Œå¦‚æžœæ¿€æ´»å‡½æ•°é€‰æ‹©sigmoidå‡½æ•°çš„è¯ï¼Œè¾“å‡ºå±‚å’Œéšå±‚ç¥žç»å…ƒçš„è´£ä»»å¦‚å›¾ï¼Œè®¡ç®—å‡ºæ¯ä¸ªç¥žç»å…ƒçš„è´£ä»»å°±å¯ä»¥å°†ç»“æžœå¸¦å…¥æƒé‡çš„æ›´æ–°å…¬å¼ï¼Œæ¥è°ƒæ•´æƒé‡ã€‚ç”±äºŽæ•´ä¸ªè®¡ç®—è¿‡ç¨‹æ˜¯ä»Žè¾“å‡ºå±‚å¼€å§‹ï¼Œåå‘è®¡ç®—ï¼Œæ‰€ä»¥ä¹Ÿå«åšè¯¯å·®çš„åå‘ä¼ æ’­ã€‚ æ¢¯åº¦æ¶ˆå¤±åå‘ä¼ æ’­æ˜¯è¯¯å·®æ²¿ç€æ¢¯åº¦æ–¹å‘åå‘ä¼ æ’­ï¼Œæ±‚åå¯¼çš„è¿‡ç¨‹ä¸­è¦è®¡ç®—æ¿€æ´»å‡½æ•°çš„å¯¼æ•° å¦‚æžœæ¿€æ´»å‡½æ•°é€‰æ‹©sigmoidå‡½æ•°çš„è¯ï¼Œé‚£ä¹ˆå‡½æ•°çš„å¯¼æ•°å€¼æœ€å¤§ä»…ä¸º4åˆ†ä¹‹1ï¼Œåœ¨1/2å¤„å–å¾—ï¼Œä½†å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå‡½æ•°å€¼ä¼šè½å…¥é¥±å’ŒåŒºï¼Œå³sigmoidå‡½æ•°ä¸Šä¸‹å¹³æ»‘çš„éƒ¨åˆ†ï¼Œè¿™äº›åœ°æ–¹çš„å¯¼æ•°å€¼å¯èƒ½ä¼šå¾ˆå°å¾ˆå°ã€‚è€Œä¸”è¿™ä»…ä¸ºä¸€å±‚ç½‘ç»œï¼Œå¦‚æžœæ˜¯å¤šå±‚ç½‘ç»œçš„è¯ï¼Œè¿™ä¸ªåå¯¼å€¼å°±ä¼šéžå¸¸å°ï¼Œè¯¯å·®åœ¨åå‘ä¼ æ’­çš„è¿‡ç¨‹ä¸­å°±ä¼šæ¶ˆå¤±ï¼Œæœ€åŽçš„ç»“æžœå¯èƒ½æ˜¯åªæ”¹å˜äº†è¾“å‡ºå±‚çš„æƒé‡ï¼Œè€Œå‰é¢çš„ç½‘ç»œæƒé‡éƒ½æ²¡æœ‰æ›´æ–°ã€‚ é€å±‚é¢„è®­ç»ƒ å¤šå±‚ç¥žç»ç½‘ç»œå¯èƒ½å‡ºçŽ°çš„ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€æ˜¯å±€éƒ¨æžå°å€¼ï¼Œåˆå§‹å€¼é€‰å–ä¸åŒï¼Œå¯èƒ½ä¼šå¯¼è‡´ç½‘ç»œæ”¶æ•›åˆ°å±€éƒ¨æžå°å€¼ç‚¹ï¼Œéšç€ç¥žç»ç½‘ç»œéšå±‚çš„å¢žå¤šï¼Œå±€éƒ¨æžå°å€¼çš„æ•°é‡ä¼šæˆå€å¢žåŠ ã€‚äºŒå°±æ˜¯æ¢¯åº¦æ¶ˆå¤±ã€‚ è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜çš„ä¸€ä¸ªé€”å¾„å°±æ˜¯é€šè¿‡é€å±‚é¢„è®­ç»ƒè¿›è¡Œå‚æ•°çš„åˆå§‹åŒ–ï¼Œå¦‚æžœå‚æ•°çš„åˆå§‹å€¼é€‰å–å¾—å½“ï¼Œé‚£ä¹ˆç½‘ç»œå°±ä¼šæ”¶æ•›åˆ°å…¨å±€çš„æžå°å€¼ç‚¹ï¼ŒåŒæ—¶ï¼Œç”±äºŽæ¢¯åº¦æ¶ˆå¤±å¯èƒ½ä¼šå¯¼è‡´å‰é¢å‡ å±‚ç½‘ç»œæƒé‡æ— æ³•æ›´æ–°ï¼Œä½†æ˜¯å¦‚æžœåœ¨å¼€å§‹çš„æ—¶å€™ï¼Œå°±æœ‰ä¸€ä¸ªè¾ƒå¥½çš„åˆå§‹å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿å¾—ç½‘ç»œè®­ç»ƒå‡ºä¸€ä¸ªè¾ƒå¥½çš„ç»“æžœã€‚ è‡ªç¼–ç å™¨ é€å±‚é¢„è®­ç»ƒæ˜¯æƒ³å¾—åˆ°ä¸€ä¸ªå¥½çš„åˆå§‹å€¼ï¼Œä½†æ˜¯å¦‚æžœç½‘ç»œæœ‰å¤šä¸ªéšå±‚ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªéšå±‚éƒ½èƒ½çœ‹åˆ°è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ç›‘ç£ä¿¡æ¯ã€‚åœ¨æ²¡æœ‰ç›‘ç£ä¿¡æ¯çš„æƒ…å†µä¸‹è¿›è¡Œé¢„è®­ç»ƒä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼Œè‡ªç¼–ç å™¨å’Œå—é™çŽ»å°”å…¹æ›¼æœºã€‚ è‡ªç¼–ç å™¨å‡è®¾è¾“å‡ºä¸Žè¾“å…¥ç›¸åŒï¼Œæ˜¯ä¸€ç§ å°½å¯èƒ½å¤çŽ°è¾“å…¥ä¿¡å·çš„ç¥žç»ç½‘ç»œã€‚ å †å è‡ªç¼–ç å™¨å°±æ˜¯å°†å¤šä¸ªè‡ªç¼–ç å™¨è¿›è¡Œä¸²è”ï¼Œé¦–å…ˆè®­ç»ƒæ‰€æœ‰çš„éšå±‚ï¼Œåœ¨éšå±‚è®­ç»ƒå®Œä¹‹åŽï¼Œé€šè¿‡è¾“å‡ºå±‚å¾—åˆ°çš„ç›‘ç£ç»“æžœï¼Œé‡æ–°å¯¹æ•´ä¸ªç½‘ç»œè¿›è¡Œå¾®è°ƒ å—é™çŽ»å°”å…¹æ›¼æœº å—é™çŽ»å°”å…¹æ›¼æœºæ˜¯ä¸€ä¸ªä¸¤å±‚ç¥žç»ç½‘ç»œï¼ŒåŒ…æ‹¬å¯è§å±‚å’Œéšè—å±‚ï¼Œä¸åŒå±‚å…¨è¿žæŽ¥ï¼Œå±‚å†…æ— è¿žæŽ¥ï¼Œæ˜¯äºŒåˆ†å›¾ã€‚ ä»–çš„è¿‡ç¨‹æ˜¯é¦–å…ˆé€šè¿‡å¯è§å±‚çš„è¾“å…¥ï¼Œå¾—åˆ°ä¸€ä¸ªè¾“å‡ºï¼Œå†å°†è¾“å‡ºä¼ å…¥éšè—å±‚ï¼Œé‡æ–°å¾—åˆ°ä¸€ä¸ªå¯è§å±‚ï¼Œåœ¨æ­£å‘å’Œåå‘çš„ä¼ æ’­è¿‡ç¨‹ä¸­ï¼ŒåŒä¸€è·¯çº¿çš„æƒé‡ç›¸åŒï¼Œä½†æ˜¯åç½®ä¸åŒã€‚ç›®çš„æ˜¯è®©å¾—åˆ°çš„å¯è§å±‚ä¸ŽåŽŸæ¥çš„ä¸€è‡´ï¼Œè¿™æ ·å°±å¯ä»¥å°†éšè—å±‚ä½œä¸ºè¾“å…¥çš„ä¸€ä¸ªç‰¹å¾ï¼Œä»Žè€Œå¾—åˆ°åˆå§‹åŒ–ã€‚ ä¹‹æ‰€ä»¥å«å—é™çŽ»å°”å…¹æ›¼æœºæ˜¯å› ä¸ºåº”ç”¨äº†çƒ­åŠ›å­¦ä¸­çš„çŽ»å°”å…¹æ›¼åˆ†å¸ƒã€‚å·§åˆçš„æ˜¯æ ¹æ®çŽ»å°”å…¹æ›¼åˆ†å¸ƒï¼Œå‡è®¾æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½ç”¨0ï¼Œ1äºŒè¿›åˆ¶æ¥è¡¨ç¤ºï¼ŒæŽ¨å¯¼å‡ºçš„æ¡ä»¶æ¦‚çŽ‡ç»“æžœæ­£å¥½æ˜¯sigmoidå‡½æ•°ã€‚ æ·±åº¦ä¿¡å¿µç½‘ç»œDBN è‡ªç¼–ç å™¨ä¸ŽRBMå¯¹æ¯” è‡ªç¼–ç å™¨ RBM è‡ªç¼–ç å™¨ç¼–ç å’Œè§£ç å‡½æ•°ä¸åŒ RBMå…±äº«æƒé‡çŸ©é˜µWï¼Œä¸¤ä¸ªåç½®å‘é‡ è‡ªç¼–ç å™¨é€šè¿‡éžçº¿æ€§å˜æ¢å­¦ä¹ ç‰¹å¾ï¼Œæ˜¯ç¡®å®šçš„ï¼Œç‰¹å¾å€¼å¯ä»¥ä¸ºä»»ä½•å®žæ•° RBMåŸºäºŽæ¦‚çŽ‡åˆ†å¸ƒå®šä¹‰ï¼Œé«˜å±‚è¡¨ç¤ºä¸ºåº•å±‚ç‰¹å¾çš„æ¡ä»¶æ¦‚çŽ‡ï¼Œè¾“å‡ºåªæœ‰ä¸¤ç§çŠ¶æ€ ï¼ˆæœªæ¿€æ´»æ¿€æ´»ï¼‰ï¼Œç”¨äºŒè¿›åˆ¶0/1è¡¨ç¤º è‡ªç¼–ç å™¨ç›´æŽ¥å¯¹æ¡ä»¶æ¦‚çŽ‡ å»ºæ¨¡ï¼Œæ˜¯åˆ¤åˆ«å¼æ¨¡åž‹ RBMå¯¹è”åˆæ¦‚çŽ‡å¯†åº¦å»ºæ¨¡ï¼Œ æ˜¯ç”Ÿæˆå¼æ¨¡åž‹ çŸ©é˜µçº¿æ€§å˜æ¢ æ±‚è§£ç‰¹å¾å€¼ã€ç‰¹å¾å‘é‡ ç§©ã€å¥‡å¼‚å€¼ä¸Žæ•°æ®é™ç»´ æ–¹é˜µæ‰æœ‰å¥‡å¼‚çŸ©é˜µå’Œéžå¥‡å¼‚çŸ©é˜µçš„æ¦‚å¿µ çŸ©é˜µç§©ä¸ä¸ºæ»¡ç§©åˆ™ä¸ºå¥‡å¼‚çŸ©é˜µ çŸ©é˜µè¡Œåˆ—å¼ç­‰äºŽ0ï¼Œè¯´æ˜Žä¸æ»¡ç§© è®¾Aä¸ºmné˜¶çŸ©é˜µï¼Œq=min(m,n)ï¼ŒA\Açš„qä¸ªéžè´Ÿç‰¹å¾å€¼çš„ç®—æœ¯å¹³æ–¹æ ¹å«ä½œAçš„å¥‡å¼‚å€¼ã€‚ å¥‡å¼‚å€¼æ ‡è¯†ç€çŸ©é˜µçš„â€œæœ¬è´¨ä¿¡æ¯â€ï¼Œåªä¿ç•™å¥‡å¼‚å€¼åˆ†è§£ä¹‹åŽå¥‡å¼‚å€¼æ›´é«˜çš„çŸ©é˜µå³å¯åŸºæœ¬è¿˜åŽŸåŽŸå§‹æ•°æ® å¥‡å¼‚å€¼åˆ†è§£ä¸Žä½Žç§©è¿‘ä¼¼çŸ©é˜µçš„ä½Žç§©è¿‘ä¼¼æ˜¯ä¸€ç§ç¨€ç–è¡¨ç¤ºå½¢å¼,å³åˆ©ç”¨ä¸€ä¸ªç§©è¾ƒä½Žçš„çŸ©é˜µæ¥è¿‘ä¼¼è¡¨è¾¾åŽŸçŸ©é˜µ,ä¸ä½†èƒ½ä¿ç•™åŽŸçŸ©é˜µçš„ä¸»è¦ç‰¹å¾,è€Œä¸”å¯ä»¥é™ä½Žæ•°æ®çš„å­˜å‚¨ç©ºé—´å’Œè®¡ç®—å¤æ‚åº¦ é€»è¾‘å›žå½’ä¸Žæœ€å¤§ä¼¼ç„¶é€»è¾‘å›žå½’æ˜¯åˆ†ç±»ä»»åŠ¡ï¼Œä½†é‡‡ç”¨äº†å›žå½’çš„æ–¹æ³•ï¼Œä»¥äºŒåˆ†ç±»ä¸ºä¾‹ï¼Œå¦‚æžœé‡‡ç”¨çº¿æ€§å›žå½’çš„æ–¹æ³•å°±æ˜¯å¸Œæœ›ç”¨ä¸€æ¡ç›´çº¿å°†æ­£è´Ÿæ ·ä¾‹åˆ†å¼€ï¼Œç”±äºŽç›´çº¿çš„å±€é™æ€§ï¼Œæ‰€ä»¥ä¼å›¾å¼•å…¥Sigmoidå‡½æ•°ï¼Œä»Žè€Œå¼•å…¥æ›²çº¿ ç¡®å®šå‡½æ•°å½¢å¼ä¹‹åŽï¼Œå¸Œæœ›ç¡®å®šä¸€ç»„å‚æ•°Wï¼Œä»Žè€Œæ‰¾åˆ°èƒ½å¤Ÿå®Œæˆåˆ†ç±»ä»»åŠ¡çš„æ›²çº¿ï¼Œä»Žè€Œå¼•å…¥æœ€å¤§ä¼¼ç„¶ä¼°è®¡ æœ€å¤§ä¼¼ç„¶æ¦‚çŽ‡æè¿°çš„æ˜¯åœ¨ä¸€å®šæ¡ä»¶ä¸‹æŸä¸ªäº‹ä»¶å‘ç”Ÿçš„å¯èƒ½æ€§ï¼Œæ¦‚çŽ‡è¶Šå¤§è¯´æ˜Žè¿™ä»¶äº‹æƒ…è¶Šå¯èƒ½ä¼šå‘ç”Ÿï¼›è€Œä¼¼ç„¶æè¿°çš„æ˜¯ç»“æžœå·²çŸ¥çš„æƒ…å†µä¸‹ï¼Œè¯¥äº‹ä»¶åœ¨ä¸åŒæ¡ä»¶ä¸‹å‘ç”Ÿçš„å¯èƒ½æ€§ï¼Œä¼¼ç„¶å‡½æ•°çš„å€¼è¶Šå¤§è¯´æ˜Žè¯¥äº‹ä»¶åœ¨å¯¹åº”çš„æ¡ä»¶ä¸‹å‘ç”Ÿçš„å¯èƒ½æ€§è¶Šå¤§ å‡å¦‚æœ‰ä¸€ä¸ªç½å­ï¼Œé‡Œé¢æœ‰é»‘ç™½ä¸¤ç§é¢œè‰²çš„çƒï¼Œæ•°ç›®å¤šå°‘ä¸çŸ¥ï¼Œä¸¤ç§é¢œè‰²çš„æ¯”ä¾‹ä¹Ÿä¸çŸ¥ã€‚æˆ‘ ä»¬æƒ³çŸ¥é“ç½ä¸­ç™½çƒå’Œé»‘çƒçš„æ¯”ä¾‹ï¼Œä½†æˆ‘ä»¬ä¸èƒ½æŠŠç½ä¸­çš„çƒå…¨éƒ¨æ‹¿å‡ºæ¥æ•°ã€‚çŽ°åœ¨æˆ‘ä»¬å¯ä»¥æ¯æ¬¡ä»»æ„ä»Žå·²ç»æ‘‡åŒ€çš„ç½ä¸­æ‹¿ä¸€ä¸ªçƒå‡ºæ¥ï¼Œè®°å½•çƒçš„é¢œè‰²ï¼Œç„¶åŽæŠŠæ‹¿å‡ºæ¥çš„çƒ å†æ”¾å›žç½ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥é‡å¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è®°å½•çš„çƒçš„é¢œè‰²æ¥ä¼°è®¡ç½ä¸­é»‘ç™½çƒçš„æ¯”ä¾‹ã€‚å‡å¦‚åœ¨å‰é¢çš„ä¸€ç™¾æ¬¡é‡å¤è®°å½•ä¸­ï¼Œæœ‰ä¸ƒåæ¬¡æ˜¯ç™½çƒï¼Œè¯·é—®ç½ä¸­ç™½çƒæ‰€å çš„æ¯”ä¾‹æœ€æœ‰å¯èƒ½æ˜¯å¤šå°‘ï¼Ÿ å› æ­¤åœ¨é€»è¾‘å›žå½’ä¸­ï¼Œè‹¥æƒ³è®©é¢„æµ‹å‡ºçš„ç»“æžœå…¨éƒ¨æ­£ç¡®çš„æ¦‚çŽ‡æœ€å¤§,æ ¹æ®æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œå°±æ˜¯æ‰€æœ‰æ ·æœ¬é¢„æµ‹æ­£ç¡®çš„æ¦‚çŽ‡ç›¸ä¹˜å¾—åˆ°çš„P(æ€»ä½“æ­£ç¡®)æœ€å¤§ é¢‘çŽ‡å­¦æ´¾ä¸Žè´å¶æ–¯å­¦æ´¾]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AI_01äººå·¥æ™ºèƒ½æ¦‚è¿°]]></title>
    <url>%2F2019%2F03%2F04%2FAI-01%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[æ¦‚è¿°ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½äººå·¥æ™ºèƒ½(Artificial Intelligence)ä½¿ä¸€éƒ¨æœºå™¨åƒäººä¸€æ ·è¿›è¡Œæ„ŸçŸ¥ã€è®¤çŸ¥ã€å†³ç­–ã€æ‰§è¡Œçš„äººå·¥ç¨‹åºæˆ–ç³»ç»Ÿ æ ‡å¿—æ€§äº‹ä»¶ äººå·¥æ™ºèƒ½å‘å±•é˜¶æ®µ äººå·¥æ™ºèƒ½ä¸‰ä¸ªå±‚é¢è®¡ç®—æ™ºèƒ½èƒ½å­˜èƒ½ç®— æ„ŸçŸ¥æ™ºèƒ½èƒ½å¬ä¼šè¯´ã€èƒ½çœ‹ä¼šè®¤ è®¤çŸ¥æ™ºèƒ½èƒ½ç†è§£ã€ä¼šæ€è€ƒ äººå·¥æ™ºèƒ½ &gt; æœºå™¨å­¦ä¹  &gt; æ·±åº¦å­¦ä¹  é€»è¾‘æ¼”ç»Ž vs å½’çº³æ€»ç»“ ä¸“å®¶ç³»ç»Ÿæ ¹æ®ä¸“å®¶å®šä¹‰çš„çŸ¥è¯†å’Œç»éªŒï¼Œè¿›è¡ŒæŽ¨ç†å’Œåˆ¤æ–­ï¼Œä»Žè€Œæ¨¡æ‹Ÿäººç±»ä¸“å®¶çš„å†³ç­–è¿‡ç¨‹æ¥è§£å†³é—®é¢˜ã€‚ çŸ¥è¯†å·¥ç¨‹ vs æœºå™¨å­¦ä¹  è®¡ç®—æœºè§†è§‰äººè„¸è¯†åˆ«å›¾åƒåˆ†ç±»ç›®æ ‡æ£€æµ‹å›¾åƒæœç´¢å›¾åƒåˆ†å‰²è§†é¢‘ç›‘æŽ§è¯­éŸ³æŠ€æœ¯è¯­éŸ³è¯†åˆ«è¯­éŸ³åˆæˆå£°çº¹è¯†åˆ«è‡ªç„¶è¯­è¨€å¤„ç†æ–‡æœ¬åˆ†ç±»æœºå™¨ç¿»è¯‘çŸ¥è¯†å›¾è°±è‡ªåŠ¨é—®ç­”ä¿¡æ¯æ£€ç´¢æ–‡æœ¬ç”Ÿæˆæœºå™¨å­¦ä¹ çš„å®šä¹‰æœ€å¸¸ç”¨å®šä¹‰è®¡ç®—æœºç³»ç»Ÿèƒ½å¤Ÿåˆ©ç”¨ç»éªŒæé«˜è‡ªèº«çš„æ€§èƒ½ å¯æ“ä½œå®šä¹‰æœºå™¨å­¦ä¹ æœ¬è´¨æ˜¯ä¸€ä¸ªåŸºäºŽç»éªŒæ•°æ®çš„å‡½æ•°ä¼°è®¡é—®é¢˜ ç»Ÿè®¡å­¦å®šä¹‰æå–é‡è¦æ¨¡å¼ã€è¶‹åŠ¿ï¼Œå¹¶ç†è§£æ•°æ®ï¼Œå³ä»Žæ•°æ®ä¸­å­¦ä¹  æœºå™¨å­¦ä¹ -æ€Žä¹ˆå­¦æ¨¡åž‹å¯¹è¦å­¦ä¹ é—®é¢˜æ˜ å°„çš„å‡è®¾ï¼ˆé—®é¢˜å»ºæ¨¡ï¼Œç¡®å®šå‡è®¾ç©ºé—´ï¼‰ æ¨¡åž‹åˆ†ç±»æ•°æ®æ ‡è®° ç›‘ç£å­¦ä¹ æ¨¡åž‹ æ— ç›‘ç£å­¦ä¹ æ¨¡åž‹ æ•°æ®åˆ†å¸ƒå‚æ•°æ¨¡åž‹ ã€ æ— å‚æ•°æ¨¡åž‹ å»ºæ¨¡å¯¹è±¡ åˆ¤åˆ«æ¨¡åž‹ ç”Ÿæˆæ¨¡åž‹ ç­–ç•¥ä»Žå‡è®¾ç©ºé—´ä¸­å­¦ä¹ /é€‰æ‹©æœ€ä¼˜æ¨¡åž‹çš„å‡†åˆ™ï¼ˆç¡®å®šç›®æ ‡å‡½æ•°ï¼‰ ç®—æ³•æ ¹æ®ç›®æ ‡å‡½æ•°æ±‚è§£æœ€ä¼˜æ¨¡åž‹çš„å…·ä½“è®¡ç®—æ–¹æ³•ï¼ˆæ±‚è§£æ¨¡åž‹å‚æ•°ï¼‰ æ·±åº¦å­¦ä¹ ä¼ ç»Ÿæœºå™¨å­¦ä¹ ï¼šäººå·¥è®¾è®¡ç‰¹å¾ ä¼ ç»Ÿæœºå™¨å­¦ä¹ VS æ·±åº¦å­¦ä¹  æ‰‹åŠ¨è®¾è®¡ç¨‹åº æ‰‹åŠ¨è®¾è®¡ç‰¹å¾ ç¥žç»ç½‘ç»œç»“æž„å‘å±• æ·±åº¦å­¦ä¹ çš„ä¸èƒ½ è¿žæŽ¥ä¸»ä¹‰ vs ç¬¦å·ä¸»ä¹‰ ä»Žå¯¹ç«‹åˆ°åˆä½œ è¿žæŽ¥ä¸»ä¹‰+ ç¬¦å·ä¸»ä¹‰ ç®—æ³•æ¨¡åž‹åˆ†ç±»æ ¹æ®æœ‰æ— ç›‘ç£ï¼Œè¿›è¡ŒåŒºåˆ†ã€‚å¯¹äºŽæœ‰ç›‘ç£çš„æƒ…å†µï¼Œåˆå¯ä»¥åˆ†ä¸ºåˆ†ç±»å’Œå›žå½’ä¸¤ç±»é—®é¢˜ å®šé‡è¾“å‡ºç§°ä¸ºå›žå½’ï¼Œæˆ–è€…è¯´æ˜¯è¿žç»­å˜é‡é¢„æµ‹ å®šæ€§è¾“å‡ºç§°ä¸ºåˆ†ç±»ï¼Œæˆ–è€…è¯´æ˜¯ç¦»æ•£å˜é‡é¢„æµ‹ æ— ç›‘ç£çš„æƒ…å†µä¸‹ï¼Œæœ‰èšç±»å’Œé™ç»´ä¸¤ç§æ–¹æ³• çº¿æ€§åˆ†ç±»å™¨çº¿æ€§åˆ†ç±»å™¨å°±æ˜¯ç”¨çº¿æ€§æ–¹ç¨‹åŽ»æ‹Ÿåˆæ•°æ®ï¼Œåœ¨äºŒç»´çš„æƒ…å†µä¸‹å°±æ˜¯å¯»æ‰¾ä¸€æ¡ç›´çº¿ï¼Œä¸‰ç»´å°±æ˜¯ä¸€ä¸ªå¹³é¢ï¼Œæ›´é«˜ç»´å«åšè¶…å¹³é¢ã€‚å¯»æ‰¾è¿™ä¸ªè¶…å¹³é¢çš„è¿‡ç¨‹ï¼Œå…¶å®žå°±æ˜¯æ±‚è§£æ‰€æœ‰æƒé‡å‚æ•°çš„è¿‡ç¨‹ å­¦ä¹ è¿‡ç¨‹ å­¦ä¹ çŽ‡å­¦ä¹ çŽ‡ä½Žçš„è¯ï¼Œå­¦ä¹ è¿‡ç¨‹ä¼šæ¯”è¾ƒç¼“æ…¢ï¼Œå­¦ä¹ çŽ‡è¾ƒé«˜çš„è¯ï¼Œå­¦ä¹ è¿‡ç¨‹æ›´å¿«ï¼Œä½†æ˜¯ä¼šæ›´åŠ è·³è·ƒã€‚å¦‚æžœå­¦ä¹ çŽ‡è¿‡é«˜çš„è¯ï¼Œå¯èƒ½è¶Šè¿‡äº†å¥½çš„åˆ†ç•Œé¢ï¼Œå¾—åˆ°äº†æ¯”è¾ƒå·®çš„ç»“æžœï¼Œä½†æ˜¯å¦‚æžœè®­ç»ƒé›†è¿˜è¶³å¤Ÿå¤šï¼Œå¯ä»¥é€šè¿‡åŽç»­çš„å­¦ä¹ ï¼Œå¼¥è¡¥è¿™ä¸€æ­¥äº§ç”Ÿçš„ä¸è‰¯å½±å“ï¼Œé‡æ–°æ‰¾åˆ°å¥½çš„åˆ†ç•Œé¢ï¼Œä½†æ˜¯æ•´ä¸ªå­¦ä¹ è¿‡ç¨‹æ›´åŠ æ›²æŠ˜ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå­¦ä¹ çŽ‡ä¹Ÿä¸æ˜¯ä¸€æˆä¸å˜çš„ã€‚ ç¬¬ä¸€ç§æƒ…å†µï¼Œå¯ä»¥æ ¹æ®è®­ç»ƒé›†çš„å¤§å°æ¥è°ƒæ•´å­¦ä¹ çŽ‡ï¼Œå¦‚å°†å­¦ä¹ çŽ‡ä¹˜ä¸Š1/Nï¼ŒNä»£è¡¨è®­ç»ƒé›†çš„å¤§å° ç¬¬äºŒç§æƒ…å†µï¼Œå¯ä»¥åœ¨æ¯æ¬¡è¿­ä»£çš„è¿‡ç¨‹ä¸­è°ƒæ•´å­¦ä¹ çŽ‡ï¼ŒåŸºæœ¬çš„æ€è·¯æ˜¯ï¼Œéœ€è¦æœç€æœ€ä¼˜å€¼ç§»åŠ¨çš„è·ç¦»è¶Šè¿œï¼Œå­¦ä¹ çŽ‡å°±åº”è¯¥è¶Šå¤§ï¼Œè·ç¦»è¶Šè¿‘ï¼Œå­¦ä¹ çŽ‡å°±åº”è¯¥æ›´å°ã€‚ç”¨è‡ªé€‚åº”çš„æ–¹æ³•æ¥è°ƒæ•´å­¦ä¹ çŽ‡ã€‚ä½†æ˜¯åœ¨å®žé™…ä¸­ï¼Œå¯èƒ½å¹¶ä¸çŸ¥é“å’Œæœ€ä¼˜å€¼ä¹‹é—´çš„è·ç¦»ï¼Œæ‰€ä»¥å¯ä»¥åœ¨æ¯ä¸€æ¬¡è¿­ä»£çš„æœ€åŽï¼Œä½¿ç”¨ä¼°è®¡çš„æ¨¡åž‹å‚æ•°æ£€æŸ¥è¯¯å·®å‡½æ•°ã€‚å¦‚æžœç›¸å¯¹äºŽä¸Šä¸€æ¬¡è¿­ä»£ï¼Œé”™è¯¯çŽ‡å‡å°‘äº†ï¼Œå¯ä»¥å¢žå¤§å­¦ä¹ çŽ‡ï¼Œç”¨5%ä½œä¸ºå¢žå¤§çš„å¹…åº¦ï¼Œå¦‚æžœç›¸å¯¹äºŽä¸Šä¸€æ¬¡è¿­ä»£ï¼Œé”™è¯¯çŽ‡å¢žå¤§äº†ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡äº†æœ€ä¼˜å€¼ï¼Œé‚£ä¹ˆåº”è¯¥é‡æ–°è®¾ç½®ä¸Šä¸€è½®è¿­ä»£çš„æƒé‡wiï¼Œå¹¶ä¸”å‡å°‘å­¦ä¹ çŽ‡åˆ°ä¹‹å‰çš„50% å¤šé¡¹å¼åˆ†ç±»å™¨ è¿‡æ‹Ÿåˆè¿‡æ‹Ÿåˆï¼Œé«˜é˜¶å¤šé¡¹å¼ä¸ºäº†é¿å…çŠ¯ä»»ä½•é”™è¯¯ï¼Œå¯èƒ½å¾ˆæ·±åœ°åˆ‡å…¥äº†å…¶ä»–ç±»çš„åŒºåŸŸï¼Œä¼šå¯¼è‡´æœ‰äº›æ ·æœ¬è¢«é”™åˆ† çº¿æ€§å›žå½’ä¸€å…ƒçº¿æ€§å›žå½’å’Œçº¿æ€§åˆ†ç±»å™¨ç±»ä¼¼ï¼Œéƒ½æ˜¯ç”¨ä¸€æ¡ç›´çº¿åŽ»æ‹Ÿåˆæ•°æ®ï¼Œé«˜ç»´çš„æƒ…å†µä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¯»æ‰¾ä¸€ä¸ªè¶…å¹³é¢æ¥æ‹Ÿåˆæ•°æ®ï¼Œç›®çš„éƒ½æ˜¯æ±‚è§£å‡ºè¿™ä¸ªè¶…å¹³é¢æ–¹ç¨‹ï¼Œä¹Ÿå°±æ˜¯æ±‚è§£å‡ºæ‰€æœ‰çš„å‚æ•°wi,å’Œå¸¸æ•°é¡¹b ä½†æ˜¯æ±‚è§£çš„è¿‡ç¨‹ä¸åŒï¼Œçº¿æ€§å›žå½’çš„æ±‚è§£è¿‡ç¨‹æ˜¯é€šè¿‡å¼•å…¥å‡æ–¹è¯¯å·®æ¥å®žçŽ°çš„ï¼Œå‡æ–¹è¯¯å·®ä»£è¡¨æ ·æœ¬ä¸­æ‰€æœ‰ç‚¹åˆ°ç›´çº¿çš„è·ç¦»ä¹‹å’Œï¼Œwã€bçš„é€‰å–åº”è¯¥ä½¿å‡æ–¹è¯¯å·®è¾¾åˆ°æœ€å°ã€‚é€šè¿‡å¯¹wæ±‚åå¯¼ï¼Œå¯ä»¥ç›´æŽ¥å¯¼å‡ºwå’Œbçš„ç»“æžœã€‚ è¿‡ç¨‹ï¼š å¼•å…¥å‡æ–¹è¯¯å·®ï¼š æ±‚è§£å‚æ•°ï¼š é€»è¾‘å›žå½’ä¹‹æ‰€ä»¥å«é€»è¾‘å›žå½’ï¼Œæ˜¯å› ä¸ºç”¨åˆ°äº†é€»è¾‘å‡½æ•°sigmoidï¼Œé€»è¾‘å›žå½’å’Œsvmæœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œéƒ½æ˜¯æ ¹æ®å·²çŸ¥çš„ï¼ˆxiï¼Œyiï¼‰è¿™æ ·çš„äºŒå…ƒç»„ï¼Œåœ¨ç©ºé—´ä¸Šè¿›è¡Œæ‹Ÿåˆï¼Œç¡®å®šä¸€æ¡æ›²çº¿ï¼Œä½†æ˜¯ç”±äºŽæ˜¯åˆ†ç±»é—®é¢˜ï¼Œç¡®å®šäº†æ›²çº¿ä¹‹åŽè¿˜éœ€è¦é˜¶è·ƒå‡½æ•°ï¼Œç¡®å®šç±»æ ‡å·ï¼Œå¦‚æžœæ˜¯äºŒåˆ†ç±»çš„è¯ï¼Œæ ¹æ®ï¼ˆx,yï¼‰å’Œæ›²çº¿çš„ä½ç½®å…³ç³»ï¼Œå¯ä»¥ç¡®å®šæ ‡å·ï¼Œé˜¶è·ƒå‡½æ•°ä¸º zï¼œ0ï¼Œ0ï¼Œzï¼0ï¼Œ0.5ï¼Œzï¼ž0ï¼Œ1ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°æ˜¯ä¸è¿žç»­çš„ï¼Œä¸åˆ©äºŽè®¡ç®—ä¼˜åŒ–ï¼Œæ‰€ä»¥å–sigmiodå‡½æ•°ä½œä¸ºé˜¶è·ƒå‡½æ•°ï¼Œsigmiodå‡½æ•°åœ¨ï¼œ0æ—¶å–å€¼å¤§äºŽ0å°äºŽ0.5ï¼Œåœ¨ï¼ž0æ—¶ï¼Œå–å€¼å¤§äºŽ0.5å°äºŽ1ï¼Œæ‰€ä»¥åªéœ€è¦æ¯”è¾ƒå’Œ0.5çš„å…³ç³»å³å¯ã€‚zçš„å€¼è¶Šå¤§ï¼Œè¡¨æ˜Žå…ƒç»„çš„ç©ºé—´ä½ç½®è·ç¦»åˆ†ç±»é¢è¶Šè¿œï¼Œä»–å°±è¶Šå¯èƒ½å±žäºŽç±»1ï¼Œæ‰€ä»¥å›¾ä¸­zè¶Šå¤§ï¼Œå‡½æ•°å€¼ä¹Ÿå°±è¶ŠæŽ¥è¿‘1ï¼›åŒç†ï¼Œzè¶Šå°ï¼Œè¡¨æ˜Žå…ƒç»„è¶Šä¸å¯èƒ½å±žäºŽç±»1ã€‚ ä¸Žçº¿æ€§å›žå½’åŒºåˆ«é€»è¾‘å›žå½’ç”¨äºŽåˆ†ç±»ï¼Œè€Œä¸æ˜¯å›žå½’ã€‚ çº¿æ€§å›žå½’æ¨¡åž‹ä¸­ï¼Œè¾“å‡ºä¸€èˆ¬æ˜¯è¿žç»­çš„ï¼Œå¯¹äºŽæ¯ä¸€ä¸ªxï¼Œéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„è¾“å‡ºyã€‚æ¨¡åž‹çš„å®šä¹‰åŸŸä¸Žå€¼åŸŸéƒ½å¯ä»¥æ˜¯æ— ç©·ã€‚ é€»è¾‘å›žå½’è¾“å…¥å¯ä»¥æ˜¯è¿žç»­çš„æ— ç©·ï¼Œä½†æ˜¯è¾“å‡ºä¸€èˆ¬æ˜¯ç¦»æ•£çš„ï¼Œé€šå¸¸åªæœ‰{0ï¼Œ1} æ”¯æŒå‘é‡æœºSVMsvmï¼Œæ”¯æŒå‘é‡æœºï¼Œæ—¢å¯ç”¨äºŽå›žå½’åˆå¯ç”¨äºŽåˆ†ç±» åœ¨æ·±åº¦å­¦ä¹ å‡ºçŽ°ä¹‹å‰ï¼Œsvmè¢«è®¤ä¸ºæ˜¯æœºå™¨å­¦ä¹ æœ€å¥½ï¼Œæœ€æˆåŠŸçš„ç®—æ³• SVMæ˜¯æŒ‡å°†å®žä¾‹æ˜ å°„ä¸ºäºŒç»´ä¸­çš„ç‚¹ï¼Œä»¥äºŒåˆ†ç±»ä¸¾ä¾‹çš„è¯ï¼Œsvmçš„ç›®çš„å°±æ˜¯ç”»å‡ºä¸€æ¡çº¿ï¼Œæ¥åŒºåˆ†è¿™ä¸¤ç±»ç‚¹ï¼Œç†æƒ³çš„æƒ…å†µä¸‹ï¼Œå³ä½¿åŽæ¥åŠ å…¥äº†æ–°çš„ç‚¹ï¼Œè¿™æ¡çº¿ä¹Ÿèƒ½å¤Ÿè¿›è¡Œå¾ˆå¥½çš„åŒºåˆ†ã€‚ç†è®ºä¸Šè¿™æ¡çº¿æœ‰æ— æ•°ç§ç”»æ³•ï¼Œä½†ä»–ä»¬æœ‰å¥½åçš„åŒºåˆ†ã€‚æœŸæœ›çš„æœ€ç†æƒ³çš„è¿™æ¡çº¿å«åšåˆ’åˆ†è¶…å¹³é¢ï¼Œ(å«åšè¶…å¹³é¢æ˜¯å› ä¸ºç‰¹å¾å¯èƒ½æ˜¯é«˜ç»´çš„)ã€‚svmå¯»æ‰¾å¯ä»¥åŒºåˆ†ä¸¤ä¸ªç±»ï¼Œå¹¶ä¸”ä½¿è¾¹é™…æœ€å¤§çš„è¶…å¹³é¢ã€‚è¾¹é™…æŒ‡çš„æ˜¯æŸä¸€æ¡çº¿è·ç¦»å®ƒä¸¤ä¾§æœ€è¿‘çš„ç‚¹çš„è·ç¦»ä¹‹å’Œã€‚åœ¨è¾¹é™…æœ€å¤§çš„æƒ…å†µä¸‹ï¼Œé€‰å–çš„å¹³é¢åº”è¯¥æ˜¯åˆ°ä¸¤ä¾§æœ€è¿‘ç‚¹è·ç¦»ç›¸ç­‰çš„å¹³é¢ã€‚ å› ä¸ºSVMè¦æ˜ å°„åˆ°é«˜ç»´ç©ºé—´ï¼Œå†æ¥æ±‚åˆ†ç¦»è¶…å¹³é¢ï¼Œä½†æ˜¯è¿™æ ·çš„è¯ï¼Œè¿ç®—é‡ä¼šéžå¸¸åºžå¤§ï¼Œåˆå› ä¸ºä¸Šé¢çš„æ ¸å‡½æ•°å’Œå’Œæ˜ å°„åˆ°é«˜ç»´ç©ºé—´çš„è§£ç±»ä¼¼ï¼Œæ‰€ä»¥æ±‚SVMåˆ†ç¦»è¶…å¹³é¢æ—¶ï¼Œå¯ä»¥ç”¨æ±‚æ ¸å‡½æ•°æ–¹æ³•ä»£æ›¿åœ¨é«˜ç»´ç©ºé—´ä¸­è®¡ç®—ï¼Œä»Žè€Œå®žçŽ°åœ¨ä¸€ç»´å¹³é¢ä¸Šè®¡ç®—è¾¾åˆ°é«˜ç»´ç©ºé—´è®¡ç®—çš„æ•ˆæžœ å†³ç­–æ ‘ æž„å»ºå†³ç­–æ ‘]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nextä¸»é¢˜GoogleéªŒè¯]]></title>
    <url>%2F2019%2F02%2F23%2Fhexo-google-verify%2F</url>
    <content type="text"><![CDATA[GoogleéªŒè¯urlhttps://www.google.com/webmasters ä¿®æ”¹é…ç½®æ–‡ä»¶ä½¿ç”¨htmlæ ‡ç­¾éªŒè¯ï¼Œæ–¹æ³•åŒbaiduéªŒè¯ åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  google_site_verification: 123xxxxxx321 ä½¿ç”¨hexo dæäº¤ï¼Œåˆ·æ–°é¡µé¢ï¼ŒæŸ¥çœ‹æºä»£ç ï¼Œå¦‚æžœèƒ½çœ‹åˆ°ä¸€ä¸‹å†…å®¹ï¼Œè¯æ˜Žæ ‡ç­¾å·²ç»æˆåŠŸæ·»åŠ ï¼š è¿›è¡ŒéªŒè¯ æ·»åŠ sitemapæ·»åŠ sitemap]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>google</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo_image]]></title>
    <url>%2F2019%2F02%2F19%2Fhexo-image%2F</url>
    <content type="text"><![CDATA[hexo mdæ–‡æ¡£æ·»åŠ å›¾ç‰‡ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶post_asset_folder å­—æ®µç½®ä¸ºtrue ä¿®æ”¹åŽï¼Œå½“è¿›å…¥åˆ°/source/_posts ä¸‹ä½¿ç”¨ hexo n xxx å»ºç«‹æ–°çš„æ–‡ç« æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç›¸åŒå‘½åçš„æ–‡ä»¶å¤¹ï¼Œç”¨äºŽå­˜æ”¾æ–‡ç« ä¸­å¼•ç”¨çš„å›¾ç‰‡ç­‰èµ„æºï¼Œ åœ¨mdæ–‡æ¡£ä¸­å¼•ç”¨æ—¶ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„ æ’ä»¶å®‰è£…å®‰è£…æ’ä»¶ ä½¿ç”¨å‘½ä»¤ npm install https://github.com/CodeFalling/hexo-asset-image --save ä¿å­˜é¢„è§ˆhexo g hexo s]]></content>
      <categories>
        <category>hexo</category>
      </categories>
  </entry>
</search>
